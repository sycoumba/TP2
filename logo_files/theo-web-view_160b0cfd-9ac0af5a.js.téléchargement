(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[78,63,71],{"/QpO":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("W1Jy"),n("2Fsf"),n("tpS0"),n("KFmL"),n("rPfa"),n("bBG2"),n("6G8C"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c){const u=r.default;var p="post-sidebar-background-color";return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarBackgroundColorActions",size:"96px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}];var o,i,a=new n(e),r=[],h={},g=t.throttle((function(e){if(!a.isHidden()&&o){e=e||{};var n=o.getSelectedForma();n&&(n.controller.moveable?(h.opacitySlider.show(),h.opacitySlider.setValue(o.getOpacitySliderValueOfSelectedForma()),a.update({panels:[{id:"PostSidebarBackgroundColorActions",size:"96px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}]})):(h.opacitySlider.hide(),a.update({panels:[{id:"PostSidebarBackgroundColorActions",size:"0px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}]})),e.doFade?(h.listOfBgColors.$el.addClass("fade-out"),t.delay((function(){b(n,e),h.listOfBgColors.update(),h.listOfBgColors.$el.removeClass("fade-out")}),100)):(b(n,e),h.listOfBgColors.update()))}}),400);function m(){var e=o.getSelectedForma();e&&(i=e.formaID),g({doFade:!1,updateSelection:!0}),r.push(o.events.subscribe("forma-selected",(function(e){var t;e.forma&&(e.forma.formaID!==i?(t=e.forma.formaID,i=t,g({doFade:!0,updateSelection:!1}),h.listOfBgColors.closeColorPicker()):(v(e.forma,{updateSelection:!1}),h.listOfBgColors.update()))})))}function f(){!function(){for(var e=0;e<r.length;e++)r[e].remove();r=[]}()}function b(e,n){if(!a.isHidden()&&e){n.includeNoneCategory=function(e){const t=d.ImageFacade.getFrameFormaForForma(e);return t&&t.controller&&t.controller.canHaveNoneFillColor()}(e),n.includeNoneCategory?h.listOfBgColors.setNoneSection():h.listOfBgColors.removeNoneSection(),v(e,n);var o=e.controller.getSuggestableColors(),i=t.map(o,(function(e){return[{red:255*e[0].rgbColor.red,green:255*e[0].rgbColor.green,blue:255*e[0].rgbColor.blue,roles:e[0].sparkRoles,id:e[0].sparkElementID}]}));h.listOfBgColors.setSuggestedColors(i),h.listOfBgColors.setDefaultColors()}}function v(e,t){if(!o)return;if(!(e=e||o.getSelectedForma()))return;const n=[];if(function(e){if(e&&e.isImage()){const t=d.ImageFacade.getFrameFormaForForma(e);return d.ImageFacade.canApplyBackgroundColor(t)}return!0}(e)){const t=o.getFormaBackgroundColor(e);t&&n.push({red:255*t.rgbColor.red,green:255*t.rgbColor.green,blue:255*t.rgbColor.blue,alpha:t.rgbColor.alpha,roles:t.sparkRoles,id:t.sparkElementID})}h.listOfBgColors.setCurrentColors(n,t)}function S(e,t){a.events.publish("bg-color-selected",e,t),e&&e[0]&&e[0].isBKColor&&u.publish("usedBrandKitBGColor"),u.publish("backgroundColorSelected",{backgroundColor:"r:"+e[0].red+" g:"+e[0].green+" b:"+e[0].blue+" a:1"})}function w(){o.beginGesture()}function y(){o.endGesture(!0)}function x(e){o.setOpacityForSelectedFormae(e.value).done()}return a.setCoreWrapper=function(e){o=e},a.setBrandKitColors=function(e){h.listOfBgColors.setBrandKitColors(e)},a.removeBrandkitSections=function(){h.listOfBgColors.removeBrandkitSections()},a.handleEyeDropperClicked=function(e){h.listOfBgColors.handleEyeDropperClicked(e)},a.handleEyeDropperMoved=function(e,t){h.listOfBgColors.handleEyeDropperMoved(e,t)},a.selectCurrentColor=function(e){h.listOfBgColors.selectCurrentColor(e)},a.el.className+=" "+p,h.opacitySlider=new s({parent:"PostSidebarBackgroundColorActions",id:"PostBannerColorOpacitySlider",onSlide:x,onSlideStart:w,onSlideEnd:y,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.listOfBgColors=new l({elementClassName:"post-bg-colors-list",parent:"PostSidebarBackgroundColorsList",hidden:!1,top:0,bottom:0,colorPicker:e.colorPicker}),a.events.subscribe("shown",m),a.events.subscribe("hidden",f),h.listOfBgColors.events.subscribe("item-selected",S),h.listOfBgColors.events.subscribe("update-color",S),a.republish(h.listOfBgColors.events,"eyedropper-changed"),a}}.apply(t,o))||(e.exports=i)},"0IaF":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o){var i="post-logos-list";return function(e){(e=e||{}).renderOvershoot=400,e.sections=[{id:"PostBrandPrimaryLogos",maxTileWidth:300,tileMargin:15,tileAspect:2,verticalPadding:15,label:"i18n.panels.logo.kPrimary",labelHeight:30},{id:"PostBrandSecondaryLogos",maxTileWidth:100,tileMargin:15,tileAspect:108/87,verticalPadding:15,label:"i18n.panels.logo.kMore",labelHeight:45}];var t=new o(e),a=[],s=[],r=!1;function l(e){var t=new n({data:null,selected:!1,hidden:!0,reselectable:!0,template:"<div class='postspinner' style='height:100%;width:100%;background-size:contain;background-repeat:no-repeat;background-position:center'></div>"});return e&&e.done((function(e){!function(e,t){e.update({data:t});var n=e.$el.find("div");n.css("background-image","url("+t.fullResUrl+")"),n.removeClass("postspinner")}(t,e)})),t}function d(){0===a.length&&0===s.length?t.events.publish("show-no-logos-panel"):(t.setItems(a,"PostBrandPrimaryLogos"),t.setItems(s,"PostBrandSecondaryLogos"),r&&t.addItems([new n({selectable:!1,hidden:!0,template:"<div class='post-add-logo-tile'></div>",onClick:function(){t.events.publish("upload-new-logo")}})],"PostBrandSecondaryLogos"),t.events.publish("hide-no-logos-panel")),t.handleScroll()}return t.setBrandKitLogos=function(e){if(e){a=[],s=[],r=e.belongsToUser;var t=e.primaryLogoPromise,n=e.secondaryLogoPromises;t&&a.push(l(t)),n&&n.length&&n.forEach((function(e){s.push(l(e))})),d()}},t.el.className+=" "+i,t.events.subscribe("shown",d),t}}.apply(t,o))||(e.exports=i)},"4eTD":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("bBG2"),n("UzQk"),n("Pbp+"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c){const u=r.default;var p="post-sidebar-icon-tab";return d.init(),function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarIconActions",size:"175px"},{id:"PostSidebarIconFlip",class:"post-panel-divider-above",size:"95px"},{id:"PostSidebarIconReplace",class:"post-panel-divider-above",size:"auto"}];var r,l=new o(e),h={},g=t.throttle((function(){l.isHidden()||(r.getSelectedForma()?(r.getNumLayers()>1?(h.layerSlider.enable(),function(){h.layerSlider.update({maxValue:r.getNumLayers()-1});var e=r.getLayerSliderValueOfSelectedForma();h.layerSlider.setValue(e)}()):h.layerSlider.disable(),h.opacitySlider.enable(),h.opacitySlider.setValue(r.getOpacitySliderValueOfSelectedForma())):(h.layerSlider.disable(),h.opacitySlider.disable()))}),400);function m(){g()}function f(e){l.events.publish("buttonpress-replace-icon",e),u.publish("replaceIconSidebarButtonPressed:icon")}function b(){r.beginGesture()}function v(){r.endGesture(!0)}function S(e){r.setLayerForSelectedForma(e.value).done()}function w(){r.beginGesture()}function y(){r.endGesture(!0)}function x(e){r.setOpacityForSelectedFormae(e.value).done()}function C(e){var t=r.getSelectedForma();r.flipForma(e,t)}return l.setCoreWrapper=function(e){(r=e).events.subscribe("forma-added",g),r.events.subscribe("formae-deleted",g),r.events.subscribe("forma-selected",g)},function(){l.el.className+=" "+p,h.iconActionsPanel=new n({parent:"PostSidebarIconActions"}),h.opacitySlider=new s({parent:h.iconActionsPanel,id:"PostIconOpacitySlider",onSlide:x,onSlideStart:w,onSlideEnd:y,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.layerSlider=new s({parent:h.iconActionsPanel,id:"PostIconLayerSlider",onSlide:S,onSlideStart:b,onSlideEnd:v,top:123,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),h.iconFlipPanel=new n({parent:"PostSidebarIconFlip",id:"PostIconFlipPanel"}),h.flipButtonContainer=new n({id:"PostFlipContainer",parent:"PostIconFlipPanel",top:15,left:25,height:75,width:150}),h.flipLabel=new n({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"<p>i18n.panels.images.kFlip</p>"}),h.flipHWrapper=new n({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),h.flipHButton=new a({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick:function(){C(!1)}}),h.flipVWrapper=new n({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),h.flipVButton=new a({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick:function(){C(!0)}}),h.iconReplacePanel=new n({parent:"PostSidebarIconReplace"}),h.iconButtonWrapper=new n({parent:h.iconReplacePanel,height:"auto",top:0});var e="i18n.components.buttons.kReplaceIcon";d.run("IconShapeExperiment",{shape_for_icon_label:function(t){e="i18n.components.buttons.kReplaceShape"},control:function(e){}}).then((function(t){h.replaceIconButton=new i({parent:h.iconButtonWrapper,label:e,id:"ReplaceIconButton",class:"post-centered-button",onClick:f})})).done(),l.events.subscribe("shown",m)}(),l}}.apply(t,o))||(e.exports=i)},"7VrH":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("Dfrx")],void 0===(i=function(e,t,n,o){var i="post-sidebar-group";return function(e){var t=new n(e=e||{}),a=t.update,s={};function r(){}return t.setCoreWrapper=function(e){e,s.group.setCoreWrapper(e)},t.update=function(e){a(e=e||{}),e.attributes&&s.group.update(e)},t.el.className+=" "+i,s.group=new o({parent:t,hidden:!0,visibilityGroup:"group-sidebar"}),t.registerSidebarTabWithId(s.group,"group"),t.events.subscribe("shown",r),t}}.apply(t,o))||(e.exports=i)},"7len":function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationOptions",(function(){return r}));var o=n("3xm6"),i=n.n(o);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(){s(this,"MAX_COLOR_VARIANT",5),s(this,"MAX_STYLE_VARIANT",3),s(this,"translatedText",this._getTranslatedText()),s(this,"categoryNone",{categoryName:"",buttonList:[{name:"None",label:this.translatedText.NAME_NO_STYLE,type:"icon-button"}]})}getInitialAnimationOptions(){return[this.categoryNone]}updateAnimationOptions(e){const t=[];let n=!1,o=!1;const i={categoryName:this.translatedText.TEXT_CATEGORY,buttonList:[]},a={categoryName:this.translatedText.PHOTO_CATEGORY,buttonList:[]},s=e.getColorPalette(),r=e.getDisplayableAnimationStyles();for(let t=0;t<r.length;++t){const l=r[t];if(l){let t=null;t="Color"===l.name||"Fill"===l.name?this._buildDropdown(e,{name:l.name,label:this._getAnimationLabel(e,l),colors:s},!0):l.variantCount>1?this._buildDropdown(e,{name:l.name,label:this._getAnimationLabel(e,l),variantCount:l.variantCount},!1):{name:l.name,type:"icon-button",label:this._getAnimationLabel(e,l)},t&&l.textStyle?(n=!0,i.buttonList.push(t)):t&&l.imageStyle?(o=!0,a.buttonList.push(t)):"None"!==l.name&&console.warn("unkown category animation style: ".concat(l.name))}}return t.push(this.categoryNone),n&&t.push(i),o&&t.push(a),t}_buildDropdown(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{name:o,label:i}=t;return{label:i,type:"theo-sidebar-button-dropdown",name:"".concat(o,"-dropdown"),icon:o.toLowerCase(),dropdownList:n?this._getColorsDropdownList(e,t,o):this._getImageDropdownList(t,o)}}_getImageDropdownList(e,t){const{variantCount:n}=e;let o=[],i=0;"Dynamic"===t&&(i=1);for(let e=0;e<Math.min(n,this.MAX_STYLE_VARIANT);++e){const n="".concat(t).concat(e+i),a="".concat(t).concat(e),s={type:"image-button",name:n,options:{imageUrl:"/theo-web/images/modules/component/icons/".concat(a.toLowerCase(),".gif")}};o=[...o,s]}return o}_getColorsDropdownList(e,t,n){const{colors:o}=t;let i=[];for(let t=0;t<Math.min(o.length,this.MAX_COLOR_VARIANT);++t){const a=e.getColorAnimationVariant(o[t].color),s={type:"color-button",name:"".concat(n).concat(a),options:{colorHex:"#".concat(o[t].color)}};i=[...i,s]}return i}_getAnimationLabel(e,t){const n=e.getCoreAnimationStyle();if(n){const e=Object.keys(this.translatedText).filter(e=>t.name===n[e]);return this.translatedText[e]||t.name}return t.name}_buildCategory(){}_getTranslatedText(){return Object.entries({TEXT_CATEGORY:"app.animationStyles.kTextCategoryName",PHOTO_CATEGORY:"app.animationStyles.kPhotoCategoryName",NAME_NO_STYLE:"app.animationStyles.kNoStyle",NAME_TYPE:"app.animationStyles.kTypewriter",NAME_DYNAMIC:"app.animationStyles.kDynamic",NAME_FLICKER:"app.animationStyles.kFlicker",NAME_COLORSWAP:"app.animationStyles.kColorShuffle",NAME_FADE:"app.animationStyles.kFade",NAME_SLIDE:"app.animationStyles.kSlide",NAME_GROW:"app.animationStyles.kGrow",NAME_ZOOM:"app.animationStyles.kZoom",NAME_PAN:"app.animationStyles.kPan",NAME_GRAYSCALE:"app.animationStyles.kGrey",NAME_BLUR:"app.animationStyles.kBlur",NAME_COLOR:"app.animationStyles.kColor",NAME_FILL:"app.animationStyles.kFade"}).reduce((e,t)=>{let[n,o]=t;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{[n]:i.a.translate(o)})},{})}}t.default=r},"8t++":function(e,t,n){var o,i;o=[n("YLtl"),n("BG/d"),n("2AzE"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i){const a="post-crops-list";return function(s){(s=s||{}).sections=[{id:"custom",maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:30,label:"i18n.panels.crop.kStandard",labelHeight:37,class:"post-panel-divider-above"},{id:"standard",maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:15,label:"i18n.panels.crop.kRatios",labelHeight:37},{id:"shapes",labelHeight:37,maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:15,label:"i18n.panels.crop.kShapes"}];const r=new n(s),l=5625;function d(e){const n=e.aspectRatio||1,o=Math.sqrt(l/n),a=n*o,s=!!e.reselectable,r=e.label||"",d=r&&"i18n.panels.crop."+i.toLocaleKey(r);let c="";e.secondaryLabel&&(c='<div class="overlay-label">i18n.panels.crop.'.concat(i.toLocaleKey(e.secondaryLabel),"</div>")),"string"!=typeof e.iconId&&(e.iconId="");const u="margin-left:-".concat(Math.round(a/2),"px;margin-top:-").concat(Math.round(o/2),"px;width:").concat(Math.round(a),"px;height:").concat(Math.round(o),"px;"),p='<div data-i18n="[aria-label]panels.badges.kNewlabel" class="aspect" style="'.concat(u,'">\n                                <div class="overlay">\n                                  <div class="overlay-aspect-icon crop-icon-').concat(e.iconId.toLowerCase(),'"></div>\n                                  ').concat(c,'\n                                </div>\n                                <div class="label">').concat(d,"</div>\n                            </div>");return new t({data:e,reselectable:s,group:"crops",class:"",selected:!1,hidden:!0,template:p})}function c(e){const n=window.THEO_BUNDLE_PATH,o="".concat(n,"/images/images/shapes/svg/").concat(e.id,".svg");return e.shapeId=e.id,new t({data:e,reselectable:!1,group:"crops",class:"vector-shape-crops",selected:!1,showShuffleOverlay:!1,shuffleLabel:"i18n.common.kShuffle",hidden:!0,template:"<div class='crop-shape' style='-webkit-mask-image: url(".concat(o,");mask-image: url(").concat(o,");'></div>")})}return r.selectSection=function(t){e.delay((function(){"crop"===t.section?r.scrollToSection("custom"):"shape"===t.section&&r.scrollToSection("shapes")}),50)},r.updateTiles=function(e){const t=(e=e||{}).forma,n=o.ImageFacade.getMaskForForma(t),i=n&&n.id,a=o.ImageFacade.getCropRatioId(t);let s=a,l=!1;r.setItems([d(o.CropRatioPresetLibrary.FREECROP_PRESET)],"custom");const u=o.CropRatioPresetLibrary.getListOfRatios(),p=o.CropRatioPresetLibrary.ORIGINAL_SIZE_PRESET,h=o.ImageFacade.getImageFormaForForma(t);h&&(p.aspectRatio=h.bounds.aspectRatio);const g=[d(p)];for(let e=0;e<u.length;e++)g.push(d(u[e])),u[e].id===a&&(s=u[e].id,l=!1);r.setItems(g,"standard");const m=o.CropAssetLibrary.getListOfShapes(),f=[];for(let e=0;e<m.length;e++)f.push(c(m[e])),m[e].id===i&&(s=m[e].id,l=!0);return r.setItems(f,"shapes"),null!==s&&r.selectItemWithProperty("id",s,{silent:!0}),r.update(),{selectionId:s,selectedShape:l}},r.$el.addClass(a),r}}.apply(t,o))||(e.exports=i)},Af0U:function(e,t,n){var o,i;o=[n("xeH2"),n("UFvF"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o,i){var a,s,r,l="post-grids-list",d=1e4,c=220,u=140;return function(p){var h={id:"Suggested",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kSuggested",labelHeight:37},g={id:"Grid",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kGrid",labelHeight:37},m={id:"Simple",tileAspect:2.5,maxTileWidth:300,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kSimple",labelHeight:37},f={id:"Banner",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kBanner",labelHeight:37};(p=p||{}).sections=[];var b=new i(p);function v(t,n,i,a){a=a||1;var l=s/r,d=Math.min(s,c/a),u=d/l,p=t.numBackgroundCells>1,h='<div class="aspect" style="left:50%;top:50%;margin-left:-'+Math.round(d/2)+"px;margin-top:-"+Math.round(u/2)+"px;width:"+Math.round(d)+"px;height:"+Math.round(u)+'px;"></div>',g=new o({group:"grids",data:n,selected:i,reselectable:p,showShuffleOverlay:p,shuffleLabel:"i18n.common.kShuffle",hidden:!0,template:h});return g.$el.find(".aspect").prepend(function(t,n,o){var i,a=e('<div class="grid-thumbnail"></div>').css({width:"100%",height:"100%"}),s=t.overlappingCells();return t.gridCells.forEach((function(t){i=e("<div></div>");var r=s.indexOf(t)>-1,l=t.bounds.minY*o,d=t.bounds.minX*n,c=(t.bounds.maxX-t.bounds.minX)*n,u=(t.bounds.maxY-t.bounds.minY)*o;0===t.bounds.minY&&(l+=4,u-=4),1===t.bounds.maxY&&(u-=4),0===t.bounds.minX&&(d+=4,c-=4),1===t.bounds.maxX&&(c-=4),r||(0!==t.bounds.minY&&(l+=2,u-=2),1!==t.bounds.maxY&&(u-=2),0!==t.bounds.minX&&(d+=2,c-=2),1!==t.bounds.maxX&&(c-=2)),i.css({top:l+"px",left:d+"px",width:c+"px",height:u+"px"}).addClass("grid-cell"),r&&i.addClass("foreground-grid-cell"),a.append(i)})),a}(t,d,u)),g}function S(){var e=a.getPageAspectRatio();"original"===e?(r=Math.sqrt(d/(4/3)),s=4/3*r):(r=Math.sqrt(d/e),s=e*r,e>1&&s>c&&(s=c,r=Math.max(44,Math.round(r*(1/e)))),e<1&&r>u&&(r=u,s=Math.max(28,e*r))),b.updateSections({tileHeight:r+20}),b.updateTiles()}function w(e,t){if(b.removeSection(t.id),e.length){b.addSection(n.defaults({},t));for(var o=[],i=0;i<e.length;i++){var a={name:e[i].name,gridStyle:e[i],silent:!0};o.push(v(e[i],a,!1,t.columns))}b.setItems(o,t.id)}}return b.updateTilesAfterImageLoad=function(){if(a){var e=a.hostImages(),o=[];n.each(e,(function(e){e.loaded()||o.push(e.getImageLoadedPromise())})),0===o.count?b.updateTiles():t.all(o).then((function(){b.updateTiles()}))}},b.updateTiles=function(){a&&a.getAllGridStyles().then((function(e){var t=[],n=[],o=[],i=[];e.forEach((function(e){"Suggested"===e.category?n.push(e):"Banner"===e.category||e.overlappingCells().length?o.push(e):"Simple"===e.category?t.push(e):i.push(e)})),w(n,h),w(t,m),w(o,f),w(i,g),b.updateSections({tileHeight:r+20}),b.update()}))},b.selectLayout=function(e){var t=b.getSelected();if(!t||t.item.data.name!==e.name){var n=b.getItemWithProperty("name",e.name);n&&n.item.select({silent:!0})}},b.setCoreWrapper=function(e){a=e,S(),e.events.subscribe("formae-deleted",b.updateTiles),e.events.subscribe("forma-added",b.updateTilesAfterImageLoad),e.events.subscribe("document-size-changed",S)},b.el.className+=" "+l,b}}.apply(t,o))||(e.exports=i)},B52L:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("TW0n"),n("UNQu"),n("ywYV")],void 0===(i=function(e,t,n,o,i,a){var s,r="post-text-forma-select-box",l="gesture-in-progress",d=50,c=50,u=null;function p(e){return Math.round(1e3*e)/1e3}return function(e){(e=e||{}).onDragStart=function(){h.events.publish("select-box-drag-start"),h.$el.addClass(l)},e.onDragEnd=function(e,t){h.events.publish("select-box-drag-end",{event:e,element:t}),h.$el.removeClass(l)};var h=new o(e),g=h.hide,m=e.onHide,f=h.isDragging,b=h.update,v=e.matrix2d||[1,0,0,1,0,0],S=1,w="",y=[1,0,0,1,0,0],x=0,C=e.width||500,P=e.height||500,k=e.documentWidth||1e3,L=e.documentHeight||1e3,B=null;function F(e,t){h.events.publish("select-box-resize-start",{spot:D(t)}),h.$el.addClass(l)}function A(e,t){u=null,h.events.publish("select-box-resize-end",{spot:D(t)}),h.$el.removeClass(l)}var V=new n({class:"text-inner-frame",parent:h,template:'<div class="inner-frame-edge"></div>'}),I=new n({class:"click-area",parent:h,template:"<p></p>"}),O=new n({class:"left-line",parent:h,template:"<p></p>"}),T=new n({class:"right-line",parent:h,template:"<p></p>"}),M=new i({class:"sidepip lp",parent:V,width:21,height:21,template:"<p></p>",onDrag:N,onDragStart:F,onDragEnd:A}),E=new i({class:"sidepip rp",parent:V,template:"<p></p>",onDrag:N,onDragStart:F,onDragEnd:A}),H=t.debounce((function(){h.$el.removeClass("temporary-dim")}),1500);function D(e){return M.el===e?{x:0,y:.5}:E.el===e?{x:1,y:.5}:[]}function W(){var e=R(),t="matrix("+p(y[0])+","+p(y[1])+","+p(y[2])+","+p(y[3])+","+p(y[4]*e)+","+p(y[5]*e)+")";h.$el.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})}function R(){return h.parent.getWidth()/k}function G(){var e=a.decomposeMatrix2d(y).angle,t={x:y[4],y:y[5]},n={x:t.x+C/2,y:t.y+P/2};return a.rotatePoint(n,t,e)}function N(e,t){var n=R(),o=!1;u||(u=G(),s=C,o=!0);var i=a.decomposeMatrix2d(y).angle,r={x:u.x-C/2,y:u.y-P/2},l=r.x,p=r.y;o&&(u.x*=n,u.y*=n);var g=a.rotatePoint({x:e.totalX,y:e.totalY},{x:0,y:0},-i),m=l,f=p,b=!0;t===M.el?(C=s-g.x/n,b=!1):t===E.el&&(C=s+g.x/n,b=!1),b||(e.totalY=0);var v=u.x+e.totalX/2,w=u.y+e.totalY/2,x=a.rotatePoint({x:m*n,y:f*n},u,i);if(x.x+=e.totalX,x.y+=e.totalY,P<d&&(P=d),C<c&&(C=c),P===d||C===c){var k=a.rotatePoint({x:x.x+C/2*n,y:x.y+P/2*n},x,i);v=k.x,w=k.y}var L={x:v/n-C/2,y:w/n-P/2},B=a.rotatePoint(L,{x:v/n,y:w/n},i);y[4]=B.x,y[5]=B.y;var F=h.parent.$el.offset(),A={x:(e.absX-F.left)/n,y:(e.absY-F.top)/n};h.update({matrix2d:a.transformMatrix(y.slice(0),[S,0,0,S,0,0]),width:C/S,height:P/S,snapping:!1,spot:D(t),touchPoint:A,publishEvent:"select-box-resize"})}return h.getCenterPoint=function(){return G()},h.getRelativeHeight=function(){return getRelativeHeightOfElement()},h.temporaryDim=function(){h.$el.addClass("temporary-dim"),H()},h.undim=function(){h.$el.removeClass("temporary-dim")},h.handleParentResize=function(){W()},h.update=function(e){(e=e||{}).silent=!!e.silent;var t=R(),n=!1;if(void 0!==e.forma&&(B=e.forma),I.show(),"boolean"==typeof e.showLeftLine&&(e.showLeftLine?(M.show(),O.show()):(M.hide(),O.hide())),"boolean"==typeof e.showRightLine&&(e.showRightLine?(E.show(),T.show()):(E.hide(),T.hide())),e.scale&&1!==e.scale){var o={x:y[4],y:y[5]},i={x:e.touchPoint.x/t,y:e.touchPoint.y/t},s={x:i.x-(i.x-o.x)*e.scale,y:i.y-(i.y-o.y)*e.scale};y[4]=s.x,y[5]=s.y,e.width=C*e.scale,e.height=P*e.scale,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])}if(void 0!==e.translate&&(y[4]+=e.translate.x/t,y[5]+=e.translate.y/t,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])),e.rotate&&0!==e.rotate){var r={x:y[4],y:y[5]};e.touchPoint.x/=t,e.touchPoint.y/=t;var l=a.rotatePoint(r,e.touchPoint,e.rotate),d=x-e.rotate,c=a.radians(d);y[0]=Math.cos(c),y[1]=-Math.sin(c),y[2]=Math.sin(c),y[3]=Math.cos(c),y[4]=l.x,y[5]=l.y,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])}if(void 0!==e.matrix2d){var u=e.matrix2d.slice(0),p=a.decomposeMatrix2d(e.matrix2d);if(x=-p.angle,Math.abs(p.scaleX-1)>.001){var g=1/p.scaleX,m=1/p.scaleY;y=a.transformMatrix(u.slice(0),[g,0,0,m,0,0]),e.width=e.width||C/p.scaleX,e.height=e.height||P/p.scaleY,S=p.scaleX}else S=1,y=u.slice(0);var f=u.join(",");w!==f&&(w=f,v=u,!1===e.silent&&h.events.publish("change:matrix2d",{matrix2d:v}),n=!0)}void 0!==e.documentWidth&&(k=e.documentWidth,n=!0),void 0!==e.documentHeight&&(L=e.documentHeight,n=!0),void 0!==e.width&&(C=e.width*S,e.width=100*C/k+"%",n=!0),void 0!==e.height&&(P=e.height*S,e.height=100*P/L+"%",n=!0),b(e),n&&(W(),!1===e.silent&&e.publishEvent&&h.events.publish(e.publishEvent,{matrix2d:v,width:C/S,height:P/S,snapping:!0,mousePosition:e.mousePosition,spot:e.spot,touchPoint:e.touchPoint,startForma:B}))},h.forceDragHighlighting=function(){h.$el.addClass(l),h.$el.addClass("isdragging")},h.endDragHighlighting=function(){h.$el.removeClass("isdragging"),h.$el.removeClass(l)},h.handleDrag=function(e){var t=h.parent.$el.offset(),n={x:e.absX-t.left,y:e.absY-t.top};h.update({rotate:e.rotationChange,scale:e.scaleChange,touchPoint:n,translate:{x:e.x,y:e.y},mousePosition:{x:e.absX,y:e.absY},snapping:!0,publishEvent:"select-box-drag"})},h.isDragging=function(){return f()||M.isDragging()||E.isDragging()},h.hide=function(){m(),g()},h.update({matrix2d:v,width:C,height:P}),h.el.className+=" "+r,h}}.apply(t,o))||(e.exports=i)},Dfrx:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("8DU0"),n("GSfz"),n("UzQk"),n("Pbp+"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c,u){var p="post-sidebar-group-tab";const h=r.default;return c.init(),function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarGroupActions",size:"175px"},{id:"PostSidebarUngroup",class:"post-panel-divider-above",size:"95px"}];var i,r=l.keys.POST_SEEN_UNGROUP_MENU,d=new o(e),c={},g=t.throttle((function(){d.isHidden()||(i.getSelectedForma()?(i.getNumLayers()>1?(c.layerSlider.enable(),function(){c.layerSlider.update({maxValue:i.getNumLayers()-1});var e=i.getLayerSliderValueOfSelectedForma();c.layerSlider.setValue(e)}()):c.layerSlider.disable(),c.opacitySlider.enable(),c.opacitySlider.setValue(i.getOpacitySliderValueOfSelectedForma()),c.ungroupButton.enable()):(c.layerSlider.disable(),c.opacitySlider.disable(),c.ungroupButton.disable()),h.getSetting(r).then((function(e){c.ungroupTooltip.show(!e)})))}),400);function m(){g()}function f(){i.beginGesture()}function b(){i.endGesture(!0)}function v(e){i.setLayerForSelectedForma(e.value).done()}function S(){i.beginGesture()}function w(){i.endGesture(!0)}function y(e){i.setOpacityForSelectedFormae(e.value).done()}function x(){h.setSetting(r,!0);const e=i.getAllSelectedFormas();i.ungroupItems(e,!0,"button")}return d.setCoreWrapper=function(e){(i=e).events.subscribe("forma-added",g),i.events.subscribe("formae-deleted",g),i.events.subscribe("forma-selected",g)},d.el.className+=" "+p,c.groupActionsPanel=new n({parent:"PostSidebarGroupActions"}),c.opacitySlider=new s({parent:c.groupActionsPanel,id:"PostGroupOpacitySlider",onSlide:y,onSlideStart:S,onSlideEnd:w,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return u.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),c.layerSlider=new s({parent:c.groupActionsPanel,id:"PostGroupLayerSlider",onSlide:v,onSlideStart:f,onSlideEnd:b,top:123,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),c.ungroupPanel=new n({parent:"PostSidebarUngroup",id:"PostUngroupPanel"}),c.ungroupButton=new a({parent:c.ungroupPanel,id:"PostUngroupButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.kUngroup",height:50,width:145,onClick:x}),c.ungroupTooltip=new n({parent:"PostSidebarUngroup",id:"PostNewBadge",top:15,left:190,height:20,width:40,tag:"p",template:"i18n.panels.badges.kNewlabel"}),d.events.subscribe("shown",m),d}}.apply(t,o))||(e.exports=i)},FIWz:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("/QpO"),n("I9uX"),n("rOUP")],void 0===(i=function(e,t,n,o,i,a){var s="post-sidebar-background";return function(e){var t=new n(e=e||{}),r={};return t.updateFilters=function(e){(e=e||{}).whilePanelVisibleOnly&&r.looks.isHidden()||r.looks.updateFilters(e)},t.setCoreWrapper=function(e){r.looks.setCoreWrapper(e),r.image.setCoreWrapper(e),r.color.setCoreWrapper(e)},t.update=function(e){r.looks.update(e),r.image.update(e),r.color.update(e)},t.setBrandKitColors=function(e){r.color.setBrandKitColors(e)},t.removeBrandkitSections=function(){r.color.removeBrandkitSections()},t.handleEyeDropperClicked=function(e){r.color.handleEyeDropperClicked(e)},t.handleEyeDropperMoved=function(e,t){r.color.handleEyeDropperMoved(e,t)},t.selectCurrentColor=function(e){r.color.selectCurrentColor(e)},t.el.className+=" "+s,r.looks=new a({parent:t,hidden:!0,enablePixiRenderer:e.enablePixiRenderer,visibilityGroup:"background-sidebar",class:"post-panel-scrollable"}),r.image=new i({parent:t,hidden:!0,visibilityGroup:"background-sidebar",enableFlip:e.enableFlip,disableImageFrames:e.disableImageFrames,cutoutEnabled:e.cutoutEnabled}),r.color=new o({parent:t,hidden:!0,colorPicker:e.colorPicker,visibilityGroup:"background-sidebar"}),t.registerSidebarTabWithId(r.looks,"looks"),t.registerSidebarTabWithId(r.image,"image"),t.registerSidebarTabWithId(r.color,"color"),t.republish(r.image.events,"buttonpress-change-photo"),t.republish(r.image.events,"buttonpress-set-foreground"),t.republish(r.image.events,"buttonpress-set-background"),t.republish(r.image.events,"buttonpress-crop"),t.republish(r.image.events,"buttonpress-set-cutout-none"),t.republish(r.image.events,"buttonpress-set-cutout-remove-background"),t.republish(r.looks.events,"filter-selected"),t.republish(r.color.events,"bg-color-selected"),t.republish(r.color.events,"image-forma-replace-with-color"),t.republish(r.color.events,"eyedropper-changed"),t.republish(r.image.events,"hidden","hide-image-picker"),t}}.apply(t,o))||(e.exports=i)},FpXA:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("rCSV"),n("+VG/"),n("2Fsf"),n("M1RA"),n("WCfb"),n("B52L"),n("vVLA"),n("eZ+Q"),n("pEL3"),n("8DU0"),n("GSfz"),n("Dcjk"),n("UzQk"),n("3xm6"),n("ibPQ")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c,u,p,h,g,m,f){let{KeyboardShortcuts:b}=f;const v=n.default,S=u.default;return function(n){var u,f,w,y,x,C,P,k={selectionBoxes:[],selectionButtons:{}},L=(n=n||{}).poster,B=(n.pageElement,[]),F={width:0,height:0},A={},V=p.keys.V2_REPLACE_IMAGE_COACHMARK,I=new b,O=navigator.platform.indexOf("Mac")>-1,T=!1,M=null;let E=!1;function H(e,t,n){B.push(e.events.subscribe(t,n))}function D(){}function W(){k.appLoadingSkrim.show()}function R(){k.appLoadingSkrim.hide()}function G(){L.allImagesLoaded()?(k.canvasLoadingSkrim.hide(),A.events.publish("first-full-render"),E=!1):E=!0,k.appLoadingSkrim.hide()}function N(){k.canvasLoadingSkrim.show()}function z(){k.canvasLoadingSkrim.hide(),E&&(E=!1,A.events.publish("first-full-render"))}function U(){var e=u.documentSize();e.width===F.width&&e.height===F.height||(F=e,k.selectionPopUp.update({documentSize:e}),k.snapLines.update({documentSize:e}),k.selectionBox.update({documentWidth:e.width,documentHeight:e.height,silent:!0}))}function $(e){A.events.publish("handle-drag"),u.handleHandleFeedback(e)}h>=10?10===h?(y="MSPointerDown",x="MSPointerUp",C="MSPointerMove"):(y="pointerdown",x="pointerup",C="pointermove"):(y="mousedown touchstart",x="mouseup touchend",C="mousemove touchmove"),A.events=new v;var _=t.throttle((function(e){u.handleNudge(e).done()}),40);function Y(){u.allowDeletion(u.getAllSelectedFormas())&&pe()}function j(){u.getGroupFeatures().canGroup&&he("shortcut")}function X(){u.getGroupFeatures().canUngroup&&ge("shortcut")}function K(e){u.canSelectSibling()&&u.selectSibling(e.shiftKey)}function Q(){u.inSpecialSelectionMode()&&u.exitSpecialSelectionMode()}function q(e){u.inSpecialSelectionMode()?u.exitSpecialSelectionMode():(!1===e.shiftKey&&u.canSelectParent()&&u.selectParent(),!0===e.shiftKey&&u.canSelectChild()&&u.selectChild())}function J(e){A.updateSelectionBoxPosition()}function Z(e){u.handleTextFormaBeginResize(u.getSelectedForma(),e)}function ee(e){u.handleTextFormaEndResize(u.getSelectedForma(),e)}function te(e){u.handleTextFormaResize(u.getSelectedForma(),e).done()}function ne(e,t){var n=L.$el.offset();return{x:e-n.left,y:t-n.top}}function oe(e){var t=e.lines||[];t.length?k.snapLines.show():k.snapLines.hide(),k.snapLines.update({viewScale:L.getViewScale(),alignmentLines:t})}function ie(e){k.snapLines.update({viewScale:L.getViewScale(),alignmentLines:e.snapLines||[]}),u.getSelectedForma()==e.data.forma&&e.selectionBox&&(e.data.forma.controller.moveable||(k.selectionBox.update(e.selectionBox),u.inCharStyleMode||k.selectionBox.show()))}function ae(){t.delay((function(){u.getSelectedForma()||k.selectionBox.hide()}),20)}function se(t){k.selectionBox.hide(),A.updateSelectionPopUp(),t.selectionBox&&(k.selectionBox.update(t.selectionBox),k.selectionBox.show(),e(k.selectionBox.el).css("display","inline"))}function re(e){e.selectionBoxes.length>0?k.selectionBox.hide():e.forma||e.id?k.selectionBox.show():k.selectionBox.hide(),A.updateSelectionPopUp();for(var t=0;t<k.selectionBoxes.length;t++)k.selectionBoxes[t].hide();k.selectionBoxes=[];for(var n=0;n<e.selectionBoxes.length;n++){var o=new r({id:"textFormaSelectionBox",parent:L.parent,matrix2d:[1,0,0,1,100,100],documentWidth:1e3,documentHeight:1e3,width:200,height:200,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){},killClick:!0});H(o,"select-box-resize-start",Z),H(o,"select-box-resize-end",ee),H(o,"select-box-resize",te),o.update(e.selectionBoxes[n]),o.show(),k.selectionBoxes.push(o)}}function le(t){var n=e(t.target),o=n.closest("#PosterImageWrapper").length,i=n.closest("#selectionPopUp").length;const a=L.parent.parent.getEventXY(t),s=ne(a.x,a.y);T=!1,M=null;const r=o||i,l=(!t.ctrlKey||!O)&&(!r||function(e){const t=e.ctrlKey&&!O||e.metaKey&&O;if(M=null,!t){const t=L.parent.parent.getEventXY(e),o=ne(t.x,t.y),i=L.getViewScale(),a=new g.TheoPoint(o.x,o.y).multiply(1/i);if(!u.formaAtPoint(a,e=>e&&e.controller&&e.controller.floating)){var n=u.formaAtPoint(a,e=>e&&e.controller&&!e.controller.floating);!n||u.formaIsSelected(n)||!n.isShape()&&n.kind!==g.RootForma.KIND||(M=n)}}return t||M}(t));if(f=u.getCurrentTimelineIndex(),l){return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),T=!0,ve(Se(P=s)),!1}}function de(e){if(T){const t=L.parent.parent.getEventXY(e);ve(Se(ne(t.x,t.y)))}}function ce(e){var t=u.getCurrentTimelineIndex()>f;if(T){const o=k.marqueeBox.isHidden();if(k.marqueeBox.hide(),T=!1,o&&M)u.selectForma({forma:M});else{const o=L.parent.parent.getEventXY(e),i=ne(o.x,o.y),a=L.getViewScale(),s=Se(i).multiplyXY(1/a,1/a);var n=u.getSelectableFormaeIntersectingRect(s);n.length?u.marqueeSelectFormae(n,e.shiftKey):t||(u.deselect(),k.selectionPopUp.hide(),A.hideSelectionBox())}}A.events.publish("post-interaction-layer-clicked")}function ue(){A.events.publish("buttonpress-edit")}function pe(){A.events.publish("buttonpress-delete")}function he(e){A.events.publish("buttonpress-group",{method:e})}function ge(e){A.events.publish("buttonpress-ungroup",{method:e})}function me(){A.events.publish("buttonpress-duplicate")}function fe(){A.events.publish("buttonpress-change-photo")}function be(){var e,t,n,o,i=u.getSwapState(),a=i.swapThumbnailForma,s=i.swapThumbnailLocation;if(a&&s){var r=(e=s.x,t=s.y,n=L.getViewScale(),o=L.$el.offset(),{x:e*n+o.left,y:t*n+o.top});A.events.publish("create-swap-thumbnail",a,{x:r.x,y:r.y})}else A.events.publish("remove-swap-thumbnail")}function ve(e){k.marqueeBox.update({top:e.origin.y+"px",left:e.origin.x+"px",width:e.width+"px",height:e.height+"px"}),k.marqueeBox.isHidden()&&(e.width*e.height>=25||Math.max(e.width,e.height)>20)&&k.marqueeBox.show()}function Se(e){var t={x:Math.min(P.x,e.x),y:Math.min(P.y,e.y)},n=Math.abs(e.x-P.x),o=Math.abs(e.y-P.y);return g.TheoRect.fromXYWH(t.x,t.y,n,o)}return A.handleTap=function(e){A.events.publish("tap"),function(e){var t=0,n=0,o="up",i=u.getSelectedForma(),a=1;if(i){if(u.getFormaSize(i).height==u.getDesignHeight()){a=L.getViewScale();var s=L.$el.offset(),r=e.pageX||e.clientX||0,l=e.pageY||e.clientX||0;t=(r-s.left)/a,n=l-s.top,o=n<200?"down":"up",n+=n<200?120:-30,n/=a}else{var d=k.selectionBox.getCenterPoint();a=L.getViewScale(),t=d.x,(n=d.y-k.selectionBox.getRelativeHeight()/2)<200&&(n=d.y+k.selectionBox.getRelativeHeight()/2+130/a,o="down")}k.selectionPopUp.update({position:{x:t,y:n},direction:o})}}(e),A.updateSelectionPopUp(),k.selectionBox.show()},A.updateSelectionPopUp=function(){for(var e in k.selectionButtons)if(k.selectionButtons.hasOwnProperty(e)){k.selectionButtons[e].hide()}var t=u.getAllSelectedFormas(),n=null,o=u.getGroupFeatures(),i=[];if(u.inCropMode());else if(u.isMultiSelect())i.push(k.selectionButtons.deleteButton),i.push(k.selectionButtons.duplicateButton),o.canGroup&&i.push(k.selectionButtons.groupButton),o.canUngroup&&i.push(k.selectionButtons.ungroupButton);else{if(!(t.length>0&&null!==t[0]))return;if("Root"==(n=t[0]).kind&&!n.controller.replaceable)return void k.selectionPopUp.hide();n.isTypeLockup()?i.push(k.selectionButtons.popUpEditButton):n.isImage()&&n.controller.replaceable&&i.push(k.selectionButtons.replaceImageButton),u.allowDeletion([n])&&i.push(k.selectionButtons.deleteButton),u.allowDuplication(n)&&i.push(k.selectionButtons.duplicateButton),o.canUngroup&&i.push(k.selectionButtons.ungroupButton),u.hasImageAttribution(n)&&i.push(k.selectionButtons.imageAttributionButton)}var a=0,s=i.length;if(i.forEach((function(e){1===(a+=1)?e.$el.removeClass("pop-up-icon-mid pop-up-icon-right").addClass("pop-up-icon-left"):a===s?e.$el.removeClass("pop-up-icon-left pop-up-icon-mid").addClass("pop-up-icon-right"):e.$el.removeClass("pop-up-icon-left pop-up-icon-right").addClass("pop-up-icon-mid"),e.show()})),k.selectionPopUp.update({iconCount:s}),s>0?(k.selectionPopUp.show(),k.selectionButtons.replaceImageButton.isHidden()||S.getSetting(V).then((function(e){e||(w||(w=new c({parent:k.selectionPopUp,message:"i18n.components.coachmarks.image.kMessage",title:"i18n.components.coachmarks.image.kTitle",hidden:!0,priority:7,offsetY:10,offsetX:10,arrowDirection:"up",userSettingFlag:V,anchorElement:k.selectionButtons.replaceImageButton})),w&&w.show())}))):k.selectionPopUp.hide(),u.inCharStyleMode){for(var r in k.selectionPopUp.disable(),k.selectionButtons)if(k.selectionButtons.hasOwnProperty(r)){const e=k.selectionButtons[r];e.isHidden()||e.disable()}}else for(var r in k.selectionPopUp.enable(),k.selectionButtons)if(k.selectionButtons.hasOwnProperty(r)){const e=k.selectionButtons[r];e.isHidden()||e.enable()}},A.showImageMenu=function(){A.updateSelectionPopUp()},A.hideSelectionBox=function(){k.selectionBox.hide()},A.showSelectionBox=function(){k.selectionBox.show(),A.updateSelectionPopUp()},A.showSelectionPopup=function(){A.updateSelectionPopUp()},A.dismissPopUp=function(){k.selectionPopUp.hide()},A.handleTextTabSelected=function(){if(!u.inCharStyleMode){var e=u.getSelectedBoundingBox(),t=u.getSelectedForma();e&&t.isTypeLockup()&&(e.silent=!0,k.selectionBox.update(e),k.selectionBox.show())}},A.updateSelectionBoxPosition=t.throttle((function(){const e=u.getSelectedBoundingBox();e?(e.silent=!0,k.selectionBox.update(e),k.selectionBox.show()):(k.selectionBox.update(null),k.selectionBox.hide())}),16,{leading:!1}),A.setCoreWrapper=function(e){u=e},A.setPageElement=function(e){e},A.enable=function(){if(u){B.length>0&&function(){L.parent.parent.$el.off(y,le),L.parent.parent.$el.off(x,ce),L.parent.parent.$el.off(C,de);for(var e=0;e<B.length;e++)B[e].remove();B=[]}(),function(){L.parent.parent.unbind(),L.parent.parent.$el.on(y,le),L.parent.parent.$el.on(x,ce),L.parent.parent.$el.on(C,de.bind(this)),L.parent.parent.bind(),H(u,"design-updated",U),H(u,"forma-selected",se),H(u,"forma-updated",ie),H(u,"formae-deleted",ae),H(u,"update-snap-lines",oe),H(u,"update-handles",J),H(u,"update-swap-state",be),H(u,"text-forma-selected",re),H(u,"show-app-loading-indicator",W),H(u,"hide-app-loading-indicator",R),H(L,"image-loading-begin",N),H(L,"image-loading-end",z),H(L,"rendered",G),H(k.selectionBox,"handle-drag",$),H(k.selectionBox,"shown",D),H(k.selectionBox,"select-box-arrow-key-pressed",_),H(k.selectionBox,"select-box-delete-key-pressed",Y),H(k.selectionBox,"select-box-group-key-pressed",j),H(k.selectionBox,"select-box-ungroup-key-pressed",X),H(k.selectionBox,"select-box-return-key-pressed",Q),H(k.selectionBox,"select-box-escape-key-pressed",q),H(k.selectionBox,"select-box-tab-key-pressed",K)}();var e=u.getDocumentSize();k.selectionPopUp.update({documentSize:e}),k.snapLines.update({documentSize:e});var t=u.getSelectedBoundingBox();t&&k.selectionBox.update(t),k.canvasLoadingSkrim.show()}},A.disable=function(){k.selectionBox.hide(),k.selectionPopUp.hide(),k.canvasLoadingSkrim.hide(),k.appLoadingSkrim.hide(),k.marqueeBox.hide(),T=!1},A.handleWindowResize=function(){k.selectionPopUp.update({windowResize:!0})},A.showLoadingSkrim=function(){k.canvasLoadingSkrim.show()},A.hideLoadingSkrim=function(){k.canvasLoadingSkrim.hide()},function(){k.canvasLoadingSkrim=new i({class:"loading-skrim",parent:L.parent,hidden:!0,template:'<div class="postspinner postspinner-small"></div>'}),k.appLoadingSkrim=new i({class:"loading-skrim",parent:"PostApp",hidden:!0,template:'<div class="postspinner postspinner-small"></div>'}),k.snapLines=new l({parent:L.parent,hidden:!0}),k.selectionPopUp=new a({id:"selectionPopUp",parent:L.parent,height:40,hidden:!0,iconUnitWidth:57,iconCount:3}),k.selectionButtons.popUpEditButton=new o({parent:"selectionPopUp",class:"pop-up-icon-left",id:"PostPopUpEdit",hoverLabel:"i18n.components.buttons.edit.kHoverLabel",height:24,width:57,onClick:ue}),k.selectionButtons.duplicateButton=new o({parent:"selectionPopUp",class:"pop-up-icon-mid",id:"PostPopUpDuplicate",hoverLabel:"i18n.components.buttons.duplicate.kHoverLabel",height:24,width:57,onClick:me}),k.selectionButtons.deleteButton=new o({parent:"selectionPopUp",class:"pop-up-icon-left",id:"PostPopUpDelete",hoverLabel:"i18n.components.buttons.delete.kHoverLabel",height:24,width:57,onClick:pe});var t=m.translate("components.buttons.group.kHoverLabel");t+="&emsp;"+I.getShortcutDescription({command:!0},"G"),k.selectionButtons.groupButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpGroup",hoverLabel:t,height:24,width:57,onClick:function(){he("actionBar")}});var n=m.translate("components.buttons.ungroup.kHoverLabel");n+="&emsp;"+I.getShortcutDescription({shift:!0,command:!0},"G"),k.selectionButtons.ungroupButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpUngroup",hoverLabel:n,height:24,width:57,onClick:function(){ge("actionBar")}}),k.selectionButtons.replaceImageButton=new o({parent:"selectionPopUp",class:"pop-up-icon-mid",id:"PostPopUpReplace",hoverLabel:"i18n.components.buttons.replace.kHoverLabel",height:24,width:57,onClick:fe}),k.selectionButtons.imageAttributionButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpImageAttr",hoverLabel:"i18n.components.buttons.attribution.kHoverLabel",height:24,width:57,onClick:function(t){var n=u.getSelectedForma(),o=u.getImageFormaAttributionInfo(n),i={license:{type:o.licenseType,owner:o.ownerName,photo_name:o.title,source_name:o.sourceName,source_url:o.sourceURL,image_id:o.assetID}};d.displayAttributionDialog(i,{icon$:e(t.target),calcLocationFromIcon:!0,editorEl$:e("body").find("#selectionPopUp")}).then(function(e){"licensed"===e.changeType&&(e.newItemInfo.info.searchText=o.searchTerm,A.events.publish("stock-image-licensed",e))}.bind(this),(function(e){}))}}),k.selectionBox=new s({id:"selectionBox",parent:L.parent,matrix2d:[1,0,0,1,100,100],documentWidth:1e3,documentHeight:1e3,width:200,height:200,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){}}),k.marqueeBox=new i({id:"marqueeBox",class:"post-marquee-box",parent:L.parent,width:0,height:0,hidden:!0})}(),A}}.apply(t,o))||(e.exports=i)},"GN+k":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("NgGw"),n("KFmL"),n("+VG/"),n("+Mhg"),n("rPfa"),n("0IaF"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c){var u="post-sidebar-logo";return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarLogoActions",size:"179px"},{id:"PostSidebarLogoContent",size:"auto"}];var d,p=new o(e),h={},g=t.throttle((function(){var e=d.getSelectedForma();if(e&&e.isLogo()){h.opacitySlider.enable();var t=d.getOpacitySliderValueOfSelectedForma();h.opacitySlider.setValue(t),d.getNumLayers()>1&&(h.layerSlider.enable(),function(){h.layerSlider.update({maxValue:d.getNumLayers()-1});var e=d.getLayerSliderValueOfSelectedForma();h.layerSlider.setValue(e)}())}else h.opacitySlider.disable(),h.layerSlider.disable()}),400);function m(){g()}function f(e){p.events.publish("item-selected",e)}function b(e){p.events.publish("logo-uploaded",e),h.logoLocalInput.clearValue()}function v(){h.logoLocalInput&&h.logoLocalInput.click(),p.events.publish("buttonpress-uploadNewLogo")}function S(){p.hide(),p.events.publish("buttonpress-closeLogoPanel")}function w(){h.logoActionsPanel.hide(),h.listOfLogos.hide()}function y(){h.logoActionsPanel.show(),h.listOfLogos.show()}function x(){h.opacitySlider.isEnabled()&&d.beginGesture()}function C(){h.opacitySlider.isEnabled()&&d.endGesture(!0)}function P(e){h.opacitySlider.isEnabled()&&d.setOpacityForSelectedFormae(e.value).done()}function k(){h.layerSlider.isEnabled()&&d.beginGesture()}function L(){h.layerSlider.isEnabled()&&d.endGesture(!0)}function B(e){h.layerSlider.isEnabled()&&d.setLayerForSelectedForma(e.value).done()}return p.updateListOfBrandKitLogos=function(e){h.listOfLogos.setBrandKitLogos(e)},p.setCoreWrapper=function(e){(d=e).events.subscribe("forma-selected",g),d.events.subscribe("formae-deleted",g),d.events.subscribe("forma-updated",g)},p.el.className+=" "+u,h.closeButton=new a({parent:"PostSidebarLogoActions",class:"close-button",id:"LogoActionsCloseLogo",width:24,height:24,onClick:S}),h.logoActionsPanel=new n({parent:"PostSidebarLogoActions"}),h.logoLocalInput=new s({parent:h.sidebarLogo,type:"image",hidden:!0}),h.noLogosActionPanel=new n({parent:p,id:"PostLogoNoLogosPanel",hidden:!0}),h.noLogosActionContent=new n({parent:h.noLogosActionPanel,top:60}),h.noLogoAddLogo=new i({parent:h.noLogosActionContent,id:"PostNoLogosAddLogoButton",label:"i18n.panels.addNewLogo.kAddNewLogo",class:"pill pill-asset",onClick:v}),h.addLogoMessage=new n({parent:h.noLogosActionContent,id:"PostLogoPanelAddLogoMessage",template:"<p>i18n.panels.addNewLogo.kMessage1</p><p>i18n.panels.addNewLogo.kMessage2</p>",top:75,height:100}),h.opacitySlider=new r({parent:h.logoActionsPanel,id:"PostLogoOpacitySlider",onSlide:P,onSlideStart:x,onSlideEnd:C,top:75,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.layerSlider=new r({parent:h.logoActionsPanel,id:"PostLogoLayerSlider",onSlide:B,onSlideStart:k,onSlideEnd:L,top:138,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),h.listOfLogos=new l({parent:"PostSidebarLogoContent"}),p.events.subscribe("shown",m),h.listOfLogos.events.subscribe("item-selected",f),h.listOfLogos.events.subscribe("upload-new-logo",v),h.listOfLogos.events.subscribe("show-no-logos-panel",h.noLogosActionPanel.show),h.listOfLogos.events.subscribe("hide-no-logos-panel",h.noLogosActionPanel.hide),h.noLogosActionPanel.events.subscribe("shown",w),h.noLogosActionPanel.events.subscribe("hidden",y),h.logoLocalInput.events.subscribe("item-selected",b),p}}.apply(t,o))||(e.exports=i)},HPKp:function(e,t,n){var o,i;o=[n("Avqh"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("Lo4C"),n("8t++"),n("bBG2"),n("UzQk")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d){const c=l.default,u="post-crop-picker";return function(o){(o=o||{}).layout="rows",o.panels=[{id:"CropPickerHeader",size:"255px"},{id:"CropPickerCrops",class:"post-panel-divider-above",size:"auto"}];const l=new n(o),p={};let h,g,m,f,b="none",v="none",S=!1,w=!1,y=!1,x=!1,C=!1;function P(e){const t=g.getSelectedForma();g.flipForma(e,t)}function k(e){const t=!(null!==e.aspectRatio)||!g.getSelectedFormaHasShapeMask(),n=g.getSelectedForma().bounds;!n.equal(f)&&t&&(m=n),e.cropToRatioUsingFrameBounds=m,null!=e.aspectRatio?(b=e.id,v="none",l.events.publish("crop-aspect-ratio-selected",e),x||(c.publish("editImage:cropRatioSelected",{contextualData1:"ratioId:".concat(e.id)}),x=!0)):e.shapeId&&(v=e.id,b="none",l.events.publish("crop-shape-selected",e),C||(c.publish("editImage:cropShapeSelected",{contextualData1:"shapeId:".concat(e.id)}),C=!0)),setTimeout((function(){f=g.getSelectedForma().bounds}),100)}function L(){y=!0,h=d.ImageFacade.getImageFormaForForma(g.getSelectedForma()).placement,g.beginGesture()}function B(){w=!0,h=d.ImageFacade.getImageFormaForForma(g.getSelectedForma()).placement,g.beginGesture()}function F(e){g.rotateSelectedForma(e.delta,h).done()}function A(e){g.scaleSelectedForma(e.value,h).done()}function V(){g.endGesture(!0),I()}function I(){let e=g.getSelectedFormaRotation()%360;e>180&&(e=e-180-180);const t=g.getSelectedFormaScale();p.rotationSlider.setValue(e),p.scaleSlider.setValue(t)}function O(){I();const e=g.getSelectedForma();m=e.bounds,f=m,p.listOfCrops.show(!0);const t=p.listOfCrops.updateTiles({forma:e});t.selectedShape?(v=t.selectionId,b="none"):(b=t.selectionId,v="none"),w=!1,y=!1,S=!1}function T(){if(w||y){let e="<>";w&&y?e="<rotate,scale>":y?e="<rotate>":w&&(e="<scale>"),c.publish("editImage:cropImageAdjusted",{contextualData1:"adjustTransforms:".concat(e)})}c.publish("editImage:cropCompleted",{contextualData1:"ratioId:".concat(b),contextualData2:"shapeId:".concat(v),contextualData3:"resizeHandleUsed:".concat(S)})}function M(){l.events.publish("close-crop-picker"),l.hide(),p.closeCropTooltip.hide()}return l.recordFormaResize=function(){S=!0},l.setCoreWrapper=function(e){g=e},l.moveToSection=function(e){p.listOfCrops.selectSection(e)},l.el.className+=" "+u,p.headerLabel=new e({parent:"CropPickerHeader",tag:"h1",template:"i18n.panels.crop.kCrop"}),p.closeButton=new i({id:"PostCloseCropButton",parent:"CropPickerHeader",class:"check-button",width:24,height:24,onClick:M}),p.closeCropTooltip=new s({parent:p.closeButton,message:"i18n.panels.crop.kCloseCropTooltip",hoverLabelPosition:"below"}),p.scaleSlider=new a({parent:"CropPickerHeader",hidden:!1,onSlideStart:B,onSlideEnd:V,onSlide:A,top:100,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:.05,maxValue:5,roundValues:!1,label:"i18n.panels.crop.kScaleImage",labelClass:"label-above",showValueTooltip:!0}),p.rotationSlider=new a({parent:"CropPickerHeader",hidden:!1,onSlide:F,onSlideStart:L,onSlideEnd:V,top:150,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:-179,maxValue:180,roundValues:!0,label:"i18n.panels.crop.kRotateImage",labelClass:"label-above",snapToTickEnable:!0,snapTicks:[-179,-135,-90,-45,0,45,90,135,180],snapSensitivity:5,showValueTooltip:!0,computeTooltipValue:e=>"".concat(Math.round(e),"&deg")}),p.flipButtonContainer=new t({id:"PostFlipContainer",parent:"CropPickerHeader",top:177,left:25,height:75,width:150}),p.flipLabel=new t({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.panels.images.kFlip"}),p.flipHWrapper=new t({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),p.flipHButton=new i({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick(){P(!1)}}),p.flipVWrapper=new t({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),p.flipVButton=new i({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick(){P(!0)}}),p.listOfCrops=new r({parent:"CropPickerCrops"}),l.events.subscribe("shown",O),l.events.subscribe("hidden",T),p.listOfCrops.events.subscribe("item-selected",k),l}}.apply(t,o))||(e.exports=i)},I9uX:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("GSfz"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d){var c="post-sidebar-photo";return function(e){(e=e||{}).layout="rows";e.panels=[{id:"PostSidebarPhotoActions",size:"".concat(350,"px")},{id:"PostSidebarPhotoReplace",class:"post-panel-divider-above",size:"auto"}],e.cutoutEnabled&&e.panels.splice(1,0,{id:"PostSidebarCutoutModes",class:"post-panel-divider-above",size:"".concat(83,"px")});var t,i,r,u=new o(e),p={},h=e.disableImageFrames||!1;function g(){u.updateForCurrentSelection()}function m(){var e=t.getSelectedFormaRotation()%360;e>180&&(e=e-180-180);var n=t.getSelectedFormaScale();p.rotationSlider.setValue(e),p.scaleSlider.setValue(n)}function f(e){if(e.isBackgroundImage()){p.scaleSlider.show(),p.rotationSlider.show(),p.opacitySlider.hide(),p.layerSlider.hide();var n=t.getSelectedFormaScaleRange(),o=n.min,i=n.max;p.scaleSlider.update({minValue:o,maxValue:i}),m(),r=t.getSelectedFormaPlacement()}else p.opacitySlider.show(),p.layerSlider.show(),p.scaleSlider.hide(),p.rotationSlider.hide(),t.getNumLayers()>1?(p.layerSlider.enable(),function(){p.layerSlider.update({maxValue:t.getNumLayers()-1});var e=t.getLayerSliderValueOfSelectedForma();p.layerSlider.setValue(e)}()):p.layerSlider.disable(),a=t.getOpacitySliderValueOfSelectedForma(),p.opacitySlider.setValue(a);var a}function b(e){t.rotateSelectedForma(e.delta,r.placement).done()}function v(e){t.scaleSelectedForma(e.value,r.placement).done()}function S(){i=t.getSelectedForma(),t.beginGesture(),r.id!=t.getSelectedFormaPlacement().id&&f(i)}function w(){i=t.getSelectedForma(),t.beginGesture()}function y(){t.endGesture(!0),m()}function x(){t.beginGesture()}function C(){t.endGesture(!0)}function P(e){t.setOpacityForSelectedFormae(e.value).done()}function k(){t.beginGesture()}function L(){t.endGesture(!0)}function B(e){t.setLayerForSelectedForma(e.value).done()}function F(e){var n=t.getSelectedForma();t.flipForma(e,n)}return u.updateForCurrentSelection=function(){if(u.isHidden())return;var n=t.getSelectedForma();if(!n||!n.isImage()&&!n.isShape())return;var o=t.allowSetForeground(n),i=n.controller.userGroupMember,a=e.cutoutEnabled&&l.ImageFacade.canApplyCutout(n);if(e.cutoutEnabled&&p.cutoutBetaTooltip.show(!1),n.isImage()&&(f(n),p.setBackgroundButton.show(!o&&!i),p.setForegroundButton.show(o&&!i),p.cropButtonContainer.show(t.allowCrop(n)),e.cutoutEnabled)){var s=l.ImageFacade.getCutoutModeForForma(n);p.setCutoutNoneButton.show(a&&!(s===l.CutoutMode.Off)),p.setCutoutRemoveBackgroundButton.show(a&&!(s===l.CutoutMode.BackgroundRemoval)),p.cutoutBetaTooltip.show(a)}var r=t.backgroundImageFormas().length>0,d=r?"i18n.components.buttons.addToCollage.kButtonLabel":"i18n.components.buttons.setBackground.kButtonLabel",c=r?150:190;r?p.setBackgroundButton.$el.addClass("add-to-collage ").removeClass("pin-to-background"):p.setBackgroundButton.$el.addClass("pin-to-background").removeClass("add-to-collage "),p.setBackgroundButton.update({label:d,width:c}),h&&(p.setBackgroundButton.show(!1),p.setForegroundButton.show(!1),p.cropButtonContainer.show(!1));const g=[{id:"PostSidebarPhotoActions",size:"".concat(o?280:350,"px")}];a&&g.push({id:"PostSidebarCutoutModes",size:"".concat(83,"px")}),u.update({panels:g})},u.setCoreWrapper=function(e){(t=e).events.subscribe("forma-added",u.updateForCurrentSelection),t.events.subscribe("formae-deleted",u.updateForCurrentSelection),t.events.subscribe("forma-selected",u.updateForCurrentSelection)},u.el.className+=" "+c,p.scaleSlider=new s({parent:"PostSidebarPhotoActions",hidden:!1,onSlide:v,onSlideStart:S,onSlideEnd:y,top:55,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:0,maxValue:1,roundValues:!1,label:"i18n.components.slider.kScale",labelClass:"label-above"}),p.rotationSlider=new s({parent:"PostSidebarPhotoActions",hidden:!1,onSlide:b,onSlideStart:w,onSlideEnd:y,top:107,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:-179,maxValue:180,roundValues:!0,label:"i18n.components.slider.kRotate",labelClass:"label-above",snapToTickEnable:!0,snapTicks:[-179,-135,-90,-45,0,45,90,135,180],snapSensitivity:5,showValueTooltip:!0,computeTooltipValue:e=>"".concat(Math.round(e),"&deg")}),p.opacitySlider=new s({parent:"PostSidebarPhotoActions",hidden:!0,onSlide:P,onSlideStart:x,onSlideEnd:C,top:55,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:.05,maxValue:1,roundValues:!1,label:"i18n.components.slider.kOpacity",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return d.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),p.layerSlider=new s({parent:"PostSidebarPhotoActions",hidden:!0,onSlide:B,onSlideStart:k,onSlideEnd:L,top:107,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:e=>e+1}),p.flipButtonContainer=new n({id:"PostFlipContainer",parent:"PostSidebarPhotoActions",top:137,left:25,height:75,width:150}),p.flipLabel=new n({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.panels.images.kFlip"}),p.flipHWrapper=new n({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),p.flipHButton=new a({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick:function(){F(!1)}}),p.flipVWrapper=new n({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),p.flipVButton=new a({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick:function(){F(!0)}}),p.cropButtonContainer=new n({id:"PostCropContainer",parent:"PostSidebarPhotoActions",top:210,left:25,height:75,width:150}),p.cropLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.components.buttons.kCrop"}),p.cropShapeLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:60,height:20,width:60,template:"i18n.components.buttons.kShapeCrop"}),p.cropWrapper=new n({id:"PostCropWrapper",parent:"PostCropContainer",top:20,left:0,height:40,width:55}),p.cropButton=new a({parent:"PostCropWrapper",label:"",id:"PostCropButton",height:40,width:55,onClick:function(){u.events.publish("buttonpress-crop",{section:"crop"})}}),p.cropShapeWrapper=new n({id:"PostCropShapeWrapper",parent:"PostCropContainer",top:20,left:64,height:40,width:55}),p.cropShapeButton=new a({parent:"PostCropShapeWrapper",label:"",id:"PostCropShapeButton",height:40,width:55,onClick:function(){u.events.publish("buttonpress-crop",{section:"shape"})}}),p.cropShapeLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:60,height:20,width:60,template:"i18n.components.buttons.kShapeCrop"}),p.setBackgroundButton=new a({parent:"PostSidebarPhotoActions",id:"PostSidebarSetBackgroundButton",class:"post-centered-button image-sidebar-button pin-to-background",label:"i18n.components.buttons.setBackground.kButtonLabel",height:50,width:190,onClick:function(){u.events.publish("buttonpress-set-background")}}),p.setForegroundButton=new a({parent:"PostSidebarPhotoActions",id:"PostSidebarSetForegroundButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setForeground.kButtonLabel",height:50,width:148,onClick:function(){u.events.publish("buttonpress-set-foreground")}}),e.cutoutEnabled&&(p.setCutoutNoneButton=new a({parent:"PostSidebarCutoutModes",id:"PostSidebarSetCutoutNoneButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setCutoutNone.kButtonLabel",height:50,width:200,onClick:function(){u.events.publish("buttonpress-set-cutout-none")}}),p.setCutoutRemoveBackgroundButton=new a({parent:"PostSidebarCutoutModes",id:"PostSidebarSetCutoutRemoveBackgroundButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setCutoutRemoveBackground.kButtonLabel",height:50,width:220,onClick:function(){u.events.publish("buttonpress-set-cutout-remove-background")}}),p.cutoutBetaTooltip=new n({parent:"PostSidebarCutoutModes",id:"PostBetaBadge",top:10,left:215,height:20,width:40,tag:"p",template:"i18n.panels.badges.kBetaLabel"})),p.replaceButton=new a({parent:"PostSidebarPhotoReplace",id:"PostSidebarReplaceButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.kReplace",height:50,width:148,onClick:function(){u.events.publish("buttonpress-change-photo")}}),u.events.subscribe("shown",g),u}}.apply(t,o))||(e.exports=i)},OI2j:function(e,t,n){var o,i;o=[n("UFvF"),n("YLtl"),n("2Fsf"),n("wHG3"),n("yBTN")],void 0===(i=function(e,t,n,o,i){var a="post-editing-surface";const s=i.default,{PixiJSRenderer:r,PixiJSApp:l}=o,{PNGEncoding:d,RawEncoding:c,JPGEncoding:u,TargetRenderParameters:p,LiveViewLoadingImagesBeginEvent:h,LiveViewLoadingImagesEndEvent:g,LiveViewFrameRenderCompleteEvent:m,LiveViewDynamicRenderParams:f,LiveViewAnimationRenderCompleteEvent:b}=l;class v{constructor(e){this.graph=e,this.image=null,this.promise=null}}return function(i){const l=(i=i||{}).baseObject||new n(i),S=l.update;let w,y,x,C=[],P=1,k=null,L=!1,B=0,F=null,A=0,V=[],I=null;function O(){if(!k||!y)return;const e=k.documentSize();let t=e.width,n=e.height;const o=e.width;l.parent&&l.parent.getHeight&&(t=l.parent.getWidth(),n=l.parent.getHeight()),P=t/o,y.setSize(t,n,window.devicePixelRatio)}function T(){F||y.render(k.getGraph(!1))}function M(e){E(),w=new r(new s(e)),A=0,L=!1,y=w.liveViewService.createView(),x=w.imageService.createQueue(),I=y.addEventListener(e=>{if(e instanceof h)A++;else if(e instanceof g)A--,0===A&&l.events.publish("image-loading-end");else if(e instanceof m){L||(L=!0,l.events.publish("rendered"));const t=e.time;F&&function(e,t){if(t>0){const n=B/t,o=e/t;return Math.abs(n-1)<.01&&o<.01}return!1}(t,F.duration)&&l.events.publish("playback-new-loop-started"),B=t}else e instanceof b&&l.stopAnimation()}),l.$el[0].appendChild(y.getCanvas())}function E(){I&&(I.cancel(),I=null),y&&($(y.getCanvas()).remove(),y.destroy(),y=null),x&&(x.destroy(),x=null),w=null}l.getAspect=function(){const e=k?k.documentSize():{width:100,height:100};return e.width/e.height},l.handleParentResize=function(e){O()},l.getViewScale=function(){return P},l.disable=function(){l.$el.addClass("disabled"),l.events.publish("disabled")},l.enable=function(){l.$el.removeClass("disabled"),l.events.publish("enabled")},l.isRendered=function(){return L},l.allImagesLoaded=function(){return 0===A};return l.getWatermarkFootprint=function(){const e=k?k.documentSize():{width:100,height:100};return{width:190/e.width*100,height:40/e.height*100}},l.getRendition=function(t){if(!x)return e.resolve();const n=k.getGraph(!1);let o,i;if("image/png"===t.outputFormat)o=t.asDataURL?d.AsDataURL():d.AsBuffer();else{if(t.outputFormat&&"image/jpg"!==t.outputFormat&&"image/jpeg"!==t.outputFormat)throw new Error("getRendition: invalid output format ".concat(t.outputFormat));{const e=t.imageQuality||.75;o=t.asDataURL?u.AsDataURL(e):u.AsBuffer(e)}}if("number"==typeof t.longestSide)i=p.forGraphAtSize(n,t.longestSide,o);else if("number"==typeof t.width&&"number"==typeof t.height)i=p.fit(t.width,t.height,o);else if("number"==typeof t.width)i=p.fit(t.width,t.width/n.bounds.aspectRatio,o);else{if("number"!=typeof t.height)throw new Error("must specify width, height, or longestSide");i=p.fit(t.height*n.bounds.aspectRatio,t.height,o)}return x.render(n,i).then(e=>t.asDataURL?e.data:new Blob([e.data],{type:t.outputFormat||"image/jpeg"}))},l.getRenditionDataUrl=function(e){return l.getRendition(t.extend(e,{asDataURL:!0}))},l.getColorAtPoint=function(e){return function(){const e=k.getGraph(!1),t=V.find(t=>e.isEqualTo(t.graph));if(t)return t.promise;const n=new v(e);V.push(n);const o=p.forGraphAtSize(e,500,c.AsUint8Array());return n.promise=x.render(e,o).then(e=>(n.image=e,V=[n],n)),n.promise}().then(t=>(function(e,t){const{image:n,graph:o}=e,i=n.data,a=Math.round(n.width*(t.x/o.bounds.width)),s=4*(Math.round(n.height*(t.y/o.bounds.height))*n.width+a);return{r:i[s],g:i[s+1],b:i[s+2],a:i[s+3]/255}})(t,e))},l.getImageColorAtPoint=function(e){return{r:0,g:0,b:0,a:1}},l.update=function(e){S(e),void 0!==(e=e||{}).core&&e.core!==k&&(k=e.core,k?(M(k),O(),C.push(k.events.subscribe("document-in-new-renderable-state",T)),C.push(k.events.subscribe("design-updated",T)),y.render(k.getGraph(!1))):(E(),C.forEach((function(e){e.remove()})),C=[]))},l.setWatermark=function(e){this.showWatermark=e},l.playAnimation=function(e){y&&(void 0===e&&(e=!0),F=k.getGraph(!0),y.render(F,new f({loop:e})))},l.pauseAnimation=function(){y&&F&&y.render(F,new o.LiveViewDynamicRenderParams({startTime:B,endTime:B}))},l.stopAnimation=function(){y&&F&&(F=null,y.render(k.getGraph(!1)))},l.el.className+=" "+a,l}}.apply(t,o))||(e.exports=i)},QuSD:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("UFvF"),n("BG/d"),n("2AzE"),n("HTdw"),n("UzQk"),n("wHG3"),n("yBTN")],void 0===(i=function(e,t,n,o,i,a,s,r,l){const{PixiJSApp:d,PixiJSRenderer:c}=r,{RawEncoding:u,TargetRenderParameters:p,TargetTransformTypeEnum:h}=d,g=l.default;var m="post-filters-list",f={None:"i18n.common.kNone",Greyscale:"i18n.panels.images.kGrayscale",Darken:"i18n.panels.images.kDarken",Overlay:"i18n.panels.images.kContrast",Blend:"i18n.panels.images.kMatte",Multiply:"i18n.panels.images.kMultiply",DuoTone:"i18n.panels.images.kColorize",Screen:"i18n.panels.images.kLighten"};return function(r){const l=96;(r=r||{}).sections=[{id:"filters",tileAspect:1,maxTileWidth:100,verticalPadding:30,topPadding:30,bottomPadding:50,tileMargin:30,verticalTileMargin:48,label:"i18n.panels.images.kFilters",labelHeight:42}];const d=new i(r),b=d.update,v={};let S,w,y,x,C="",P=!0,k=null,L=null;const B=t.debounce((function(){if(!S)return;const e=S.placement,{width:t,height:o}=F(w&&w.bounds||y),i=[S.colorThemeKey,S.url,S.styleFilter.name,S.styleFilter.adjustments.asString,e.a,e.b,e.c,e.d,e.tx,e.ty,S.width,S.height,y.width,y.height].join(":");if(C!==i){C=i;const e=S.styleFilter.detachFromDatabase();let a=0;const s=d.getItems();let r=n();for(let n=0;n<s.length;n++){const i=s[n];let d=i.data;d.name===e.name?(a=n,e.colorLibrary=S.forma.page.colorLibrary,d=e,i.data=e):d.adjustments=e.adjustments,i.$el.find(".filter-canvas").css({height:Math.round(o)+"px",width:Math.round(t)+"px",marginLeft:-Math.round((t-l)/2)+"px",marginTop:-Math.round((o-l)/2)+"px"}),r=r.then(V(i))}r.done(),d.selectIndex(a,{silent:!0})}}),300);function F(e){return{width:Math.round(l*e.width/Math.min(e.width,e.height)),height:Math.round(l*e.height/Math.min(e.width,e.height))}}function A(){B()}function V(e){if(!L)return log.error("trying to render a tile before core wrapper has been established"),n.resolve();const t=e.$el.find("canvas")[0],o=w.page.document.beginTransaction("apply_styles_for_filter_thumbnails");w.childAt(0).applyStyle(e.data);const i=w.getGraph(s.PGMExportSettings.STATIC),{width:a,height:r}=F(w.bounds);return o.rollback(),L.render(i,new p(h.FillCentered,a,r,u.AsUint8Array())).then(e=>{t.width=e.width,t.height=e.height;const n=t.getContext("2d"),o=n.createImageData(e.width,e.height);o.data.set(e.data),n.putImageData(o,0,0)})}function I(e){t.delay((function(){if(S)for(var e=S.styleFilter.detachFromDatabase(),t=d.getItems(),n=0;n<t.length;n++){var o=t[n];if(o.data.name===e.name){e.colorLibrary=S.forma.page.colorLibrary,o.data=e;const t=V(o);"function"==typeof t&&t()}}}),100)}function O(e){d.events.publish("filter-checkbox-changed",e.target.checked),d.deselectSelected()}return d.update=function(t){b(t);var n=!1;if(void 0!==(t=t||{}).documentSize&&(y=t.documentSize,d.update({items:x})),t.core&&(k=new c,L=k.imageService.createQueue(new g(t.core))),void 0!==t.forma&&(w=t.forma,n=!0),void 0!==t.items&&(void 0===x||!function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var o=e[n],i=t[n];if(o.name!==i.name)return!1}return!0}(t.items,x))){var i=[];if(!0===t.disabled){for(var a in f){var s=new o({group:"filters",data:{},selected:!1,reselectable:!1,hidden:!0});s.$el.append('<div class="frame disabled"></div><div class="overlay"></div><div class="label disabled">'+f[a]+"</div>"),i.push(s)}P=!0}else{S&&(P=!1),x=t.items;const{width:n,height:a}=F(w&&w.bounds||y);for(var r=0;r<t.items.length;r++){var u=t.items[r],p=-1===e.inArray(u.name,["None","Greyscale"]),h=new o({group:"filters",class:"outline-selection",data:u,selected:!1,reselectable:p,showShuffleOverlay:p,shuffleLabel:"i18n.common.kShuffle",hidden:!0}),m=f[u.name]||u.name;h.$el.append('<div class="frame"></div><div class="label">'.concat(m,"</div>"));var v=e('<div class="filter-wrapper"><div class="filter-canvas" style="'+"height:".concat(a,"px;")+"width:".concat(n,"px;")+"margin-left:".concat(-Math.round((n-l)/2),"px;")+"margin-top:".concat(-Math.round((a-l)/2),"px;")+'"><canvas></canvas></div></div>');h.$el.append(v),i.push(h)}}d.setItems(i),C=""}if(void 0!==t.styleFilters)for(var A=d.getItems(),V=A.length-1;V>=0;V--){var I=t.styleFilters[V];I&&(A[V].data=I)}void 0!==t.image&&(S=t.image,n=!0),n&&!1===d.isHidden()&&B()},d.isDisabled=function(){return P},d.showCheckBox=function(){d.update({sections:[{id:"filters",topPadding:45}]}),v.applyAllCheckbox.show()},d.hideCheckBox=function(){d.update({sections:[{id:"filters",topPadding:25}]}),v.applyAllCheckbox.hide()},d.el.className+=" "+m,d.events.subscribe("shown",A),d.events.subscribe("item-selected",I),v.applyAllCheckbox=new a({parent:d,id:"applyToAllPhotosCheckbox",label:"i18n.panels.images.kApplyFilterToAllImage",left:24,top:59,handleChange:O,hidden:!0}),d}}.apply(t,o))||(e.exports=i)},Qzxj:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("rPfa"),n("6G8C")],void 0===(i=function(e,t,n,o,i){var a="post-sidebar-icon-color";return function(e){var o,s,r=new n(e=e||{}),l=[],d={},c=t.throttle((function(e){if(!r.isHidden()&&o){e=e||{};var n=o.getSelectedForma();e.doFade?(d.listOfIconColors.$el.addClass("fade-out"),t.delay((function(){h(n,e),d.listOfIconColors.$el.removeClass("fade-out")}),100)):h(n,e),d.listOfIconColors.update()}}),400);function u(){var e=o.getSelectedForma();e&&o.isIcon(e)&&(s=e.formaID,c({doFade:!1,updateSelection:!0}),l.push(o.events.subscribe("forma-selected",(function(e){var t;e.forma&&(e.forma.formaID!==s?(t=e.forma.formaID,s=t,c({doFade:!0,updateSelection:!1}),d.listOfIconColors.closeColorPicker()):(g(e.forma,{updateSelection:!1}),d.listOfIconColors.update()))}))))}function p(){!function(){for(var e=0;e<l.length;e++)l[e].remove();l=[]}()}function h(e,n){if(!r.isHidden()&&e){g(e,n);var o=e.controller.getSuggestableColors(),i=t.map(o,(function(e){return[{red:255*e[0].rgbColor.red,green:255*e[0].rgbColor.green,blue:255*e[0].rgbColor.blue,roles:e[0].sparkRoles,id:e[0].sparkElementID}]}));d.listOfIconColors.setSuggestedColors(i),d.listOfIconColors.setDefaultColors(),d.listOfIconColors.update()}}function g(e,t){if(o&&(e=e||o.getSelectedForma())){var n=[],i=o.getShapeFormaTheoColor(e);i&&n.push({red:255*i.rgbColor.red,green:255*i.rgbColor.green,blue:255*i.rgbColor.blue,roles:i.sparkRoles,id:i.sparkElementID}),d.listOfIconColors.setCurrentColors(n,t)}}function m(e,t){r.events.publish("icon-color-selected",e,t)}return r.setCoreWrapper=function(e){o=e},r.setBrandKitColors=function(e){d.listOfIconColors.setBrandKitColors(e)},r.removeBrandkitSections=function(){d.listOfIconColors.removeBrandkitSections()},r.handleEyeDropperClicked=function(e){d.listOfIconColors.handleEyeDropperClicked(e)},r.handleEyeDropperMoved=function(e,t){d.listOfIconColors.handleEyeDropperMoved(e,t)},r.selectCurrentColor=function(e){d.listOfIconColors.selectCurrentColor(e)},r.el.className+=" "+a,d.listOfIconColors=new i({elementClassName:"post-icon-colors-list",parent:r,hidden:!1,top:0,bottom:0,colorPicker:e.colorPicker}),r.events.subscribe("shown",u),r.events.subscribe("hidden",p),d.listOfIconColors.events.subscribe("item-selected",m),d.listOfIconColors.events.subscribe("update-color",m),r.republish(d.listOfIconColors.events,"eyedropper-changed"),r}}.apply(t,o))||(e.exports=i)},R81C:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o){return function(t){var i=230,a=90,s=i*i,r=i/a;(t=t||{}).renderOvershoot=800,t.sections=[{id:"default",tileAspect:r,maxTileWidth:i,horizontalPadding:25,verticalPadding:25,tileMargin:14,label:"i18n.panels.badges.kFromTemplate",labelHeight:37}];var l=new o(t);return l.populate=function(){var t=[];e.get("/api/post/v1/badges").done((function(o){o.items.forEach((function(o){t.push(function(t){var o,l,d,c=new n({class:"outline-selection",data:(o={imgUrl:t.thumbnail,manifestUrl:t.manifestUrl,assetId:t.assetId},d={},d.imgUrl=o.imgUrl,d.assetId=o.assetId,d.manifestPromise=function(){return l||(l=Q.defer(),e.get(o.manifestUrl,(function(e){l.resolve(e)})).fail((function(e,t,n){l.reject({url:o.manifestUrl,jqXHR:e,textStatus:t,errorThrown:n})}))),l.promise},d),hidden:!0});return c.hasImageBeenSet=!1,c.events.subscribe("shown",(function(){if(!1===c.hasImageBeenSet){c.hasImageBeenSet=!0;var n=t.width/t.height,o=Math.min(i,Math.sqrt(s*n)),l=o/n;l>a&&(o=(l=a)*n);var d=e('<div class="backdrop"></div>');c.$el.html(d);var u=new Image,p=window.devicePixelRatio>=2?460:230;u.src="".concat(t.thumbnail,"/format/jpg/dimension/width/size/").concat(p),c.$el.append(u),c.$el.css({width:Math.round(o)+"px",height:Math.round(l)+"px","margin-left":Math.round((i-o)/2)+"px","margin-top":Math.round((i/r-l)/2)+"px"})}})),c}(o))})),l.setItems(t,"default")}))},l.el.className+=" post-badge-list post-panel-divider-above",l.populate(),l}}.apply(t,o))||(e.exports=i)},W3p6:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("4eTD"),n("Qzxj")],void 0===(i=function(e,t,n,o,i){var a="post-sidebar-icon";return function(e){var t=new n(e=e||{}),s={};function r(){}return t.setCoreWrapper=function(e){e,s.icon.setCoreWrapper(e),s.color.setCoreWrapper(e)},t.setBrandKitColors=function(e){s.color.setBrandKitColors(e)},t.removeBrandkitSections=function(){s.color.removeBrandkitSections()},t.handleEyeDropperClicked=function(e){s.color.handleEyeDropperClicked(e)},t.handleEyeDropperMoved=function(e,t){s.color.handleEyeDropperMoved(e,t)},t.selectCurrentColor=function(e){s.color.selectCurrentColor(e)},t.el.className+=" "+a,s.icon=new o({parent:t,hidden:!0,visibilityGroup:"icon-sidebar"}),s.color=new i({parent:t,hidden:!0,colorPicker:e.colorPicker,visibilityGroup:"icon-sidebar"}),t.registerSidebarTabWithId(s.icon,"icon"),t.registerSidebarTabWithId(s.color,"color"),t.republish(s.icon.events,"buttonpress-replace-icon"),t.republish(s.icon.events,"hidden","hide-icon-picker"),t.republish(s.color.events,"icon-color-selected"),t.republish(s.color.events,"eyedropper-changed"),t.events.subscribe("shown",r),t}}.apply(t,o))||(e.exports=i)},WCfb:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("UNQu"),n("ywYV"),n("+Ltv"),n("UzQk")],void 0===(i=function(e,t,n,o,i,a,s){var r=e(document.body),l=s.TheoPoint,d=s.TheoSize,c=s.TheoRect,u=s.Matrix2D,p="post-forma-select-box";return function(h){var g,m=new n(h=h||{}),f=m.hide,b=h.onHide,v=m.update,S="",w=u.Identity,y=h.bounds||c.fromXYWH(0,0,500,500),x=h.documentSize||new d(1e3,1e3),C=!!h.enablePips,P=!!h.thinOutline,k=!!h.groupOutlineColor,L=!!h.wideOutline,B=!1,F=!!h.transparentOutline,A=!!h.textFrame,V=h.handlePoints||null,I=!!h.rotateable,O=0,T={};function M(e){m.$el.toggleClass("gesture-in-progress",e)}function E(e){var t=H(),n=m.parent.$el.offset();return{x:(e.x-n.left)/t,y:(e.y-n.top)/t}}function H(){return m.parent.getWidth()/x.width}function D(){return w.transformPoint(y.evalXY(.5,.5))}function W(e){var t,n=(t=m.parent.$el.offset(),D().multiply(H()).add(new l(t.left,t.top)));return i.radiansBetweenPoints(n,e)-Math.PI/2}function R(e){M(!0),m.events.publish("handle-drag",{part:e.meta.part,action:"begin",spot:e.meta.spot,location:E(e)})}function G(e){M(!1),m.events.publish("handle-drag",{part:e.meta.part,action:"end",spot:e.meta.spot,location:E(e)})}function N(e){m.events.publish("handle-drag",{part:e.meta.part,action:"update",spot:e.meta.spot,location:E({x:e.absX,y:e.absY})})}function z(e,t,n){return new o({meta:{part:e,spot:t},class:n,parent:g,template:"<p></p>",onDrag:N,onDragStart:R,onDragEnd:G})}var U=new n({parent:m,class:"highlight-container"});g=new n({class:"inner-frame",parent:m,template:'<div class="inner-frame-edge"></div>'});var $=new n({class:"crop-inner-grid1",parent:g,template:'<div class="inner-frame-edge"></div>'}),_=new n({class:"crop-inner-grid2",parent:g,template:'<div class="inner-frame-edge"></div>'}),Y=[z("corner",{x:0,y:0},"pip tl"),z("corner",{x:1,y:0},"pip tr"),z("corner",{x:0,y:1},"pip bl"),z("corner",{x:1,y:1},"pip br"),z("side",{x:0,y:.5},"sidepip lp"),z("side",{x:1,y:.5},"sidepip rp"),z("side",{x:.5,y:1},"sidepip bp"),z("side",{x:.5,y:0},"sidepip tp")],j=new o({class:"rotatepip rotate",parent:g,template:'<div class="stem"></div><p></p><div class="pip-icon"></div>',onDragStart:function(e){O=W(e.abs),M(!0),m.events.publish("handle-drag",{part:"rotate",action:"begin"})},onDrag:function(e){var t=W(e.abs);m.events.publish("handle-drag",{part:"rotate",action:"update",totalDeltaRadians:t-O})},onDragEnd:function(){M(!1),m.events.publish("handle-drag",{part:"rotate",action:"end"})}});function X(t){if(!a.disableCustomKeyboardShortcuts){var n=!!t.shiftKey,o=t.metaKey||t.ctrlKey,i=n?10:1;switch(t.which){case 9:if(!e(t.target).is("input, textarea"))return t.preventDefault(),m.events.publish("select-box-tab-key-pressed",{shiftKey:n}),!1;break;case 13:if(!e(t.target).is("input, textarea"))return t.preventDefault(),m.events.publish("select-box-return-key-pressed",{shiftKey:n}),!1;break;case 27:if(!e(t.target).is("input, textarea"))return t.preventDefault(),m.events.publish("select-box-escape-key-pressed",{shiftKey:n}),!1;break;case 38:m.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:-i}});break;case 40:m.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:i}});break;case 37:m.events.publish("select-box-arrow-key-pressed",{translate:{x:-i,y:0}});break;case 39:m.events.publish("select-box-arrow-key-pressed",{translate:{x:i,y:0}});break;case 8:case 46:if(!e(t.target).is("input, textarea"))return t.preventDefault(),m.events.publish("select-box-delete-key-pressed"),!1;break;case 71:if(o&&!e(t.target).is("input, textarea"))return t.preventDefault(),n?m.events.publish("select-box-ungroup-key-pressed"):m.events.publish("select-box-group-key-pressed"),!1}}}function K(){m.$el.width("100%"),m.$el.height("100%"),Q(g.$el,w,y),t.each(T,(function(e){Q(e.frame.$el,e.src.placement,e.src.bounds)}))}function Q(e,t,n){var o=n.evalXY(0,0),i=H();t=(t=t.translate(o)).scaleXY(i,i);var a=Math.sqrt(Math.pow(t.a,2)+Math.pow(t.b,2)),r=t.transformPoint(l.ZERO);t=t.translate(r.multiply(-1)).scaleXY(1/a,1/a).translate(r),n=n.scaleXY(a,a,s.TheoPoint.ZERO),e.css({width:n.width+"px",height:n.height+"px","transform-origin":"top left",transform:"matrix("+t.asArray.map((function(e){return t=e,Math.round(1e3*t)/1e3;var t})).join(",")+")"})}return m.getCenterPoint=function(){return D()},m.getRelativeHeight=function(){return viewHeight},m.handleParentResize=function(e){K()},m.update=function(e){void 0!==(e=e||{}).inCropMode&&(B=e.inCropMode),void 0!==e.thinOutline&&(P=e.thinOutline),void 0!==e.groupOutlineColor&&(k=e.groupOutlineColor),void 0!==e.wideOutline&&(L=e.wideOutline),void 0!==e.textFrame&&(A=e.textFrame),void 0!==e.rotateable&&(I=e.rotateable),void 0!==e.enablePips&&(C=e.enablePips),void 0!==e.handlePoints&&(V=e.handlePoints),void 0!==e.transparentOutline&&(F=e.transparentOutline);var o=!1;if(void 0!==e.documentSize&&(x=e.documentSize,o=!0),void 0!==e.bounds&&(y=e.bounds,o=!0),$.show(B),_.show(B),g.$el.toggleClass("text-inner-frame",A),g.$el.toggleClass("inner-frame",!A),m.$el.toggleClass("thin-outline",P),m.$el.toggleClass("group-outline-wide",L),m.$el.toggleClass("group-outline-color",k),m.$el.toggleClass("transparent-outline",F),j.show(I),void 0!==e.highlightRects){var i=e.highlightRects||[];t.each(i,(function(e){var t=T[e.formaID];t?t.src=e:((t={frame:new n({class:"multiselect-frame",parent:U}),src:e}).frame.$el.toggleClass("group-multiselect-color",e.isGroup),T[e.formaID]=t,o=!0)}));var a=[];t.each(T,(function(e){i.find((function(t){return t.formaID===e.src.formaID}))||a.push(e)})),t.each(a,(function(e){e.frame.remove(),delete T[e.src.formaID]}))}if(Y.forEach((function(e){C&&V?e.show(null!=V.find((function(t){return t.x==e.meta.spot.x&&t.y==e.meta.spot.y}))):e.show(C),"corner"===e.meta.part?(e.$el.toggleClass("group-outline-color",k),B?e.$el.removeClass("pip").addClass("croppip"):e.$el.removeClass("croppip").addClass("pip")):"side"===e.meta.part&&(B?e.$el.removeClass("sidepip").addClass("sidecroppip"):e.$el.removeClass("sidecroppip").addClass("sidepip"))})),void 0!==e.matrix2d){var s=(w=e.matrix2d).asArray.join(",");S!=s&&(S=s,o=!0)}v(e),o&&K()},m.hide=function(){b(),f()},m.update({matrix2d:w,bounds:y}),m.el.className+=" "+p,m.events.subscribe("shown",(function(){r.on("keydown",X)})),m.events.subscribe("hidden",(function(){r.off("keydown",X)})),m}}.apply(t,o))||(e.exports=i)},efk3:function(e,t,n){var o,i;o=[n("7len"),n("Pse5"),n("040S"),n("2Fsf"),n("bBG2"),n("MGCh")],void 0===(i=function(e,t,n,o,i,a){return function(s){const r=i.default,l=a.channel("theo-sidebar-animation");(s=s||{}).tag=s.tag||t.TheoAnimationCollection.elementName;const d=new e.AnimationOptions,c=new o(s),u=c.update,{THEO_ANIMATION_COLLECTION_OPTION_SELEECT_EVENT:p}=n;let h;const g=function(e){if(!h)return void l.assert(h,"missing coreWrapper when select animation style");const t=(e.originalEvent.detail.optionName||"").split(/([0-9]+)/);if(t.length>0){const e=t[0],n=parseInt(t.length>1?t[1]:"",10);c.events.publish("animation-loading-begin"),c.el.setAttribute("waiting",""),setTimeout(()=>{h.setAnimationStyle(e,n).finally((function(){c.el.removeAttribute("waiting"),c.events.publish("animation-loading-end")})),r.publish("animationPreviewed")},150)}},m=function(){c.$el.off(p,g)},f=function(){c.$el.on(p,g)};return c.update=function(e){if(!h)return;const t=(n=h.getCurrentAnimationStyle())?"Color"===n.name||"Fill"===n.name||n.variantCount>1?"".concat(n.name).concat(n.variant):n.name:"None";var n;c.el.categoryList=d.updateAnimationOptions(h),c.el.setAttribute("selected-option-name",t),u(e)},c.setCoreWrapper=function(e){h=e},c.el.categoryList=d.getInitialAnimationOptions(),c.events.subscribe("shown",f),c.events.subscribe("hidden",m),c.isHidden()||f(),c}}.apply(t,o))||(e.exports=i)},jo99:function(e,t,n){var o,i;o=[n("Avqh"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("R81C"),n("bBG2")],void 0===(i=function(e,t,n,o,i,a,s){const r=s.default;var l="post-badge-picker";return function(t){(t=t||{}).layout="rows",t.panels=[{id:"BadgePickerHeader",size:"131px"},{id:"BadgePickerBadges",size:"auto"}];var s=new n(t),d={};function c(e,t){d.listOfBadges.deselectSelected(),s.events.publish("badge-selected",e,t)}function u(){r.publish("customTextButtonPressed"),"function"==typeof t.onAddText&&t.onAddText()}function p(){s.hide()}return s.el.className+=" "+l,d.fromScratchLabel=new e({parent:"BadgePickerHeader",tag:"h2",template:"i18n.panels.badges.kFromScratch"}),d.closeButton=new i({parent:"BadgePickerHeader",class:"close-button",width:24,height:24,onClick:p}),d.addCustomTextButton=new o({parent:"BadgePickerHeader",class:"pill",label:"i18n.panels.badges.kCustom",onClick:u}),d.listOfBadges=new a({parent:"BadgePickerBadges"}),d.listOfBadges.events.subscribe("item-selected",c),s}}.apply(t,o))||(e.exports=i)},mYMA:function(e,t,n){var o,i;o=[n("YLtl"),n("2Fsf"),n("W1Jy"),n("+VG/"),n("pEL3"),n("HTdw"),n("rPfa"),n("bBG2"),n("Af0U"),n("UzQk"),n("8DU0"),n("GSfz")],void 0===(i=function(e,t,n,o,i,a,s,r,l,d,c,u){const p=r.default;var h="post-sidebar-layout";const g=c.default;var m=140,f=180;return function(r){(r=r||{}).layout="rows",r.panels=[{id:"PostSidebarLayoutActions",size:f+"px"},{id:"PostSidebarLayoutContent",class:"post-panel-divider-above",size:"auto"}];var d,c,b,v,S,w=new n(r),y={},x=w.hide,C=w.show,P=!1,k=[],L=u.keys.V2_LAYOUT_COACHMARK;function B(e){w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode(),y.layoutModeCheckbox.show(),I(),(e=void 0===e||e)&&(R(),U(d.getLayoutSpacing()===d.getLayoutMargin()))}function F(){d.prepareForGridLayouts(),B(!0),O(),k.push(d.events.subscribe("design-updated",V)),g.getSetting(L).then((function(e){e||(S||(S=new i({parent:y.listOfGrids,message:"i18n.components.coachmarks.layout.kMessage",title:"i18n.components.coachmarks.layout.kTitle",hidden:!0,priority:5,offsetY:15,offsetX:0,userSettingFlag:L,anchorElement:y.listOfGrids})),S&&S.show())}))}function A(){e.each(k,(function(e){e.remove()})),k=[],d.disableAutomaticLayoutMode()}function V(){B(!P),O()}function I(){if(d){var e=d.spacingChangesVisible();e?(y.spacingSlider.show(),y.linkButton.show(),y.topLinkLine.show(),y.bottomLinkLine.show()):(y.spacingSlider.hide(),y.linkButton.hide(),y.topLinkLine.hide(),y.bottomLinkLine.hide());var t=e?f:m;w.update({panels:[{id:"PostSidebarLayoutActions",size:t+"px"}]})}}function O(){var e=d.getGridForma(!0),t=e&&e.style&&e.style.name;t&&t!=v&&(y.listOfGrids.selectLayout(e.style),v=t)}function T(e){e.target.checked?d.enableAutomaticLayoutMode():d.disableAutomaticLayoutMode()}function M(e,t){c=!0,e,w.events.publish("grid-item-selected",e,t)}function E(e){W(e.value,-1),D(2*e.value,b?2*e.value:-1)}function H(e){W(-1,e.value),D(b?2*e.value:-1,2*e.value)}function D(e,t){d.setLayoutSpacingAndMargin(e,t).done()}function W(e,t){e>=0?(y.spacingSlider.setValue(Math.round(e)),b&&y.borderSlider.setValue(Math.round(e))):t>=0&&(y.borderSlider.setValue(Math.round(t)),b&&y.spacingSlider.setValue(Math.round(t)))}function R(){y.spacingSlider.setValue(Math.round(d.getLayoutSpacing()/2)),y.borderSlider.setValue(Math.round(d.getLayoutMargin()/2))}function G(){P=!0,d.beginGesture()}function N(){R(),d.endGesture(!0),P=!1}function z(){if(U(!b),b){const e=d.getLayoutSpacing(),t=d.getLayoutMargin(),n=0===e||0===t?Math.max(t,e):Math.min(t,e);D(n,n),R()}}function U(e){b=e,e?(y.linkButton.$el.find("i").addClass("lock-close"),y.linkButton.$el.find("i").removeClass("lock-open")):(y.linkButton.$el.find("i").addClass("lock-open"),y.linkButton.$el.find("i").removeClass("lock-close"))}return w.setCoreWrapper=function(e){d=e,y.listOfGrids.setCoreWrapper(e),I(),w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode()},w.deselectSelected=function(){y.listOfGrids.deselectSelected()},w.allowAutomaticLayout=function(){return y.layoutModeCheckbox.$el.find("input")[0].checked},w.returnFromSelectionState=function(){d.prepareForGridLayouts(),w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode()},w.show=function(){C(),c=!1},w.hide=function(){x(),c&&p.publish("resizeAndGrid")},w.el.className+=" "+h,y.layoutModeToolWrapper=new t({parent:"PostSidebarLayoutActions",height:15,bottom:28,left:24,top:"auto"}),y.layoutModeCheckbox=new a({parent:y.layoutModeToolWrapper,id:"disableMagicLayoutCheckbox",label:"i18n.components.input.toggle.kMoveContentWithLayout",height:15,checked:!1,handleChange:T}),y.borderSlider=new s({parent:"PostSidebarLayoutActions",onSlide:H,onSlideStart:G,onSlideEnd:N,top:55,left:24,sliderWidth:210,sliderHeight:2,handleHeight:16,minValue:0,maxValue:100,roundValues:!0,snapSensitivity:5,label:"i18n.components.slider.kBorder",labelClass:"label-above",showValueTooltip:!0}),y.spacingSlider=new s({parent:"PostSidebarLayoutActions",onSlide:E,onSlideStart:G,onSlideEnd:N,top:107,left:24,sliderWidth:210,sliderHeight:2,handleHeight:16,minValue:0,maxValue:100,roundValues:!0,snapSensitivity:5,label:"i18n.components.slider.kCell",labelClass:"label-above",showValueTooltip:!0}),y.linkButton=new o({parent:"PostSidebarLayoutActions",label:"",width:26,height:26,id:"LinkSlidersButton",class:"post-layout-link",onClick:z}),y.topLinkLine=new t({parent:"PostSidebarLayoutActions",top:55,left:251,width:7,height:14,id:"TopLinkLine",class:"top-link-line",hidden:!1}),y.bottomLinkLine=new t({parent:"PostSidebarLayoutActions",top:97,left:251,width:7,height:14,id:"BottomLinkLine",class:"bottom-link-line",hidden:!1}),y.listOfGrids=new l({parent:"PostSidebarLayoutContent",hidden:!1}),w.events.subscribe("shown",F),w.events.subscribe("hidden",A),y.listOfGrids.events.subscribe("item-selected",M),w}}.apply(t,o))||(e.exports=i)},rOUP:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("TW0n"),n("W1Jy"),n("KFmL"),n("uXkU"),n("bBG2"),n("QuSD")],void 0===(i=function(e,t,n,o,i,a,s,r,l){const d=r.default;var c="post-sidebar-photo",u=!1,p=80,h=502,g=650,m=666;const f=e=>e**3,b=e=>e**(1/3);return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarPhotoEnhancements",size:p+"px",kind:"fixed",min:p+"px",max:p+"px"},{id:"PostSidebarPhotoFilters",class:"post-panel-divider-above",size:g+"px",kind:"fixed",min:g+"px",max:g+"px"},{id:"PostSidebarPhotoEffects",class:"post-panel-divider-above",size:"120px",kind:"fixed",min:"120px",max:"120px"}];var t,r=new i(e),v={};function S(t){if(!e.enablePixiRenderer)return t;var n=1+99*f(t/100);return n=1===n?0:n}function w(e,t){r.events.publish("filter-selected",e,t,u),d.publish("imageFilterSelected",{filterName:e.name})}function y(){if(t){var e=t.backgroundImageFormas().length>1;e?v.listOfFilters.showCheckBox():v.listOfFilters.hideCheckBox();var n=e?m:g;r.update({panels:[{id:"PostSidebarPhotoFilters",size:n+"px",min:n+"px",max:n+"px"}]})}}function x(){r.updateForCurrentSelection()}function C(n){var o=t.getImageAdjustments(n);v.contrastSlider.setValue(o.contrast),v.brightnessSlider.setValue(o.brightness),v.saturationSlider.setValue(o.saturation),v.highlightsSlider.setValue(o.highlights),v.shadowsSlider.setValue(o.shadows),v.warmthSlider.setValue(o.warmth),v.sharpenSlider.setValue(o.sharpness),v.blurSlider.setValue(function(t){if(!e.enablePixiRenderer)return t;var n=0;return t>1&&(n=100*b((t-1)/99)),n}(o.blur))}function P(){t.beginGesture()}function k(){t.endGesture(!0)}return r.updateForCurrentSelection=function(){if(!r.isHidden()){var e=t.getSelectedForma();e&&(e.isImage()||e.isShape())&&(y(),e.isImage()&&(C(e),r.updateFilters({items:t.getImageFilters(),image:t.getImagePreviewData(e),forma:e,documentSize:t.getDocumentSize()})))}},r.updateFilters=function(e){return e=e||{items:t.getImageFilters(),image:t.getImagePreviewData(t.getSelectedForma()),forma:t.getSelectedForma(),documentSize:t.getDocumentSize()},v.listOfFilters.update(e)},r.setCoreWrapper=function(e){(t=e).events.subscribe("forma-added",r.updateForCurrentSelection),t.events.subscribe("formae-deleted",r.updateForCurrentSelection),t.events.subscribe("forma-selected",r.updateForCurrentSelection),v.listOfFilters.update({core:e}),y()},r.el.className+=" "+c,v.listOfFilters=new l({enablePixiRenderer:e.enablePixiRenderer,parent:"PostSidebarPhotoFilters",hidden:!1}),v.enhancePhotoDropdownButton=new o({parent:"PostSidebarPhotoEnhancements",id:"EnhancePhotoDropdownButton",template:"<p class='dropdown-label'>i18n.components.buttons.kEnhancePhoto</p><div class='dropdown-button'></div>",height:40,width:232,top:20,left:22,onClick:function(){var e=v.enhancePhotoDropdownButton.$el.find(".dropdown-button");e.hasClass("up-arrow")?(v.contrastSlider.hide(),v.brightnessSlider.hide(),v.saturationSlider.hide(),v.highlightsSlider.hide(),v.shadowsSlider.hide(),v.warmthSlider.hide(),v.sharpenSlider.hide(),v.resetSlidersButton.hide(),r.update({panels:[{id:"PostSidebarPhotoEnhancements",size:p+"px",min:p+"px",max:p+"px"}]})):(v.contrastSlider.show(),v.brightnessSlider.show(),v.saturationSlider.show(),v.highlightsSlider.show(),v.shadowsSlider.show(),v.warmthSlider.show(),v.sharpenSlider.show(),v.resetSlidersButton.show(),r.update({panels:[{id:"PostSidebarPhotoEnhancements",size:h+"px"}]})),e.toggleClass("up-arrow")}}),v.contrastSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({contrast:e.value})},onSlideStart:function(){d.publish("imageAdjust:ContrastApplied"),P()},onSlideEnd:k,top:76,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kContrast",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.brightnessSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({brightness:e.value})},onSlideStart:function(){d.publish("imageAdjust:BrightnessApplied"),P()},onSlideEnd:k,top:128,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kBrightness",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.saturationSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({saturation:e.value})},onSlideStart:function(){d.publish("imageAdjust:SaturationApplied"),P()},onSlideEnd:k,top:180,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kSaturation",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.highlightsSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({highlights:e.value})},onSlideStart:function(){d.publish("imageAdjust:HighlightsApplied"),P()},onSlideEnd:k,top:232,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kHighlights",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.shadowsSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({shadows:e.value})},onSlideStart:function(){d.publish("imageAdjust:ShadowsApplied"),P()},onSlideEnd:k,top:284,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kShadows",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.warmthSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({warmth:e.value})},onSlideStart:function(){d.publish("imageAdjust:WarmthApplied"),P()},onSlideEnd:k,top:336,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kWarmth",hidden:!0,snapTicks:[0],snapSensitivity:5}),v.sharpenSlider=new s({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({sharpness:e.value})},onSlideStart:function(){d.publish("imageAdjust:SharpenApplied"),P()},onSlideEnd:k,top:388,left:24,sliderWidth:232,minValue:0,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kSharpen",hidden:!0}),v.resetSlidersButton=new a({parent:"PostSidebarPhotoEnhancements",class:"reset-sliders-button post-centered-button",label:"i18n.components.buttons.kResetChanges",hidden:!0,onClick:function(){d.publish("imageAdjust:Reset"),t.resetImageAdjustments({contrast:0,brightness:0,saturation:0,highlights:0,shadows:0,warmth:0,sharpness:0})}}),v.EffectsPanelLabel=new n({parent:"PostSidebarPhotoEffects",template:"<h2>i18n.panels.images.kEffects</h2>",left:24,top:30}),v.blurSlider=new s({parent:"PostSidebarPhotoEffects",onSlide:function(e){t.changeImageAdjustments({blur:S(e.value)})},onSlideStart:function(){d.publish("imageEffect:BlurApplied"),P()},onSlideEnd:k,top:69,left:24,sliderWidth:232,minValue:0,maxValue:100,stepValue:1,showValueTooltip:!0,label:"components.slider.kBlur",hidden:!1}),r.events.subscribe("shown",x),v.listOfFilters.events.subscribe("item-selected",w),v.listOfFilters.events.subscribe("filter-checkbox-changed",(function(e){u=e})),r}}.apply(t,o))||(e.exports=i)},vVLA:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("Avqh"),n("UzQk"),n("oWUw")],void 0===(i=function(e,t,n,o,i){var a="post-snap-lines";return function(e){(e=e||{}).tag="canvas";var t=new n(e),s=t.el.getContext("2d"),r=t.update,l=1,d=[];function c(){s.clearRect(0,0,t.el.width,t.el.height)}return t.update=function(e){r(e);var n=!1;void 0!==(e=e||{}).viewScale&&(l=e.viewScale,n=!0),void 0!==e.documentSize&&(t.el.width=e.documentSize.width,t.el.height=e.documentSize.height,n=!0),void 0!==e.alignmentLines&&(d=e.alignmentLines,n=!0),n&&function(){if(!t.isHidden()&&(s.clearRect(0,0,t.el.width,t.el.height),d.length>0)){var e=Math.round(o.AlignmentLine.LINE_WEIGHT/l),n=Math.round(o.AlignmentLine.DASH_WIDTH/l),a=Math.round(o.AlignmentLine.DASH_GAP_WIDTH/l),r=Math.round(5/l),c=Math.round(24/l);const t="Safari"==i.name?1.5:1,v="Safari"==i.name?1:.5;for(var u=0,p=null,h=null,g=d.length-1;g>=0;g--){var m=d[g].line;if(m.p1.x=Math.max(Math.round(m.p1.x)-.5,v),m.p1.y=Math.max(Math.round(m.p1.y)-.5,v),m.p2.x=Math.max(Math.round(m.p2.x)-.5,v),m.p2.y=Math.max(Math.round(m.p2.y)-.5,v),s.lineWidth=e,d[g].lineStyle==o.LineStyle.Dashed){s.setLineDash([n,a]);const e=o.TheoRect.fromXYXY(0,0,1e3,1e3).evalXY(.5,.5),t=m.locate(e),i=m.projectedPoint(e),r=n+a,l=o.MathUtils.VectorNorm(i.subtract(m.p1))%r;s.lineDashOffset=t<0?l:r-l}else s.setLineDash([]);var f=d[g].color,b="rgba("+255*f.red+","+255*f.green+","+255*f.blue+","+f.alpha+")";if(s.strokeStyle=b,d[g].type==o.AlignmentType.Rotation?(s.lineWidth=e*t,m=m.extendRayByFixedLength(c),1==++u?p=m:h=m):(m.p1.x==m.p2.x||m.p1.y==m.p1.y?s.lineWidth=e*t:s.lineWidth=e*t*1.5,m=m.extendByFixedLength(c)),s.beginPath(),s.moveTo(m.p1.x,m.p1.y),s.lineTo(m.p2.x,m.p2.y),s.stroke(),2==u){u=0;p.angleWith(h);s.setLineDash([]),s.beginPath(),s.fillStyle=b,s.arc(p.p1.x,p.p1.y,r,0,2*Math.acos(-1),!0),s.stroke(),s.fill(),p=h=null}}}}()},t.el.width=1e3,t.el.height=1e3,t.el.className+=" "+a,t.events.subscribe("hidden",c),t}}.apply(t,o))||(e.exports=i)}}]);
//# sourceMappingURL=theo-web-view_160b0cfd-9ac0af5a.js.map
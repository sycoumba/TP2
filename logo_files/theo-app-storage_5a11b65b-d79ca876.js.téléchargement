(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[39],{"+gTl":function(e,t,r){var n,o;n=[r("UFvF"),r("YLtl"),r("ndZK"),r("Shoh"),r("U44B"),r("MGCh"),r("a8ov"),r("a65H"),r("RdGa"),r("9AdD")],void 0===(o=function(e,t,r,n,o,a,i,s,c,u){const l=a.channel("brandkit-utils"),d=i.default,h="headline-font",p="body-font",g={};function f(e){return e.getLogoWithUniqueRole("primary-logo").then(t=>g.brandKitLogoToCoreBrandLogo(e,t)).catch(e=>{const t=e?e.message:"";l.error("getPrimaryBrandLogo error: ".concat(t),e)})}function m(e){return e.getColors().then(e=>(function(e){return t.map(e,e=>g.brandKitColorToCoreBrandColor(e))})(e))}function v(t,r){return e.fcall(()=>t.getFontWithRole(r)||t.getFontWithUniqueRole(r)).then(g.fontThingToFontInfo)}function y(r){return r?e.all(t.map([h,p],e=>v(r,e).then(g.fontInfoToCoreBrandFont))):e.resolve()}function b(t){return v(t,h).then(t=>{for(let r=0;r<n.length;r++){const o=n[r].feel;for(let a=0;a<n[r].fontCards.length;a++)for(let i=0;i<n[r].fontCards[a].fonts.length;i++)if(t.lookupKey===n[r].fontCards[a].fonts[i].lookupKey&&n[r].fontCards[a].fonts[i].role===h)return e.resolve([o])}return e.resolve([])})}return g.fontThingToFontInfo=function(t){return t?"function"==typeof t.getMetrics?e.fcall(()=>t.getMetrics()||t.getMetricsAsync()).then(e=>({id:t.getId&&t.getId(),metrics:e,acRoles:e.acRoles||t.getRoles&&t.getRoles()||[],lookupKey:t.lookupKey(),fontFace:t})):"function"==typeof t.getInfo?t.getInfo().then(e=>r.getFont(e.lookupKey)).then(e=>({id:t.getId(),metrics:e.face.metrics,acRoles:e.face.metrics.acRoles||t.getRoles&&t.getRoles()||[],lookupKey:e.face.lookupKey,fontData:e})):e.reject("fontThingToFontInfo: font is not a recognized type"):e.reject("fontThingToFontInfo: no font to inspect")},g.fontInfoToCoreBrandFont=function(e){if(!e)return;const t=e.metrics||e;let r=t.postScriptName,n=o.fontProvider.descriptorForPostScriptName(r);return n&&n.postScriptName===r||(l.error("fontInfoToCoreBrandFont: did not find font with psname ".concat(r)),r="PTSans-Regular",n=o.fontProvider.descriptorForPostScriptName(r)),new c({id:e.id||e.sparkElementId,acRoles:e.acRoles||t.acRoles,descriptor:n,lookupKey:e.lookupKey})},g.brandKitLogoToCoreBrandLogo=function(t,r){const n=r.getHrefAsync(),o=r.getData(),a=t.composite.getDCXComposite().current.getComponentsOf(o)[0],i=d.encodeAuthoringContextUrl(t.getId(),a.id,a.etag.replace(/"/g,""),a.type);return n.then(t=>e.Promise(e=>{const n=new Image;n.onload=function(){e(new s({id:r.getId(),acRoles:r.getRoles(),acName:r.getName(),url:i,fullResUrl:t,pixelWidth:n.width,pixelHeight:n.height,mimeType:a.type}))},n.src=t}))},g.brandKitColorToCoreBrandColor=function(e){return new u({id:e.getId(),acRoles:e.getRoles(),rgb:e.rgb(),hex:e.hex(),isBaseColor:e.isBaseColor(),isDerived:e.isDerived()})},g.getCoreBrandFromAuthoringContextElements=function(e){const t={id:e.id,name:e.name,activated:e.activated,isDefault:e.isDefault,ownedByCurrentUser:e.belongsToUser,colors:e.colors,logos:e.logos||[],fonts:[]};return e.fonts&&(t.fonts=e.fonts.map(g.fontInfoToCoreBrandFont)),t},g.getCoreBrandForTemplateGeneration=function(t){return e.resolve().then(()=>e.all([m(t),y(t),f(t),b(t)])).spread((e,r,n,o)=>({id:t.getId(),name:t.getName(),logos:[n],colors:e,fonts:r,fontCategories:o})).catch(e=>{const t=e?e.message:"";l.error("getCoreBrandForTemplateGeneration error: ".concat(t),e)})},g.getLiteCoreBrand=function(r){return r&&r.primaryLogoPromise?r.primaryLogoPromise.then(()=>{const e=r.primaryLogoPromise.isFulfilled()&&r.primaryLogoPromise.valueOf(),n=t.cloneDeep(r);return n.logos=e?[e]:[],g.getCoreBrandFromAuthoringContextElements(n)}):e.resolve()},g}.apply(t,n))||(e.exports=o)},"2ofD":function(e,t,r){var n,o;n=[r("YLtl"),r("UFvF"),r("MOGj"),r("vw5A"),r("Uwho"),r("EQbI"),r("chD/"),r("Ctaw"),r("+Ltv"),r("QX4k")],void 0===(o=function(e,t,r,n,o,a,i,s,c,u){const l=new a({name:"Post"}),d=u.default;return new(n.extend({getConfig:()=>({syncGroup:"adobe-theo",scope:"theo",newDocName:"theo-document",doctype:"application/vnd.adobe.theo.document+dcx"}),seedNewDoc(e){this.currentDoc.attributes.name=c.newPostNameCode},createDocFromConfig(e,t,o){switch(t.operation){case"new-from-template":this._createDocNew(e,t,o);break;case"edit-template":case"new-template-from-template":s.loadBrandKit(t.contextId).then(function(e){this.currentDoc=e.composite,r.setSyncMode(r.MODE_EDITOR,this.currentDoc),o.resolve(this.currentDoc)}.bind(this));break;case"remix":this._createDocNew(e,t,o);break;default:n.prototype.createDocFromConfig.apply(this,arguments)}},_remixCPAsset(e,n){const a=t.defer();n=n||o.cps;const s=new d({cpServiceDomain:n});return s.trackRepeatableActivity(e,"remix_count"),s.getAssetMetadata(e).done((function(e){const t=e._links.dcx_base.href,n=r.AdobeDCXUtil.generateUuid(),o="/assets/adobe-theo/"+n,s=new Date;r.dcx.compositeXfer.remixComposite(t,"",o,n,"Spark Post",r.dcxSession,(function(e,r){if(e)l.error("[Post] remixComposite failed",{error:e,cpCompositeHref:t}),a.reject("[Post] remixComposite failed "+e);else{const e=new Date-s;i.trackEvent("PostRemixApiCall",{duration:e,contextData:["remixableAssetId","contextString"]},"post:remix"),a.resolve(n)}}))})).catch((function(t){l.error("[Post] getAssetMetadata failed",{error:t,assetId:e}),a.reject("[Post] getAssetMetadata failed "+t)})),a.promise},doRemix(e,t,r){return this._remixCPAsset(t,r).then(function(t){return this.createDocument({assetType:e,assetId:t})}.bind(this))},community:window.marvel.settings.theoc,communityCategory:"theos",avatarComponentPath:"/avatar",getData(e,t,r){if(!(t=t||this.currentDoc))return void console.error("no doc for getData");const n=t.getDCXRoot().getValue("doc#data");return n?r?n[r]&&n[r][e]:n[e]:void 0},setData(e,t,r,n){if(!(r=r||this.currentDoc))return void console.error("no doc for setData");const o=r.getDCXRoot(),a=o.getValue("doc#data")||{};let i=a;if(n&&(i=a[n],i||(i={},a[n]=i)),"object"==typeof e)for(const t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);else i[e]=t;o.setValue("doc#data",a)}}))}.apply(t,n))||(e.exports=o)},"4dd5":function(e,t,r){var n;void 0===(n=function(){
/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * License
 * -------
 * Creative Commons Attribution 2.5 License:
 * http://creativecommons.org/licenses/by/2.5/
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 */
var e=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.update=function(e){this.context.putImageData(e,0,0)},e.prototype.getPixelCount=function(){return this.width*this.height},e.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},e.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var t=function(){};
/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */if(t.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},t.prototype.getPalette=function(t,r,o){void 0===r&&(r=10),void 0===o&&(o=10);for(var a,i,s,c,u=new e(t),l=u.getImageData().data,d=u.getPixelCount(),h=[],p=0;d>p;p+=o)i=l[(a=4*p)+0],s=l[a+1],c=l[a+2],l[a+3]>=125&&(i>250&&s>250&&c>250||h.push([i,s,c]));var g=n.quantize(h,r).palette();return u.removeCanvas(),g},!r)var r={map:function(e,t){var r={};return t?e.map((function(e,n){return r.index=n,t.call(r,e)})):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var r={};return e.reduce(t?function(e,n,o){return r.index=o,e+t.call(r,n)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?r.map(e,t):e)}};var n=function(){function e(e,t,r){return(e<<2*c)+(t<<c)+r}function t(e){function t(){r.sort(e),n=!0}var r=[],n=!1;return{push:function(e){r.push(e),n=!1},peek:function(e){return n||t(),void 0===e&&(e=r.length-1),r[e]},pop:function(){return n||t(),r.pop()},size:function(){return r.length},map:function(e){return r.map(e)},debug:function(){return n||t(),r}}}function n(e,t,r,n,o,a,i){var s=this;s.r1=e,s.r2=t,s.g1=r,s.g2=n,s.b1=o,s.b2=a,s.histo=i}function o(){this.vboxes=new t((function(e,t){return r.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function a(t){var r,n,o,a,i=new Array(1<<3*c);return t.forEach((function(t){n=t[0]>>u,o=t[1]>>u,a=t[2]>>u,r=e(n,o,a),i[r]=(i[r]||0)+1})),i}function i(e,t){var r,o,a,i=1e6,s=0,c=1e6,l=0,d=1e6,h=0;return e.forEach((function(e){r=e[0]>>u,o=e[1]>>u,a=e[2]>>u,i>r?i=r:r>s&&(s=r),c>o?c=o:o>l&&(l=o),d>a?d=a:a>h&&(h=a)})),new n(i,s,c,l,d,h,t)}function s(t,n){if(n.count()){var o=n.r2-n.r1+1,a=n.g2-n.g1+1,i=n.b2-n.b1+1,s=r.max([o,a,i]);if(1==n.count())return[n.copy()];var c,u,l,d,h=0,p=[],g=[];if(s==o)for(c=n.r1;c<=n.r2;c++){for(d=0,u=n.g1;u<=n.g2;u++)for(l=n.b1;l<=n.b2;l++)d+=t[e(c,u,l)]||0;h+=d,p[c]=h}else if(s==a)for(c=n.g1;c<=n.g2;c++){for(d=0,u=n.r1;u<=n.r2;u++)for(l=n.b1;l<=n.b2;l++)d+=t[e(u,c,l)]||0;h+=d,p[c]=h}else for(c=n.b1;c<=n.b2;c++){for(d=0,u=n.r1;u<=n.r2;u++)for(l=n.g1;l<=n.g2;l++)d+=t[e(u,l,c)]||0;h+=d,p[c]=h}return p.forEach((function(e,t){g[t]=h-e})),function(e){var t,r,o,a,i,s=e+"1",u=e+"2",l=0;for(c=n[s];c<=n[u];c++)if(p[c]>h/2){for(o=n.copy(),a=n.copy(),t=c-n[s],i=(r=n[u]-c)>=t?Math.min(n[u]-1,~~(c+r/2)):Math.max(n[s],~~(c-1-t/2));!p[i];)i++;for(l=g[i];!l&&p[i-1];)l=g[--i];return o[u]=i,a[s]=o[u]+1,[o,a]}}(s==o?"r":s==a?"g":"b")}}var c=5,u=8-c,l=1e3,d=.75;return n.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var r=this,n=r.histo;if(!r._count_set||t){var o,a,i,s=0;for(o=r.r1;o<=r.r2;o++)for(a=r.g1;a<=r.g2;a++)for(i=r.b1;i<=r.b2;i++)index=e(o,a,i),s+=n[index]||0;r._count=s,r._count_set=!0}return r._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var r=this,n=r.histo;if(!r._avg||t){var o,a,i,s,u=0,l=1<<8-c,d=0,h=0,p=0;for(a=r.r1;a<=r.r2;a++)for(i=r.g1;i<=r.g2;i++)for(s=r.b1;s<=r.b2;s++)u+=o=n[e(a,i,s)]||0,d+=o*(a+.5)*l,h+=o*(i+.5)*l,p+=o*(s+.5)*l;r._avg=u?[~~(d/u),~~(h/u),~~(p/u)]:[~~(l*(r.r1+r.r2+1)/2),~~(l*(r.g1+r.g2+1)/2),~~(l*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(e){var t=this,r=e[0]>>u;return gval=e[1]>>u,bval=e[2]>>u,r>=t.r1&&r<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},o.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,r=0;r<t.size();r++)if(t.peek(r).vbox.contains(e))return t.peek(r).color;return this.nearest(e)},nearest:function(e){for(var t,r,n,o=this.vboxes,a=0;a<o.size();a++)(t>(r=Math.sqrt(Math.pow(e[0]-o.peek(a).color[0],2)+Math.pow(e[1]-o.peek(a).color[1],2)+Math.pow(e[2]-o.peek(a).color[2],2)))||void 0===t)&&(t=r,n=o.peek(a).color);return n},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return r.naturalOrder(r.sum(e.color),r.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(e,n){function c(e,t){for(var r,n=1,o=0;l>o;)if((r=e.pop()).count()){var a=s(u,r),i=a[0],c=a[1];if(!i)return;if(e.push(i),c&&(e.push(c),n++),n>=t)return;if(o++>l)return}else e.push(r),o++}if(!e.length||2>n||n>256)return!1;var u=a(e);u.forEach((function(){0}));var h=i(e,u),p=new t((function(e,t){return r.naturalOrder(e.count(),t.count())}));p.push(h),c(p,d*n);for(var g=new t((function(e,t){return r.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));p.size();)g.push(p.pop());c(g,n-g.size());for(var f=new o;g.size();)f.push(g.pop());return f}}}();return t}.apply(t,[]))||(e.exports=n)},"9AdD":function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,red:e.rgb.red||e.rgb.r,green:e.rgb.green||e.rgb.g,blue:e.rgb.blue||e.rgb.b,alpha:e.rgb.alpha||e.rgb.a||1,hex:e.hex,isBaseColor:e.isBaseColor,isDerived:e.isDerived,rgb:function(){return{red:t.red,green:t.green,blue:t.blue,alpha:t.alpha}},getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},"A+mC":function(e,t,r){"use strict";r.r(t),r.d(t,"HostPersistUtilsImpl",(function(){return i}));var n=r("UzQk"),o=r("lulf");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i{constructor(){a(this,"tmpFiles",{}),a(this,"postFeatureController",void 0),this.postFeatureController=new o.default}mimeTypeForFileAtPath(e){let t=this.tmpFiles[e];return t?t.mimeType:null}writeJsonContentToTempFile(e){let t="tmp/".concat(n.GUIDUtils.makeGUID());return this.tmpFiles[t]={path:t,content:e,mimeType:"application/json"},t}readJsonContentFromFile(e){let t=this.tmpFiles[e];return t?t.content:null}deleteTempFile(e){delete this.tmpFiles[e]}fileUrlForPath(e){return e}fileExists(e){return!!this.tmpFiles[e]}useJsonDocumentEncoding(){return!0}}},CTED:function(e,t,r){var n,o;n=[r("MGCh")],void 0===(o=function(e){return function(t){var r=e.channel("LFUCache"),n={},o=t,a={};return n.get=function(e){return e in a?(a[e].hits+=1,a[e].value):null},n.set=function(e,t){if(Object.keys(a).length>o){var r=Number.MAX_VALUE,n=null;for(var i in a)a[i].hits<r&&(r=a[i].hits,n=i);this.remove(n)}a[e]={value:t,hits:0}},n.remove=function(e){r.assert(e in a,"Failed to remove missing key from cache."),delete a[e]},n}}.apply(t,n))||(e.exports=o)},Ctaw:function(e,t,r){var n,o;n=[r("UFvF"),r("gBAB"),r("kNaX"),r("MGCh"),r("+gTl"),r("a65H"),r("RdGa"),r("9AdD"),r("O0ct")],void 0===(o=function(e,t,r,n,o,a,i,s,c){const u=n.channel("brandkit-wrapper"),l={};let d,h,p;function g(n,o,a){return n&&o?o instanceof Blob?function(e,n,o){const a=o?"primary-logo":"secondary-logo";return e.uploadImageAsset(r(),t.LOGOS_PARENT,n,a)}(n,o,a):function(e,n,o){const a=n.original||n.preview||n.thumbnail,i=o?"primary-logo":"secondary-logo";return e.updateImageAsset(r(),t.LOGOS_PARENT,a.link,n.type||"image/jpeg",function(e){let t=e.source.toLowerCase();return"creative cloud"===t&&(t="cc"),t}(n),i)}(n,o,a):e.resolve()}function f(){if(!d)return e.resolve();const t={id:d.getId(),name:d.getName()};return d.getColors().then(e=>(t.colors=e.map(e=>new s({id:e.getId(),acRoles:e.getRoles(),rgb:e.rgb(),hex:e.hex(),isBaseColor:e.isBaseColor(),isDerived:e.isDerived()})),t)).catch(t=>{const r=t?t.message:"";return u.error("getColorsInActiveBrand error: ".concat(r),t),e.resolve([])})}function m(t){const r={id:t.getId(),name:t.getName(),activated:t.activated(),belongsToUser:t.belongsToUser(),isDefault:t.isDefault()},n=f(),a=function(){if(!d)return e.resolve();const t={name:d.getName()};return d.getAuthoringContextLogos().then(e=>(t.logos=e,t))}();return e.all([n,a]).spread((t,n)=>{r.loadedPromise=e(),t&&(r.colors=t.colors);const a=n?n.logos:null;if(a&&a.length){const t=a.findIndex(e=>e.getRoles().includes("primary-logo")),n=a.splice(t,1)[0];r.primaryLogoPromise=o.brandKitLogoToCoreBrandLogo(d,n),r.secondaryLogoPromises=a.map(e=>o.brandKitLogoToCoreBrandLogo(d,e));const i=[r.primaryLogoPromise].concat(r.secondaryLogoPromises);r.fonts=[],c.getCachedFonts().forEach(e=>{const t=c.getFontData(e);t.isBKFont&&r.fonts.push(t)}),r.loadedPromise=r.loadedPromise.then(()=>e.allSettled(i).then(e=>{r.logos=e.filter(e=>"fulfilled"===e.state&&e.value).map(e=>e.value)}))}const i=e.defer();return r.coreBrandPromise=i.promise,r.loadedPromise.done(()=>{r.coreBrand=o.getCoreBrandFromAuthoringContextElements(r),i.resolve(r.coreBrand)}),r}).catch(t=>{const r=t?t.message:"";return u.error("extractBrandElementsForCache error: ".concat(r),t),e.resolve(null)})}function v(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d=e,p=t,d}return l.addLogoToCurrentBrand=function(t,r){return t&&d?g(d,t,r).catch(t=>{const r=t?t.message:"";return u.error("addLogoToCurrentBrand error: ".concat(r),t),e.reject(t)}):e.resolve()},l.appendHexColorToBrand=function(t,r){return d?d.getColors().then(n=>{const o=[];for(let e=0;e<t.length;++e){let r=!1;for(let o=0;o<n.length;++o)if(n[o].hex.replace("#","")===t[e]){r=!0;break}r||o.push(t[e])}return e.all(o.map(e=>r.addColorHex(e)))}):e.resolve()},l.getBrandKitById=function(e){return t.getController().then(t=>t.getContextById(e))},l.loadDefaultBrandKit=function(){let r,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=o?t.getOrCreateDefaultBrand:"function"==typeof t.getDefaultBrand?t.getDefaultBrand:t.acquireDefaultBrand,r().then(r=>!r&&o?t.getOrCreateDefaultBrand():e.resolve(r)).then(e=>v(e,n)).catch(t=>{const r=t?t.message:"";return u.error("loadDefaultBrandKitError: ".concat(r),t),e.reject(t)})},l.loadBrandKit=function(t,r){if((r=r||{}).skipReload&&d&&d.getId()===t)return e.resolve(d);const n=!!r.belongsToUser;return"string"!=typeof t||t.length<=0?l.loadDefaultBrandKit(n,r.isEntitledUser):l.getBrandKitById(t).then(e=>null!==e?v(e):l.loadDefaultBrandKit(n,r.isEntitledUser)).catch(e=>(u.error("loadBrandKit: Unable to find authoring context with id ".concat(t),e),l.loadDefaultBrandKit(n,r.isEntitledUser)))},l.refreshBrandColors=function(){return f().then(e=>{return l.currentBrandKit()&&e&&e.colors.length&&(h||(h={}),h.colors=e.colors),h})},l.refreshCachedCurrentBrandElements=function(){return d?m(d).then(e=>(e.showBrandInUI="boolean"!=typeof p||p,h=e,h&&!h.name&&(h.name="Brand"),h)).catch(e=>{const t=e?e.message:"";u.error("refreshCurrentBrandElementsCache error: ".concat(t),e)}):e.resolve()},l.switchCurrentAuthoringContext=function(t){if(!t)return e.resolve(h);const r="string"==typeof t?t:t.getId();return d&&d.getId()===r?e.resolve(h):l.loadBrandKit(r,!1).then(c.switchBrandContext).then(l.refreshCachedCurrentBrandElements)},l.currentBrandKit=function(){return d},l.currentBrandElements=function(){return h},l.resetBrandCaches=function(){h=null},l.checkForRestrictedFonts=function(){if(!h)return e.resolve([]);const r=h.coreBrand;if(!r)return e.resolve([]);const n=[];for(const e in r.fonts)e.acRoles&&e.acRoles.includes(e.acRoles,"custom")&&e.descriptor&&e.descriptor.postScriptName&&n.push({source:"user-uploaded",postScriptName:e.descriptor.postScriptName});return n.length?t.verifyFontsUsed(n,d):e.resolve([])},l}.apply(t,n))||(e.exports=o)},O0ct:function(e,t,r){var n,o;n=[r("xeH2"),r("UFvF"),r("YLtl"),r("Uwho"),r("e46Y"),r("ApVh"),r("tY4j"),r("Fb2u"),r("ndZK"),r("omhI"),r("Idax"),r("MGCh"),r("UzQk"),r("bBG2")],void 0===(o=function(e,t,r,n,o,a,i,s,c,u,l,d,h,p){const g=p.default,f=d.channel("util/fonts.js"),m={},v={},y={},b=["Local Brewery","Voltage","Wanderlust","Bellfort Script"],w={};let C,x;const F={edge:0,standardTypekit:0,brandkitTypekit:0,uploaded:0},T="spark-provided",S="user-uploaded",k="faux-font",I="headline-font";m.typekitId="ujm6jju",m.edgeWebFonts={"source-sans-pro":["n9"],"amatic-sc":["n4"],"cabin-sketch":["n7"],"cantata-one":[],economica:["n4"],"germania-one":[],graduate:[],"jolly-lodger":[],"josefin-slab":["n3"],"kaushan-script":[],lora:["n4"],megrim:[],monoton:[],montserrat:[],pacifico:[],"permanent-marker":[],"playfair-display":["n4"],"pt-mono":[],quicksand:["n7"],"seaweed-script":[],"sirin-stencil":[],"stint-ultra-expanded":[],ultra:[],"vast-shadow":[],voltaire:[],yellowtail:[]},r.forEach(l.fonts,e=>{e.isPostFont=!0});const A=r.reduce(l.fonts,(e,t)=>{const r=t.postScriptName;return f.assert(!(r in e),"Did not expect to add the same key twice to STANDARD_FONT_FACES_DICT dictionary."),e[r]=t,e},{}),E=A["SourceSansPro-Black"],R={typekitSubgroupKitId:m.typekitId,faces:r.map(r.filter(l.fonts,e=>!(e.family.toLowerCase()in m.edgeWebFonts)),e=>({metrics:e}))};function P(e){const t=document.createElement("span");return t.innerHTML="giItT1WQy@!-/#",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.fontSize="300px",t.style.fontFamily=e,document.body.appendChild(t),t}function N(e,t,n){const o=P("unknown-font-mci3jfoq2y"),a=o.offsetWidth,i=r.map(e,e=>P(e));let s,c=0;document.body.removeChild(o),s=setInterval((function(){c++;for(let e=i.length-1;e>=0;e--)i[e].offsetWidth!==a&&(document.body.removeChild(i[e]),i.splice(e,1));(0===i.length||c>150)&&(i.length>0&&f.warn("Not all fonts were successfully loaded after 150 attempts."),clearInterval(s),n())}),50)}function D(e,t,r,n,o){e.source=h.FontSource.USER_UPLOAD,e.isBKFont=!0,e.family=t,e.acRoles=Array.isArray(r)&&[].concat(r)||[],e.sparkElementId=n,e.brandkitName=o,e.cssName=t}function M(e){if(!e)return t();const n=e===R||e.isEdgeFont;let o;return n||e.faces.forEach(e=>{const t=e.metrics||e.getMetrics();if(f.assert(t&&t.postScriptName,"Invalid metrics instance."),t.postScriptName in v){const e=v[t.postScriptName];e.acRoles&&t.acRoles?(e.isBKFont=!0,e.acRoles=t.acRoles):(e.isBKFont=!0,e.brandkitName=t.brandkitName,e.acRoles=t.acRoles,e.sparkElementId=t.sparkElementId,e.baseFont=t.baseFont,e.label=t.label)}else v[t.postScriptName]=t}),o=e.faces.length>0&&"function"==typeof e.faces[0].isCustomFont&&e.faces[0].isCustomFont()?function(e){const n=e.faces.map(e=>{return(e.metrics||e.getMetrics()).fullName});f.info('Start loading uploaded font(s): "'+n.join('", "')+'"');const o=Date.now(),a=t.defer();try{const t=e.cssName,n=e.cssFontFace,o=document.createElement("style");o.type="text/css",o.innerHTML=n,o.className=t;const i=document.head.querySelectorAll("style."+t);i&&r.each(i,e=>{e.parentNode.removeChild(e)}),document.getElementsByTagName("head")[0].appendChild(o),N([t],0,()=>{a.resolve(!0)})}catch(e){f.error("Error loading uploaded font",e),a.resolve(!1)}return a.promise.finally(()=>{const e=Date.now()-o;f.info('Done loading uploaded font(s): "'+n.join('", "')+'" in '+e+"ms."),F.uploaded+=e}),a.promise}(e):e.isEdgeFont?m.loadEdgeFonts(e):m.loadTypekitFonts(e),e.faces&&e.faces.forEach(e=>{const t=e.metrics||e.getMetrics();w[t.postScriptName]=o.then(e=>{if(e)return!t.isPostFont||t.source&&t.source!==h.FontSource.UNKNOWN_SOURCE||(t.source=h.FontSource.EMBEDDED),h.Host.fontProvider.loadOneFont(t),t;n||delete v[t.postScriptName],delete w[t.postScriptName]})}),o}function L(e){return e.family.toLowerCase()in m.edgeWebFonts?M({isEdgeFont:!0,faces:[{metrics:e}]}):M(R)}function U(e){const t=e.getMetrics(),r=e.cssName();return D(t,r,e.getRoles(),e.getId(),e.name),e.getCSSFontFaceAsync().then(t=>M({cssName:r,cssFontFace:t,faces:[e]}))}function B(r,n){return(a=n,(o=function(e){return function(e,t){if(e){const r={name:e.getName()},n=t&&t.length?e.getFontsWithRoles(t):e.getAllFonts();return n.length?(r.fontFaces=n,[r]):[]}return[]}(x,e)}(a),function(r){const n={};return n[T]={},n[T].subgroups=[],c.getFontRegistry().then(o=>{var a=[];return r.forEach(t=>{t.fontFaces.forEach(r=>{let i,s,c,u,l;const d=r.getValue().source;if(d===T){const a=e.extend(!0,{},o.facesByKey[r.lookupKey()].face);a.metrics.source=h.FontSource.SPARK_PROVIDED,i=o.facesByKey[r.lookupKey()].subgroup.name,s=e.extend(!0,{},o.facesByKey[r.lookupKey()].subgroup);for(var p=0;p<n[T].subgroups.length&&!u;p++)c=n[T].subgroups[p],c.name===i&&(u=c);u||(l={name:i,data:s},l.data.faces=[],n[T].subgroups.push(l),u=l),function(e,t,r,n,o,a){e.metrics.original_family=e.metrics.family,e.metrics.family=t,a&&(e.metrics.brandkitName=a),e.metrics.label=r+" "+e.name,e.metrics.baseFont=r,e.metrics.isPublic="true",e.metrics.isBKFont=!0,e.metrics.cssName=t,e.metrics.lookupKey=e.lookupKey,e.metrics.allCapsAllowed=!b.includes(r),e.metrics.acRoles=Array.isArray(n)&&[].concat(n)||[],e.metrics.sparkElementId=o,e.metrics.weight>900&&(e.metrics.weight=900)}(a,s.cssName,i,r.getRoles(),r.getId(),t.name),u.data.faces.push(a)}else if(d===S){const e=r.getMetrics(),o=r.cssName();i=e.familyName,D(e,o,r.getRoles(),r.getId(),t.name),s={name:void 0===e.preferredFamilyName?e.familyName:e.preferredFamilyName,cssName:o,typekitPreviewId:!1,paragraphRecommended:!1,serif:e.serif,calligraphic:e.calligraphic},a.push(r.getCSSFontFaceAsync().then((function(e){s.cssFontFace=e})));const d={gingerName:e.postScriptName,lookupKey:r.lookupKey(),metrics:e,name:r.subgroupName,path:"",typekitKey:"",getMetrics:()=>r.getMetrics(),getCSSFontFaceAsync:()=>r.getCSSFontFaceAsync(),getRoles:()=>r.getRoles(),getId:()=>r.getId(),cssName:()=>r.cssName(),isCustomFont:()=>r.isCustomFont()};for(p=0;p<n[T].subgroups.length&&!u;p++)if(c=n[T].subgroups[p],c.name===i){u=c;break}u||(l={name:i,data:s},l.data.faces=[],n[T].subgroups.push(l),u=l),u.data.faces.push(d)}else d===k||f.error("Skipping font from brandkit with invalid source: "+r.cssName())})}),t.allSettled(a).then((function(){return n}))})}(o).then(e=>e[T].subgroups).catch(e=>{f.error("Error processing brand fonts",e)})).catch(e=>{f.error("Error getting spark fonts",e)})).then(e=>{const n={},o={};for(let t=0;t<e.length;t++){const r=e[t].data.faces;o[e[t].name]=e[t].data;for(let e=0;e<r.length;e++){n[r[e].metrics.postScriptName]=r[e]}}const a={},i=[];r=r||Object.keys(n);for(let e=0;e<r.length;e++){const s=r[e];if(s in w){if(n[s]&&n[s].metrics){const e=n[s].metrics;v[s]=e,w[s]=t.resolve(e)}else i.push(w[s].then(e=>{if(!v[e.postScriptName])return v[e.postScriptName]=e,e}));continue}const c=m.getSparkFontsSubgroupNameForPostScriptName(s);void 0!==c?(c in o||(o[c]=m.getSparkFontDataForSubgroup(c)),c in a||(a[c]=!0,i.push(M(o[c])),o[c].faces.forEach(e=>{const t=v[e.metrics.postScriptName];t&&(t.acRoles&&e.metrics.acRoles?(t.isBKFont=!0,e.metrics.acRoles.forEach(e=>{-1===t.acRoles.indexOf(e)&&t.acRoles.push(e)})):(t.isBKFont=!0,t.brandkitName=e.metrics.brandkitName,t.acRoles=e.metrics.acRoles,t.sparkElementId=e.metrics.sparkElementId,t.baseFont=e.metrics.baseFont,t.label=e.metrics.label))}))):s in n?i.push(U(n[s])):i.push(X(s))}return t.allSettled(i)});var o,a}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[I];return m.setAuthoringContext(e),B(null,t)}function O(){for(const e in v)v[e].isBKFont&&delete v[e];r.forEach(l.fonts,e=>{v[e.postScriptName]=r.clone(e)})}function H(e){const r=t.defer();return a.getAccessToken().then(t=>{const o=n.cid,a=new XMLHttpRequest,i=n.adobeFontsApiEndpoint+"/v1/variations/"+e+"?include=full";a.open("GET",i,!0),a.onload=()=>{if(4===a.readyState)if(200===a.status){const e=JSON.parse(a.responseText),t=e.font.sync.required_action;t&&t.length>0?r.reject("No access to premium font"):r.resolve(e)}else f.error("getTKFontVariation request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:e}),r.reject(a.statusText)},a.onerror=()=>{f.error("getTKFontVariation request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:e}),r.reject(a.statusText)},a.setRequestHeader("X-Api-Key",o),a.setRequestHeader("Authorization","Bearer "+t),a.send(null)}),r.promise}function j(e){const r=t.defer();return a.getAccessToken().then(t=>{const o=n.cid,a=new XMLHttpRequest,i=n.adobeFontsApiEndpoint+"/v1/selections",s='["'+e+'"]';a.open("POST",i,!0),a.onload=()=>{if(4===a.readyState)if(200===a.status){const e=JSON.parse(a.responseText);r.resolve(e)}else f.error("activateTypekitFont request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:e}),r.reject(a.statusText)},a.onerror=()=>{f.error("activateTypekitFont request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:e}),r.reject(a.statusText)},a.setRequestHeader("X-Api-Key",o),a.setRequestHeader("Authorization","Bearer "+t),a.setRequestHeader("Content-Type","application/json"),a.send(s)}),r.promise}function K(r){const o=t.defer(),a=n.adobeFontsMetricsService+"/"+r+".json";return e.ajax({url:a,type:"GET",dataType:"json",success:e=>{o.resolve(e)},error:()=>{o.reject("Error getting metrics from TypeKit service.")}}),o.promise}function W(e,r){if(!e)return t.reject("Attempted to get null variationId");const n=v[r]?v[r]:v[y[e]];return n?t(n):i(K,{maxAttempts:3,delay:200})(e).then(t=>(o.addPageAction("post_web_typekit_metrics",{status:"succeeded",postScriptName:r,typekitFontId:e}),y[e]||(y[e]=t.postScriptName),t),t=>{throw o.addPageAction("post_web_typekit_metrics",{status:"failed",postScriptName:r,typekitFontId:e}),t})}function X(e){const r=t.defer();let n;var o;return w[e]=r.promise,(o=e,o?i(H,{maxAttempts:3,delay:200})(o):t.reject("Attempted to get a null tkFontVariationIdOrPSName.")).then(e=>{return n=e,function(e){return e?i(j,{maxAttempts:3,delay:200})(e):t.reject("Error: attempted to activate a null tkSyncFontId")}(n.font.sync.font_id||"")}).then(()=>{return window.TypekitPreview?t():c.inject()}).then(()=>{return W(n.id,e)}).then(e=>{return m.registerTypekitFont(e),function(e){const r=t.defer();return TypekitPreview.load([e],{active:()=>{r.resolve()},inactive:()=>{r.reject("inactive font")}}),r.promise}({id:e.familyId,variations:[e.tkVariation],css_name:e.cssName})}).catch(t=>{f.error("Error loading missing typekit font with postScriptName "+e,t),delete w[e],delete v[e],r.reject(t)}).done(()=>{r.resolve(!0)}),r.promise}return m.loadEdgeFonts=function(n){const o=r.reduce(n.faces,(e,t)=>{const r=(t.metrics||t.getMetrics()).family.toLowerCase();return e[r]=m.edgeWebFonts[r],e},{});f.info("Start loading "+Object.keys(o).length+" edge fonts.");const a=Date.now(),i=t.defer(),s=function(e){let t="";for(const r in e){t+=r+":";const n=e[r];if(n.length)for(let e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e];else t+="n4";t+=":all;"}return t.substr(0,t.length-1)}(o);return e.ajax({url:"https://use.edgefonts.net/"+s+".js",dataType:"script",cache:!0,success:(e,t)=>{N(Object.keys(o),0,()=>{i.resolve(!0)})},error:(e,t,r)=>{f.error("getScript error loading edge web fonts",r),i.resolve(!1)}}),i.promise.finally(()=>{const e=Date.now()-a;f.info("Done loading "+Object.keys(o).length+" edge fonts in "+e+"ms."),F.edge+=e}),i.promise},m.loadTypekitFonts=function(r){const n=r.typekitSubgroupKitId;f.info("Start loading TypeKit fontID: "+n);const o=t.defer(),a=Date.now();return e.ajax({url:"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",dataType:"script",cache:!0,success:(e,t)=>{WebFont.load({typekit:{id:n},active:()=>{o.resolve(!0)},inactive:()=>{o.resolve(!0)}})},error:(e,t,r)=>{f.error("getScript error loading webfont typekit kit",r),o.resolve(!1)}}),o.promise.finally(()=>{const e=Date.now()-a;f.info("Done loading TypeKit fontID: "+n+" in "+e+"ms."),n===m.typekitId?F.standardTypekit+=e:F.brandkitTypekit+=e}),o.promise},m.getSparkFontsSubgroupNameForPostScriptName=function(e){for(const t in s.sparkfonts){const r=s.sparkfonts[t];for(let n=0;n<r.faces.length;n++)if(r.faces[n].metrics.postScriptName===e)return t}},m.getSparkFontDataForSubgroup=function(e){return s.sparkfonts[e]},m.loadNewUploadedFont=function(e){return U(e)},m.loadMissingFonts=function(e){const n=[];for(let t=0;t<e.length;t++){const r=e[t];r in w||(r in A?L(A[r]):n.push(r))}let o;return o=0===n.length?t.resolve():B(n,null),o.then(()=>{const n=r.map(e,e=>(f.assert(e in w,"Failed to find loading promise for font: "+e),w[e]));return t.allSettled(n)})},m.loadCurrentBrandFonts=function(){return B()},m.loadAllStandardFonts=function(){const e=r.map(l.fonts,e=>e.postScriptName);return this.loadMissingFonts(e)},m.getFontData=function(e){return v[e]},m.getDefaultFont=function(){return E},m.getCachedFonts=function(){return Object.keys(v)},m.fontLoaded=function(e){f.assert(e&&e.metrics,"Invalid fontInfo instance.");const r=e.metrics.postScriptName;let n;return n=r in w?t.resolve():m.loadMissingFonts([r]),n.then(()=>(f.assert(r in w,"Font loading mechanism should have added pending promises for every font face."),w[r]))},m.getCurrentLoadFontsPromise=function(){return C},m.resetLoadingTimes=function(){for(const e in F)F[e]=0},m.logLoadingTimes=function(){g.publish("post:fontsLoadEnd",{contextualData1:"edgeFontsElapsedMs:"+F.edge,contextualData2:"standardTypekitFontsElapsedMs:"+F.standardTypekit,contextualData3:"brandkitTypekitFontsElapsedMs:"+F.brandkitTypekit,contextualData4:"brandkitUploadedFontsElapsedMs:"+F.uploaded})},m.load=function(e){e=e||{},O(),r.forEach(Object.keys(w),e=>{delete w[e]});const n=h.Host.fontProvider.getIncludedFonts();for(;n.count>0;)n.remove(n.fontAt(0));const o=h.Host.fontProvider.getSuggestableFonts();for(;o.count>0;)o.remove(o.fontAt(0));C=t.defer();const a=[];return e.loadForEditor&&(a.push(L(E)),a.push(_(e.authoringContext))),t.allSettled(a).done(C.resolve),C.promise},m.setAuthoringContext=function(e){x=e},m.switchBrandContext=function(e){return O(),_(e,[I,"body-font"])},m.registerDownloadedTypekitFontByACFontFace=function(e){const r=e.tkVariationId()||"",n=e.friendlyName(),o=t.defer();return W(r,n).then(e=>{const t=m.registerTypekitFont(e);o.resolve(t)},e=>{o.reject("registerDownloadedTypekitFontByACFontFace: failed to get typekit font metrics",e)}),o.promise},m.registerTypekitFont=function(e){if(!e)return null;const t=e.postScriptName;return t?(e.source=e.syncAvailability.trial?h.FontSource.TYPEKIT_FREE:h.FontSource.TYPEKIT_PREMIUM,h.Host.fontProvider.loadOneFont(e),v[t]=e,h.Host.fontProvider.descriptorForPostScriptName(t)):null},m.getRegisteredTypekitFontPostScriptName=function(e){return y[e]},m}.apply(t,n))||(e.exports=o)},QX4k:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r("Uwho"),o=r.n(n),a=r("tY4j"),i=r.n(a),s=r("MGCh");const c=r.n(s).a.channel("util/cp.js");class u{constructor(e){let{cpServiceDomain:t}=e;var r,n,a;a=void 0,(n="cpServiceDomain")in(r=this)?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,this.cpServiceDomain=t||o.a.cps}trackRepeatableActivity(e,t){const r={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","X-Api-Key":o.a.cpkey},body:'{ "verb": "'.concat(t,'" }')},n="https://".concat(this.cpServiceDomain,"/api/v2/").concat(o.a.theoc,"/assets/").concat(e,"/activities");window.fetch(n,r).catch(e=>{const t="trackRepeatableActivity: ".concat(e.message," for ").concat(n);c.error(t,e);const r=new Error(t);return Promise.reject(r)})}getAssetMetadata(e){const t="https://".concat(this.cpServiceDomain,"/api/v2/").concat(o.a.theoc,"/assets/").concat(e),r={method:"GET",headers:{"X-Api-Key":o.a.cpkey}};return window.fetch(t,r).then(e=>{if(!e.ok)throw new Error("Error getting CP metadata: [".concat(e.status,"] ").concat(e.statusText));return e.json()}).catch(e=>{c.error("getAssetMetadata: ".concat(e.message," and cpkey is ").concat(o.a.cpkey),e);const r=new Error("getAssetMetadata: ".concat(e.message," for ").concat(t));return Promise.reject(r)})}getAssetMetadataWithRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return i()(this.getAssetMetadata.bind(this),{maxAttempts:t})(e)}}},RdGa:function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,descriptor:e.descriptor,lookupKey:e.lookupKey,getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},T6kn:function(e,t,r){var n,o;n=[r("ApVh"),r("Uwho")],void 0===(o=function(e,t){var r={getBoundingBoxAndMask:function(r,n){return e.getAccessToken().then(e=>{const o={method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json","X-Api-Key":t.cid,"X-Request-Id":n},body:JSON.stringify({source:{bytes:r},saliency:{boundingBoxRectangles:!0,mask:!0}})};return fetch("".concat(t.saliencyServiceEndpoint,"/imageAnalysis"),o).then(e=>{if(!e.ok)throw new Error("Error getting Saliency BoundingBoxAndMask: [".concat(e.status,"] ").concat(e.statusText));return e.json()})})}};return r}.apply(t,n))||(e.exports=o)},TdwW:function(e,t,r){var n,o;n=[r("UzQk")],void 0===(o=function(e){var t={},r=/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;function n(e){var t=(e=Math.round(e)).toString(16);return 1===t.length?"0"+t:t}t.hex2rgb=function(e){if(e){var t=r.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}},t.hex2rgba=function(e){var r=t.hex2rgb(e);return r.a=1,r},t.hex2hsv=function(e){return t.rgb2hsv(t.hex2rgb(e))},t.hex2SolidColor=function(r){var n=t.hex2rgba(r);return e.SolidColor.decodeJson({red:n.r/255,green:n.g/255,blue:n.b/255,alpha:n.a||1})},t.hsv2rgb=function(e){var t,r,n,o,a,i,s,c,u=e.h/360,l=e.s/100,d=e.v/100;switch(i=d*(1-l),s=d*(1-(a=6*u-(o=Math.floor(6*u)))*l),c=d*(1-(1-a)*l),o%6){case 0:t=d,r=c,n=i;break;case 1:t=s,r=d,n=i;break;case 2:t=i,r=d,n=c;break;case 3:t=i,r=s,n=d;break;case 4:t=c,r=i,n=d;break;case 5:t=d,r=i,n=s}return{r:Math.floor(255*t),g:Math.floor(255*r),b:Math.floor(255*n)}},t.hsv2hex=function(e){var r=t.hsv2rgb(e);return t.rgb2hex(r)},t.hsl2rgb=function(e){function t(e,t,r){return e>1?e-=1:e<0&&(e+=1),6*e<1?r+6*(t-r)*e:2*e<1?t:3*e<2?r+(t-r)*(2/3-e)*6:r}var r,n,o,a=e.h/360,i=e.s,s=e.l;if(0===i)r=n=o=255*s;else{var c,u,l=a,d=a-1/3;r=255*t(a+1/3,c=s<.5?s*(1+i):s+i-s*i,u=2*s-c),n=255*t(l,c,u),o=255*t(d,c,u)}return{r:r,g:n,b:o}},t.rgb2hex=function(e){return n(e.r)+n(e.g)+n(e.b)},t.rgb2hsl=function(e){var t,r,n=e.r/255,o=e.g/255,a=e.b/255,i=Math.min(n,o,a),s=Math.max(n,o,a),c=(i+s)/2;if(i===s)r=0,t=0;else{var u=s-i;r=c>.5?u/(2-s-i):u/(s+i),t=s===n?(o-a)/u:s===o?2+(a-n)/u:4+(n-o)/u,(t*=60)<0&&(t+=360)}return{h:t,s:r,l:c}},t.rgb2hsv=function(e){var t,r,n,o,a,i=e.r/255,s=e.g/255,c=e.b/255,u=Math.max(i,s,c),l=u-Math.min(i,s,c),d=function(e){return(u-e)/6/l+.5};return 0===l?o=a=0:(a=l/u,t=d(i),r=d(s),n=d(c),i===u?o=n-r:s===u?o=1/3+t-n:c===u&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),{h:Math.round(360*o),s:Math.round(100*a),v:Math.round(100*u)}},t.rgb2SolidColor=function(t){return e.SolidColor.decodeJson({red:t.red/255,green:t.green/255,blue:t.blue/255,alpha:t&&t.hasOwnProperty&&t.hasOwnProperty("alpha")?t.alpha:1})},t.solidColor2Rgba=function(e){return e?{r:Math.floor(255*e.red),g:Math.floor(255*e.green),b:Math.floor(255*e.blue),a:e.alpha}:e},t.solidColor2TheoColor=function(t,r,n){return e.TheoColor.init_5344(t,r,n)},t.rgb2ValidCSSValues=function(e){return{red:Math.round(e.red),green:Math.round(e.green),blue:Math.round(e.blue),alpha:e.alpha||1}},t.toCSS=function(e){if(!e)return"#000000";if(void 0!==e.red||void 0!==e.r){var r=void 0!==e.red?e.red:e.r,n=void 0!==e.green?e.green:e.g,o=void 0!==e.blue?e.blue:e.b,a=void 0!==e.alpha?e.alpha:e.a,i=t.rgb2ValidCSSValues({red:r,green:n,blue:o,alpha:a});return"rgba("+i.red+","+i.green+","+i.blue+","+(void 0===a?1:a)+")"}return"string"==typeof e&&6===e.length?"#"+e:"#000000"},t.darken=function(e,t){var r=t/100;return e.r=e.r-e.r*r,e.g=e.g-e.g*r,e.b=e.b-e.b*r,e},t.lighten=function(e,t){var r=t/100;return e.r=e.r+(255-e.r)*r,e.g=e.g+(255-e.g)*r,e.b=e.b+(255-e.b)*r,e},t.mixRgb=function(e,t,r){r=0===r?0:r||50,e.a=e.a||1,t.a=t.a||1;var n,o=r/100,a=2*o-1,i=t.a-e.a,s=1-(n=((n=a*i==-1?a:(a+i)/(1+a*i))+1)/2);return{r:Math.floor(t.r*n+e.r*s),g:Math.floor(t.g*n+e.g*s),b:Math.floor(t.b*n+e.b*s),a:t.a*o+e.a*(1-o)}};var o=function(e,t){return 255-(255-e)*(255-t)/255};return t.blendRgb=function(e,t){return{r:o(e.r,t.r),g:o(e.g,t.g),b:o(e.b,t.b)}},t}.apply(t,n))||(e.exports=o)},U44B:function(e,t,r){var n,o;n=[r("xeH2"),r("YLtl"),r("UFvF"),r("e46Y"),r("Uwho"),r("UzQk"),r("oWUw"),r("O0ct"),r("4dd5"),r("TdwW"),r("vOKO"),r("bBG2"),r("4tSb"),r("T6kn"),r("MGCh"),r("a8ov"),r("N16J"),r("o03S"),r("bnn1"),r("7z7j"),r("Oll2"),r("BmlF"),r("ZVDg"),r("h4Rv"),r("A+mC"),r("pqGD"),r("UNXS"),r("V11p"),r("e733"),r("hbJq"),r("gSEU"),r("kipm"),r("3xm6"),r("mS02")],void 0===(o=function(e,t,n,o,a,i,s,c,u,l,d,h,p,g,f,m,v,y,b,w,C,x,F,T,S,k,I,A,E,R,P,N,D,M){var L,U,B,_,O=m.default,H=h.default,j=i.Host,K=new u,W=f.channel("host"),X=f.channel("core");i.$C.setLog(X);var G,V=0,Y=(new Date).getTime();function q(){try{throw new Error}catch(e){return e.stack}}j.setCoreWrapper=function(e){return j.network.setCoreWrapper(e),U=e},j.setFeatureController=function(e){return L=e},j.isFeatureEnabled=function(e,t){return L?!!L.featureEnabled(e):!!t},j.setPosterView=function(e){return B=e},j.setAuthoringContext=function(e){return _=e},j.logging={newLog:e=>{const t=f.channel(e);return new i.CoreLog(e,{info:(e,r)=>{t.info(r)},warning:(e,r)=>{t.warn(r)},error:(e,r,n,o,a)=>{if(!i.CoreAssert.disableAssertionFailuresForTestingPurposesOnly){const e=o.split("/").pop();t.error("".concat(r," ").concat(e,":").concat(a,":").concat(n))}}})},info:X.info.bind(X),error:X.error.bind(X),warning:X.warn.bind(X),assertFailure:function(e){V<500&&("not expecting NaN as a coordinate value"===e?this.error("ASSERT FAILED: "+e,{stack:q()}):this.error("ASSERT FAILED: "+e),V++)},beginTrace:function(e){X.info("beginTrace: ".concat(e))},endTrace:function(){X.info("endTrace")},timeStamp:function(){return(new Date).toISOString()},getCurrentTime:function(){return Date.now()/1e3},platformID:function(){return"web"},additionalPlatformInfo:function(){return s.name+" "+s.fullVersion},getObjectClassNameForSingletonTracking:function(e){return e&&e.constructor&&e.constructor.name?e.constructor.name:"??"},logToAnalytics:function(e,t){H.publish(e,t)},logToNewRelic:function(e,t){o&&o.addPageAction("".concat("post_web_").concat(e),t)}},j.persistUtils=new S.HostPersistUtilsImpl,j.resourceUtils=new k.HostResourceUtilsImpl,j.network=new I.HostNetworkImpl,j.dataFactory=new P.HostDataFactoryImpl,j.featureFlags={isPremiumThemesUnlocked:function(){return!0}};var z,J,Q,Z,$,ee,te,re,ne=[];function oe(e,t){this.corePromise=e,this.timeout=t,this.message="ASYNC_TEST_CASE"}return j.pathUtils={cacheArtworkForURL:function(e,t){return ne.length>10&&ne.pop(),ne.splice(0,0,{url:e,artwork:t}),t},artworkFromURL:function(e,t){var r=ne.find(t=>t.url===e);if(r)return ne.splice(ne.indexOf(r),1),ne.splice(0,0,r),r.artwork;var n=new XMLHttpRequest;n.open("GET",e,!1),n.send();try{var o=i.SVGParserUtils.theoArtworkFromSVGData(n.responseText,t);return o?(this.cacheArtworkForURL(e,o),o):(i.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(e)),null)}catch(t){return i.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(e)),null}},parseSVGXMLData:function(e,t){var r=new DOMParser,n=r.parseFromString(e,"text/xml");n.rootElement||(n=r.parseFromString(e,"image/svg+xml")),function e(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}t.beginElement(n,o);var s=r.textContent;s&&t.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&e(r.childNodes[c]);t.endElement(n)}(n.rootElement)},parseStringToDouble:function(e){const t=parseFloat(e);return isNaN(t)&&i.CoreAssert.fail("parsing string ".concat(e," resulted in NaN")),t},matchesForRegexInString:function(e,t){var r=new RegExp(e,"g");return t.match(r)||[]},firstMatchForRegexInString:function(e,t){var r=new RegExp(e,"g").exec(t);return r?r[0]:""},absolutePathFromURL:function(e){return e},lastPathComponentFromURL:function(e){const t=e.split("/");return t[t.length-1]}},j.learning={statics:{cache:{}},loadLayoutSuggestionModel:function(){var e=p,t=new i.TheoMatrix([e.featureScalingMean]),r=new i.TheoMatrix([e.featureScalingStd]),n=e.labels,o=[];for(var a in e.layoutModels)if(e.layoutModels.hasOwnProperty(a)){var s=e.layoutModels[a],c=s.range,u=new i.TheoMatrix(s.coef),l=new i.TheoMatrix([s.intercept]);o.push(new i.RangedLayoutLinearModel(c[0],c[1],u,l))}return new i.LayoutSuggestionsLinearModel(t,r,n,o)},loadNNJSON:function(e){var t;return"Font"===e?t=v:"Shape"===e?t=y:"TextRole"===e?t=b:"ShapeRole"===e?t=w:"VisualGrouping"===e&&(t=C),t},loadFontSuggestionLinearModel:function(){},updateFontSuggestionLinearModel:function(e){},updateFontSuggestionNNModel:function(e){},loadSuggestionNNModel:function(){return null}},j.fontProvider=(z=new i.FontDescriptor(c.getDefaultFont()),J=new i.OrderedFontSet,Q=new i.OrderedFontSet,{loadOneFont:function(e){W.assert(!!e,"Invalid fontData."),J.find((function(t){return t.postScriptName===e.postScriptName}))&&W.info("Font is already loaded.",{font:e.postScriptName});var t=new i.FontDescriptor(e);t.availability=i.FontAvailability.LOADED,J.append(t),(!0===e.isPublic||L.featureEnabled("post-new-fonts"))&&Q.append(t)},descriptorForPostScriptName:function(e,t){var r=J.find((function(t){return t.postScriptName===e}));return r||(e===z.postScriptName?z:j.textModelUtils.defaultFont())},getIncludedFonts:function(e){return J},getSuggestableFonts:function(e){return Q},loadFont:function(e,t,r){},refreshBrandkitFonts:()=>{},registerBrandFonts:()=>{}}),j.textModelUtils=(Z=j.fontProvider,$=document.createElement("canvas").getContext("2d"),{defaultColor:function(){return i.SolidColor.BLACK},defaultFont:function(){return Z.descriptorForPostScriptName("SourceSansPro-Black")},defaultFontSize:function(){return 12},measureInkBounds:function(e,t,r){if("\n"===e)return i.TheoRect.Zero;var n=c.getFontData(t.postScriptName)||this.defaultFont();$.font=(n.style||"")+" "+(n.weight||"normal")+" "+r+"px "+(n.cssName||n.family);var o=$.measureText(e).width,a=r*n.capRatio;return new i.TheoRect(0,0,o,a)},measureInkBoundsWithTracking:function(e,t,r,n){if("\n"===e)return i.TheoRect.Zero;var o=c.getFontData(t.postScriptName)||this.defaultFont();$.font=(o.style||"")+" "+(o.weight||"normal")+" "+r+"px "+(o.cssName||o.family);var a=$.measureText(e).width,s=e.length-1;"‫"===e.charAt(0)&&(s-=1),a+=s*n*r;var u=r*o.capRatio;return new i.TheoRect(0,0,a,u)},getGlyphPositions:function(e,t,r){var n=c.getFontData(t.postScriptName)||this.defaultFont();$.font=(n.style||"")+" "+(n.weight||"normal")+" "+r+"px "+(n.cssName||n.family);for(var o=$.measureText(e).width,a=e,i=[0],s=0;s<e.length;s++){a=a.substr(1);var u=o-$.measureText(a).width;i.push(u)}return i},fontHasClockwiseOutlines:function(e){return!0},textOutlines:function(){return null},rewindPath:function(e){return null},useOutlinesForKnockouts:function(e){return!1},usePGMRenderer:function(e){return!0},measureBaselineBounds:function(e,t,r,n){return this.measureInkBoundsWithTracking(e,t,r,n)},calcFontMetrics:function(e,t,r){const n=document.createElement("canvas");document.body.appendChild(n);const o=n.getContext("2d"),a=r.font,s=r.fontSize,u=c.getFontData(a.postScriptName);o.font="".concat(u.style||""," ").concat(u.weight||"normal"," ").concat(s,"px ").concat(u.cssName||u.family),n.style.font=o.font;const l=o.measureTextMetrics(e),d=o.measureText(i.AutoTextLayoutStrategy.SPACER_CHAR).width,h=o.measureTextMetrics("acemnorsuvwxz").ascent,p=o.measureTextMetrics("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");return n.parentNode.removeChild(n),new i.TextToken(e,t,new i.TheoRect(0,0,l.width,l.height),l.ascent-h/2,d,l.ascent,l.descent,1.2*p.height,l.ascent-s*(u.capRatio-u.baselineOffsetRatio),0)},isTextRightToLeft:function(e){return!1},splitOnWhiteSpace:function(e){for(var t=e.split(" "),r=[],n=0,o=0;o<t.length;o++){var a=t[o];if(0!==a.length){for(var i,s=e.indexOf(a),c=/\r|\n/g,u=-1,l=-1;null!=(i=c.exec(a));)u>-1?i.index!==l&&(r.push({start:s+n+u,length:l-u}),r.push({start:s+n+l,length:i.index-l}),u=i.index):(u=i.index)>0&&r.push({start:s+n,length:u}),l=c.lastIndex;u>-1?(r.push({start:s+u+n,length:l-u}),l<a.length&&r.push({start:s+l+n,length:a.length-l})):r.push({start:s+n,length:a.length}),n+=s+a.length,e=e.substr(s+a.length)}}return r},getWordClassRanges:function(){return[]}}),j.imageAnalysis=(ee={},te=!1,(re=function(e,t,r){this.url=e,this.origUrl=r,this.isLoaded=!1,this.containsAlpha=t,this.uploadImgWidth=176,this.uploadImgHeight=176,this.img=null,this.image_scale_x_ratio=0,this.image_scale_y_ratio=0,this.saliencyImage=null,this.saliencyIntegral=[],this.saliencyLoaded=!1,this.imageIntegral=null,this.trimmedBounds=null,e&&(this.imageLoadedPromise=d.load(e).then(function(e){if(this.img=e,this.image_scale_x_ratio=e.width/this.uploadImgWidth,this.image_scale_y_ratio=e.height/this.uploadImgHeight,e instanceof HTMLImageElement){var t=this.getRGBAIntegralImageAndTrimmedBounds(e,this.uploadImgWidth,this.uploadImgHeight);this.imageIntegral=t.imageIntegral,this.trimmedBounds=t.trimmedBounds}this.focus=null,this.isLoaded=!0}.bind(this)))})._implements=e=>"HostImage"===e,re.prototype.computeSaliency=function(){if(te){const e={saliency:{boundingBoxRectangles:[]}};n.all([this.setFocusRegion(e.saliency.boundingBoxRectangles),this.setSaliencyImage(e.saliency.mask)]).finally(function(){this.saliencyLoaded=!0}.bind(this))}else void 0===this.saliencyLoadedPromise&&void 0!==this.imageLoadedPromise&&(this.saliencyLoadedPromise=this.imageLoadedPromise.then(function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.uploadImgWidth,e.height=this.uploadImgHeight,t.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.uploadImgWidth,this.uploadImgHeight);var r=e.toDataURL("image/png").replace("data:image/png;base64,",""),o=j.resourceUtils.makeGUID();return g.getBoundingBoxAndMask(r,o).timeout(5e3,"SALIENCY_TIMEOUT").catch((function(e){return"SALIENCY_TIMEOUT"===e.message?W.warn("Saliency.getBoundingBoxAndMask Timed out in 5000ms",{requestId:o}):W.warn("Saliency.getBoundingBoxAndMask error:",{err:e,requestId:o}),{saliency:{boundingBoxRectangles:[]}}})).then(function(e){return n.all([this.setFocusRegion(e.saliency.boundingBoxRectangles),this.setSaliencyImage(e.saliency.mask)])}.bind(this)).finally(function(){this.saliencyLoaded=!0}.bind(this))}.bind(this)))},re.prototype.getBoxAverage=function(e,t){Number.isInteger(e.minX)&&Number.isInteger(e.minY)&&Number.isInteger(e.maxX)&&Number.isInteger(e.maxY)||(e.minX=Math.round(e.minX),e.minY=Math.round(e.minY),e.maxX=Math.round(e.maxX),e.maxY=Math.round(e.maxY));var r=this.saliencyIntegral[0].length,n=this.saliencyIntegral.length;if(e.minX>r-2||e.minY>n-2)return 0;e.maxX>=r&&(e.maxX=r-1),e.maxY>=n&&(e.maxY=n-1);var o=(e.maxX-e.minX)*(e.maxY-e.minY),a=this.saliencyIntegral[e.minY][e.minX],i=this.saliencyIntegral[e.minY][e.maxX],s=this.saliencyIntegral[e.maxY][e.minX],c=[this.saliencyIntegral[e.maxY][e.maxX]-s-i+a];return t?c[0]/o:c[0]/255/o},re.prototype.getIntegralImage=function(e,t,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=r,o.drawImage(e,0,0,e.width,e.height,0,0,t,r);var a=[];function i(e,t,r,n,o){var a=r*t+n,i=e[a-t]||0,s=e[a-1]||0,c=e[a-t-1]||0;a%t==0&&(s=0,c=0);var u=i+s+o-c;e[a]=u}!function(e,t,r,n){if(arguments.length<4)throw new Error("You should specify one output array: sum");for(var o=0;o<r;o++)for(var a=0;a<t;a++){var s=e[o*t*4+4*a];n&&i(n,t,o,a,s)}}(o.getImageData(0,0,t,r).data,t,r,a);for(var s=[],c=0;c<r;c++){s[c]=[];for(var u=0;u<t;u++){var l=c*t+u;s[c][u]=a[l]}}return s},re.prototype.getRGBAIntegralImageAndTrimmedBounds=function(e,t,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=r,o.drawImage(e,0,0,e.width,e.height,0,0,t,r);for(var a=o.getImageData(0,0,t,r).data,s=[],c=t,u=0,l=r,d=0,h=0;h<t;h++)for(var p=0;p<r;p++)for(var g=0;g<4;g++){var f=h>0&&p>0?s[(p-1)*t*4+4*(h-1)+g]:0,m=p>0?s[(p-1)*t*4+4*h+g]:0,v=h>0?s[p*t*4+4*(h-1)+g]:0,y=a[p*t*4+4*h+g];s[p*t*4+4*h+g]=y+m+v-f,y>20&&g<3&&(c=Math.min(c,h),u=Math.max(u,h),l=Math.min(l,p),d=Math.max(d,p))}var b=null;return c<u&&l<d&&(b=i.TheoRect.fromXYXY(Math.round(c*this.image_scale_x_ratio),l*this.image_scale_y_ratio,u*this.image_scale_x_ratio,d*this.image_scale_y_ratio).rounded()),{imageAverages:s,trimmedBounds:b}},re.prototype.convertBase64ToImageElement=function(e,t){for(var r=n.defer(),o=atob(e),a=o.length,i=Math.ceil(a/1024),s=[],c=0;c<i;++c){for(var u=1024*c,l=Math.min(u+1024,a),d=[],h=u;h<l;++h)d.push(o[h].charCodeAt(0));s.push(new Uint8Array(d))}var p=new Blob(s,{type:t||""}),g=(window.URL||window.webkitURL).createObjectURL(p),f=new Image;return f.src=g,f.onload=function(){r.resolve(f)},f.onerror=function(e){r.reject(e)},r.promise},re.prototype.setFocusRegion=function(e){if(e&&e.length>0){var t=e[0];this.focus=i.TheoRect.fromXYWH(t.x/this.uploadImgWidth,t.y/this.uploadImgHeight,t.width/this.uploadImgWidth,t.height/this.uploadImgHeight)}else{W.warn("Did not find a salient region. Using fallback focus.");var r=this.uploadImgWidth*this.image_scale_x_ratio,n=this.uploadImgHeight*this.image_scale_y_ratio;this.focus=r>n?i.TheoRect.fromXYWH((r-n)/2/r,0,n/r,1):i.TheoRect.fromXYWH(0,(n-r)/2/n,1,r/n)}},re.prototype.setSaliencyImage=function(e){return e&&""!==e?this.convertBase64ToImageElement(e,"image/png").then(function(e){this.saliencyImage=e,this.saliencyIntegral=this.getIntegralImage(e,e.width,e.height)}.bind(this)):n.resolve()},re.prototype.loaded=function(e){return this.isLoaded},re.prototype.whenLoaded=function(e){this.isLoaded?e():this.imageLoadedPromise&&this.imageLoadedPromise.then(function(){!1===this.isLoaded&&W.error("ERROR: imageLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},re.prototype.whenAsyncFeaturesLoaded=function(e){this.saliencyLoaded?e():void 0===this.saliencyLoadedPromise?this.computeSaliency():this.saliencyLoadedPromise.then(function(){!1===this.saliencyLoaded&&W.error("ERROR: saliencyLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},re.prototype.getFocus=function(){return this.focus},re.prototype.getTrimmedBounds=function(){return this.trimmedBounds},re.prototype.getWidth=function(){return this.img?this.img.width:0},re.prototype.getHeight=function(){return this.img?this.img.height:0},re.prototype.getUrl=function(){return this.url},re.prototype.getImageLoadedPromise=function(){return this.imageLoadedPromise},re.prototype.getSaliencyLoadedPromise=function(){return this.saliencyLoadedPromise},re.prototype.getSaliencyData=function(e,t){if(null!=this.saliencyImage){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=e,r.height=t,n.drawImage(this.saliencyImage,0,0,this.saliencyImage.width,this.saliencyImage.height,0,0,e,t);for(var o=n.getImageData(0,0,e,t).data,a=[],i=0;i<o.length;i+=4)a.push(o[i]);return a}return[]},re.prototype.getEdgeData=function(e,t){return[]},re.prototype.getImageRepresentationData=function(e,t){if(this.img){const o=t>0?t/Math.max(t,this.img.width,this.img.height):1,a=this.img.width*o,s=this.img.height*o;var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=a,r.height=s,n.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,a,s),new i.CorePromise(t=>{r.toBlob((function(r){t(new A.HostDataImpl(r,e))}),e)})}return i.CorePromise.resolve(null)},re.prototype.getStoragePath=function(e){const t=e.document.parent;return t?"assets/adobe-theo/".concat(t.id,"/").concat(e.id):null},re.prototype.hasAlpha=function(){return this.containsAlpha},re.prototype.getImageColorData=function(e){return[]},re.prototype.getImageColors=function(e){if(!this.img||!this.img.src)return[i.SolidColor.BLACK,i.SolidColor.WHITE];var t;try{t=K.getPalette(this.img,e)}catch(e){return W.error("Failed to get image colors using ColorThief: ".concat(e)),[i.SolidColor.BLACK,i.SolidColor.WHITE]}return t.map((function(e){return l.hex2SolidColor(l.rgb2hex({r:e[0],g:e[1],b:e[2]}))}))},re.prototype.getAverageEdge=function(e){if(e.maxX-e.minX<=0||e.maxY-e.minY<=0)return 0;var t=e.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);return this.saliencyIntegral.length>0?this.getBoxAverage(t,!1):0},re.prototype.getFilterColor=function(e,t){return i.SolidColor.BLACK},re.prototype.getAverageColorBackup=function(e,t){if(!B)return i.SolidColor.BLACK;if(U){var r=U.getImageFormaForURL(this.origUrl);if(r){for(var n=r.totalPlacement,o=e.transform(n),a=[o.evalXY(.1,.1),o.evalXY(.1,.9),o.evalXY(.3,.3),o.evalXY(.3,.7),o.evalXY(.5,.5),o.evalXY(.7,.3),o.evalXY(.7,.7),o.evalXY(.9,.9),o.evalXY(.9,.1)],s=0,c=0,u=0,l=0,d=0,h=a.length-1;h>=0;h--){var p=a[h],g=B.getImageColorAtPoint(p);g&&g.a>0&&(s++,c+=g.r/255,u+=g.g/255,l+=g.b/255,d+=g.a)}return s<=0?i.SolidColor.BLACK:new i.SolidColor(c/s,u/s,l/s,d/s)}}},re.prototype.getAverageColor=function(e,t){if(this.imageIntegral){var r=e.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);const g=this.uploadImgWidth,f=this.uploadImgHeight;var n=Math.round(Math.min(Math.max(r.minY,0),f-1)),o=Math.round(Math.max(Math.min(r.maxY,f-1),0)),a=Math.round(Math.min(Math.max(r.minX,0),g-1)),s=Math.round(Math.max(Math.min(r.maxX,g-1),0));if(n===o&&(o+1<=f?o+=1:n-1>=0&&(n-=1)),a===s&&(s+1<=g?s+=1:a-1>=0&&(a-=1)),a>=s||n>=o||n<0||a<0||s>=g||o>=f)return this.getAverageColorBackup(e,t);for(var c=[],u=0;u<4;u++){const e=this.imageIntegral[n*g*4+4*a+u],t=this.imageIntegral[n*g*4+4*s+u],r=this.imageIntegral[o*g*4+4*a+u],i=this.imageIntegral[o*g*4+4*s+u];c[u]=i+e-t-r}var l=Math.min(Math.max(c[0]/c[3],0),1),d=Math.min(Math.max(c[1]/c[3],0),1),h=Math.min(Math.max(c[2]/c[3],0),1),p=1;return 0===c[3]&&(p=0,l=0,d=0,h=0),new i.SolidColor(l,d,h,p)}return this.getAverageColorBackup(e,t)},re.prototype.getFaceIntersections=function(e){return[]},{updateHostImageCacheKey:function(e,t){void 0!==ee[e]&&(ee[t]=ee[e],delete ee[e])},createHostImage:function(e,t,r){var n=O.decodeUrl(e);if(void 0!==ee[n])return ee[n];var o=new re(n,t,e);return ee[n]=o,r&&o.computeSaliency(),o},setShapeFormaTransparencyMask:function(e,t){if("Shape"!==e.kind)return null;var r=document.createElement("canvas"),n=r.getContext("2d"),o=e.page.document.beginTransaction("calculateTransparencyMask");e.style.colors.setColor(i.ColorRole.FieldPrimary,i.SolidColor.WHITE);var a=t/(e.bounds.aspectRatio>1?e.bounds.width:e.bounds.height);e.parent.placement=i.Matrix2D.Identity,e.placement=i.Matrix2D.scalingXY(a,a),e.move(i.Matrix2D.translationXY(-e.finalFrame.origin.x,-e.finalFrame.origin.y));var s=Math.round(e.frame.width),c=Math.round(e.frame.height);r.width=s,r.height=c,new x({documentSize:{width:s,height:c},renderScale:1,data:{forma:e,formaID:e.formaID,isImageBackgroundShape:!1,type:"shape"}}).renderInto(n,1,1,null);for(var u=n.getImageData(0,0,s,c).data,l=[],d=3;d<u.length;d+=4)l.push(u[d]/255);o.rollback(),e.maskImage=i.TheoMatrix.createMatrixFromList(l,s,c)},getSaliencyAPIEndpoint:function(){const e=a.saliencyServiceEndpoint||"";return i.CorePromise.resolve(e)},getSaliencyAPIKey:function(){const e=a.cid||"";return i.CorePromise.resolve(e)},setRunningActionTests:function(e){te=e}}),j.brandkitManager={brandkitForDocument:()=>_,brandkitForElement:function(){return this.fakeBrandkitForElementsForTesting?this.fakeBrandkitForElementsForTesting:_},authoringContextManager:{authoringContext:()=>_},isBrandkitEnabled:!0,activateBrand:e=>{i.MultiBrandFacade.setActiveBrandkitID(e),U&&U.handleCurrentBrandChanged(e)},getFilePathForEncodedURL:()=>{},sendDefaultBrandChangedNotification:()=>{},sendActiveBrandChangedNotification:()=>{}},j.async={startTimer:function(e,t){var r=setTimeout(t,1e3*e);return{cancel:function(){clearTimeout(r)}}},postOnMainThread:function(e,t){setTimeout(t,1e3*e)},postOnWorkerThread:function(e,t){setTimeout(t,0)},getSystemUptimeInSeconds:function(){return((new Date).getTime()-Y)/1e3},newLock:function(){return{runInLock:function(e){e()}}}},j.factories={constructDocumentStateManager:function(e){return e.database}},j.platform={isWeb:!0,isIOS:!1,isAndroid:!1,isDesktop:!0,isMobile:!1,isService:!1},j.exception=new R.HostExceptionImpl,j.testing={urlForTestAsset:function(e){return e},throwAsyncTestCase:function(e,t){throw new oe(e,t)},setNetworkMock:function(e){j.network=e,e.setCoreWrapper||(e.setCoreWrapper=e=>{})}},j.actionTesting=function(){function t(e){return"https://s3.amazonaws.com/post-renderer-prototype/ActionTestMediaAssets/"+function(e){return e.substring(e.lastIndexOf("/")+1)}(e)}return{urlForAsset:function(e){return t(e)},imageDataForAsset:function(e){var r=e.substring(e.lastIndexOf(".")),n=t(e);return".jpg"===r||".jpeg"===r||".png"===r?d.load(n).then(e=>new i.ActionTestImageData(t(e.src),e.width,e.height)).catch(()=>null):null},templateForDocument:function(t){var r=n.defer(),o={aspectRatio:U.getPageAspectRatio(),wordCount:U.getLockupWordCount(),iconCount:U.getIconCount(),imageCount:U.getPotentialBackgroundImageCount()};return e.get("/api/post/v1/designthemes?aspectRatio="+o.aspectRatio+"&wordCount="+o.wordCount.join(",")+"&iconCount="+o.iconCount+"&imageCount="+o.imageCount).done((function(t){var n=t.items[0];e.get(n.manifestUrl,(function(e){U.getTemporaryDocumentWithFontsLoaded(e).then((function(e){r.resolve(e)}))}))})),r.promise},writeJsonToFile:function(e,t){}}}(),j.crypto=new E.HostCryptoImpl,j.schema=function(){var e=/^\.\/schemata\/([0-9]*)\/(.*)\.json/,t={},n={},o={},a={},s=[];function c(e){for(var t=s.length-1;t>=0;t--)if(s[t]<=e)return s[t];return s[0]}function u(e){const n=c(e).toString();var o={};for(var a in t[n])if(t[n].hasOwnProperty(a)){var i=a+".json";o[i]=r("cyUI")("./"+n+"/"+i)}return o}i.$Resources.schema.forEach((function(r){var n=r.path.match(e);if(n&&3===n.length){var o=r.path.replace("./","./js/"),a=n[1],i=n[2];t[a]||(t[a]={},s.push(parseInt(a,10))),t[a][i]=o}})),s.sort((function(e,t){return e-t}));var l=s[s.length-1];for(var d in n[l]=u(l),n[l])if(n[l].hasOwnProperty(d))for(var h in n[l][d].definitions)n[l][d].definitions.hasOwnProperty(h)&&(o[h]=d,a[h]=n[l][d].definitions[h]);return{rootFile:"Root.json",getRoot(e){var t=c(e);return n[t.toString()]||(n[t]=u(t)),n[t.toString()]["Root.json"]},getFiles(e){var t=c(e);return n[t.toString()]||(n[t]=u(t)),n[t.toString()]},matches:(e,t)=>new RegExp(t).test(e)}}(),j.locale={getDecimalSeparator:function(){if(!G||""===G){const t=D.sparkSelectedLocale;var e=1.1.toLocaleString(t).replace(/[0-9]+/g,"");e&&""!==e||(e="."),G=e}return G},formatNumber:function(e,t){var r=i.$C.toString("%."+t+"f",e);const n=this.getDecimalSeparator();return(r=r.replace(".",n)).includes(n)&&(r=r.replace(/0+$/,"")),r.endsWith(n)&&(r=r.substr(0,r.length-1)),r},convertStringToNumber:function(e){const t=this.getDecimalSeparator();var r=e.replace(t,".");return parseFloat(r)}},j.videoUtils=new N.HostVideoUtilsImpl,j.initialized(),j}.apply(t,n))||(e.exports=o)},UNXS:function(e,t,r){"use strict";r.r(t),r.d(t,"HostNetworkImpl",(function(){return g}));var n=r("UzQk"),o=r("YLtl"),a=r.n(o),i=r("UFvF"),s=r.n(i),c=r("ApVh"),u=r("V11p"),l=r("e733"),d=r("ZLL8"),h=r.n(d);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g{constructor(){p(this,"_crypto",void 0),p(this,"_coreWrapper",void 0),this._crypto=new l.HostCryptoImpl,this._coreWrapper=null}setCoreWrapper(e){this._coreWrapper=e}request(e){const t=s.a.defer();navigator.onLine||t.reject(new n.HostNetworkError(n.HostNetworkErrorType.NoInternetConnection,null,n.ErrorMessageConstants.kNoNetworkConnection,null));const r=this,o=new Map([[n.HostNetworkRequestMethod.post,"POST"],[n.HostNetworkRequestMethod.put,"PUT"],[n.HostNetworkRequestMethod.patch,"PATCH"],[n.HostNetworkRequestMethod.head,"HEAD"],[n.HostNetworkRequestMethod.get,"GET"],[n.HostNetworkRequestMethod.delete,"DELETE"]]),i=new XMLHttpRequest;if(n.CoreAssert.isTrue(o.has(e.method),"Sorry, HostNetwork does not support ".concat(e.method," yet")),i.open(o.get(e.method)||"GET",e.url,!0),a.a.forEach(e.headers,(e,t)=>i.setRequestHeader(t,e)),i.responseType="blob",i.timeout=1e3*e.timeout,i.onload=function(){let e=null;const o=this.getAllResponseHeaders();if(o&&(e=o.trim().split(/[\r\n]+/).reduce((e,t)=>{const[r,...n]=t.split(":");return e[r.trim().toLowerCase()]=n.join(":").trim(),e},{})),this.status>=400)return void t.reject(r.generateErrorResponse(this.status,e));const a=e&&e["content-type"]||"text/html; charset=utf-8",i=new u.HostDataImpl(this.response,a),[s,c]=a.split(/;\s*/g),l=c?c.replace("charset=",""):null;t.resolve(new n.HostNetworkResponse(this.status,s,l,i,e))},i.onerror=e=>{t.reject(new n.HostNetworkError(n.HostNetworkErrorType.Unknown,null,n.ErrorMessageConstants.kUnknownError,null))},i.ontimeout=()=>{t.reject(new n.HostNetworkError(n.HostNetworkErrorType.Timeout,null,n.ErrorMessageConstants.kRequestTimedout,null))},e.method===n.HostNetworkRequestMethod.post||e.method===n.HostNetworkRequestMethod.put||e.method===n.HostNetworkRequestMethod.patch){const t=e.data;t instanceof u.HostDataImpl?i.send(t.data):t instanceof u.HostFormDataImpl?i.send(t.data):t instanceof u.HostStringDataImpl?i.send(t.data):(n.CoreAssert.fail("POST request with unknown data type"),i.send())}else i.send();return new n.CorePromise((e,r)=>{t.promise.then(t=>e(t)).catch(e=>r(e))})}generateErrorResponse(e,t){switch(!0){case 401===e:return new n.HostNetworkError(n.HostNetworkErrorType.Authorization,e,"".concat(e,": ").concat(n.ErrorMessageConstants.kAuthError),t);case 403===e:case 404===e:return new n.HostNetworkError(n.HostNetworkErrorType.NotFound,e,"".concat(e,": ").concat(n.ErrorMessageConstants.kServiceNotFound),t);case e>=500&&e<=520:return new n.HostNetworkError(n.HostNetworkErrorType.ServiceUnavailable,e,"".concat(e,": ").concat(n.ErrorMessageConstants.kServiceUnavailableError),t);default:return new n.HostNetworkError(n.HostNetworkErrorType.Unknown,e,n.ErrorMessageConstants.kUnknownError,t)}}getAuthToken(){return new n.CorePromise((e,t)=>{c.getAccessToken().then(t=>e(t)).catch(e=>t(e))})}async getArrayBufferFrom(e){const t=s.a.defer(),r=new FileReader;return r.onload=()=>{t.resolve(r.result)},r.readAsArrayBuffer(e),t.promise}saveImageComponent(e,t){const{data:r}=e;if(!this._coreWrapper)return n.CoreAssert.isTrue(null!=this._coreWrapper,"Invalid core instance."),n.CorePromise.reject(new Error("Invalid core instance."));const o=this._coreWrapper.saveImageComponent(r,t),a=Promise.all([o,this.getArrayBufferFrom(r)]).then(e=>{const[{component:r,encodedUrl:o},a]=e,{id:i}=r,s=i,c=this._crypto.md5((new TextDecoder).decode(a));return new n.HostComponentResponse(o,i,s,t||"",c,"")});return h.a.toCorePromise(a)}}},V11p:function(e,t,r){"use strict";r.r(t),r.d(t,"HostDataImpl",(function(){return a})),r.d(t,"HostFormDataImpl",(function(){return i})),r.d(t,"HostStringDataImpl",(function(){return s}));var n=r("UzQk");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{static _implements(e){return"HostDataProtocol"===e}constructor(e,t){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=e,this._contentType=t}get data(){return this._data}get contentType(){return this._contentType}getLength(){return this.data.size}asUTF8String(){return new n.CorePromise((e,t)=>{const r=new FileReader;r.addEventListener("loadend",()=>{e(String(r.result))}),r.addEventListener("error",()=>{t("Failed returning data as UTF-8 string.")}),r.readAsText(this._data,"utf-8")})}asJSON(){return this.asUTF8String().then(e=>{try{return JSON.parse(e)}catch(e){return n.CorePromise.reject("Failed parsing contents as JSON.")}})}}class i{static _implements(e){return"HostDataProtocol"===e}constructor(e,t){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=e,this._contentType=t}get data(){return this._data}get contentType(){return this._contentType}getLength(){return n.CoreAssert.fail("HostFormDataImpl does not support getLength"),0}asUTF8String(){return n.CorePromise.reject("HostFormDataImpl does not support asUTF8String")}asJSON(){return n.CorePromise.reject("HostFormDataImpl does not support asJSON")}}class s{static _implements(e){return"HostDataProtocol"===e}constructor(e,t){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=e,this._contentType=t}get data(){return this._data}get contentType(){return this._contentType}getLength(){return this._data.length}asUTF8String(){return n.CorePromise.resolve(this._data)}asJSON(){try{return n.CorePromise.resolve(JSON.parse(this._data))}catch(e){return n.CorePromise.reject("Failed parsing contents as JSON.")}}}},ZLL8:function(e,t,r){var n,o;n=[r("YLtl"),r("UFvF"),r("UzQk")],void 0===(o=function(e,t,r){var n={doSerial:function(e){var r=[];return e.forEach((function(e){t.isPromise(e)?r.push((function(){return t.promise((function(t){e.then(t)}))})):r.push(e)})),r.reduce(t.when,t([]))},delay:function(r){var n=[].slice.apply(arguments);n.shift();var o=t.defer();return e.delay((function(){o.resolve.apply(o,n)}),r),o.promise},delayThen:function(r){return function(){var n=[].slice.apply(arguments),o=t.defer();return e.delay((function(){o.resolve.apply(o,n)}),r),o.promise}},toCorePromise:function(e){return new r.CorePromise((t,r)=>{e.then(e=>t(e)).catch(e=>r(e))})},fromCorePromise:function(e){return new Promise((t,r)=>{e.then(e=>t(e)).catch(e=>r(e))})}};return n}.apply(t,n))||(e.exports=o)},a65H:function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,acName:e.acName,url:e.url,fullResUrl:e.fullResUrl,pixelWidth:e.pixelWidth,pixelHeight:e.pixelHeight,mimeType:e.mimeType,getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},a8ov:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r("UzQk");var o=r("+Ltv");const a={COMPONENT:"component:",CP:"cp:",AUTHORING_CONTEXT:"ac:"};class i{static getCCUrl(e,t,r,n,a){var i="/image_assets/".concat(e,"/").concat(t,"/?asset_id=").concat(r,"&size=").concat(o.maxImageSizeFromStorage);return n&&(i+="&img_etag=".concat(n)),a&&(i+="&mime=".concat(a)),i}static getImageUrl(e,t,r){return i.getCCUrl("adobe-theo",e,t,null,r)}static getAuthoringContextUrl(e,t,r,n){return i.getCCUrl("adobe-spark-authoring-contexts",e,t,r,n)}static isEncodedComponentUrl(e){return!!e&&0===e.indexOf(a.COMPONENT)}static encodeComponentUrl(e,t,r){const n=r?"/"+r.replace("/","+"):"";return"".concat(a.COMPONENT).concat(e,"/").concat(t).concat(n)}static encodeDesignFilterComponentUrl(){return"do-not-load"}static decodeComponentUrlParameters(e){var t,r=e.substring(a.COMPONENT.length).split("/");"logo"===r[2]&&(t=!0,r.splice(2,1));var n=r.length>=3?r[2].replace("+","/"):null;return{docId:r[0],componentId:r[1],mimeType:!n&&t?"image/png":n}}static isEncodedCPUrl(e){return!!e&&0===e.indexOf(a.CP)}static encodeCPUrl(e,t){if(n.CoreAssert.isTrue(!t||0===t.indexOf("/"),"URLBuilder.encodeCPUrl: absolute path to component must begin with a slash"),0===t.indexOf("/")){let e=t.split("/");"original"!==e[1]&&(e.splice(1,0,"original"),t=e.join("/"))}return"".concat(a.CP).concat(e).concat(t)}static decodeCPUrlParameters(e){const t=e.substring(a.CP.length),r=t.split("/");return{assetID:r[0],subPath:r.slice(1).join("/"),dcxSubPath:r.slice("original"===r[1]?2:1).join("/"),path:t,parentPath:r[r.length-2]}}static encodeAuthoringContextUrl(e,t,r,n){const o=r?"/"+r:"",i=n?"/"+n.replace("/","+"):"";return"".concat(a.AUTHORING_CONTEXT).concat(e,"/").concat(t).concat(o).concat(i)}static isEncodedAuthoringContextUrl(e){return!!e&&0===e.indexOf(a.AUTHORING_CONTEXT)}static decodeAuthoringContextUrlParameters(e){var t,r=e.substring(a.AUTHORING_CONTEXT.length).split("/");"logo"===r[2]&&(t=!0,r.splice(2,1));const n=r[2]&&!!["image+","video+","audio+","font+","application+"].find(e=>r[2].startsWith(e));var o,i=r.length>=3&&!n?r[2]:null;return o=i?r.length>=4?r[3].replace("+","/"):null:r.length>=3?r[2].replace("+","/"):null,{assetId:r[0],componentId:r[1],etag:i,mimeType:!o&&t?"image/png":o}}static getCPUrl(e,t){t.length&&n.CoreAssert.isTrue(t.indexOf("original/")<0&&"/"!==t[0]);var r=i.cpServiceDomain?"host/".concat(i.cpServiceDomain,"/"):"";return"/api/post/v1/cp/".concat(r,"dcx/").concat(e,"/").concat(t)}static decodeUrl(e){if(!e)return null;if(i.isEncodedComponentUrl(e)){var t=i.decodeComponentUrlParameters(e);return i.getImageUrl(t.docId,t.componentId,t.mimeType)}if(i.isEncodedCPUrl(e)){var r=i.decodeCPUrlParameters(e);return i.getCPUrl(r.assetID,r.dcxSubPath)}if(i.isEncodedAuthoringContextUrl(e)){var n=i.decodeAuthoringContextUrlParameters(e);return i.getAuthoringContextUrl(n.assetId,n.componentId,n.etag,n.mimeType)}return e}static setCPServiceDomain(e){i.cpServiceDomain=e}}var s,c,u;u=void 0,(c="cpServiceDomain")in(s=i)?Object.defineProperty(s,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[c]=u},e733:function(e,t,r){"use strict";r.r(t),r.d(t,"HostCryptoImpl",(function(){return a}));var n=r("ZVDg"),o=r.n(n);class a{md5(e){return o.a.hash(e,!1)}}},gSEU:function(e,t,r){"use strict";r.r(t),r.d(t,"HostDataFactoryImpl",(function(){return a}));var n=r("UzQk"),o=r("V11p");class a{createFromString(e,t){try{return new o.HostStringDataImpl(e,t)}catch(e){n.CoreAssert.fail("Error in createFromString: ".concat(e.toString()))}return null}createFromCoreContent(e){const t=e.contentType;if(e instanceof n.CoreContentString)return this.createFromString(e.data,t);if(e instanceof n.CoreContentJSON)try{const r=JSON.stringify(e.data,null,2),n=new Blob([r],{type:t});return new o.HostDataImpl(n,t)}catch(e){n.CoreAssert.fail("Error in createFromCoreContent: ".concat(e.toString()))}return e instanceof n.CoreContentBinary&&e.data instanceof Blob?new o.HostDataImpl(e.data,t):(n.CoreAssert.fail("Unsupported data in createFromCoreContent"),null)}createFromFormData(e){const t=new FormData;return Object.entries(e).forEach(e=>{let[r,n]=e;t.append(r,n.data.data)}),new o.HostFormDataImpl(t,"multipart/form-data")}}},guFN:function(e,t,r){var n,o;n=[r("TdwW"),r("UzQk")],void 0===(o=function(e,t){function r(e,t){this.ctx=e,this.colorTable=t,this.filled=!1,this.ctx.beginPath()}return r.prototype.beginGroup=function(){},r.prototype.endGroup=function(){},r.prototype.beginClipGroup=function(e){},r.prototype.endClipGroup=function(){},r.prototype.fill=function(r,n){n=n||this.colorTable.color(r),this.ctx.fillStyle=e.toCSS(e.solidColor2Rgba(n)),this.ctx.fill(this.fillRule===t.TheoPath.PATHFILL_EVENODD?"evenodd":"nonzero"),this.filled=!0},r.prototype.stroke=function(r,n,o){this.ctx.lineWidth=o,n=n||this.colorTable.color(r),this.ctx.strokeStyle=e.toCSS(e.solidColor2Rgba(n)),this.ctx.miterLimit=this.miterLimit,this.ctx.lineCap="butt",this.endCap===t.TheoPath.PATHEND_ROUND?this.ctx.lineCap="round":this.endCap===t.TheoPath.PATHEND_SQUARE&&(this.ctx.lineCap="square"),this.ctx.lineJoin="miter",this.join===t.TheoPath.PATHJOIN_ROUND?this.ctx.lineJoin="round":this.join===t.TheoPath.PATHJOIN_BEVEL&&(this.ctx.lineJoin="bevel"),this.ctx.stroke()},r.prototype.rectangle=function(e,t,r,n){this.ctx.rect(e,t,r-e,n-t)},r.prototype.ellipse=function(e,t,r,n){var o=r-e,a=n-t,i=o/2*.5522848,s=a/2*.5522848,c=e+o/2,u=t+a/2;this.ctx.moveTo(e,u),this.ctx.bezierCurveTo(e,u-s,c-i,t,c,t),this.ctx.bezierCurveTo(c+i,t,r,u-s,r,u),this.ctx.bezierCurveTo(r,u+s,c+i,n,c,n),this.ctx.bezierCurveTo(c-i,n,e,u+s,e,u),this.ctx.closePath()},r.prototype.newPath=function(e,t,r,n,o){this.ctx.beginPath(),this.fillRule=e,this.endCap=t,this.join=r,this.strokeWt=n,this.miterLimit=o},r.prototype.moveTo=function(e,t){this.ctx.moveTo(e,t)},r.prototype.lineTo=function(e,t){this.ctx.lineTo(e,t)},r.prototype.cubicBezier=function(e,t,r,n,o,a){this.ctx.bezierCurveTo(e,t,r,n,o,a)},r.prototype.quadraticBezier=function(e,t,r,n){this.ctx.quadraticCurveTo(e,t,r,n)},r.prototype.closePath=function(){this.ctx.closePath()},r.prototype.done=function(){if(this.filled||this.fillRule==t.TheoPath.PATHFILL_NONE){if(this.fillRule==t.TheoPath.PATHFILL_NONE){var e=this.colorTable.color(t.ColorRole.FieldPrimary);this.stroke(t.ColorRole.FieldPrimary,e,this.strokeWt)}}else this.fill(t.ColorRole.FieldPrimary,null)},r}.apply(t,n))||(e.exports=o)},h4Rv:function(e,t,r){"use strict";r.r(t),r.d(t,"HostPathUtilsImpl",(function(){return a}));var n=r("UzQk");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){o(this,"_urlArtworkCache",[])}cacheArtworkForURL(e,t){return this._urlArtworkCache.length>a.URL_ARTWORK_CACHE_SIZE&&this._urlArtworkCache.pop(),this._urlArtworkCache.splice(0,0,{url:e,artwork:t}),t}artworkFromURL(e,t){var r=this._urlArtworkCache.find(t=>t.url===e);if(r)return this._urlArtworkCache.splice(this._urlArtworkCache.indexOf(r),1),this._urlArtworkCache.splice(0,0,r),r.artwork;var o=new XMLHttpRequest;o.open("GET",e,!1),o.send();try{var a=n.SVGParserUtils.theoArtworkFromSVGData(o.responseText,t);return a?(this.cacheArtworkForURL(e,a),a):(n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(e)),null)}catch(t){return n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(e)),null}}parseSVGXMLData(e,t){var r=new DOMParser,n=r.parseFromString(e,"text/xml");n.rootElement||(n=r.parseFromString(e,"image/svg+xml")),function e(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}t.beginElement(n,o);var s=r.textContent;s&&t.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&e(r.childNodes[c]);t.endElement(n)}(n.rootElement)}parseStringToDouble(e){const t=parseFloat(e);return isNaN(t)&&n.CoreAssert.fail("parsing string ".concat(e," resulted in NaN")),t}matchesForRegexInString(e,t){var r=new RegExp(e,"g");return t.match(r)||[]}firstMatchForRegexInString(e,t){var r=new RegExp(e,"g").exec(t);return r?r[0]:""}absolutePathFromURL(e){return e}lastPathComponentFromURL(e){let t=e.split("/");return t[t.length-1]}}o(a,"URL_ARTWORK_CACHE_SIZE",10)},hbJq:function(e,t,r){"use strict";r.r(t),r.d(t,"HostExceptionImpl",(function(){return n}));class n{executeWithExceptionHandler(e,t){try{e()}catch(e){t(e)}}}},kipm:function(e,t,r){"use strict";r.r(t),r.d(t,"HostVideoUtilsImpl",(function(){return n}));class n{hostSupportsPGMVideos(){return!1}hostSupportsIdBasedVideos(){return!1}trimVideoAtUrl(e,t,r,n){throw new Error("Method not implemented.")}trimVideoWithId(e,t,r,n){throw new Error("Method not implemented.")}getAttributesForVideoAtUrl(e){throw new Error("Method not implemented.")}getAttributesForVideoWithId(e){throw new Error("Method not implemented.")}}},lulf:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r("7mGH"),o=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i{static reset(){this.featuresLoadedPromise=null,this.featuresAreLoaded=!1}loadFeatures(){let{skipLoadingAuthenticatedFeatures:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.featuresLoadedPromise){const t=e?Promise.resolve():o.a.featuresLoaded().then(()=>{});i.featuresLoadedPromise=t.then(()=>{i.featuresAreLoaded=!0})}return i.featuresLoadedPromise}featureEnabled(e){if(!i.featuresAreLoaded)throw new Error("Feature-controller flags not yet loaded. Call loadFeatures() first.");return o.a?o.a.hasFeature(e)||function(e){const t={"post-logo-enabled":["enable-brand-kit"]}[e];return!!t&&t.some(e=>o.a.hasFeature(e))}(e):"post-pgm-poster"===e}}a(i,"featuresLoadedPromise",null),a(i,"featuresAreLoaded",!1)},oWUw:function(e,t,r){var n;void 0===(n=function(){navigator.appVersion;var e,t,r,n=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!=(t=n.indexOf("Opera"))?(o="Opera",a=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("MSIE"))?(o="Microsoft Internet Explorer",a=n.substring(t+5)):-1!=(t=n.indexOf("Chrome"))?(o="Chrome",a=n.substring(t+7)):-1!=(t=n.indexOf("Safari"))?(o="Safari",a=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?(o="Firefox",a=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(o=n.substring(e,t),a=n.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(r=a.indexOf(";"))&&(a=a.substring(0,r)),-1!=(r=a.indexOf(" "))&&(a=a.substring(0,r)),i=parseInt(""+a,10),isNaN(i)&&(a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),{name:o,fullVersion:a,majorVersion:i}}.apply(t,[]))||(e.exports=n)},pqGD:function(e,t,r){"use strict";r.r(t),r.d(t,"HostResourceUtilsImpl",(function(){return a}));var n=r("UzQk"),o=r("kNaX");class a{getPGMResourceProviderForURL(e,t){let r;if(r=t.match(/^component:(.+?)\/(.+?)(?:\/|$)/)){const e="todo",t=r[2];return new n.PGMResourceProvider(e,new n.StorageSpecLocalComposite(t))}if(r=t.match(/^data:(.*?);base64,(.+)/)){const e=r[1],t=r[2];return new n.PGMResourceProvider(e,new n.StorageSpecContentLiteral(new n.CoreContentBase64(t,e)))}const o=new n.CorePath(t);return new n.PGMResourceProvider("",new n.StorageSpecLocalFile(o))}oldMakeGUID(){const e=[];for(let t=0;t<36;t+=1)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}makeGUID(){return o?o.v4():this.oldMakeGUID()}urlForResource(e,t){const r=window.THEO_BUNDLE_PATH;switch(e){case"shape":return"".concat(r,"/images/images/shapes/svg/").concat(t,".svg");case"images":return"".concat(r,"/images/images/").concat(t);case"image":return"".concat(r,"/images/images/").concat(t,".png");case"raster":return"".concat(r,"/images/images/shapes/raster/").concat(t,".raster");case"icons":return"".concat(r,"/images/images/icons/").concat(t,".svg");case"effects":return"".concat(r,"/images/images/effects/").concat(t,".svg")}return n.CoreAssert.fail("unknown categoryID in urlForResource"),null}}},vOKO:function(t,r,n){var o,a;o=[n("UFvF"),n("tY4j"),n("MGCh"),n("CTED"),n("bBG2")],void 0===(a=function(t,r,n,o,a){const i=a.default;var s=n.channel("load-image"),c=new o(30),u={_loadImageViaHTMLElement:function(e){var r=t.defer(),n=document.createElement("img");n.addEventListener("load",(function(){r.resolve(n)})),n.addEventListener("error",(function(){s.debug("html onerror failure");var t=new Error("img load error");t.imgSrc=e,r.reject(t)}));try{new URL(e,n.baseURI).origin!==window.location.origin&&(n.crossOrigin="anonymous")}catch(e){}return n.src=e,r.promise},_tryLoadingImageViaHTTPRequest:function(e){var r=t.defer(),n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(n.status>=400){var t=new FileReader;return t.onload=function(){var o=new Error("Attempt to load image via AJAX returned an HTTP error.");o.httpStatus=n.status,o.httpResponse=t.result,o.imgSrc=e,r.reject(o)},void t.readAsText(n.response)}s.debug("Successfully loaded image via AJAX.",{src:e});var o=u.loadImageFromBlob(n.response);r.resolve(o)},n.onerror=function(){var t=new Error("Failed to load image via AJAX.");t.imgSrc=e,s.debug("ajax onerror"),r.reject(t)},n.send(),r.promise},load:function(e){if(!e){var n=new Error("[Post:load-image] Attempted to load null image.");return s.error(n),t.reject(n)}if("do-not-load"===e){var o=document.createElement("img");return o.src=e,o.width=1,o.height=1,t.resolve(o)}var a=c.get(e);if(a)return s.debug("loaded image from cache"),a;var l=!1,d=1,h=r(u._loadImageViaHTMLElement,{maxAttempts:3,delay:200,logger:{info:function(){d++}}})(e).catch((function(t){return s.error(t),d++,u._tryLoadingImageViaHTTPRequest(e).catch((function(e){throw s.error(e),t}))})).then((function(e){return l=!0,e})).catch((function(t){throw c.remove(e),t})).finally((function(){var t=/^\s*data:/i.test(e)?"data-url":e;i.publish("post:imageLoadAttempt",{contextualData1:"numberOfLoadAttempts:"+d,contextualData2:"src:"+t,contextualData3:"success:"+l})}));return c.set(e,h),h},loadImageFromBlob:function(r){var n=t.defer();if(r instanceof Blob){var o=window.URL||window.webkitURL,a=new Image,i=o.createObjectURL(r);a.onload=function(){n.resolve(a),o.revokeObjectURL&&o.revokeObjectURL(i)},a.onerror=function(e){s.error("there was an error loading the image",{event:e,src:this&&this.src}),n.reject({message:"error loading image file",src:this&&this.src,event:e}),o.revokeObjectURL&&o.revokeObjectURL(i)},a.src=i}else s.error("image data was not an image file",e),n.reject();return n.promise}};return u}.apply(r,o))||(t.exports=a)}}]);
//# sourceMappingURL=theo-app-storage_5a11b65b-d79ca876.js.map
(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[28],{"35Q0":function(e,t,n){var i,o,r,a,s=t,c=n("oAGj"),l=n("cZuM"),u=n("gXiO"),h=n("iCxV"),d=n("c+uM"),p=n("oKI3");s.TAG_SHAPE_ID="shape-id",s.ShapeCategory=c.defineEnum("ShapeCategory",{None:0,Circle:1,Square:2,Social:3,Cutout:4,Banner:5,Decorative:6,Other:7,Avoid:8}),s.TagGroup=c.defineEnum("TagGroup",{none:0,banner:1,circle:2,square:3,other:4,decorative:5,unused:6}),s.TheoShape=(i=function(){},c.defineClass({name:"TheoShape",ctor:i,props:{init_f4eb:function(e,t,n,i,o,r,a,s,l,u,h,d,p,g,m){void 0===g&&(g=!1),void 0===m&&(m=!1),this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.alignmentEdges=r,this.formality=l,this.drama=u,this.maxScale=h,this.minAspect=d,this.maxAspect=p,this.category=a,this.tags=c.clone(s),this.clockwise=g,this.premium=m},init_implicit:function(e,t,n,i,o,r,a,s,l,u,h,d,p,g,m){this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.formality=r,this.drama=a,this.alignmentEdges=s,this.category=l,this.tags=c.clone(u),this.clockwise=h,this.premium=d,this.maxScale=p,this.maxAspect=g,this.minAspect=m}}}),i),s.ShapeLibraryDataStructures=(o=function(){this.nonSvgBackingShapes=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)],this.svgBackingShapes=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.seperatorShapes=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.DisplayOrderForCategories=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial],this.DisplayOrderForShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]},this.DisplayOrderForSmallSetCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]},this.DisplayOrderForLetterGridShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.DisplayOrderForSymmetricPathsShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAsymmetricPathsShapesByCategory={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAutoLayoutShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.NonSuggestableBackingShapes=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"],this.LockupBackingShapeIDs=[],this.BrowsableBackingShapes=[],this.FilledBackingShapes=[],this.shapeDictionary={},this.nonSvgBackingShapeIDs=[]},c.defineClass({name:"ShapeLibraryDataStructures",ctor:o,props:{init_d41d:function(){this.FilledBackingShapes.push(s.ShapeLibrary.Square),this.FilledBackingShapes.push(s.ShapeLibrary.Circle);for(var e=c.iter(this.svgBackingShapes);!e.done;e.next()){var t=e.value;this.LockupBackingShapeIDs.push(t.id),this.shapeDictionary[t.id]=t,t.deprecated||(this.BrowsableBackingShapes.push(t.id),t.filled&&this.FilledBackingShapes.push(t.id))}for(var n=c.iter(this.nonSvgBackingShapes);!n.done;n.next())t=n.value,this.shapeDictionary[t.id]=t,this.nonSvgBackingShapeIDs.push(t.id);this.ShapeIDToCategory={};for(var i=c.iter(this.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,r=c.iter(this.DisplayOrderForShapesByCategory[o]);!r.done;r.next()){var a=r.value;this.ShapeIDToCategory[a]=o}},init_implicit:function(e,t,n,i,o,r,a,u,h,d,p,g,m,f,A,S,C,T){void 0===e&&(e=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)]),void 0===t&&(t=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===n&&(n=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===i&&(i=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial]),void 0===o&&(o={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===r&&(r={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]}),void 0===a&&(a={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]}),void 0===u&&(u={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===h&&(h={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===d&&(d={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===p&&(p={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===g&&(g=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"]),void 0===f&&(f=[]),void 0===A&&(A=[]),void 0===S&&(S=[]),void 0===C&&(C={}),void 0===T&&(T=[]),this.nonSvgBackingShapes=c.clone(e),this.svgBackingShapes=c.clone(t),this.seperatorShapes=c.clone(n),this.DisplayOrderForCategories=c.clone(i),this.DisplayOrderForShapesByCategory=c.clone(o),this.DisplayOrderForCharStyleShapesByCategory=c.clone(r),this.DisplayOrderForSmallSetCharStyleShapesByCategory=c.clone(a),this.DisplayOrderForLetterGridShapesByCategory=c.clone(u),this.DisplayOrderForSymmetricPathsShapesByCategory=c.clone(h),this.DisplayOrderForAsymmetricPathsShapesByCategory=c.clone(d),this.DisplayOrderForAutoLayoutShapesByCategory=c.clone(p),this.NonSuggestableBackingShapes=c.clone(g),this.ShapeIDToCategory=c.clone(m),this.LockupBackingShapeIDs=c.clone(f),this.BrowsableBackingShapes=c.clone(A),this.FilledBackingShapes=c.clone(S),this.shapeDictionary=c.clone(C),this.nonSvgBackingShapeIDs=c.clone(T)},clone:function(){return o.init_implicit(this.nonSvgBackingShapes,this.svgBackingShapes,this.seperatorShapes,this.DisplayOrderForCategories,this.DisplayOrderForShapesByCategory,this.DisplayOrderForCharStyleShapesByCategory,this.DisplayOrderForSmallSetCharStyleShapesByCategory,this.DisplayOrderForLetterGridShapesByCategory,this.DisplayOrderForSymmetricPathsShapesByCategory,this.DisplayOrderForAsymmetricPathsShapesByCategory,this.DisplayOrderForAutoLayoutShapesByCategory,this.NonSuggestableBackingShapes,this.ShapeIDToCategory,this.LockupBackingShapeIDs,this.BrowsableBackingShapes,this.FilledBackingShapes,this.shapeDictionary,this.nonSvgBackingShapeIDs)}}}),o),s.ShapeLibrary=(r=function(){u.CoreObject.call(this)},a={},c.defineClass({name:"ShapeLibrary",ctor:r,superName:"CoreObject",statics:{CategoryBasic:"BASIC",CategoryBanner:"BANNER",CategoryDecorative:"DECORATIVE",CategorySocial:"SOCIAL",CategoryExclusive:"EXCLUSIVE",Square:"square",Circle:"circle",shapeLibraryDataStructures:{get:function(){return void 0===a.shapeLibraryDataStructures&&(a.shapeLibraryDataStructures=s.ShapeLibraryDataStructures.init_d41d()),a.shapeLibraryDataStructures}},LockupBackingShapeIDs:{get:function(){return void 0===a.LockupBackingShapeIDs&&(a.LockupBackingShapeIDs=r.shapeLibraryDataStructures.LockupBackingShapeIDs),a.LockupBackingShapeIDs},set:function(e){a.LockupBackingShapeIDs=e}},NonSvgBackingShapeIDs:{get:function(){return void 0===a.NonSvgBackingShapeIDs&&(a.NonSvgBackingShapeIDs=r.shapeLibraryDataStructures.nonSvgBackingShapeIDs),a.NonSvgBackingShapeIDs},set:function(e){a.NonSvgBackingShapeIDs=e}},BrowsableBackingShapes:{get:function(){return void 0===a.BrowsableBackingShapes&&(a.BrowsableBackingShapes=r.shapeLibraryDataStructures.BrowsableBackingShapes),a.BrowsableBackingShapes},set:function(e){a.BrowsableBackingShapes=e}},FilledBackingShapes:{get:function(){return void 0===a.FilledBackingShapes&&(a.FilledBackingShapes=r.shapeLibraryDataStructures.FilledBackingShapes),a.FilledBackingShapes},set:function(e){a.FilledBackingShapes=e}},shapeDictionary:{get:function(){return void 0===a.shapeDictionary&&(a.shapeDictionary=r.shapeLibraryDataStructures.shapeDictionary),a.shapeDictionary},set:function(e){a.shapeDictionary=e}},NonSuggestableBackingShapes:{get:function(){return void 0===a.NonSuggestableBackingShapes&&(a.NonSuggestableBackingShapes=r.shapeLibraryDataStructures.NonSuggestableBackingShapes),a.NonSuggestableBackingShapes},set:function(e){a.NonSuggestableBackingShapes=e}},SeperatorShapes:{get:function(){return void 0===a.SeperatorShapes&&(a.SeperatorShapes=r.shapeLibraryDataStructures.seperatorShapes),a.SeperatorShapes},set:function(e){a.SeperatorShapes=e}},getShapeDataForArtworkId:function(e){var t="none";return null!=e&&(t=e),r.shapeDictionary[t]},applyToShapeForma:function(e,t){var n,i;null!=(n=c.opt(h.Host.resourceUtils,(function(e){return e.urlForResource("shape",t)})))&&(i=h.Host.pathUtils.artworkFromURL(n,!1))&&(e.canonicalArtwork=i.artwork,e.sliceBox=i.sliceBox,e.contentRegion=i.contentRegion,e.shapeLibraryID=t)},categoryForShapeID:function(e){return r.shapeLibraryDataStructures.ShapeIDToCategory[e]},displayOrderForCategories:function(){return r.shapeLibraryDataStructures.DisplayOrderForCategories},displayOrderForCompatibleShapeIDs:function(e,t,n,i,o){return d.LockupStyle.isLetterGrid(t)?r.displayOrderForLetterGridShapeIDs(e,i,o):d.LockupStyle.isPath(t)?r.displayOrderForPathShapeIDs(e,n,i,o):i?r.displayOrderForCharStyleShapeIDs(e,o):r.displayOrderForShapeIDs(e)},getCategorySlice:function(e,t){return e[t]||[]},displayOrderForShapeIDs:function(e){return r.getCategorySlice(c.clone(r.shapeLibraryDataStructures.DisplayOrderForShapesByCategory),e)},displayOrderForCharStyleShapeIDs:function(e,t){var n=c.clone(t?r.shapeLibraryDataStructures.DisplayOrderForSmallSetCharStyleShapesByCategory:r.shapeLibraryDataStructures.DisplayOrderForCharStyleShapesByCategory);return r.getCategorySlice(c.clone(n),e)},displayOrderForLetterGridShapeIDs:function(e,t,n){return r.getCategorySlice(c.clone(r.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory),e)},displayOrderForPathShapeIDs:function(e,t,n,i){if(n)return[];var o=c.clone(p.TextPathLibrary.isPathSymmetric(t)?r.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:r.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return r.getCategorySlice(c.clone(o),e)},displayOrderForAutoLayoutShapeIDs:function(e,t,n){return r.getCategorySlice(c.clone(r.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory),e)},isBackingShapeStyleCompatible:function(e,t,n){return d.LockupStyle.isLetterGrid(e.layout)?r.isBackingShapeLetterGridCompatible(t,n):d.LockupStyle.isPath(e.layout)?r.isBackingShapePathCompatible(e.pathID,t,n):!d.LockupStyle.isAutoLayout(e.layout)||r.isBackingShapeAutoLayoutCompatible(t,n)},isSVGIncluded:function(e,t){var n;if(null!=(n=e))for(var i=c.iter(r.shapeLibraryDataStructures.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,a=c.clone(t[o]),s=c.iter(a);!s.done;s.next())if(s.value==n)return!0;return!1},isBackingShapeLetterGridCompatible:function(e,t){return e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:r.isSVGIncluded(t,c.clone(r.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory))},isBackingShapePathCompatible:function(e,t,n){if(t==d.LockupBacking.Rows)return!1;if(t!=d.LockupBacking.SVGBackground)return!0;var i=c.clone(p.TextPathLibrary.isPathSymmetric(e)?r.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:r.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return r.isSVGIncluded(n,c.clone(i))},isBackingShapeAutoLayoutCompatible:function(e,t){return e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:r.isSVGIncluded(t,c.clone(r.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory))}}}),r)},"434x":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("wNKJ"),l=n("fAXt"),u=n("Kkml");o.NudgeAction=(i=function e(t,n){this.delta=t,this.formaeToNudge=r.clone(n),a.Action.call(this,e.TYPE)},r.defineClass({name:"NudgeAction",ctor:i,superName:"Action",statics:{TYPE:"NudgeAction"},props:{getUserAction:function(e){var t=r.clone(e.selection.IDs);return u.UserActions.NudgeItem(t.join(","))},execute:function(e){var t=r.clone(this.formaeToNudge||e.selection.asFormaArray());l.TransformFacade.nudgeFormaeInPageSpace(r.clone(t),this.delta);for(var n=r.iter(t);!n.done;n.next()){var i=n.value;c.DragFacade.rescueFormaToPageBounds(i,50,0)}return s.CorePromise.resolve(null)}}}),i)},"4mEG":function(e,t,n){var i,o,r,a,s,c,l,u,h=t,d=n("oAGj"),p=n("Tq01"),g=n("kYI4"),m=n("SpAV"),f=n("CWW7"),A=n("yGNn"),S=n("FNB+"),C=n("q5zr"),T=n("oTAR"),y=n("lJxM"),_=n("T6jX"),v=n("Kkml"),P=n("LGJg"),b=n("sW6f"),E=n("mxdD"),I=n("QTen");h.AddContentAction=(i=function e(t,n,i,o,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=f.AddFormaParams.DEFAULTS),void 0===r&&(r=!0),this.content=t,this.pairedContent=n,this.preservePlacement=i,this.addParams=o,this.allowSelection=r,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddContentAction",ctor:i,superName:"Action",statics:{TYPE:"AddContentAction"},props:{getUserAction:function(e){return this.content instanceof C.ImageContentNode?v.UserActions.AddImage():this.content instanceof b.VideoContentNode?v.UserActions.AddVideo():this.content instanceof P.VectorContentNode?v.UserActions.AddIcon():this.content instanceof y.TextContentNode?v.UserActions.AddText():(m.CoreAssert.warning("Could not determine user action for content"),v.UserActions.AddImage())},execute:function(e){var t=this;return f.CreationFacade.addContent(e.document.firstPage,this.content,this.pairedContent,this.preservePlacement,this.addParams).then((function(n){var i=d.as(n,S.Forma);return null!=i?(t.allowSelection&&(t.newSelection=[i]),i.isImage()&&_.TheoDocumentUtils.updateConstrainedImageInfo(e.document),A.CorePromise.resolve(new p.FormaActionResult([i]))):(m.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddContentAction.execute","AddContentAction.swift",75),A.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),i),h.AddIconContentAction=(o=function e(t,n,i,o,r){void 0===o&&(o=!0),void 0===r&&(r=!0),this.url=t,this.metadata=n,this.replacing=i,this.undoable=o,this.allowSelection=r,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddIconContentAction",ctor:o,superName:"Action",statics:{TYPE:"AddIconContentAction"},props:{getUserAction:function(e){var t=null!=this.replacing?v.UserActions.ReplaceIcon():v.UserActions.AddIcon();return 0==this.undoable&&(t.undoable=!1),t},execute:function(e){var t=this,n=T.SVGParserUtils.createShapeFromSVGURL(e.document,this.url,this.metadata),i=d.as(n,S.Forma);return null!=i?T.SVGParserUtils.addShapeToDocument(e.document,n,this.replacing).then((function(e){return t.allowSelection&&(t.newSelection=[i]),A.CorePromise.resolve(new p.FormaActionResult([i]))})):(m.CoreAssert.fail("expected a forma result from SVGParserUtils.CreateShapeFromSVGURL","AddIconContentAction.execute","AddContentAction.swift",140),A.CorePromise.resolve(null))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),o),h.ActionUndoability=d.defineEnum("ActionUndoability",{useDefault:0,forceUndoable:1,forceNonUndoable:2}),h.AddImageContentAction=(r=function e(t,n,i,o,r,a,s,c,l,u,d,g,m){void 0===d&&(d=h.ActionUndoability.useDefault),void 0===g&&(g=null),void 0===m&&(m=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.width=o,this.height=r,this.hasAlpha=a,this.mediaMetadata=s,this.localIdentifier=c,this.tags=l,this.addParams=u,this.undoable=d,this.contentID=g,this.allowSelection=m,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddImageContentAction",ctor:r,superName:"Action",statics:{TYPE:"AddImageContentAction"},props:{getUserAction:function(e){var t=null!=this.addParams.formaToReplace?v.UserActions.ReplaceImage():v.UserActions.AddImage();return this.undoable!=h.ActionUndoability.useDefault&&(t.undoable=this.undoable==h.ActionUndoability.forceUndoable),t},execute:function(e){var t,n=this;if(t=d.as(d.opt(e.document,(function(e){return e.content.createNode(C.ImageContentNode.KIND,n.contentID)})),C.ImageContentNode)){var i;if(t.url=this.sourceURL,t.mimeType=this.mimeType,t.pixelWidth=this.width,t.pixelHeight=this.height,t.mediaMetadata=this.mediaMetadata,t.localIdentifier=this.localIdentifier,this.hasAlpha&&(t.hasAlpha=!0),i=this.tags)for(var o=d.iter(i);!o.done;o.next()){var r,a,s=o.key,c=o.value;null!=(r=d.as(s,"String"))&&null!=(a=d.as(c,"String"))&&t.setTag(r,a)}return t.createImageFeatures(),d.opt(t.image,(function(e){return e.hasAlpha()})),f.CreationFacade.addContent(e.document.firstPage,t,null,!1,this.addParams).then((function(t){var i=d.as(t,S.Forma);return null!=i?(_.TheoDocumentUtils.updateConstrainedImageInfo(e.document),n.allowSelection&&(n.newSelection=[i]),A.CorePromise.resolve(new p.FormaActionResult([i]))):(m.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddImageContentAction.execute","AddContentAction.swift",260),A.CorePromise.resolve(null))}))}return A.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),r),h.VideoPosterParams=(a=function(e,t,n,i){this.url=e,this.mimeType=t,this.width=n,this.height=i},d.defineClass({name:"VideoPosterParams",ctor:a,superName:"CoreObject"}),a),h.AddVideoContentAction=(s=function e(t,n,i,o,r,a,s,c,l,u,h,g,m,f,A){void 0===A&&(A=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=r,this.duration=a,this.times=d.clone(s),this.posterParams=c,this.isLivePhoto=l,this.mediaMetadata=u,this.localIdentifier=h,this.originalDuration=g,this.offsetInOriginal=m,this.addParams=f,this.allowSelection=A,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddVideoContentAction",ctor:s,superName:"Action",statics:{TYPE:"AddVideoContentAction"},props:{getUserAction:function(e){return v.UserActions.AddVideo()},execute:function(e){var t,n,i,o,r=this;return(t=E.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,d.clone(this.times),this.isLivePhoto))?((i=this.posterParams)&&(o=n=d.as(d.opt(e.document,(function(e){return e.content.createNode(C.ImageContentNode.KIND,null)})),C.ImageContentNode))&&(o.url=i.url,o.mimeType=i.mimeType,o.pixelWidth=i.width,o.pixelHeight=i.height),f.CreationFacade.addContent(this.page,t,n,!1,this.addParams).then((function(e){var t=d.as(e,S.Forma);return null!=t?(r.allowSelection&&(r.newSelection=[t]),A.CorePromise.resolve(new p.FormaActionResult([t]))):(m.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddVideoContentAction.execute","AddContentAction.swift",398),A.CorePromise.resolve(null))}))):A.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection},cloneWithPosterParams:function(e){return new s(this.page,this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,d.clone(this.times),e,this.isLivePhoto,this.mediaMetadata,this.localIdentifier,this.originalDuration,this.offsetInOriginal,this.addParams)}}}),s),h.ReplaceVideoFormaContentAction=(c=function e(t,n,i,o,r,a,s,c,l,u,h,g,m,f,A,S){void 0===S&&(S=!0),this.forma=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=r,this.duration=a,this.startTime=s,this.trimDuration=c,this.offsetInOriginal=l,this.originalDuration=u,this.times=d.clone(h),this.posterParams=g,this.isLivePhoto=m,this.mediaMetadata=f,this.localIdentifier=A,this.allowSelection=S,p.Action.call(this,e.TYPE)},d.defineClass({name:"ReplaceVideoFormaContentAction",ctor:c,superName:"Action",statics:{TYPE:"ReplaceVideoFormaContentAction"},props:{getUserAction:function(e){return v.UserActions.ReplaceVideoContent()},execute:function(e){var t,n,i,o;return(t=E.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,d.clone(this.times),this.isLivePhoto))?(f.CreationFacade.removeContentNodeFromDocument(this.forma.videoContentNode,e.document),this.forma.videoContentNode=t,f.CreationFacade.addContentNodeToDocument(t,e.document),(n=this.posterParams)&&(i=d.as(d.opt(e.document,(function(e){return e.content.createNode(C.ImageContentNode.KIND,null)})),C.ImageContentNode))&&(i.url=n.url,i.mimeType=n.mimeType,i.pixelWidth=n.width,i.pixelHeight=n.height,f.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,e.document),this.forma.contentNode=i,f.CreationFacade.addContentNodeToDocument(i,e.document)),(o=d.as(this.forma.style,I.VideoStyle))&&(o.startTime=this.startTime,o.duration=this.trimDuration),this.allowSelection&&(this.newSelection=[this.forma]),A.CorePromise.resolve(new p.FormaActionResult([this.forma]))):A.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),c),h.AddLogoContentAction=(l=function e(t,n,i,o,r,a){void 0===r&&(r=null),void 0===a&&(a=!0),this.theoLogo=n,this.page=t,this.replacing=i,this.localIdentifier=o,this.componentID=r,this.allowSelection=a,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddLogoContentAction",ctor:l,superName:"Action",statics:{TYPE:"AddLogoContentAction"},props:{getUserAction:function(e){return v.UserActions.AddLogo()},execute:function(e){var t=this,n=g.BrandingFacade.makeLogoContentNode(this.theoLogo,this.page.document);n.createImageFeatures(),n.localIdentifier=this.localIdentifier,null!=this.componentID&&(n.componentID=this.componentID);var i=new f.AddFormaParams(p.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,this.replacing,f.FloatingImageStrategy.Always);return f.CreationFacade.addContent(e.document.firstPage,n,null,!1,i).then((function(e){var n=d.as(e,S.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),A.CorePromise.resolve(new p.FormaActionResult([n]))):(m.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddLogoContentAction.execute","AddContentAction.swift",632),A.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),l),h.AddTextContentAction=(u=function e(t,n,i){void 0===n&&(n=f.AddFormaParams.DEFAULTS),void 0===i&&(i=!0),this.text=t,this.addParams=n,this.allowSelection=i,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddTextContentAction",ctor:u,superName:"Action",statics:{TYPE:"AddTextContentAction"},props:{getUserAction:function(e){return this.addParams.behavior==p.ControllerSettingsBehaviorEnum.SetControllerSettings?v.UserActions.AddTextUI():v.UserActions.AddText()},execute:function(e){var t=this;return f.CreationFacade.addText(e.document.firstPage,this.text,!0,this.addParams).then((function(e){var n=d.as(e,S.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),A.CorePromise.resolve(new p.FormaActionResult([n]))):(m.CoreAssert.fail("expected a forma result from CreationFacade.addText","AddTextContentAction.execute","AddContentAction.swift",695),A.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),u)},"70fJ":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("SpAV"),c=n("gpZI"),l=n("yGNn"),u=n("ascj"),h=n("Kkml");o.ApplyColorAction=(i=function e(t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=0),this.formaeToColor=r.clone(t),this.colors=r.clone(n),this.inCharStyleMode=i,this.shuffleIndex=o,this.suggestedSelection=[],this.shouldUpdateSelection=!1,a.Action.call(this,e.TYPE)},r.defineClass({name:"ApplyColorAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formaeToColor)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),h.UserActions.ChangeColor(t.join(","))},execute:function(e){var t,n=r.clone(this.formaeToColor||e.selection.asFormaArray());s.CoreAssert.isTrue(n.length>0,"empty Forma array","ApplyColorAction.execute","ColorActions.swift",55),(t=this.colors)?this.suggestedSelection=r.clone(c.ColorFacade.applyColorsToFormae(r.clone(n),r.clone(t),this.inCharStyleMode,this.shuffleIndex)):this.suggestedSelection=r.clone(c.ColorFacade.applyNoneColorToFormae(r.clone(n),u.ColorRole.FieldPrimary)),this.shouldUpdateSelection=!1;for(var i=r.iter(n);!i.done;i.next()){var o=i.value;this.shouldUpdateSelection=this.shouldUpdateSelection||e.selection.isSelected(o)}return l.CorePromise.resolve(new a.FormaActionResult(r.clone(this.suggestedSelection)))},updateSelection:function(e){return!this.inCharStyleMode&&this.shouldUpdateSelection&&(e.selection.IDs=this.suggestedSelection.map((function(e){return e.formaID}),this)),this.suggestedSelection}}}),i)},"9tXS":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("Kkml"),l=n("7EVG");o.SetWatermarkAction=(i=function e(t){this.watermark=t,a.Action.call(this,e.TYPE)},r.defineClass({name:"SetWatermarkAction",ctor:i,superName:"Action",statics:{TYPE:"SetWatermarkAction"},props:{getUserAction:function(e){return c.UserActions.SetWatermark()},execute:function(e){return l.WatermarkFacade.setWatermark(this.watermark,e.document),s.CorePromise.resolve(null)}}}),i)},"Aj/e":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("P83h"),l=n("8t9B"),u=n("Kkml");o.ChangeBackgroundShapeAction=(i=function e(t,n,i,o){this.formae=r.clone(t),this.backing=n,this.artworkID=i,this.charStyleMode=o,a.Action.call(this,e.TYPE)},r.defineClass({name:"ChangeBackgroundShapeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeBackgroundShapeAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formae)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),this.charStyleMode&&(t=t.map((function(e){return e+":secondary"}),this)),u.UserActions.ChangeBackgroundShape(t.join(","))},execute:function(e){for(var t=r.clone(this.formae||e.selection.asFormaArray()),n=r.iter(t);!n.done;n.next()){var i,o=n.value;if(i=r.as(o.controller,l.TypeLockupController)){var u=new c.FormaStyleChangedEvent(o);o.beginUpdate(u),this.charStyleMode&&(e.selection.inCharStyleMode=!0),i.styleController.applyBacking(this.backing,this.artworkID),o.endUpdate(u)}}return s.CorePromise.resolve(new a.ActionResult)}}}),i)},H1Z2:function(e,t,n){var i,o,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("yGNn"),d=n("wNKJ"),p=n("Pil/"),g=n("9Lk3"),m=n("tGKA"),f=n("fAXt"),A=n("8t9B"),S=n("oKlP"),C=n("Kkml");c.DragAction=(i=function e(t,n){this.event=t,this.swapTargetForma=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"DragAction",ctor:i,superName:"Action",statics:{TYPE:"DragAction"},props:{getUserAction:function(e){return null!=this.swapTargetForma?C.UserActions.SwapCells():C.UserActions.MoveItem()},execute:function(e){var t,n;if(t=l.as(this.event,p.FormaDragEvent)){if(null==this.swapTargetForma){var i=l.clone(d.DragFacade.processFormaDrag(t));return h.CorePromise.resolve(new u.DragActionResult(l.clone(i)))}}else if(n=l.as(this.event,p.EndFormaDragEvent)){var o,r;if(d.DragFacade.processEndFormaDrag(n),(o=this.getDraggedFormaForEvent(n))&&(r=this.swapTargetForma)){var a,s=l.clone(l.opt(e.document,(function(e){return e.firstPage.root.filterByControllerKind(g.GridController.KIND)})));a=l.opt(s,(function(e){return null!=e.length&&s.length>0}))?l.as(s[0].controller,g.GridController):null,l.opt(a,(function(e){return e.swapGridChildren(r,o)}))}}return h.CorePromise.resolve(null)},getDraggedFormaForEvent:function(e){var t,n;return 0==!e.dragDelegate.draggedFormae.length&&(n=l.first(e.dragDelegate.draggedFormae),((t=l.opt(n,(function(e){return e.isImage()})))||null!=t)&&t&&(n=l.opt(n,(function(e){return e.parent})))),n}}}),i),c.MoveHandleAction=(o=function e(t,n,i,o){this.forma=t,this.delta=n,this.origin=i,this.scale=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"MoveHandleAction",ctor:o,superName:"Action",statics:{TYPE:"MoveHandleAction"},props:{getUserAction:function(e){return C.UserActions.MoveItem()},execute:function(e){var t=this;f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],m.Matrix2D.translation(new S.TheoPoint(this.delta.x,this.delta.y)),this.origin);var n=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(null,8/t.scale,!1)}));return h.CorePromise.resolve(new u.PlacementActionResult(n))}}}),o),c.ResizeHandleAction=(r=function e(t,n,i,o){this.forma=t,this.spotPt=n,this.anchorSpot=i,this.newBounds=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResizeHandleAction",ctor:r,superName:"Action",statics:{TYPE:"ResizeHandleAction"},props:{getUserAction:function(e){return C.UserActions.ResizeItem()},execute:function(e){var t=this;return 1==this.spotPt.x&&.5==this.spotPt.y&&this.forma.controller instanceof A.TypeLockupController?this.forma.controller.recalculateTracking(this.newBounds.size):.5==this.spotPt.x&&1==this.spotPt.y&&this.forma.controller instanceof A.TypeLockupController?this.forma.controller.recalculateLeading(this.newBounds.size):l.opt(this.forma.controller,(function(e){return e.onEvent(new p.FormaResizeEvent(t.forma,t.newBounds.size,t.anchorSpot))})),h.CorePromise.resolve(null)}}}),r),c.RotateHandleAction=(a=function e(t,n,i,o){this.forma=t,this.deltaRadians=n,this.origin=i,this.initialPlacement=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"RotateHandleAction",ctor:a,superName:"Action",statics:{TYPE:"RotateHandleAction"},props:{getUserAction:function(e){return C.UserActions.RotateItem()},execute:function(e){f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],m.Matrix2D.rotation(Math.cos(this.deltaRadians),Math.sin(this.deltaRadians)),this.origin,this.initialPlacement);var t=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(new S.TheoPoint(.5,.5),20,!1)}));return h.CorePromise.resolve(new u.PlacementActionResult(t))}}}),a),c.CharRangeHandleAction=(s=function e(t,n,i,o,r){this.forma=t,this.newPoint=n,this.lastPoint=r,this.beginForma=i,this.leftHandle=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"CharRangeHandleAction",ctor:s,superName:"Action",statics:{TYPE:"CharRangeHandleAction"},props:{getUserAction:function(e){return C.UserActions.ModifyStyleRanges()},execute:function(e){var t;return(t=l.as(this.forma.controller,A.TypeLockupController))&&t.updateTouches(this.newPoint,this.beginForma,this.leftHandle,this.lastPoint),h.CorePromise.resolve(new u.FormaActionResult([this.forma]))}}}),s)},J3ZR:function(e,t,n){n("oAGj")},"KgU+":function(e,t,n){var i,o,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("cYKp"),d=n("yGNn"),p=n("Kkml");c.ApplyAnimationStyleAction=(i=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ApplyAnimationStyleAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyAnimationStyleAction"},props:{getUserAction:function(e){return p.UserActions.ApplyAnimationStyle()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),d.CorePromise.resolve(null)}}}),i),c.ApplyAnimationStyleForPlaybackAction=(o=function(e,t){c.ApplyAnimationStyleAction.call(this,e,t)},l.defineClass({name:"ApplyAnimationStyleForPlaybackAction",ctor:o,superName:"ApplyAnimationStyleAction",props:{getUserAction:function(e){return p.UserActions.ApplyAnimationStyleForPlayback()},execute:function(e){return h.AnimationFacade.applyAnimationStyle(this.style,this.page),d.CorePromise.resolve(null)}}}),o),c.ResetAnimation=(r=function e(t,n){this.resetFormaTree=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResetAnimation",ctor:r,superName:"Action",statics:{TYPE:"ResetAnimation"},props:{getUserAction:function(e){return p.UserActions.ResetAnimation()},execute:function(e){return l.opt(this.page.root.animation,(function(e){return e.invalidate()})),d.CorePromise.resolve(null)}}}),r),c.ShuffleAnimationStyleAction=(a=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ShuffleAnimationStyleAction",ctor:a,superName:"Action",statics:{TYPE:"ShuffleAnimationStyleAction"},props:{getUserAction:function(e){return p.UserActions.ShuffleAnimationStyle()},execute:function(e){var t=h.AnimationFacade.shuffleAnimationStyle(this.style,this.page);return this.page.animationLibrary.setRootAnimationStyle(t,this.page.root),d.CorePromise.resolve(new u.AnimationStyleActionResult(t))}}}),a),c.ApplyAndPrepareAnimationAction=(s=function(e,t){this.style=e,this.page=t,u.Action.call(this,c.ApplyAnimationStyleAction.TYPE)},l.defineClass({name:"ApplyAndPrepareAnimationAction",ctor:s,superName:"Action",statics:{TYPE:"ApplyAndPrepareAnimationAction"},props:{getUserAction:function(e){return p.UserActions.ApplyAndPrepareAnimationAction()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),this.page.animationLibrary.modifyModelForAnimation(l.opt(this.page.root.animation,(function(e){return e.animationStyle})),this.page.root),this.page.animationController.saveStaticState(),d.CorePromise.resolve(null)}}}),s)},SVjO:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("LP+A"),l=n("uxH+"),u=n("8t9B"),h=n("Kkml");o.ApplyTemplateAction=(i=function(){},r.defineClass({name:"ApplyTemplateAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyTemplateAction"},props:{init_dd3b:function(e,t){this.designSuggestion=e,this.rootForma=t,this.originalRootForma=null,this.templateDocument=null,this.tapIndex=0,a.Action.call(this,i.TYPE)},init_e1db:function(e,t,n,o){this.templateDocument=e,this.tapIndex=n,this.rootForma=t,this.originalRootForma=o,this.designSuggestion=null,a.Action.call(this,i.TYPE)},getUserAction:function(e){return h.UserActions.ApplyTemplate()},execute:function(e){var t,n,i,o=[];if(null==this.designSuggestion&&(r.opt(r.as(this.rootForma.controller,l.RootController),(function(e){return e.createGridControllerIfNone()})),(t=this.originalRootForma)&&(r.opt(r.as(t.controller,l.RootController),(function(e){return e.createGridControllerIfNone()})),n=this.templateDocument))){o=r.clone(c.DesignSuggestionFacade.createSuggestionsFromTemplate(n,this.rootForma,t));var h=this.tapIndex%o.length;h>=0&&(this.designSuggestion=o[h])}if(i=this.designSuggestion){i.apply();for(var d=r.clone(this.rootForma.filterWithCallback((function(e){return e.isTypeLockup()}))),p=r.iter(d);!p.done;p.next()){var g,m=p.value;(g=r.as(m.controller,u.TypeLockupController))&&g.updateGroup()}}return s.CorePromise.resolve(new a.SuggestionsActionResult(r.clone(o)))}}}),i)},Tq01:function(e,t,n){var i,o,r,a,s,c,l,u,h,d,p,g,m,f=t,A=n("oAGj"),S=n("Dz6V"),C=n("SpAV"),T=n("gXiO"),y=n("yGNn"),_=n("Kkml");f.ActionExecutionOptions=(i=function(e,t){this.showWaitingFeedback=e,this.showMessageFeedback=t},o={},A.defineClass({name:"ActionExecutionOptions",ctor:i,superName:"CoreObject",statics:{DEFAULT:{get:function(){return void 0===o.DEFAULT&&(o.DEFAULT=new i(S.ActionFeedbackWaitingType.None,S.ActionFeedbackMessageType.None)),o.DEFAULT}}}}),i),f.Action=(r=function(e,t){void 0===t&&(t=f.ActionExecutionOptions.DEFAULT),this.type=e,this.executionOptions=t,T.CoreObject.call(this)},A.defineClass({name:"Action",ctor:r,superName:"CoreObject",props:{canDo:function(e){return!0},getUserAction:function(e){return C.CoreAssert.fail(this.type+" does not implement getUserAction","Action.getUserAction","Actions.swift",57),_.UserActions.AddText()},execute:function(e){return y.CorePromise.reject("no default impl")},updateSelection:function(e){return null}}}),r),f.ActionResult=function(){var e=function(){T.CoreObject.call(this)},t={};return A.defineClass({name:"ActionResult",ctor:e,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===t.NONE&&(t.NONE=new e),t.NONE}},fromPromiseAny:function(t){var n;return null==t?e.NONE:(n=A.as(t,e))?n:(C.CoreAssert.fail("default action impl returned a promise for something other than an ActionResult","ActionResult.fromPromiseAny","Actions.swift",95),e.NONE)}}}),e}(),f.FormaActionResult=(a=function(e){this.formae=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"FormaActionResult",ctor:a,superName:"ActionResult"}),a),f.DoubleActionResult=(s=function(e){this.value=e,f.ActionResult.call(this)},A.defineClass({name:"DoubleActionResult",ctor:s,superName:"ActionResult"}),s),f.TextRangeActionResult=(c=function(e){this.range=e,f.ActionResult.call(this)},A.defineClass({name:"TextRangeActionResult",ctor:c,superName:"ActionResult"}),c),f.LockupStyleActionResult=(l=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"LockupStyleActionResult",ctor:l,superName:"ActionResult"}),l),f.TextEmphasisActionResult=(u=function(e){this.textFormae=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"TextEmphasisActionResult",ctor:u,superName:"ActionResult"}),u),f.AnimationStyleActionResult=(h=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"AnimationStyleActionResult",ctor:h,superName:"ActionResult"}),h),f.ImageStyleActionResult=(d=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"ImageStyleActionResult",ctor:d,superName:"ActionResult"}),d),f.SuggestionsActionResult=(p=function(e){this.suggestions=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"SuggestionsActionResult",ctor:p,superName:"ActionResult"}),p),f.DragActionResult=(g=function(e){this.snapLines=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"DragActionResult",ctor:g,superName:"ActionResult"}),g),f.PlacementActionResult=(m=function(e){this.snapResult=e,f.ActionResult.call(this)},A.defineClass({name:"PlacementActionResult",ctor:m,superName:"ActionResult"}),m),f.ControllerSettingsBehaviorEnum=A.defineEnum("ControllerSettingsBehaviorEnum",{IgnoreControllerSettings:0,SetControllerSettings:1})},U010:function(e,t,n){var i,o,r,a,s=t,c=n("oAGj"),l=n("SpAV"),u=n("gXiO"),h=n("yGNn"),d=n("iCxV"),p=n("kJ8p");s.CUTOUT_SUCCESS_TYPE="cutout_success",s.CUTOUT_RETRY_TYPE="cutout_retry",s.CUTOUT_RETRY_SUCCESS_TYPE="cutout_retry_success",s.CUTOUT_ERROR_TYPE="cutout_error",s.MASK_ENDPOINT="/deepcut/mask",s.VERSION_ENDPOINT="/deepcut/version",s.CutoutMode=c.defineEnum("CutoutMode",{Off:0,BackgroundRemoval:1,ForegroundRemoval:2}),s.CutoutModel=c.defineEnum("CutoutModel",{SAGEMAKER:0,SENSEI:1,MALABI:2,REMOVE_BG:3,CLOUDINARY:4,SENSEI2_BINARY:5,SENSEI2_SOFT:6}),s.CutoutMaskSize=c.defineEnum("CutoutMaskSize",{ORIGINAL:0,SMALL:500,MEDIUM:1e3,LARGE:2e3}),s.CutoutStyle=(i=function(e){this.mode=e,u.CoreObject.call(this)},c.defineClass({name:"CutoutStyle",ctor:i,superName:"CoreObject",props:{equals:function(e){return this.mode==e.mode}}}),i),s.CutoutMaskMetadata=(o=function(e,t,n){this.model=e,this.maskSize=t,this.modelVersion=n,u.CoreObject.call(this)},c.defineClass({name:"CutoutMaskMetadata",ctor:o,superName:"CoreObject",statics:{decode:function(e){if(null!=(e=e)){var t=e.split(":");if(3==t.length){var n,i,r,a;if(null!=(n=c.toInt(t[0]))&&null!=(i=c.toInt(t[1]))&&null!=(r=s.CutoutModel.toCaseValue(n))&&null!=(a=s.CutoutMaskSize.toCaseValue(i))){var l=c.toString(t[2]);return new o(r,a,c.isEmpty(l)?null:l)}c.opt(d.Host.logging,(function(e){return e.warning("[ImageCutoutModelLibrary] Unexpected model or maskSize value found in document")}))}}return null}},props:{equals:function(e){return this.model==e.model&&this.maskSize==e.maskSize&&this.modelVersion==e.modelVersion},encode:function(){var e;return this.model+":"+this.maskSize+":"+((e=this.modelVersion)||null!=e?e:"")}}}),o),s.ImageCutoutLibrary=(r=function(){u.CoreObject.call(this)},a={},c.defineClass({name:"ImageCutoutLibrary",ctor:r,superName:"CoreObject",statics:{imageCutouts_:{get:function(){return void 0===a.imageCutouts_&&(a.imageCutouts_=[new s.CutoutStyle(s.CutoutMode.Off),new s.CutoutStyle(s.CutoutMode.BackgroundRemoval),new s.CutoutStyle(s.CutoutMode.ForegroundRemoval)]),a.imageCutouts_}},getImageCutouts:function(){return r.imageCutouts_},getImageCutout:function(e){return r.imageCutouts_.find((function(t){return t.mode==e}),this)}},props:{getNextImageCutoutOfSameType:function(e){var t;switch(e.mode){case 0:t=r.getImageCutout(s.CutoutMode.Off);break;case 1:t=r.getImageCutout(s.CutoutMode.BackgroundRemoval);break;case 2:t=r.getImageCutout(s.CutoutMode.ForegroundRemoval);break;default:t=r.getImageCutout(s.CutoutMode.Off)}return t},hasNextCutoutOfSameType:function(e){var t;return!!(t=this.getNextImageCutoutOfSameType(e))&&!e.equals(t)}}}),r),s.ImageCutoutModelLibrary=function(){var e=function(){this.modelVersion=null,u.CoreObject.call(this)},t={};return c.defineClass({name:"ImageCutoutModelLibrary",ctor:e,superName:"CoreObject",statics:{CURRENT_MODEL:{get:function(){return void 0===t.CURRENT_MODEL&&(t.CURRENT_MODEL=s.CutoutModel.SENSEI2_SOFT),t.CURRENT_MODEL}},DEFAULT_MASK_SIZE:{get:function(){return void 0===t.DEFAULT_MASK_SIZE&&(t.DEFAULT_MASK_SIZE=s.CutoutMaskSize.MEDIUM),t.DEFAULT_MASK_SIZE}},instance:{get:function(){return void 0===t.instance&&(t.instance=new e),t.instance}},isMaskUptodateWithCurrentModel:function(t){return(t=t)&&t.model==e.CURRENT_MODEL?e.instance.getModelVersion(e.CURRENT_MODEL).then((function(e){var n;return null!=(n=c.as(e,"String"))&&t.modelVersion==n})).fail((function(e){return d.Host.logging.error("Failed to get mask version from API"),!1})):h.CorePromise.resolve(!1)},getModelString:function(e){switch(e){case 0:return"sagemaker";case 1:return"sensei";case 2:return"malabi";case 3:return"remove.bg";case 4:return"cloudinary";case 5:return"sensei2-binary";case 6:return"sensei2-soft";default:return l.CoreAssert.fail("Unknown model value: "+e+".","ImageCutoutModelLibrary.getModelString","ImageCutoutLibrary.swift",269),"sensei2-soft"}},buildMaskNetworkRequestForConfig:function(t,n,i,o){var r,a;return void 0===o&&(o=10),(r=d.Host.network)&&(a=d.Host.imageAnalysis)?h.CorePromise.all([r.getAuthToken(),a.getSaliencyAPIEndpoint(),a.getSaliencyAPIKey()]).then((function(r){var a,s,u,d,g=c.clone(c.as(r,["Array","Any"]));if(l.CoreAssert.isTrue(c.opt(g,(function(e){return 3==e.length})),"Expected three CorePromise results.","ImageCutoutModelLibrary.buildMaskNetworkRequestForConfig","ImageCutoutLibrary.swift",285),(a=g)&&null!=(s=c.as(a[0],"String"))&&null!=(u=c.as(a[1],"String"))&&null!=(d=c.as(a[2],"String"))){var m=new p.HostNetworkRequest(u+n);return m.timeout=o,m.method=i,m.headers["X-API-Key"]=d,m.headers.Authorization="Bearer "+s,m.headers["X-Model"]=e.getModelString(t.model),m}return h.CorePromise.reject("Invalid auth data")})):h.CorePromise.reject("Invalid Host instances")}},props:{setup:function(){this.getModelVersion(e.CURRENT_MODEL,!0)},getModelVersion:function(t,n){void 0===n&&(n=!1);var i,o=this;if(!n&&t==e.CURRENT_MODEL&&null!=this.modelVersion)return h.CorePromise.resolve(this.modelVersion);if(i=d.Host.network){var r=new s.CutoutMaskMetadata(t,s.CutoutMaskSize.ORIGINAL,null);return e.buildMaskNetworkRequestForConfig(r,s.VERSION_ENDPOINT,p.HostNetworkRequestMethod.get).then((function(e){var t;return(t=c.as(e,p.HostNetworkRequest))?i.request(t):h.CorePromise.reject("Invalid network request object")})).then((function(n){var i,r;return(i=c.as(n,p.HostNetworkResponse))&&(r=i.data)?r.asJSON().then((function(n){var i,r;return(i=c.as(n,["Dictionary","String","String"]))&&null!=(r=i.version)?(t==e.CURRENT_MODEL&&o.setModelVersion(r),h.CorePromise.resolve(r)):h.CorePromise.reject("[ImageCutoutModelLibrary] Failed to parse JSON response from `/version` call")})):h.CorePromise.reject("[ImageCutoutModelLibrary] Failed to get model version from API")}))}return h.CorePromise.reject("[ImageCutoutModelLibrary] Failed to get network impl")},setModelVersion:function(e){this.modelVersion=e}}}),e}()},"b/QB":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("SpAV"),s=n("yhkb"),c=n("gXiO"),l=n("ascj"),u=n("SDdr"),h=n("uWOl");o.ImageFilterLibrary=(i=function(){this.styleMixes={Darken:[.1,.3,.5,.7]},this.imageStyles=[h.ImageStyle.init_1265("None"),h.ImageStyle.init_1265("Greyscale",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:l.ColorRole.FieldSecondary,value:"themeDerivedLight"}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Darken",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:l.ColorRole.FieldSecondary,value:"themeDerivedDark"}]),u.CompositeFilter.init_514f(void 0,"Duotone",.5,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Blur",null,u.CompositeFilter.init_514f(void 0,"Blur",1,"none",void 0,void 0,"none")),h.ImageStyle.init_1265("Overlay",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:r.as(s.ColorLibraryController.FILTER_OVERLAY_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"ReduceContrastOverlay",.25,"overlay",!1,.5,"offset",1,1)),h.ImageStyle.init_1265("Multiply",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_MULTIPLY_KEYS[1]}]),u.CompositeFilter.init_514f(void 0,"DesaturateMultiply",.4,"multiply",!0,void 0,"offset",.5,1)),h.ImageStyle.init_1265("Blend",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_BLEND_KEYS[2]}]),u.CompositeFilter.init_514f(void 0,"Blend",.3,"normal",!1,void 0,"none")),h.ImageStyle.init_1265("DuoTone",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:r.as(s.ColorLibraryController.FILTER_DUOTONE_LOW_KEYS[2],"String")},{key:l.ColorRole.FieldSecondary,value:r.as(s.ColorLibraryController.FILTER_DUOTONE_HIGH_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Screen",l.ColorTable.init_25f6([{key:l.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_SCREEN_KEYS[0]}]),u.CompositeFilter.init_514f(void 0,"Screen",.4,"screen",!1,void 0,"none"))],c.CoreObject.call(this)},r.defineClass({name:"ImageFilterLibrary",ctor:i,superName:"CoreObject",props:{getImageStyle:function(e){for(var t,n=r.iter(this.imageStyles);!n.done;n.next()){var i=n.value;if(e==i.name){t=i;break}}return t},getAllImageStyles:function(){return this.imageStyles},getNextImageStyleOfSameType:function(e,t){void 0===t&&(t=!0);var n,i,o,c,d=e.name,p=!0;switch(d){case"None":n=this.getImageStyle("None");break;case"Greyscale":n=this.getImageStyle("Greyscale");break;case"Blur":n=this.getImageStyle("Blur");break;case"Darken":(n=r.as(this.getImageStyle("Darken").clone(),h.ImageStyle)).colorLibrary=e.colorLibrary;break;case"Overlay":case"Multiply":case"Blend":case"Screen":if((n=r.as(this.getImageStyle(d).clone(),h.ImageStyle)).colorLibrary=e.colorLibrary,null==(f=e.colors.colorID(l.ColorRole.FieldPrimary)))return a.CoreAssert.fail("Style '"+d+"' missing FieldPrimary key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",383),null;var g=s.ColorLibraryController.getNextKeyInSet(f),m=g[0];p=_=g[1],n.colors.setColorId(l.ColorRole.FieldPrimary,m);break;case"DuoTone":var f;if((n=r.as(this.getImageStyle("DuoTone").clone(),h.ImageStyle)).colorLibrary=e.colorLibrary,null==(f=e.colors.colorID(l.ColorRole.FieldPrimary)))return a.CoreAssert.fail("Missing color key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",398),null;var A,S=s.ColorLibraryController.getNextKeyInSet(f),C=S[0];if(S[1],n.colors.setColorId(l.ColorRole.FieldPrimary,C),null==(A=e.colors.colorID(l.ColorRole.FieldSecondary)))return a.CoreAssert.fail("Missing color key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",412),null;var T=s.ColorLibraryController.getNextKeyInSet(A),y=T[0],_=T[1];n.colors.setColorId(l.ColorRole.FieldSecondary,y),p=_;break;default:n=this.getImageStyle("None")}if((i=this.styleMixes[d])&&null!=(o=r.opt(r.as(e.filter,u.CompositeFilter),(function(e){return e.mix})))&&t&&p&&null!=(c=r.indexOf(i,o))){var v=i[(c+1)%i.length];n.filter.mix=v}return r.opt(n,(function(t){return t.adjustments=e.adjustments})),r.opt(n,(function(t){return t.opacity=e.opacity})),n},getImageStyles:function(){return[this.getImageStyle("None"),this.getImageStyle("Greyscale"),this.getImageStyle("Darken"),this.getImageStyle("Overlay"),this.getImageStyle("Blend"),this.getImageStyle("Screen"),this.getImageStyle("DuoTone"),this.getImageStyle("Multiply")]},hasNextStyleOfSameType:function(e){var t;return!!(t=this.getNextImageStyleOfSameType(e,!0))&&!e.equals(t)}}}),i)},bqbo:function(e,t,n){var i,o,r,a,s,c,l,u,h,d,p,g,m,f,A=t,S=n("oAGj"),C=n("Tq01"),T=n("0wFF"),y=n("Dz6V"),_=n("aO0D"),v=n("yGNn"),P=n("ZK0l"),b=n("iCxV"),E=n("U010"),I=n("fdtz"),F=n("lmwz"),D=n("T6jX"),w=n("Kkml");A.ReplaceImagesWithColorsAction=(i=function e(t,n,i){void 0===i&&(i=!0),this.formae=S.clone(t),this.colors=S.clone(n),this.selectReplacements=i,C.Action.call(this,e.TYPE)},S.defineClass({name:"ReplaceImagesWithColorsAction",ctor:i,superName:"Action",statics:{TYPE:"ReplaceImagesWithColorsAction"},props:{getUserAction:function(e){return w.UserActions.ReplaceImageWithShape()},execute:function(e){var t=S.clone(this.formae||e.selection.asFormaArray()),n=S.clone(F.ImageFacade.replaceImagesWithColors(S.clone(t),S.clone(this.colors)));return D.TheoDocumentUtils.updateConstrainedImageInfo(e.document),0==n.length?v.CorePromise.reject("did not get any Forma back from ImageFacade.replaceImageWithColors"):(this.newSelection=S.clone(n),v.CorePromise.resolve(new C.FormaActionResult(S.clone(n))))},updateSelection:function(e){return null!=this.newSelection&&this.selectReplacements&&e.selection.replaceSelectionWithFormae(S.clone(this.newSelection)),this.newSelection}}}),i),A.SetImageFilterAction=(o=function e(t,n){void 0===n&&(n=!1),this.style=t,this.applyFilterToAllBackgroundImages=n,C.Action.call(this,e.TYPE)},S.defineClass({name:"SetImageFilterAction",ctor:o,superName:"Action",statics:{TYPE:"SetImageFilterAction"},props:{getUserAction:function(e){return w.UserActions.ApplyFilter()},execute:function(e){return F.ImageFacade.applyImageFilter(e,this.style,this.applyFilterToAllBackgroundImages),v.CorePromise.resolve(null)}}}),o),A.ShuffleImageFilterAction=(r=function e(t,n,i){void 0===i&&(i=!1),this.style=t,this.page=n,this.applyFilterToAllBackgroundImages=i,C.Action.call(this,e.TYPE)},S.defineClass({name:"ShuffleImageFilterAction",ctor:r,superName:"Action",statics:{TYPE:"ShuffleImageFilterAction"},props:{getUserAction:function(e){return w.UserActions.ShuffleFilter()},execute:function(e){var t=this.page.imageFilterLibrary.getNextImageStyleOfSameType(this.style,!0);return null!=t&&F.ImageFacade.applyImageFilter(e,t,this.applyFilterToAllBackgroundImages),v.CorePromise.resolve(new C.ImageStyleActionResult(t))}}}),r),A.SetImageCutoutAction=(a=function e(t,n,i,o){void 0===i&&(i=E.ImageCutoutModelLibrary.CURRENT_MODEL),void 0===o&&(o=E.ImageCutoutModelLibrary.DEFAULT_MASK_SIZE),this.formaToMask=t,this.cutout=n,this.model=i,this.maskSize=o,C.Action.call(this,e.TYPE,new C.ActionExecutionOptions(y.ActionFeedbackWaitingType.Loading,y.ActionFeedbackMessageType.Error))},S.defineClass({name:"SetImageCutoutAction",ctor:a,superName:"Action",statics:{TYPE:"SetImageCutoutAction"},props:{getUserAction:function(e){return w.UserActions.SetImageCutout()},execute:function(e){var t,n=this;return(t=F.ImageFacade.getFrameFormaForForma(this.formaToMask))?this.cutout.mode==E.CutoutMode.Off?F.ImageFacade.removeCutoutMaskFromImage(t):F.ImageFacade.createCutoutMaskForImage(t,this.model,this.maskSize).then((function(e){var i,o;return(i=S.as(e,I.ImageForma))&&(o=i.contentNode)?(F.ImageFacade.setCutoutModeForForma(t,n.cutout.mode),o.whenLoaded().then((function(e){return n.cutout.mode!=E.CutoutMode.Off&&F.ImageFacade.setTightCropToCutoutMask(t,i),t.isBackgroundImage()&&S.opt(S.as(S.opt(t.parent,(function(e){return e.controller})),P.GroupController),(function(e){return e.updateGroup()})),S.opt(b.Host.logging,(function(e){return e.logToAnalytics(T.AnalyticsConstants.kAnalyticsDataEditImageRemoveBackgroundApplied,{contextualData1:"appliedCutout: "+n.cutout.mode})})),null}))):e})):v.CorePromise.reject("Failed to apply cutout to forma")}}}),a),A.ChangeImageAdjustmentsAction=(s=function(){},S.defineClass({name:"ChangeImageAdjustmentsAction",ctor:s,superName:"Action",statics:{TYPE:"ChangeImageAdjustmentsAction",ActionWithDictionary:function(e,t){return void 0===t&&(t=null),s.init_f8e4(S.clone(e),S.clone(t))},ActionWithKeyValue:function(e,t,n){return void 0===n&&(n=null),s.init_dd66(e,t,S.clone(n))}},props:{init_dd66:function(e,t,n){void 0===n&&(n=null),this.adjustments=S.dict([e,t]),this.formaeToAdjust=S.clone(n),C.Action.call(this,s.TYPE)},init_f8e4:function(e,t){void 0===t&&(t=null),this.adjustments=S.clone(e),this.formaeToAdjust=S.clone(t),C.Action.call(this,s.TYPE)},getUserAction:function(e){return w.UserActions.ChangeImageAdjustments()},execute:function(e){var t=this;return S.clone(this.formaeToAdjust||e.selection.asFormaArray()).forEach((function(e){if(e.isImage()){var n,i=F.ImageFacade.getImageFormaForForma(e);if(n=S.opt(i,(function(e){return e.style}))){for(var o=S.iter(t.adjustments);!o.done;o.next()){var r=o.key,a=o.value;n.adjustments=S.opt(n.adjustments,(function(e){return e.copyWithNewValue(a,r)}))}S.opt(i,(function(e){return e.applyStyle(n)}))}for(var s=S.iter(S.keys(t.adjustments));!s.done;s.next())r=s.value,S.opt(b.Host.logging,(function(e){return e.logToAnalytics(T.AnalyticsConstants.kAnalyticsDataImageAdjusted,{contextualData1:"type: "+r})}))}})),v.CorePromise.resolve(null)}}}),s),A.ApplyShapeMaskToImageAction=(c=function e(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.forma=t,this.shapeId=n,this.usingFrameBounds=i,C.Action.call(this,e.TYPE)},S.defineClass({name:"ApplyShapeMaskToImageAction",ctor:c,superName:"Action",statics:{TYPE:"ApplyShapeMaskToImageAction"},props:{getUserAction:function(e){return w.UserActions.ApplyShapeMaskToImage()},execute:function(e){var t,n,i;return null!=(t=this.shapeId)?(n=_.CropAssetLibrary.getCropShapeFromID(t))&&(i=F.ImageFacade.getFrameFormaForForma(this.forma))?F.ImageFacade.applyMaskToForma(i,n,this.usingFrameBounds).thenReturn(null):v.CorePromise.reject("Failed to apply shape mask to forma"):(F.ImageFacade.removeMaskForForma(this.forma),v.CorePromise.resolve(null))}}}),c),A.ApplyRasterMaskToImageAction=(l=function e(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.forma=t,this.rasterMaskId=n,this.usingFrameBounds=i,C.Action.call(this,e.TYPE)},S.defineClass({name:"ApplyRasterMaskToImageAction",ctor:l,superName:"Action",statics:{TYPE:"ApplyRasterMaskToImageAction"},props:{getUserAction:function(e){return w.UserActions.ApplyRasterMaskToImage()},execute:function(e){var t,n,i;return null!=(t=this.rasterMaskId)?(n=_.CropAssetLibrary.getRasterMaskFromID(t))&&(i=F.ImageFacade.getFrameFormaForForma(this.forma))?F.ImageFacade.applyMaskToForma(i,n,this.usingFrameBounds).thenReturn(null):v.CorePromise.reject("Failed to apply raster mask to forma"):(F.ImageFacade.removeMaskForForma(this.forma),v.CorePromise.resolve(null))}}}),l),A.SetImageAsFloatingAction=(u=function e(){C.Action.call(this,e.TYPE)},S.defineClass({name:"SetImageAsFloatingAction",ctor:u,superName:"Action",statics:{TYPE:"SetImageAsFloatingAction"},props:{getUserAction:function(e){return w.UserActions.SetImageAsFloating()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&F.ImageFacade.setFloatingImage(t),v.CorePromise.resolve(null)}}}),u),A.SetImageAsBackgroundAction=(h=function e(){C.Action.call(this,e.TYPE)},S.defineClass({name:"SetImageAsBackgroundAction",ctor:h,superName:"Action",statics:{TYPE:"SetImageAsBackgroundAction"},props:{getUserAction:function(e){return w.UserActions.SetImageAsBackground()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&F.ImageFacade.setBackgroundImage(t),v.CorePromise.resolve(null)}}}),h),A.AddHiddenImageToGridAction=(d=function e(t){this.formae=S.clone(t),C.Action.call(this,e.TYPE)},S.defineClass({name:"AddHiddenImageToGridAction",ctor:d,superName:"Action",statics:{TYPE:"AddHiddenImageToGridAction"},props:{getUserAction:function(e){return w.UserActions.AddHiddenImageToGrid()},execute:function(e){for(var t=S.iter(this.formae);!t.done;t.next()){var n;(n=t.value.parent)&&F.ImageFacade.addHiddenImageToGrid(n)}return v.CorePromise.resolve(null)}}}),d),A.EnterCropModeAction=(p=function e(t){this.forma=t,C.Action.call(this,e.TYPE)},S.defineClass({name:"EnterCropModeAction",ctor:p,superName:"Action",statics:{TYPE:"EnterCropModeAction"},props:{getUserAction:function(e){return w.UserActions.EnterCropMode()},execute:function(e){var t;return(t=F.ImageFacade.getImageFormaForForma(this.forma))&&F.ImageFacade.enterCropMode(t),v.CorePromise.resolve(null)}}}),p),A.ExitCropModeAction=(g=function e(){C.Action.call(this,e.TYPE)},S.defineClass({name:"ExitCropModeAction",ctor:g,superName:"Action",statics:{TYPE:"ExitCropModeAction"},props:{getUserAction:function(e){return w.UserActions.ExitCropMode()},execute:function(e){var t;return(t=S.opt(e.document,(function(e){return e.firstPage.root})))&&F.ImageFacade.exitCropMode(t),v.CorePromise.resolve(null)}}}),g),A.SetImageCropToFreeformAction=(m=function e(t){this.forma=t,C.Action.call(this,e.TYPE)},S.defineClass({name:"SetImageCropToFreeformAction",ctor:m,superName:"Action",statics:{TYPE:"SetImageCropToFreeformAction"},props:{getUserAction:function(e){return w.UserActions.SetImageCropToFreeform()},execute:function(e){return F.ImageFacade.removeMaskForForma(this.forma),F.ImageFacade.setImageCropToFreeform(this.forma),v.CorePromise.resolve(null)}}}),m),A.CropImageToRatioAction=(f=function e(t,n,i){void 0===n&&(n=0),void 0===i&&(i=null),this.forma=t,this.ratio=n,this.usingFrameBounds=i,C.Action.call(this,e.TYPE)},S.defineClass({name:"CropImageToRatioAction",ctor:f,superName:"Action",statics:{TYPE:"CropImageToRatioAction"},props:{getUserAction:function(e){return w.UserActions.CropImageToRatio()},execute:function(e){return F.ImageFacade.cropImageToRatio(this.forma,this.ratio,this.usingFrameBounds),v.CorePromise.resolve(null)}}}),f)},cEBg:function(e,t,n){var i,o,r=t,a=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("K9Oa"),u=n("Kkml");r.ChangePageSizeAction=(i=function e(t,n){this.page=t,this.designSize=n,s.Action.call(this,e.TYPE)},a.defineClass({name:"ChangePageSizeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangePageSizeAction"},props:{getUserAction:function(e){return u.UserActions.ChangePageSize()},execute:function(e){return l.PageFacade.setPageDesignSize(this.page,this.designSize),c.CorePromise.resolve(null)}}}),i),r.RecordOriginalPageSizeAction=(o=function e(t){this.page=t,s.Action.call(this,e.TYPE)},a.defineClass({name:"RecordOriginalPageSizeAction",ctor:o,superName:"Action",statics:{TYPE:"RecordOriginalPageSizeAction"},props:{getUserAction:function(e){return u.UserActions.RecordOriginalPageSize()},execute:function(e){return this.page.originalSizeID=this.page.sizeID,c.CorePromise.resolve(null)}}}),o)},cRpU:function(e,t,n){var i,o,r,a,s,c,l,u,h,d,p,g,m,f,A,S,C,T,y,_,v,P,b=t,E=n("oAGj"),I=n("Tq01"),F=n("SpAV"),D=n("yGNn"),w=n("c+uM"),N=n("Vm85"),U=n("8t9B"),R=n("oKlP"),x=n("oKI3"),k=n("Kkml");b.SetTextAction=(i=function e(t,n){this.text=t,this.forma=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetTextAction",ctor:i,superName:"Action",statics:{TYPE:"SetText"},props:{getUserAction:function(e){return k.UserActions.SetText(this.forma.formaID)},execute:function(e){return N.TextFacade.replaceTextForLockup(this.forma,this.text),D.CorePromise.resolve(null)}}}),i),b.SetFontAction=(o=function e(t,n){void 0===n&&(n=!1),this.font=t,this.charStyleMode=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetFontAction",ctor:o,superName:"Action",statics:{TYPE:"SetFont"},props:{getUserAction:function(e){return k.UserActions.SetFont(e.selection.IDs.join(","))},execute:function(e){var t=E.clone(e.selection.asFormaArray());return N.TextFacade.setFont(this.font,E.clone(t),this.charStyleMode),1==t.length&&E.opt(E.as(t[0].controller,U.TypeLockupController),(function(e){return e.snapSizeToBounds()})),D.CorePromise.resolve(null)}}}),o),b.ChangeTextLayoutAndAlignmentAction=(r=function e(t,n,i,o,r,a){void 0===i&&(i=!1),void 0===o&&(o=x.TextPathID.UNSET),void 0===r&&(r=null),void 0===a&&(a=w.VerticalLockupAlignment.UNSET),w.LockupStyle.isPath(t)?(o==x.TextPathID.Custom&&null==r||o!=x.TextPathID.Custom&&null!=r)&&F.CoreAssert.warning("pathID/customPath mismatch"):o==x.TextPathID.UNSET&&null==r||F.CoreAssert.warning("Why are we providing a path or path id with a non-path layout?"),this.layout=t,this.alignment=n,this.pathID=o,this.customPath=r,this.charStyleMode=i,this.verticalAlignment=a,I.Action.call(this,e.TYPE)},E.defineClass({name:"ChangeTextLayoutAndAlignmentAction",ctor:r,superName:"Action",statics:{TYPE:"ChangeTextLayoutAndAlignment"},props:{getUserAction:function(e){return k.UserActions.ChangeTextAlignment(e.selection.IDs.join(","))},execute:function(e){var t=E.clone(e.selection.asFormaArray());return N.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,E.clone(t),this.charStyleMode,this.pathID,this.customPath,this.verticalAlignment),t.forEach((function(e){return E.opt(E.as(e.controller,U.TypeLockupController),(function(e){return e.snapSizeToBounds()}))})),D.CorePromise.resolve(null)}}}),r),b.ChangeTextLineSpacingAction=(a=function e(t,n){void 0===n&&(n=!1),this.lineSpacing=t,this.charStyleMode=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"ChangeTextLineSpacingAction",ctor:a,superName:"Action",statics:{TYPE:"ChangeTextLineSpacing"},props:{getUserAction:function(e){return k.UserActions.ChangeLineSpacing()},execute:function(e){return N.TextFacade.setLineSpacing(this.lineSpacing,E.clone(e.selection.asFormaArray()),this.charStyleMode),D.CorePromise.resolve(null)}}}),a),b.ChangeTextAttributesAction=(s=function e(t,n,i,o,r,a){void 0===o&&(o=!1),void 0===r&&(r=x.TextPathID.UNSET),void 0===a&&(a=null),this.layout=t,this.alignment=n,this.lineSpacing=i,this.charStyleMode=o,this.pathID=r,this.customPath=a,I.Action.call(this,e.TYPE)},E.defineClass({name:"ChangeTextAttributesAction",ctor:s,superName:"Action",statics:{TYPE:"ChangeTextAttributes"},props:{getUserAction:function(e){return k.UserActions.ChangeTextAttributes()},execute:function(e){return this.layout==w.LockupLayout.SKIP&&this.alignment==w.LockupAlignment.SKIP||N.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,E.clone(e.selection.asFormaArray()),this.charStyleMode,this.pathID,this.customPath),isNaN(this.lineSpacing)||N.TextFacade.setLineSpacing(this.lineSpacing,E.clone(e.selection.asFormaArray()),this.charStyleMode),D.CorePromise.resolve(null)}}}),s),b.SetFontSizeAction=(c=function e(t,n,i){void 0===n&&(n=new R.TheoPoint(.5,.5)),void 0===i&&(i=null),this.size=t,this.pin=n,this.formae=E.clone(i),I.Action.call(this,e.TYPE)},E.defineClass({name:"SetFontSizeAction",ctor:c,superName:"Action",statics:{TYPE:"SetFontSize"},props:{getUserAction:function(e){return k.UserActions.SetFontSize()},execute:function(e){return N.TextFacade.setFontSize(this.size,E.clone(this.formae||e.selection.asFormaArray()),this.pin),D.CorePromise.resolve(null)}}}),c),b.MatchSizeAction=(l=function e(t,n,i){this.size=t,this.snapSizes=E.clone(n),this.pin=i,I.Action.call(this,e.TYPE)},E.defineClass({name:"MatchSizeAction",ctor:l,superName:"Action",statics:{TYPE:"MatchSize"},props:{getUserAction:function(e){return isNaN(this.size)?k.UserActions.MatchSize():k.UserActions.ResizeItem()},execute:function(e){var t;return t=isNaN(this.size)?N.TextFacade.matchNextSize(E.clone(this.snapSizes),this.pin,E.clone(e.selection.asFormaArray())):N.TextFacade.matchNearestSize(this.size,E.clone(this.snapSizes),this.pin,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(new I.DoubleActionResult(t))}}}),l),b.SetLineBreakAction=(u=function e(t,n){void 0===n&&(n=!1),this.lineBreak=t,this.charStyleMode=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetLineBreakAction",ctor:u,superName:"Action",statics:{TYPE:"SetLineBreak"},props:{getUserAction:function(e){return k.UserActions.ToggleLineBreak()},execute:function(e){return N.TextFacade.setLineBreak(this.lineBreak,E.clone(e.selection.asFormaArray()),this.charStyleMode),D.CorePromise.resolve(null)}}}),u),b.SetNextSpacingSequenceAction=(h=function e(t){this.sequence=t,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetNextSpacingSequenceAction",ctor:h,superName:"Action",statics:{TYPE:"SetNextSpacingSequence"},props:{getUserAction:function(e){return k.UserActions.SetNextSpacingSequence()},execute:function(e){return N.TextFacade.setNextSpacingSequence(this.sequence,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),h),b.SetTrackingAction=(d=function e(t,n){this.tracking=t,this.pin=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetTrackingAction",ctor:d,superName:"Action",statics:{TYPE:"SetTracking"},props:{getUserAction:function(e){return k.UserActions.SetTracking()},execute:function(e){return N.TextFacade.setTracking(this.tracking,this.pin,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),d),b.SetLeadingAction=(p=function e(t,n){this.leading=t,this.pin=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetLeadingAction",ctor:p,superName:"Action",statics:{TYPE:"SetLeading"},props:{getUserAction:function(e){return k.UserActions.SetLeading()},execute:function(e){return N.TextFacade.setLeading(this.leading,this.pin,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),p),b.SetPaddingAction=(g=function e(t){this.padding=t,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetPaddingAction",ctor:g,superName:"Action",statics:{TYPE:"SetPadding"},props:{getUserAction:function(e){return k.UserActions.SetPadding()},execute:function(e){return N.TextFacade.setPadding(this.padding,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),g),b.SetTextLookAction=(m=function e(t){this.look=t,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetTextLookAction",ctor:m,superName:"Action",statics:{TYPE:"SetTextLook"},props:{getUserAction:function(e){return k.UserActions.SetTextLook(e.selection.IDs.join(","))},execute:function(e){return N.TextFacade.setTextLook(this.look,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),m),b.SetTextEffectsAttributesAction=(f=function e(t,n,i){this.outlineStrokeWeight=t,this.shadowOffset=n,this.shadowAngle=i,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetTextEffectsAttributesAction",ctor:f,superName:"Action",statics:{TYPE:"SetTextEffectsAttributes"},props:{getUserAction:function(e){return k.UserActions.SetTextEffectsAttributes()},execute:function(e){return N.TextFacade.setTextEffectsAttributes(this.outlineStrokeWeight,this.shadowOffset,this.shadowAngle,E.clone(e.selection.asFormaArray())),D.CorePromise.resolve(null)}}}),f),b.SetHighlightMethodAction=(A=function e(t,n){void 0===n&&(n=!1),this.method=t,this.charStyleMode=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"SetHighlightMethodAction",ctor:A,superName:"Action",statics:{TYPE:"SetHighlightMethod"},props:{getUserAction:function(e){return k.UserActions.SetHighlightMethod(e.selection.IDs.join(","))},execute:function(e){return N.TextFacade.setHightlightMethod(this.method,E.clone(e.selection.asFormaArray()),this.charStyleMode),D.CorePromise.resolve(null)}}}),A),b.EnterCharStyleModeAction=(S=function e(t){this.forma=t,I.Action.call(this,e.TYPE)},E.defineClass({name:"EnterCharStyleModeAction",ctor:S,superName:"Action",statics:{TYPE:"EnterCharStyleMode"},props:{getUserAction:function(e){var t,n=!1;return(t=E.as(this.forma.controller,U.TypeLockupController))&&(n=0==t.charStyleRanges.length),k.UserActions.EnterCharStyleMode(n)},execute:function(e){return e.selection.inCharStyleMode=!0,N.TextFacade.setCharStyleMode(this.forma,!0),D.CorePromise.resolve(null)}}}),S),b.ExitCharStyleModeAction=(C=function e(t){this.forma=t,I.Action.call(this,e.TYPE)},E.defineClass({name:"ExitCharStyleModeAction",ctor:C,superName:"Action",statics:{TYPE:"ExitCharStyleMode"},props:{getUserAction:function(e){return k.UserActions.ExitCharStyleMode()},execute:function(e){return e.selection.inCharStyleMode=!1,N.TextFacade.setCharStyleMode(this.forma,!1),D.CorePromise.resolve(null)}}}),C),b.ApplyCharStyleAction=(T=function e(t,n,i,o){this.textForma=t,this.characterStyle=n,this.applyMode=i,this.startRange=o,I.Action.call(this,e.TYPE)},E.defineClass({name:"ApplyCharStyleAction",ctor:T,superName:"Action",statics:{TYPE:"ApplyCharStyle"},props:{getUserAction:function(e){return k.UserActions.ApplyCharStyle()},execute:function(e){var t=N.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!0);return D.CorePromise.resolve(new I.TextRangeActionResult(t))}}}),T),b.ApplyCharStyleWithoutUIAction=(y=function(e,t,n,i){this.textForma=e,this.characterStyle=t,this.applyMode=n,this.startRange=i,I.Action.call(this,b.ApplyCharStyleAction.TYPE)},E.defineClass({name:"ApplyCharStyleWithoutUIAction",ctor:y,superName:"Action",statics:{TYPE:"ApplyCharStyleWithoutUI"},props:{getUserAction:function(e){return k.UserActions.ApplyCharStyleWithoutUI()},execute:function(e){var t=N.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!1);return D.CorePromise.resolve(new I.TextRangeActionResult(t))}}}),y),b.UpdateCharStyleRangeAction=(_=function e(t,n,i){this.forma=t,this.changedRange=n,this.replacementLength=i,I.Action.call(this,e.TYPE)},E.defineClass({name:"UpdateCharStyleRangeAction",ctor:_,superName:"Action",statics:{TYPE:"UpdateCharStyleRange"},props:{getUserAction:function(e){return k.UserActions.UpdateCharStyleRange(this.forma.formaID)},execute:function(e){return N.TextFacade.updateCharStyleRange(this.forma,this.changedRange,this.replacementLength),D.CorePromise.resolve(null)}}}),_),b.ApplyTextStyleSuggestionAction=(v=function e(t,n,i,o){this.style=t,this.forma=n,this.wheelEvaluator=i,this.useEnhancedWheel=o,I.Action.call(this,e.TYPE)},E.defineClass({name:"ApplyTextStyleSuggestionAction",ctor:v,superName:"Action",statics:{TYPE:"ApplyTextStyleSuggestion"},props:{getUserAction:function(e){return k.UserActions.ApplyTextStyleSuggestion(this.forma.formaID)},execute:function(e){var t=N.TextFacade.applyTextStyleSuggestion(this.style,this.forma,this.wheelEvaluator,this.useEnhancedWheel);return D.CorePromise.resolve(new I.LockupStyleActionResult(t))}}}),v),b.ApplyNextTextEmphasisSuggestionAction=(P=function e(t,n){this.forma=t,this.wheelEvaluator=n,I.Action.call(this,e.TYPE)},E.defineClass({name:"ApplyNextTextEmphasisSuggestionAction",ctor:P,superName:"Action",statics:{TYPE:"ApplyTextEmphasisSuggestion"},props:{getUserAction:function(e){return k.UserActions.ApplyTextEmphasisSuggestion(this.forma.formaID)},execute:function(e){var t=E.clone(N.TextFacade.applyNextTextEmphasisSuggestion(this.forma,this.wheelEvaluator));return D.CorePromise.resolve(new I.TextEmphasisActionResult(E.clone(t)))}}}),P)},g8Fi:function(e,t,n){var i,o,r,a,s,c=t,l=n("oAGj"),u=n("SpAV"),h=n("gXiO"),d=n("iCxV"),p=n("90dd"),g=n("oKlP"),m=n("ZoS2");c.PointerTypeEnum=l.defineEnum("PointerTypeEnum",{Mouse:0,Touch:1}),c.PointerStatus=l.defineEnum("PointerStatus",{DragFree:0,DragHeld:1,DragActive:2,DragInactive:3}),c.PointerMark=(i=function(e,t){this.when=e,this.point=t},l.defineClass({name:"PointerMark",ctor:i,props:{div:function(e){return new i(this.when/e,{x:this.point.x/e,y:this.point.y/e})}}}),i),c._minus_PointerMark_PointerMark=function(e,t){return new c.PointerMark(e.when-t.when,{x:e.point.x-t.point.x,y:e.point.y-t.point.y})},c._plus_PointerMark_PointerMark=function(e,t){return new c.PointerMark(e.when+t.when,{x:e.point.x+t.point.x,y:e.point.y+t.point.y})},c.PointerState=(o=function(e,t,n,i,o){this.down=!1,this.cancelled=!1,this.tapCount=1,this.modifierKeys={},this.pointerStatus=c.PointerStatus.DragFree,this.slippage=g.TheoPoint.ZERO,this.id=e,this.type=t,this.currentPage=n,this.startLocation=i,this.currentLocation=i,this.startTime=o,this.currentTime=o,this.history=[],h.CoreObject.call(this),this.updateHistory(o,i)},l.defineClass({name:"PointerState",ctor:o,superName:"CoreObject",props:{updateState:function(e){u.CoreAssert.isTrue(e.type==this.type&&e.onPage===this.currentPage&&e.id==this.id,void 0,"PointerState.updateState","PointersState.swift",142),this.currentLocation=e.loc,this.currentTime=e.when,this.updateHistory(e.when,e.loc),this.tapCount=e.tapCount,this.cancelled=e.cancelled,this.viewportTransform=e.viewportTransform,this.modifierKeys=l.clone(e.modifierKeys)},updateHistory:function(e,t){var n=this.history.length-28;n>0&&this.history.splice(0,n),this.history.push(new c.PointerMark(e,{x:t.x,y:t.y}))},pointerVelocity:function(){for(var e=d.Host.async.getSystemUptimeInSeconds()-.2,t=[],n=this.history.length-1;n>=0&&!(this.history[n].when<e);)t.splice(0,0,this.history[n]),n-=1;for(var i=l.clone(function(e,t){var n=l.clone(e),i=t;if(i>e.length&&(i=e.length),i<=1)return n;for(var o=l.iter(l.range(1,i,!1));!o.done;o.next())for(var r=o.value,a=l.iter(l.range(0,e.length-r,!1));!a.done;a.next())n[r+(h=a.value)]=c._plus_PointerMark_PointerMark(n[r+h],e[h]);for(var s=l.iter(l.range(1,i,!1));!s.done;s.next())n[r=s.value]=n[r].div(l.toDouble(r+1));for(var u=l.iter(l.range(i,e.length,!1));!u.done;u.next()){var h;n[h=u.value]=n[h].div(l.toDouble(i))}return n}(l.clone(t),3)),o=3,r=2,a=0,s=0;o<i.length;){var u=c._minus_PointerMark_PointerMark(i[o],i[r]);a+=u.when,s+=Math.sqrt(u.point.x*u.point.x+u.point.y*u.point.y),o+=1,r+=1}var h=s/a;return isNaN(h)?0:h}}}),o),c.PointerUpdate=(r=function(e,t,n,i,o){this.cancelled=!1,this.tapCount=1,this.id=e,this.type=t,this.onPage=n,this.loc=i,this.when=o,this.cancelled=!1,this.tapCount=1,this.modifierKeys={}},l.defineClass({name:"PointerUpdate",ctor:r,superName:"CoreObject"}),r),c.PointersState=(a=function(){this.LONG_PRESS_TIME_THRESHOLD=1.25,this.LONG_PRESS_DIST_THRESHOLD=50,this.pointers_=[],m.TheoPublishingObject.call(this)},l.defineClass({name:"PointersState",ctor:a,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{onPointersDown:function(e){for(var t=[],n=l.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(u.CoreAssert.isTrue(o.type==c.PointerTypeEnum.Mouse,void 0,"PointersState.onPointersDown","PointersState.swift",326),l.remove(this.pointers_,i)),(i=new c.PointerState(o.id,o.type,o.onPage,o.loc,o.when)).viewportTransform=o.viewportTransform,i.down=!0,i.modifierKeys=l.clone(o.modifierKeys),this.pointers_.push(i),t.push(i)}this.publish(new c.PointersStateChangeMessage(this,c.PointersStateChangeTypeEnum.PointersDown,l.clone(t)))},onPointersMoved:function(e){for(var t=[],n=l.iter(e);!n.done;n.next()){var i=n.value,o=this.pointerByID(i.id);null==o&&((o=new c.PointerState(i.id,i.type,i.onPage,i.loc,i.when)).down=!1,u.CoreAssert.isTrue(i.type==c.PointerTypeEnum.Mouse,void 0,"PointersState.onPointersMoved","PointersState.swift",355),this.pointers_.push(o)),o.updateState(i),t.push(o)}this.publish(new c.PointersStateChangeMessage(this,c.PointersStateChangeTypeEnum.PointersMoved,l.clone(t)))},onPointersUp:function(e){for(var t=[],n=l.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(i.type==c.PointerTypeEnum.Touch&&l.remove(this.pointers_,i),i.updateState(o),t.push(i))}var r=new c.PointersStateChangeMessage(this,c.PointersStateChangeTypeEnum.PointersUp,l.clone(t));this.publish(r)},forEachPointer:function(e){for(var t=l.iter(this.pointers_);!t.done;t.next())e(t.value)},forEachPointerDown:function(e){for(var t=l.iter(this.pointers_);!t.done;t.next()){var n=t.value;n.down&&e(n)}},pointerCount:function(){return this.pointers_.length},pointerDownCount:function(){for(var e=0,t=l.iter(this.pointers_);!t.done;t.next())t.value.down&&(e+=1);return e},pointerByID:function(e){for(var t=l.iter(this.pointers_);!t.done;t.next()){var n=t.value;if(n.id==e)return n}return null}}}),a),c.PointersStateChangeTypeEnum=l.defineEnum("PointersStateChangeTypeEnum",{PointersDown:0,PointersMoved:1,PointersUp:2}),c.PointersStateChangeMessage=(s=function e(t,n,i){this.changeType=n,this.pointers=l.clone(i),p.TheoMessage.call(this,e.TYPE,t)},l.defineClass({name:"PointersStateChangeMessage",ctor:s,superName:"TheoMessage",statics:{TYPE:{get:function(){return"PointersStateChangeMessage"}}}}),s)},hJqd:function(e,t,n){var i,o,r,a,s=t,c=n("oAGj"),l=n("Tq01"),u=n("kYI4"),h=n("Kkml");s.BrandifyAction=(i=function e(t,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.authoringContext=t,this.applyFonts=n,this.applyColors=o,this.addLogo=i,l.Action.call(this,e.TYPE)},c.defineClass({name:"BrandifyAction",ctor:i,superName:"Action",statics:{TYPE:"BrandifyAction"},props:{getUserAction:function(e){return h.UserActions.BrandDocument()},execute:function(e){return u.BrandingFacade.brandifyDocument(e.document,this.authoringContext,this.applyFonts,this.addLogo,this.applyColors)}}}),i),s.ChangeBrandingAction=(o=function e(t,n,i){this.fromDocAuthoringContextID=n,this.fromActiveAuthoringContextID=i,this.toAuthoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeBrandingAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeBrandingAction"},props:{getUserAction:function(e){return h.UserActions.ChangeBranding(this.fromDocAuthoringContextID,this.fromActiveAuthoringContextID,c.opt(this.toAuthoringContext,(function(e){return e.id})))},execute:function(e){return u.BrandingFacade.changeBranding(e.document,this.toAuthoringContext)}}}),o),s.AddBrandingAction=(r=function e(t){this.authoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"AddBrandingAction",ctor:r,superName:"Action",statics:{TYPE:"AddBrandingAction"},props:{getUserAction:function(e){return h.UserActions.AddBranding()},execute:function(e){return u.BrandingFacade.addBranding(e.document,this.authoringContext)}}}),r),s.RemoveBrandingAction=(a=function e(t){void 0===t&&(t=!0),this.undoable=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"RemoveBrandingAction",ctor:a,superName:"Action",statics:{TYPE:"RemoveBrandingAction"},props:{getUserAction:function(e){return h.UserActions.RemoveBranding()},execute:function(e){return u.BrandingFacade.removeBranding(e.document)}}}),a)},i5Hy:function(e,t,n){var i,o,r,a,s,c,l=t,u=n("oAGj"),h=n("SpAV"),d=n("gXiO"),p=n("yGNn"),g=n("SmK9"),m=n("iCxV"),f=n("rrhp");l.SaveResult=(i=function(){d.CoreObject.call(this)},o={},u.defineClass({name:"SaveResult",ctor:i,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===o.NONE&&(o.NONE=new i),o.NONE}},COMPLETE:{get:function(){return void 0===o.COMPLETE&&(o.COMPLETE=new l.SaveComplete),o.COMPLETE}},fromPromiseAny:function(e){var t;return null==e?(h.CoreAssert.fail("Save promise should resolve with a SaveResult, not nil","SaveResult.fromPromiseAny","SaveManager.swift",22),i.NONE):(t=u.as(e,i))?t:(h.CoreAssert.fail("Save promise should resolve with a SaveResult, not "+e,"SaveResult.fromPromiseAny","SaveManager.swift",27),i.NONE)}}}),i),l.SaveComplete=(r=function(){l.SaveResult.call(this)},u.defineClass({name:"SaveComplete",ctor:r,superName:"SaveResult"}),r),l.SaveErrorMissingState=(a=function(){l.SaveResult.call(this)},u.defineClass({name:"SaveErrorMissingState",ctor:a,superName:"SaveResult"}),a),l.SaveErrorValidationFailed=(s=function(e){this.error=e},u.defineClass({name:"SaveErrorValidationFailed",ctor:s,superName:"SaveResult"}),s),l.SaveManager=(c=function(){this.saveQueue_="com.adobe.theo.core.save",this.saveTimer_=null,this.saveDelaySeconds_=4,this.undoSubscription=null,this.saveLock_=m.Host.async.newLock()},u.defineClass({name:"SaveManager",ctor:c,props:{enable:function(e){var t,n=this;this.lastSaveState_=e,(t=u.opt(this.owner,(function(e){return e.undoRedoMgr})))&&null==this.undoSubscription&&(this.undoSubscription=t.subscribeWithCallback((function(e){var t;(t=u.as(e,f.UndoRedoMessage))&&t.changeType==f.UndoRedoMessage.UNDO_REDO_STATE_CLEAN&&n.requestSave().fail((function(e){return h.CoreAssert.fail("Save failed "+u.toString(e),"SaveManager.enable","SaveManager.swift",81)}))}),f.UndoRedoMessage.TYPE))},disable:function(){u.opt(this.undoSubscription,(function(e){return e.unsubscribe()})),this.undoSubscription=null,u.opt(this.saveTimer_,(function(e){return e.cancel()})),this.saveTimer_=null},requestSave:function(){var e,t,n=this;if((e=u.opt(this.owner,(function(e){return e.document})))&&null!=(t=u.opt(e.database.immutableState,(function(e){return e.guid})))){var i,o=!1;return e.documentInited()&&((i=this.saveTimer_)&&(i.cancel(),this.saveTimer_=null),u.opt(this.saveLock_,(function(e){return e.runInLock((function(){n.runningSaveState_==t?n.pendingSaveState_=null:null==n.runningSaveState_&&n.lastSaveState_==t?n.pendingSaveState_=null:(n.pendingSaveState_=t,o=!0)}))}))),o?new p.CorePromise((function(e,t){n.saveTimer_=m.Host.async.startTimer(n.saveDelaySeconds_,(function(){n.saveTimer_=null,h.CoreAssert.isTrue(null!=n.owner,"Save manager has no owner. Document closed without calling willCloseDocument?","SaveManager.requestSave","SaveManager.swift",132),m.Host.async.postOnWorkerThread(n.saveQueue_,(function(){u.opt(n.saveLock_,(function(e){return e.runInLock((function(){h.CoreAssert.isTrue(null==n.runningSaveState_,"Save shouldn't be running. Worker queue shouldn't be concurrent.","SaveManager.requestSave","SaveManager.swift",136),n.runningSaveState_=n.pendingSaveState_,n.pendingSaveState_=null}))}));var i,o=n.validate();(i=u.as(o,g.DBValidationError))?(u.opt(n.saveLock_,(function(e){return e.runInLock((function(){n.runningSaveState_=null}))})),t(new l.SaveErrorValidationFailed(i))):(n.save(),u.opt(n.saveLock_,(function(e){return e.runInLock((function(){n.lastSaveState_=n.runningSaveState_,n.runningSaveState_=null}))})),e(l.SaveResult.COMPLETE))}))}))})):p.CorePromise.resolve(l.SaveResult.COMPLETE)}return p.CorePromise.reject(new l.SaveErrorMissingState)},validate:function(){var e,t,n;return(e=u.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)&&(n=e.database.getState(t))?n.validate():new g.DBValidationError},save:function(){var e=this;u.opt(u.opt(this.owner,(function(e){return e.document})),(function(t){return t.requestSaveDocumentAt(e.runningSaveState_)}))}}}),c)},j89o:function(e,t,n){var i,o,r=t,a=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("T8w7"),u=n("Kkml");r.SetOpacityAction=(i=function e(t,n){void 0===n&&(n=null),this.opacity=t,this.formae=a.clone(n),s.Action.call(this,e.TYPE)},a.defineClass({name:"SetOpacityAction",ctor:i,superName:"Action",statics:{TYPE:"SetOpacityAction"},props:{getUserAction:function(e){return u.UserActions.ChangeOpacity()},execute:function(e){return l.OpacityFacade.applyOpacity(this.opacity,a.clone(this.formae||e.selection.asFormaArray())),c.CorePromise.resolve(null)}}}),i),r.SetBackgroundOpacityAction=(o=function e(t,n){this.opacity=t,this.page=n,s.Action.call(this,e.TYPE)},a.defineClass({name:"SetBackgroundOpacityAction",ctor:o,superName:"Action",statics:{TYPE:"SetBackgroundOpacityAction"},props:{getUserAction:function(e){return u.UserActions.SetBackgroundOpacity()},execute:function(e){return l.OpacityFacade.applyBackgroundOpacity(this.opacity,this.page),c.CorePromise.resolve(null)}}}),o)},jo4Y:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("Kkml");o.DeleteAction=(i=function e(t,n){void 0===t&&(t=null),void 0===n&&(n=!0),this.formaeToDelete=r.clone(t),this.undoable=n,a.Action.call(this,e.TYPE)},r.defineClass({name:"DeleteAction",ctor:i,superName:"Action",statics:{TYPE:"DeleteAction"},props:{canDo:function(e){return null!=this.formaeToDelete||e.selection.selectedCount>0},getUserAction:function(e){return l.UserActions.DeleteItem(this.undoable)},execute:function(e){var t=this;return new c.CorePromise((function(n,i){return s.CreationFacade.deleteFormae(r.clone(t.formaeToDelete||e.selection.asFormaArray()),(function(){return n(null)}))}))}}}),i)},lbYW:function(e,t,n){var i,o,r,a=t,s=n("oAGj"),c=n("Tq01"),l=n("O8XL"),u=n("yGNn"),h=n("Kkml");a.AlignFormaeAction=(i=function e(t){this.alignType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"AlignFormaeAction",ctor:i,superName:"Action",statics:{TYPE:"AlignFormaeAction"},props:{getUserAction:function(e){return h.UserActions.AlignFormae()},execute:function(e){return l.AlignmentFacade.alignFormae(this.alignType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),i),a.DistributeFormaeAction=(o=function e(t){this.distType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"DistributeFormaeAction",ctor:o,superName:"Action",statics:{TYPE:"DistributeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.distributeFormae(this.distType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),o),a.ArrangeFormaeAction=(r=function e(t){this.horizontal=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ArrangeFormaeAction",ctor:r,superName:"Action",statics:{TYPE:"ArrangeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.arrangeFormae(this.horizontal,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),r)},"n/CE":function(e,t,n){var i,o,r,a=t,s=n("oAGj"),c=n("SpAV"),l=n("quOg"),u=n("FNB+"),h=n("cmoc"),d=n("9Lk3"),p=n("iCxV"),g=n("90dd"),m=n("ZoS2");a.SelectionStateChangedMessage=(i=function e(t){g.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateChangedMessage",ctor:i,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateChangedMessage"}}}}),i),a.SelectionMode=s.defineEnum("SelectionMode",{Normal:0,Spacing:1,Crop:2}),a.SelectionStateModeChangedMessage=(o=function e(t){g.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateModeChangedMessage",ctor:o,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateModeChangedMessage"}}}}),o),a.SelectionState=(r=function(){this.selected_=[],this.selectionMode_=a.SelectionMode.Normal,this.inCharStyleMode=!1,m.TheoPublishingObject.call(this)},s.defineClass({name:"SelectionState",ctor:r,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{inSpacingMode:{get:function(){return this.selectionMode_==a.SelectionMode.Spacing},set:function(e){this.selectionMode_=e?a.SelectionMode.Spacing:a.SelectionMode.Normal,s.opt(this.owner,(function(e){return e.updateHandles()}))}},inCropMode:{get:function(){return this.selectionMode_==a.SelectionMode.Crop},set:function(e){var t=e?a.SelectionMode.Crop:a.SelectionMode.Normal;t!=this.selectionMode_&&(this.selectionMode_=t,this.publishSelectionModeChange(),s.opt(this.owner,(function(e){return e.updateHandles()})))}},publishSelectionChange:function(){this.publish(new a.SelectionStateChangedMessage(this))},publishSelectionModeChange:function(){this.publish(new a.SelectionStateModeChangedMessage(this))},selectedCount:{get:function(){return this.selected_.length}},selectedCountInDocument:{get:function(){return this.asFormaArray().length}},IDs:{get:function(){return this.selected_},set:function(e){var t=this;this.clearSelection(!1),e.forEach((function(e){var n;(n=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)})))&&t.selectForma(n,!1)})),this.publishSelectionChange()}},asFormaArray:function(){var e=[];return this.forEachSelected((function(t){s.containsEq(e,t,u._equality_Forma_Forma)||e.push(t)})),e},forEachSelected:function(e){var t=this;this.selected_.forEach((function(n){var i;(i=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(n)})))&&e(i)}))},formaAt:function(e){var t=this;if(e<0||e>=this.selected_.length)return c.CoreAssert.fail("Invalid index for SelectionState.formaAt","SelectionState.formaAt","SelectionState.swift",159),null;var n=s.opt(s.opt(this.owner,(function(e){return e.document})),(function(n){return n.firstPage.root.formaByID(t.selected_[e])}));return null==n&&s.opt(p.Host.logging,(function(e){return e.warning("SelectionState.formaAt(index) is nil even though index is in range")})),n},isFormaSelectable:function(e){var t;if(((t=s.opt(e.controller,(function(e){return e.userGroupChild})))||null!=t)&&t)for(var n=s.iter(this.asFormaArray());!n.done;n.next()){var i,o,r=n.value;if((i=s.opt(r.controller,(function(e){return e.userGroupRoot})))&&(o=s.opt(e.controller,(function(e){return e.userGroupRoot})))&&i==o)return!1}return!this.isSelected(e)&&this.owner.allowSelectionChanges},selectForma:function(e,t){void 0===t&&(t=!0),this.selectFormae([e],t)},selectFormae:function(e,t){void 0===t&&(t=!0);for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isFormaSelectable(i)&&(s.opt(i.parent,(function(e){return e.kind==h.FrameForma.KIND&&(i.isImage()||i.isVideo())}))?this.selected_.push(i.parent.formaID):this.selected_.push(i.formaID))}t&&this.publishSelectionChange()},replaceSelection:function(e){this.replaceSelectionWithFormae([e])},replaceSelectionWithFormae:function(e){this.clearSelectionArray(),this.selectFormae(s.clone(e))},deselectForma:function(e,t){void 0===t&&(t=!0),this.deselectFormae([e],t)},deselectFormae:function(e,t){if(void 0===t&&(t=!0),this.owner.allowSelectionChanges){for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isSelected(i)&&(s.remove(this.selected_,i.formaID),s.opt(i.parent,(function(e){return e.kind==h.FrameForma.KIND}))&&this.isSelected(i.parent)&&s.remove(this.selected_,i.parent.formaID))}t&&this.publishSelectionChange()}},isSelected:function(e){return this.selected_.includes(e.formaID)},isGroupSelected:function(e){var t,n;return(n=s.opt(e.controller,(function(e){return e.userGroupRoot})))?this.selected_.includes(n.formaID):!(!(t=s.opt(e.controller,(function(e){return e.userGroup})))&&null==t||!t)&&this.selected_.includes(e.formaID)},clearSelectionArray:function(){var e=this;if(this.removeStaleSelections(),this.owner.allowSelectionChanges){var t=[];this.forEachSelected((function(n){e.owner.interactionMode==l.InteractionMode.AutomaticGrid&&null!=n.controller&&n.controller.kind==d.GridController.KIND||t.push(n.formaID)}));for(var n=s.iter(t);!n.done;n.next()){var i=n.value;s.remove(this.selected_,i)}}},clearSelection:function(e){void 0===e&&(e=!0),this.owner.allowSelectionChanges&&this.selectedCount>0&&(this.clearSelectionArray(),e&&this.publishSelectionChange())},clearSelectionNoUpdate:function(){this.owner.allowSelectionChanges&&this.clearSelectionArray()},removeStaleSelections:function(e){void 0===e&&(e=!0);var t=this,n=[];this.selected_.forEach((function(e){null==s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)}))&&n.push(e)}));for(var i=s.iter(n);!i.done;i.next()){var o=i.value;s.remove(this.selected_,o)}e&&n.length>0&&this.owner.allowSelectionChanges&&this.publishSelectionChange()}}}),r)},nELi:function(e,t,n){var i,o,r=t,a=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("wNKJ"),h=n("FNB+"),d=n("6ZWm"),p=n("X0GW"),g=n("iCxV"),m=n("fdtz"),f=n("fAXt"),A=n("Kkml");r.ScaleAction=(i=function e(t,n,i){void 0===i&&(i=!0),this.scale=t,this.formaeToScale=a.clone(n),this.groupScale=i,s.Action.call(this,e.TYPE)},a.defineClass({name:"ScaleAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"ScaleAction"}}},props:{getUserAction:function(e){return A.UserActions.ScaleItem()},execute:function(e){var t,n,i,o,r=(null!=this.formaeToScale?a.clone(this.formaeToScale):e.selection.asFormaArray().map((function(e){var t=a.clone(e.filterByKind(m.ImageForma.KIND,h.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=a.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this),s=null;r.length>1&&this.groupScale&&(i=p.GroupFacade.createGroupFromFormae(a.clone(r)))&&(r.splice(0),r.push(i),s=i);for(var A=a.iter(r);!A.done;A.next()){var S,C=A.value;f.TransformFacade.scaleForma(C,this.scale),u.DragFacade.rescueFormaToPageBounds(C),(S=(n=a.as(C.controller,d.FrameController))||null!=n?n:a.as(a.opt(C.parent,(function(e){return e.controller})),d.FrameController))&&(S.updateParentGroup(),S.fitChildrenToFrame()),C.isImage()?a.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataImageResized,{})})):C.isShape()?a.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataShapeResized,{})})):C.isText()&&a.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataTextResized,{})}))}return(o=s)&&p.GroupFacade.cleanupGroup(o),l.CorePromise.resolve(null)}}}),i),r.RescueAction=(o=function(){},a.defineClass({name:"RescueAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"RescueAction"}}},props:{init_d41d:function(){s.Action.call(this,o.TYPE)},init_e169:function(e){this.formaeToRescue=a.clone(e),s.Action.call(this,o.TYPE)},getUserAction:function(e){return A.UserActions.RescueItem()},execute:function(e){var t;return(null!=this.formaeToRescue?a.clone(this.formaeToRescue):e.selection.asFormaArray().map((function(e){var t=a.clone(e.filterByKind(m.ImageForma.KIND,h.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=a.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this).forEach((function(e){var t;a.as(e,m.ImageForma)&&(t=a.as(a.opt(e.parent,(function(e){return e.controller})),d.FrameController))?(t.updateParentGroup(),t.fitChildrenToFrame()):u.DragFacade.rescueFormaToPageBounds(e)})),l.CorePromise.resolve(null)}}}),o)},"o+xL":function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("6ZWm"),u=n("pnSN"),h=n("X0GW"),d=n("iCxV"),p=n("lmwz"),g=n("Kkml");o.RotateAction=(i=function e(t,n,i,o){void 0===o&&(o=!0),this.angle=t,this.initialImagePlacement=n,this.formaeToRotate=r.clone(i),this.groupRotation=o,a.Action.call(this,e.TYPE)},r.defineClass({name:"RotateAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"RotateAction"}}},props:{getUserAction:function(e){return g.UserActions.RotateItem()},execute:function(e){var t,n=null;null!=this.formaeToRotate?n=r.clone(this.formaeToRotate):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)})));var i=r.clone(n).filter((function(e){return r.opt(e.controller,(function(e){return 1==e.rotateable}))}),this);if(0==i.length)return c.CorePromise.resolve(null);var o,a,g=null;i.length>1&&this.groupRotation&&(o=h.GroupFacade.createGroupFromFormae(r.clone(i)))&&(i.splice(0),i.push(o),g=o);for(var m=r.iter(i);!m.done;m.next()){var f,A,S=m.value;if((f=p.ImageFacade.getImageFormaForForma(S))&&(A=this.initialImagePlacement)){var C=A.transformValues,T=f.placement.transformValues,y=T.xscale>0?1:-1,_=T.yscale>0?1:-1;f.placement=f.placement.scaleTo(C.xscale*y,C.yscale*_)}var v,P=this.angle;S.controller.rotate(P),(v=(t=r.as(S.controller,l.FrameController))||null!=t?t:r.as(r.opt(S.parent,(function(e){return e.controller})),l.FrameController))&&(v.updateParentGroup(),v.fitChildrenToFrame()),S.isImage()?r.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataImageRotated,{})})):S.isShape()?r.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataShapeRotated,{})})):S.isText()?r.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextRotated,{})})):S.kind==u.GroupForma.KIND&&r.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataMultiRotated,{})}))}return(a=g)&&h.GroupFacade.cleanupGroup(a),c.CorePromise.resolve(null)}}}),i)},oKI3:function(e,t,n){var i,o,r=t,a=n("oAGj"),s=n("SpAV"),c=n("c+uM"),l=n("BgH2"),u=n("oKlP");r.TextPathID=a.defineEnum("TextPathID",{UNSET:-1,Custom:0,Circle:1,SemiCircleUp:2,SemiCircleDown:3,ArcUp:4,ArcDown:5,Wave:6,Rect:7,Line:8}),r.TextPathLibrary=(i=function(){},o={},a.defineClass({name:"TextPathLibrary",ctor:i,statics:{getPathForLockupStyle:function(e){var t=e.layout;s.CoreAssert.isTrue(c.LockupStyle.isPath(t),"Why are we asking for a path for a non path layout?","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",42);var n=e.pathID;return s.CoreAssert.isFalse(n==r.TextPathID.UNSET,"Why are we asking for a path when pathID is not set?","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",45),n==r.TextPathID.Custom?(s.CoreAssert.isTrue(null!=e.customPath,"No custom path","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",47),e.customPath):i.getPathByID(n)},getPathByID:function(e){var t;return(t=i.paths[e])?t.clone():(s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.getPathByID","TextPathLibrary.swift",59),i.circlePath)},isPathSymmetric:function(e){switch(e){case 1:case 6:case 7:case 8:return!0;case 2:case 3:case 4:case 5:case 0:return!1;case-1:return s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",83),!1;default:return s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",86),!1}},c:.551915024494,quad0:{get:function(){return void 0===o.quad0&&(o.quad0=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,-i.c),new u.TheoPoint(1-i.c,-1),new u.TheoPoint(1,-1))),o.quad0}},quad1:{get:function(){return void 0===o.quad1&&(o.quad1=new l.TextPathSegment(new u.TheoPoint(1,-1),new u.TheoPoint(1+i.c,-1),new u.TheoPoint(2,-i.c),new u.TheoPoint(2,0))),o.quad1}},quad2:{get:function(){return void 0===o.quad2&&(o.quad2=new l.TextPathSegment(new u.TheoPoint(2,0),new u.TheoPoint(2,i.c),new u.TheoPoint(1+i.c,1),new u.TheoPoint(1,1))),o.quad2}},quad3:{get:function(){return void 0===o.quad3&&(o.quad3=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1-i.c,1),new u.TheoPoint(0,i.c),new u.TheoPoint(0,0))),o.quad3}},quad2Prime:{get:function(){return void 0===o.quad2Prime&&(o.quad2Prime=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,i.c),new u.TheoPoint(1-i.c,1),new u.TheoPoint(1,1))),o.quad2Prime}},quad3Prime:{get:function(){return void 0===o.quad3Prime&&(o.quad3Prime=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1+i.c,1),new u.TheoPoint(2,i.c),new u.TheoPoint(2,0))),o.quad3Prime}},upArc:{get:function(){return void 0===o.upArc&&(o.upArc=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-1),new u.TheoPoint(4,-1),new u.TheoPoint(6,0))),o.upArc}},downArc:{get:function(){return void 0===o.downArc&&(o.downArc=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,1),new u.TheoPoint(4,1),new u.TheoPoint(6,0))),o.downArc}},wave:{get:function(){return void 0===o.wave&&(o.wave=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-2),new u.TheoPoint(4,2),new u.TheoPoint(6,0))),o.wave}},lineTop:{get:function(){return void 0===o.lineTop&&(o.lineTop=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(.3,0),new u.TheoPoint(.7,0),new u.TheoPoint(1,0))),o.lineTop}},lineRight:{get:function(){return void 0===o.lineRight&&(o.lineRight=new l.TextPathSegment(new u.TheoPoint(1,0),new u.TheoPoint(1,.3),new u.TheoPoint(1,.7),new u.TheoPoint(1,1))),o.lineRight}},lineBottom:{get:function(){return void 0===o.lineBottom&&(o.lineBottom=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(.7,1),new u.TheoPoint(.3,1),new u.TheoPoint(0,1))),o.lineBottom}},lineLeft:{get:function(){return void 0===o.lineLeft&&(o.lineLeft=new l.TextPathSegment(new u.TheoPoint(0,1),new u.TheoPoint(0,.7),new u.TheoPoint(0,.3),new u.TheoPoint(0,0))),o.lineLeft}},circlePath:{get:function(){return void 0===o.circlePath&&(o.circlePath=new l.TextPath([i.quad0,i.quad1,i.quad2,i.quad3])),o.circlePath}},semicirclePath:{get:function(){return void 0===o.semicirclePath&&(o.semicirclePath=new l.TextPath([i.quad0,i.quad1])),o.semicirclePath}},semicircleDownPath:{get:function(){return void 0===o.semicircleDownPath&&(o.semicircleDownPath=new l.TextPath([i.quad2Prime,i.quad3Prime])),o.semicircleDownPath}},upArcPath:{get:function(){return void 0===o.upArcPath&&(o.upArcPath=new l.TextPath([i.upArc],2.5)),o.upArcPath}},downArcPath:{get:function(){return void 0===o.downArcPath&&(o.downArcPath=new l.TextPath([i.downArc],2.5)),o.downArcPath}},wavePath:{get:function(){return void 0===o.wavePath&&(o.wavePath=new l.TextPath([i.wave])),o.wavePath}},rectPath:{get:function(){return void 0===o.rectPath&&(o.rectPath=new l.TextPath([i.lineTop,i.lineRight,i.lineBottom,i.lineLeft],1/0)),o.rectPath}},linePath:{get:function(){return void 0===o.linePath&&(o.linePath=new l.TextPath([i.lineTop])),o.linePath}},paths:{get:function(){return void 0===o.paths&&(o.paths={1:i.circlePath,2:i.semicirclePath,3:i.semicircleDownPath,4:i.upArcPath,5:i.downArcPath,6:i.wavePath,7:i.rectPath,8:i.linePath}),o.paths}}}}),i)},p8vO:function(e,t,n){var i,o,r,a,s=t,c=n("oAGj"),l=n("Tq01"),u=n("4mEG"),h=n("SpAV"),d=n("CWW7"),p=n("yGNn"),g=n("iCxV"),m=n("mBzD"),f=n("q5zr"),A=n("VkKB"),S=n("RkYL"),C=n("Yspk"),T=n("Kkml"),y=n("mxdD"),_=n("QTen");s.ChangeVideoVolumeAction=(i=function e(t){void 0===t&&(t=_.VideoStyle.volumeOff),this.volumeLevel=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeVideoVolumeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeVideoVolumeAction"},props:{getUserAction:function(e){return T.UserActions.ChangeVideoVolume()},execute:function(e){return y.VideoFacade.changeVideoVolume(c.clone(e.selection.asFormaArray()),this.volumeLevel),p.CorePromise.resolve(null)}}}),i),s.UpdateVideoStyleTrimAction=(o=function e(t,n,i,o,r,a){var s;void 0===a&&(a=null),this.forma=t,this.newTrim=n,this.padding=i,this.isLocalVideo=o,this.posterParams=r,l.Action.call(this,(s=a)||null!=s?s:e.TYPE)},c.defineClass({name:"UpdateVideoStyleTrimAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"UpdateVideoStyleTrimAction"}}},props:{getUserAction:function(e){return T.UserActions.TrimVideo()},executeIfAble:function(e){var t,n;if((t=c.as(this.forma.style,_.VideoStyle))&&(n=this.forma.videoContentNode)){if(!this.isLocalVideo)return t.startTime=this.newTrim.start,t.endTime=this.newTrim.end,this.updatePoster(e),p.CorePromise.resolve(new l.FormaActionResult([this.forma]));var i=C.TheoTimeRange.makeFromDuration(n.originalDuration),o=C.TheoTimeRange.makeFromStartAndDuration(n.offsetInOriginal||S.TheoTime.Zero,n.duration),r=this.newTrim.padBy(this.padding.seconds,i);if(h.CoreAssert.isTrue(i.contains(o),void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",70),h.CoreAssert.isTrue(i.contains(this.newTrim),void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",71),n.wasTrimmed&&o.contains(r))return t.startTime=this.newTrim.start.subtract(o.start),t.endTime=this.newTrim.end.subtract(o.start),this.updatePoster(e),p.CorePromise.resolve(new l.FormaActionResult([this.forma]))}return null},updatePoster:function(e){var t,n,i;(t=this.posterParams)&&(n=e.document)&&(i=c.as(n.content.createNode(f.ImageContentNode.KIND,null),f.ImageContentNode))&&(i.url=t.url,i.mimeType=t.mimeType,i.pixelWidth=t.width,i.pixelHeight=t.height,d.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,n),this.forma.contentNode=i,d.CreationFacade.addContentNodeToDocument(i,n))},execute:function(e){return this.executeIfAble(e)||p.CorePromise.reject("Cannot trim video - trim window outside of content")}}}),o),s.VideoInfoUpdate=(r=function(e,t){this.pre=e,this.post=t},c.defineClass({name:"VideoInfoUpdate",ctor:r}),r),s.TrimVideoAction=(a=function e(t,n,i,o,r,a,c,l,u){this.videoURL=i,this.videoID=n,this.outputURL=r,this.mimeType=o,this.progress=a,s.UpdateVideoStyleTrimAction.call(this,t,c,l,!0,u,e.TYPE),h.CoreAssert.isTrue(null==n&&null!=i||null!=n&&null==i,void 0,"TrimVideoAction.init","VideoActions.swift",162)},c.defineClass({name:"TrimVideoAction",ctor:a,superName:"UpdateVideoStyleTrimAction",statics:{TYPE:{get:function(){return"TrimVideoAction"}}},props:{execute:function(e){var t,n=this;if(T=s.UpdateVideoStyleTrimAction.prototype.executeIfAble.call(this,e))return T;if(t=this.forma.videoContentNode){var i,o=C.TheoTimeRange.makeFromDuration(t.originalDuration),r=C.TheoTimeRange.makeFromStartAndDuration(t.offsetInOriginal||S.TheoTime.Zero,t.duration),a=this.newTrim.padBy(this.padding.seconds,o);if(h.CoreAssert.isTrue(o.contains(r),void 0,"TrimVideoAction.execute","VideoActions.swift",179),h.CoreAssert.isTrue(o.contains(this.newTrim),void 0,"TrimVideoAction.execute","VideoActions.swift",180),i=g.Host.videoUtils){var l,d,f,T=null,y=this.outputURL,_=this.progress;if(null!=(l=this.videoURL)?T=i.getAttributesForVideoAtUrl(l).then((function(e){return i.trimVideoAtUrl(l,y,a,_).then((function(t){return new s.VideoInfoUpdate(c.as(e,m.VideoInfo),c.as(t,m.VideoInfo))}))})):null!=(d=this.videoID)&&(T=i.getAttributesForVideoWithId(d).then((function(e){return i.trimVideoWithId(d,y,a,_).then((function(t){return new s.VideoInfoUpdate(c.as(e,m.VideoInfo),c.as(t,m.VideoInfo))}))}))),f=T)return f.then((function(i){var o,l,h;if((o=c.as(i,s.VideoInfoUpdate))&&(l=o.pre)&&(h=o.post)){var d=a.start,g=l.duration,m=new u.ReplaceVideoFormaContentAction(n.forma,n.outputURL,n.mimeType,h.width,h.height,h.duration,d,r.duration,d,g,c.clone([]),n.posterParams,!1,t.mediaMetadata||A.MediaMetadata.init_36a2(),t.localIdentifier);return e.designController.actions.doAction(m)}return p.CorePromise.reject("Unexpected trim results")}))}}return p.CorePromise.reject("An error occurred while trimming")}}}),a)},pjjd:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("FNB+"),u=n("lmwz"),h=n("Kkml");o.DuplicateAction=(i=function e(t,n,i){this.formaeToDuplicate=r.clone(t),this.offsetDuplicates=n,this.selectDuplicates=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"DuplicateAction",ctor:i,superName:"Action",statics:{TYPE:"DuplicateAction",canAddImages:function(e){if(0==e.length)return!1;for(var t=0,n=r.iter(e);!n.done;n.next())n.value.isImage()&&(t+=1);return u.ImageFacade.canAddImages(e[0].root,t)},useSelection:function(){return new i(null,!0,!0)}},props:{getUserAction:function(e){return h.UserActions.DuplicateItems(r.clone(this.formaeToDuplicate||e.selection.asFormaArray()))},execute:function(e){var t=this;return s.CreationFacade.duplicateItems(r.clone(this.formaeToDuplicate||e.selection.asFormaArray()),this.offsetDuplicates,!1).then((function(e){var n;return(n=r.as(e,["Array",l.Forma]))?(t.selectDuplicates&&(t.newSelection=r.clone(n)),new a.FormaActionResult(r.clone(n))):c.CorePromise.reject("did not get an array of Forma back from CreationFacade.duplicateItems")}))},updateSelection:function(e){return null!=this.newSelection&&this.selectDuplicates&&e.selection.replaceSelectionWithFormae(r.clone(this.newSelection)),this.newSelection}}}),i)},raY1:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("Kkml");o.AddFormaAction=(i=function e(t,n,i){this.page=t,this.forma=n,this.params=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"AddFormaAction",ctor:i,superName:"Action",statics:{TYPE:"AddFormaAction"},props:{getUserAction:function(e){return c.UserActions.AddImage()},execute:function(e){return s.CreationFacade.addForma(this.page,this.forma,this.params)}}}),i)},rrhp:function(e,t,n){var i,o,r,a,s,c=t,l=n("oAGj"),u=n("0wFF"),h=n("SpAV"),d=n("yGNn"),p=n("P83h"),g=n("ZhwN"),m=n("iCxV"),f=n("90dd"),A=n("ZoS2"),S=n("Kkml");c.IDocumentStateManager=l.defineProtocol("IDocumentStateManager",{resetStates:"() -> Void",getRootState:"() -> IDocumentState",beginNewState:"(String) -> Void",endNewState:"() -> IDocumentState",setCurrentState:"(IDocumentState) -> Void",getNewStateNestingDepth:"() -> Integer"}),c.IDocumentState=l.defineProtocol("IDocumentState",{}),c.PatchStatus=(i=function(e){this.depth=0,this.newStateBegun=e},l.defineClass({name:"PatchStatus",ctor:i}),i),c.TimelineState=(o=function(e,t){this.actionDepth=0,this.patch=null,this.beginSelectedFormaIDs=[],this.endSelectedFormaIDs=[],this.beganInCharStyleMode=!1,this.endedInCharStyleMode=!1,this.compoundingActionWrapperEvent=null,this.branchName=null,this.action=e,this.state=t},l.defineClass({name:"TimelineState",ctor:o,props:{description:{get:function(){var e;return(e=this.branchName)||null!=e?e:l.opt(this.action,(function(e){return e.description}))}}}}),o),c.Timeline=(r=function(e,t){this.states=[],this.current=-1,void 0===e&&(e=null),void 0===t&&(t=null),this.gesture=e,this.name=t},l.defineClass({name:"Timeline",ctor:r,statics:{gesture:function(e){return new r(e,null)},branch:function(e){return new r(null,e)}},props:{currentState:{get:function(){return this.current<0||this.current>this.states.length?null:this.states[this.current]}}}}),r),c.UndoRedoChangeDirection=l.defineEnum("UndoRedoChangeDirection",{Undo:"undo",Redo:"redo"}),c.UndoRedoMessage=(a=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.changeType=n,this.changeAction=i,this.changeDirection=o,f.TheoMessage.call(this,e.TYPE,t)},l.defineClass({name:"UndoRedoMessage",ctor:a,superName:"TheoMessage",statics:{TYPE:"UndoRedoMessage",UNDO_REDO_CHANGE:"state-changed",UNDO_REDO_GESTURE_BEGIN:"gesture-begin",UNDO_REDO_GESTURE_END:"gesture-end",UNDO_REDO_STATE_CLEAN:"state-clean"}}),a),c.UndoRedoSelectionPolicyEnum=l.defineEnum("UndoRedoSelectionPolicyEnum",{RestoreSelection:"restore",PreserveSelection:"preserve"}),c.UndoRedoManager=(s=function(e){this.applyingUpdatedPatchesDepth=0,this.waitingCallbacks=[],this.timeline=new c.Timeline,this.timelineStack=[],this.patches=[],this._selectionPolicy=e,A.TheoPublishingObject.call(this)},l.defineClass({name:"UndoRedoManager",ctor:s,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{setup:function(){var e;(e=l.opt(this.owner,(function(e){return e.document})))&&(this.stateMgr=l.opt(m.Host.factories,(function(t){return t.constructDocumentStateManager(e)}))),this.reset()},shouldCollapseActions:function(e,t){return null!=e&&null!=t&&e.description==t.description&&e.scope==t.scope},updateSelection:function(e,t,n){var i;if(this._selectionPolicy==c.UndoRedoSelectionPolicyEnum.PreserveSelection)l.opt(this.owner,(function(e){return e.selection.removeStaleSelections(!1)}));else{var o=[],r=!1;if("cancel-branch"==e?(o=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),r=!(!(i=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==i)&&i):"set-index"==e&&t>n?(o=l.clone(this.timeline.states[t].beginSelectedFormaIDs),r=this.timeline.states[t].beganInCharStyleMode):(o=l.clone(this.timeline.currentState.endSelectedFormaIDs),r=this.timeline.currentState.endedInCharStyleMode),"set-index"==e){r=!1;for(var a=[],s=l.iter(o);!s.done;s.next()){var u,h=s.value;(u=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(h)})))&&(u.isText()||a.push(h))}o=l.clone(a)}"user-action"!=e&&(l.opt(this.owner,(function(e){return e.selection.inCharStyleMode=r})),l.opt(this.owner,(function(e){return e.selection.IDs=l.clone(o)})))}},reset:function(){l.opt(this.stateMgr,(function(e){return e.resetStates()})),this.timeline=new c.Timeline,this.timeline.states.push(new c.TimelineState(null,l.opt(this.stateMgr,(function(e){return e.getRootState()})))),this.timeline.current=0,this.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)},debugDescribeCurrentState:function(){var e,t,n=this.timelineStack.length>0?"[branch depth "+l.toString(this.timelineStack.length)+"] ":"";return n+="Index "+l.toString(this.timeline.current),(e=this.timeline.currentState)?(t=e.action)?n+=" ("+t.description+")":n+=" (Initial state)":n+=" (Invalid state)",n},beginBranch:function(){this.beginNamedBranch(null)},beginNamedBranch:function(e){h.CoreAssert.info("Starting new branch @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(null==this.gestureScope,"Should not branch in the middle of a running gesture","UndoRedoManager.beginNamedBranch","UndoRedoManager.swift",314),this.timelineStack.push(this.timeline);var t=c.Timeline.branch(e);t.states.push(this.timeline.currentState),t.current=0,this.timeline=t},endBranch:function(e){var t=this;if(this.timelineStack.length>0){h.CoreAssert.info((e?"Committing":"Canceling")+" branch @ "+this.debugDescribeCurrentState());var n=this.timelineStack.pop();if(e){var i=this.timeline.currentState,o=this.timeline.name;if(this.timeline=n,i===this.timeline.currentState);else{if(this.timeline.current<this.timeline.states.length-1){var r=this.timeline.current+1,a=this.timeline.states.length-r;this.timeline.states.splice(r,a)}l.opt(i,(function(e){return e.branchName=o})),this.timeline.states.push(i),this.timeline.current=this.timeline.states.length-1}this.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE)}else this.timeline=n,l.opt(this.stateMgr,(function(e){return e.setCurrentState(t.timeline.currentState.state)})),this.applyPatches((function(){t.updateSelection("cancel-branch",-1,-1),t.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE)}));0==this.timelineStack.length&&this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}else h.CoreAssert.fail("endBranch: branch stack underflow @ "+this.debugDescribeCurrentState(),"UndoRedoManager.endBranch","UndoRedoManager.swift",374)},beginGesture:function(){if(h.CoreAssert.isTrue(null==this.gestureScope,"Beginning gesture scope when gesture already running","UndoRedoManager.beginGesture","UndoRedoManager.swift",396),null==this.gestureScope){h.CoreAssert.info("Starting new gesture branch @ "+this.debugDescribeCurrentState()),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_GESTURE_BEGIN),this.timelineStack.push(this.timeline);var e=c.Timeline.gesture(g.GUIDUtils.makeGUID());e.states.push(this.timeline.currentState),e.current=0,this.timeline=e}},endGesture:function(e){h.CoreAssert.isTrue(null!=this.gestureScope,"Ending gesture scope when no gesture running","UndoRedoManager.endGesture","UndoRedoManager.swift",409),null!=this.gestureScope&&(this.endBranch(e),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_GESTURE_END))},gestureScope:{get:function(){return this.timeline.gesture}},beginUserActionAsync:function(e){var t=this;return new d.CorePromise((function(n,i){return t.beginUserAction(e,(function(){return n(null)}))}))},endUserActionAsync:function(){var e=this;return new d.CorePromise((function(t,n){return e.endUserAction((function(){return t(null)}))}))},beginUserAction:function(e,t){var n,i=this;h.CoreAssert.info("beginUserAction @ ("+e.description+")");var o=this.timeline.currentState;if(o.actionDepth>0)h.CoreAssert.fail("Nested user action "+e.description+" detected ("+o.action.description+" currently running)","UndoRedoManager.beginUserAction","UndoRedoManager.swift",455),o.actionDepth+=1,t();else{this.timeline.states.length>this.timeline.current+1&&this.timeline.states.splice(this.timeline.current+1,this.timeline.states.length-this.timeline.current-1);var r=new c.TimelineState(e,null);r.beginSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),r.beganInCharStyleMode=!(!(n=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n;var a=!1,s=this.shouldCollapseActions(o.action,e),u=e.collapseSequential==S.CollapseBehavior.ALWAYS||e.collapseSequential==S.CollapseBehavior.GESTURE_DEPENDENT&&null!=this.gestureScope;if(!(null!=this.gestureScope&&this.timeline.current>=1)||u&&s){if((!e.compounding||u)&&s&&this.timeline.current>=1){for(var d=this.timeline.current-1;d>0&&this.shouldCollapseActions(this.timeline.states[d].action,e);)d-=1;e.compounding||(r.compoundingActionWrapperEvent=new p.FormaNullChangedEvent(this.owner.document.firstPage.root),l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(r.compoundingActionWrapperEvent)})),l.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[d].state)})),a=!0),u&&this.timeline.states.splice(d+1,1)}}else r.compoundingActionWrapperEvent=new p.FormaNullChangedEvent(this.owner.document.firstPage.root),l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(r.compoundingActionWrapperEvent)})),l.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[0].state)})),a=!0;this.timeline.states.push(r),this.timeline.current=this.timeline.states.length-1,a?this.applyPatches((function(){r.actionDepth=1,l.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t()})):(r.actionDepth=1,l.opt(this.stateMgr,(function(t){return t.beginNewState(e.description)})),t())}},endUserAction:function(e){var t,n,i=this;(n=this.timeline.currentState)?(h.CoreAssert.info("endUserAction @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",543),h.CoreAssert.isTrue(null!=n.action,"invalid current state for ending a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",544),0==n.actionDepth?h.CoreAssert.fail("User action stack underflow","UndoRedoManager.endUserAction","UndoRedoManager.swift",547):n.actionDepth>1?(n.actionDepth-=1,e()):(null!=n.compoundingActionWrapperEvent&&(l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.endUpdate(n.compoundingActionWrapperEvent)})),n.compoundingActionWrapperEvent=null),n.actionDepth=0,n.endSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),n.endedInCharStyleMode=!(!(t=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==t)&&t,this.applyPatches((function(){for(;i.waitingCallbacks.length>0&&0==i.timeline.currentState.actionDepth;)i.waitingCallbacks.shift()();i.updateSelection("user-action",-1,-1),i.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),e(),0==i.timelineStack.length&&0==i.timeline.currentState.actionDepth&&i.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)})))):h.CoreAssert.fail("invalid current state for ending a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",585)},cancelUserAction:function(e){var t,n=this;if(t=this.timeline.currentState)if(h.CoreAssert.info("cancelUserAction @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",597),0==t.actionDepth)h.CoreAssert.fail("User action stack underflow","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",600);else{if(t.actionDepth>1)return h.CoreAssert.fail("Can not cancel a user action with a depth greater than 1","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",602),this.endUserAction(e);t.actionDepth=0,t.endSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]);var i=this.getCurrentTimelineIndex(),o=i-1;t.state=l.opt(this.stateMgr,(function(e){return e.endNewState()})),this.setCurrentTimelineIndex(o,(function(){for(n.removeTimelineStateAtIndex(i),n.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE);n.waitingCallbacks.length>0&&0==n.timeline.currentState.actionDepth;)n.waitingCallbacks.shift()();e(),0==n.timelineStack.length&&0==n.timeline.currentState.actionDepth&&n.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))}else h.CoreAssert.fail("invalid current state for ending a user action","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",631)},getActionDepth:function(){var e;return(e=l.opt(this.timeline.currentState,(function(e){return e.actionDepth})))||null!=e?e:0},registerPatch:function(e){this.patches.push(e)},getPatchDepth:function(){var e;return(e=l.opt(l.opt(this.timeline.currentState,(function(e){return e.patch})),(function(e){return e.depth})))||null!=e?e:-1},beginPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?(t.newStateBegun||(l.opt(this.stateMgr,(function(e){return e.beginNewState("patch")})),t.newStateBegun=!0),t.depth+=1):h.CoreAssert.fail("Invalid beginPatch: not in a patching context.","UndoRedoManager.beginPatch","UndoRedoManager.swift",681))},endPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?t.depth>0?t.depth-=1:h.CoreAssert.fail("Patch stack underflow!","UndoRedoManager.endPatch","UndoRedoManager.swift",695):h.CoreAssert.fail("Invalid beginPatch: not in a patching context.","UndoRedoManager.endPatch","UndoRedoManager.swift",698))},invalidatePatches:function(e){var t=this;0==this.getActionDepth()?(this.applyingUpdatedPatchesDepth+=1,this.applyPatches((function(){t.publishEvent("state-updated"),t.applyingUpdatedPatchesDepth-=1,e()}))):e()},undo:function(e){var t,n=this;h.CoreAssert.isTrue(null==this.gestureScope,"Should not undo in the middle of a running gesture","UndoRedoManager.undo","UndoRedoManager.swift",732),this.timeline.current<=0?e():(l.opt(m.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataUndo,{contextualData2:"actionDescription:"+((t=n.getUndoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current-1,e,c.UndoRedoChangeDirection.Undo))},redo:function(e){var t,n=this;h.CoreAssert.isTrue(null==this.gestureScope,"Should not redo in the middle of a running gesture","UndoRedoManager.redo","UndoRedoManager.swift",750),this.timeline.current==this.timeline.states.length-1?e():(l.opt(m.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataRedo,{contextualData2:"actionDescription:"+((t=n.getRedoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current+1,e,c.UndoRedoChangeDirection.Redo))},getUndoDescription:function(){return this.timeline.current<=0?null:l.opt(this.timeline.currentState,(function(e){return e.description}))},getRedoDescription:function(){return this.timeline.current==this.timeline.states.length-1?null:this.timeline.states[this.timeline.current+1].description},applyPatches:function(e){var t,n=this,i=this.timeline.states[this.timeline.current];h.CoreAssert.isTrue(null==i.patch,"applying patches before previous patch context is finished!","UndoRedoManager.applyPatches","UndoRedoManager.swift",784),h.CoreAssert.isTrue(0==i.actionDepth,"should not apply patches while user action still mutating","UndoRedoManager.applyPatches","UndoRedoManager.swift",785),i.patch=new c.PatchStatus(((t=l.opt(this.stateMgr,(function(e){return e.getNewStateNestingDepth()})))||null!=t?t:0)>0),function e(t,o){t>=n.patches.length?o():(i!==n.timeline.states[n.timeline.current]&&h.CoreAssert.warning("unexpected change of timeline during patching"),h.CoreAssert.isTrue(null!=i.patch&&0==i.patch.depth,"unexpected state between patches","UndoRedoManager.applyPatches","UndoRedoManager.swift",797),n.patches[t]((function(){return e(t+1,o)})))}(0,(function(){i!==n.timeline.currentState&&h.CoreAssert.warning("unexpected change of timeline during patching"),i.patch.newStateBegun&&(i.state=l.opt(n.stateMgr,(function(e){return e.endNewState()}))),i.patch=null,e()}))},getTimelineLength:function(){return this.timeline.states.length},getCurrentTimelineState:function(){return this.timeline.currentState},getCurrentTimelineIndex:function(){return this.timeline.current},getTimelineStateAtIndex:function(e){return h.CoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"getTimelineStateAtIndex: index out of range","UndoRedoManager.getTimelineStateAtIndex","UndoRedoManager.swift",844),this.timeline.states[e]},publishUndoEvent:function(e){var t;((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t&&(this.publish(new c.UndoRedoMessage(this,c.UndoRedoMessage.UNDO_REDO_CHANGE,e,c.UndoRedoChangeDirection.Undo)),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishRedoEvent:function(e){var t;((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t&&(this.publish(new c.UndoRedoMessage(this,c.UndoRedoMessage.UNDO_REDO_CHANGE,e,c.UndoRedoChangeDirection.Redo)),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishEvent:function(e){var t;(e!=c.UndoRedoMessage.UNDO_REDO_CHANGE||((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t)&&this.publish(new c.UndoRedoMessage(this,e))},removeTimelineStateAtIndex:function(e){h.CoreAssert.isTrue(e>0,"removeStateAtIndex: should not remove the initial state!","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",879),h.CoreAssert.isTrue(e!=this.timeline.current,"removeStateAtIndex: should not remove the current state!","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",880),h.CoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"removeStateAtIndex: index out of range","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",881),e>0&&e<this.timeline.states.length&&(this.timeline.states.splice(e,1),e<this.timeline.current&&(this.timeline.current-=1),this.publishEvent("timeline-changed"))},setCurrentTimelineIndex:function(e,t,n){void 0===n&&(n=null);var i=this,o=n==c.UndoRedoChangeDirection.Undo,r=n==c.UndoRedoChangeDirection.Redo;if(h.CoreAssert.info("setting timeline index to "+l.toString(e)+" @ "+this.debugDescribeCurrentState()),e!=this.timeline.current&&e>=0&&e<this.timeline.states.length){var a=l.opt(this.timeline.currentState,(function(e){return e.action})),s=this.timeline.current;this.timeline.current=e;var u=l.opt(this.timeline.currentState,(function(e){return e.action}));return l.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.currentState.state)})),this.applyPatches((function(){i.updateSelection("set-index",s,e),o?i.publishUndoEvent(a):r?i.publishRedoEvent(u):i.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),t()}))}t()},whenNoCurrentAction:function(e){0==this.timeline.currentState.actionDepth?e():this.waitingCallbacks.push(e)},currentlyExecutingAction:function(){var e;return!!(e=this.timeline.currentState)&&(this.getActionDepth()>0||null!=e.patch)}}}),s)},rsKm:function(e,t,n){var i,o,r,a=t,s=n("oAGj"),c=n("Tq01"),l=n("yGNn"),u=n("gBh/"),h=n("c+uM"),d=n("8t9B"),p=n("Kkml");a.ApplyColorThemeAction=(i=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!1),this.themeColors=s.clone(t),this.themeID=n,this.doShuffle=o,this.page=i,c.Action.call(this,e.TYPE)},s.defineClass({name:"ApplyColorThemeAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorThemeAction"},props:{getUserAction:function(e){return this.doShuffle?p.UserActions.ShuffleColorTheme():p.UserActions.SetColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.applyColorTheme(s.clone(this.themeColors),this.themeID,t),this.doShuffle&&u.ColorThemeFacade.shuffleColorTheme(t)),l.CorePromise.resolve(new c.ActionResult)}}}),i),a.ShuffleColorThemeAction=(o=function e(t){void 0===t&&(t=null),this.page=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ShuffleColorThemeAction",ctor:o,superName:"Action",statics:{TYPE:"ShuffleColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ShuffleColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&u.ColorThemeFacade.shuffleColorTheme(t),l.CorePromise.resolve(new c.ActionResult)}}}),o),a.ModifyColorThemeAction=(r=function e(t,n,i){void 0===i&&(i=null),this.color=t,this.key=n,this.page=i,c.Action.call(this,e.TYPE)},s.defineClass({name:"ModifyColorThemeAction",ctor:r,superName:"Action",statics:{TYPE:"ModifyColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ModifyColorTheme()},execute:function(e){var t,n=this;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.modifyColorTheme(this.color,this.key,t),t.root.filterByControllerKind(d.TypeLockupController.KIND).forEach((function(e){var t;if(t=s.opt(s.as(e.style,h.LockupStyle),(function(e){return e.characterStyles.Highlight}))){var i=!1;t.colors.forEachColor((function(t,o,r){o!=n.key||i||(s.opt(e.controller,(function(e){return e.styleChanged()})),i=!0)}))}}))),l.CorePromise.resolve(new c.ActionResult)}}}),r)},sTUO:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("MYNe"),l=n("Kkml");o.ChangeZOrderAction=(i=function e(t){this.zIndex=t,a.Action.call(this,e.TYPE)},r.defineClass({name:"ChangeZOrderAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeZOrderAction"},props:{getUserAction:function(e){return l.UserActions.ChangeZOrder()},execute:function(e){var t=e.selection.formaAt(0);return c.LayerFacade.setZOrder(this.zIndex,t),s.CorePromise.resolve(null)}}}),i)},vV1H:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("iCxV"),u=n("Kkml");o.FlipAction=(i=function e(t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.vertical=t,this.formaeToFlip=r.clone(n),a.Action.call(this,e.TYPE)},r.defineClass({name:"FlipAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"FlipAction"}}},props:{getUserAction:function(e){return u.UserActions.FlipItem()},execute:function(e){var t=this,n=null;return null!=this.formaeToFlip?n=r.clone(this.formaeToFlip):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)}))),r.clone(n).filter((function(e){return r.opt(e.controller,(function(e){return 1==e.flippable}))}),this).forEach((function(e){e.controller.flip(t.vertical),e.isImage()?r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataImageFlipped,{})})):e.isShape()?r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataShapeFlipped,{})})):e.isText()&&r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextFlipped,{})}))})),c.CorePromise.resolve(null)}}}),i)},wpCo:function(e,t,n){var i,o=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("6h7+"),l=n("iCxV"),u=n("Kkml");o.AddBadgeAction=(i=function e(t,n,i){void 0===i&&(i="lockup"),this.badgeDoc=t,this.badgeID=n,this.badgeType=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"AddBadgeAction",ctor:i,superName:"Action",statics:{TYPE:"AddBadgeAction"},props:{getUserAction:function(e){return u.UserActions.AddBadge()},execute:function(e){var t=this,n=e.document;return c.BadgeFacade.addBadge(this.badgeDoc,this.badgeID,n.firstPage).then((function(e){var n;return(n=r.opt(r.as(e,a.FormaActionResult),(function(e){return e.formae})))&&(t.newSelection=r.clone(n)),r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kDesignIngredientAdded,{contextualData1:"designIngredientId:"+t.badgeID,contextualData2:"designIngredientType:"+t.badgeType})})),e}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(r.clone(this.newSelection)),this.newSelection}}}),i)},x6FH:function(e,t,n){var i,o,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("yGNn"),d=n("x35w"),p=n("Kkml");c.CreatePaddedCollageAction=(i=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"CreatePaddedCollageAction",ctor:i,superName:"Action",statics:{TYPE:"CreatePaddedCollageAction"},props:{getUserAction:function(e){return p.UserActions.CreateCollage()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(n=d.GridFacade.createPaddedCollage(t))?h.CorePromise.resolve(new u.FormaActionResult([n])):h.CorePromise.reject("could not get or create page grid"):h.CorePromise.reject("no document or page?")}}}),i),c.SetGridParametersAction=(o=function e(t,n){this.spacing=t,this.margin=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridParametersAction",ctor:o,superName:"Action",statics:{TYPE:"SetGridParametersAction"},props:{getUserAction:function(e){return p.UserActions.SetLayoutMargin()},execute:function(e){var t;if(t=l.opt(e.document,(function(e){return e.firstPage}))){var n;if(d.GridFacade.setPageGridParameters(t,this.spacing,this.margin),this.spacing==this.margin&&(n=d.GridFacade.getPageGrid(t,!1))&&n.spacing!=n.margin){var i=Math.min(n.spacing,n.margin);d.GridFacade.setPageGridParameters(t,i,i)}return h.CorePromise.resolve(null)}return h.CorePromise.reject("no document or page?")}}}),o),c.SwapGridFormaAction=(r=function e(t,n){this.a=t,this.b=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SwapGridFormaAction",ctor:r,superName:"Action",statics:{TYPE:"SwapGridFormaAction"},props:{getUserAction:function(e){return p.UserActions.SwapGridCells()},execute:function(e){return d.GridFacade.isChildSwappable(this.a)&&d.GridFacade.isChildSwappable(this.b)?(d.GridFacade.swapChildren(this.a,this.b),h.CorePromise.resolve(null)):h.CorePromise.reject("grid children not swappable? or no grid controller?")}}}),r),c.SetGridStyleAction=(a=function e(t,n){this.style=t,this.variation=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridStyleAction",ctor:a,superName:"Action",statics:{TYPE:"SetGridStyleAction"},props:{getUserAction:function(e){return p.UserActions.SetGridStyle()},execute:function(e){var t;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(d.GridFacade.applyGridStyle(this.style,this.variation,t),h.CorePromise.resolve(null)):h.CorePromise.reject("no document or page?")}}}),a),c.EnterGridLayoutModeAction=(s=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"EnterGridLayoutModeAction",ctor:s,superName:"Action",statics:{TYPE:"EnterGridLayoutModeAction"},props:{getUserAction:function(e){return p.UserActions.EnterGridLayoutMode()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))&&(n=d.GridFacade.getPageGrid(t,!0))?(n.enterLayoutMode(),h.CorePromise.resolve(null)):h.CorePromise.reject("no page or grid?")}}}),s)},"y/On":function(e,t,n){var i,o,r=t,a=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("FNB+"),h=n("P83h"),d=n("pnSN"),p=n("X0GW"),g=n("iCxV"),m=n("Kkml");r.GroupAction=(i=function e(t,n,i){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===i&&(i=""),this.formaeToGroup=a.clone(t),this.selectGroup=n,this.method=i,s.Action.call(this,e.TYPE)},a.defineClass({name:"GroupAction",ctor:i,superName:"Action",statics:{TYPE:"GroupAction"},props:{getUserAction:function(e){return m.UserActions.GroupItems()},execute:function(e){var t=this;return p.GroupFacade.groupItems(a.clone(this.formaeToGroup||e.selection.asFormaArray())).then((function(e){var n=a.as(e,u.Forma);if(null!=n){var i;if(t.selectGroup&&(t.newSelection=[n]),i=a.as(n,d.GroupForma)){var o=p.GroupFacade.getGroupDepth(i);a.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataGroupButton,{contextualData1:"count:"+i.childCount,contextualData2:"depth:"+o,contextualData3:"method:"+t.method})}))}return new s.FormaActionResult([n])}return l.CorePromise.reject("did not get a GroupForma back from GroupFacade.groupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectGroup){e.selection.replaceSelectionWithFormae(a.clone(this.newSelection));for(var t=a.iter(this.newSelection);!t.done;t.next()){var n=t.value,i=new h.FormaGroupEvent(n);n.beginUpdate(i),n.endUpdate(i)}}return this.newSelection}}}),i),r.UngroupAction=(o=function e(t,n,i){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===i&&(i=""),this.formaeToUngroup=a.clone(t),this.selectUngroup=n,this.method=i,s.Action.call(this,e.TYPE)},a.defineClass({name:"UngroupAction",ctor:o,superName:"Action",statics:{TYPE:"UngroupAction"},props:{getUserAction:function(e){return m.UserActions.UngroupItems()},execute:function(e){var t=this;return p.GroupFacade.ungroupItems(a.clone(this.formaeToUngroup||e.selection.asFormaArray())).then((function(e){var n;return(n=a.as(e,["Array",u.Forma]))?(t.selectUngroup&&(t.newSelection=a.clone(n)),a.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataUngroupButton,{contextualData1:"count:"+n.length,contextualData3:"method:"+t.method})})),new s.FormaActionResult(a.clone(n))):l.CorePromise.reject("did not get a set of forma back from GroupFacade.ungroupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectUngroup){e.selection.removeStaleSelections(),e.selection.selectFormae(a.clone(this.newSelection));for(var t=a.iter(this.newSelection);!t.done;t.next()){var n=t.value,i=new h.FormaUngroupEvent(n);n.beginUpdate(i),n.endUpdate(i)}}return this.newSelection}}}),o)}}]);
//# sourceMappingURL=vendors_npm_spark_c4f60e44-e0c0b220.js.map
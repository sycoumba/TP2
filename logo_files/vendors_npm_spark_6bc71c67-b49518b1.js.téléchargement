(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[19],{"3HaQ":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("6ZWm"),u=n("7Pku"),c=n("w/+j"),p=n("tGKA"),f=n("Ird5"),h=n("jLWG"),d=n("jfma"),m=n("yjxF"),P=n("euLT"),M=n("Aj79"),T=n("Ucb9"),g=n("g6aL"),A=n("Zifs"),F=n("djAF"),y=n("byfQ"),G=n("hgLm"),R=n("oKlP");i.ShapeFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"ShapeFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=F.ShapeForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance},applyAnimations:function(t,e,n,r,o){var i,s=n;if(t.asDynamic&&(i=e.animation)){var l=a.clone(c.FormaToPGMUtils.convertAnimation(n.child,e.placement,i,r,o));if(l.length>0){var u=f.PGMAnimationList.fromArray(l);s=n.withAnimations(n.animations.merge(u))}}return s},DUMMY_REF:{get:function(){return void 0===o.DUMMY_REF&&(o.DUMMY_REF=new M.PGMReference(new P.PGMNullNode("dummy"))),o.DUMMY_REF}},makePGMRefForArtwork:function(t,e,n,o,i,l){var u,c,p,P,A=f.PGMAnimationList.EMPTY;if(c=o.bounds)if(p=a.as(o,y.TheoArtworkShape))u=new M.PGMReference(new T.PGMShape(n,new m.PGMNodeMetadata(n,"shape"),A,c,a.clone(p.paths),l),i);else if(P=a.as(o,y.TheoArtworkGroup)){var F,G=[],R=1;P.forEachChild((function(o){var i;if(i=r.makePGMRefForArtwork(t,e,n+"-"+R,o,d.PGMCompositingParams.DEFAULT,l)){var a=r.applyAnimations(t,e,i,!1,!0);G.push(a)}R+=1})),u=(F=a.as(P,y.TheoArtworkClipGroup))?new M.PGMReference(new h.PGMClip(n,new m.PGMNodeMetadata(n,"clip"),f.PGMAnimationList.EMPTY,a.clone(G),[F.path]),i):1==G.length?G[0].withCompositing(i):new M.PGMReference(new g.PGMSimpleGroup(n,new m.PGMNodeMetadata(n,"group"),f.PGMAnimationList.EMPTY,a.clone(G)),i)}else s.CoreAssert.fail("unable to create PGM for artwork: not a shape or a group","ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",150),u=null;else s.CoreAssert.fail("unable to create PGM for artwork: no bounds","ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",154),u=null;return u},makePGMRefForShape:function(t,e,n){var o=r.DUMMY_REF,i=e.style.colors.fieldPrimary;null==i&&s.CoreAssert.warning("shape forma has no primary color; will not render");var a,u,c=i||A.SolidColor.ZERO;if(null==e.sliceBox)if((a=e.canonicalArtwork.bounds)&&(u=e.bounds)){var h,T=p.Matrix2D.calculateResizeTransform(a,u,R.TheoPoint.ZERO,l.FitType.Stretch);if(h=r.makePGMRefForArtwork(t,e,n,e.canonicalArtwork,new d.PGMCompositingParams(T,e.style.opacity),c)){var F=r.applyAnimations(t,e,h,!1,!0);o=new M.PGMReference(new g.PGMSimpleGroup(n+"-shape-container",new m.PGMNodeMetadata(n,"shape-container"),f.PGMAnimationList.EMPTY,[F]),new d.PGMCompositingParams(e.placement))}else s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",214),o=new M.PGMReference(new P.PGMNullNode(n+"-shape-error-1"))}else s.CoreAssert.fail("couldn't get artwork or forma bounds for shape","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",218),o=new M.PGMReference(new P.PGMNullNode(n+"-shape-error-2"));else(h=r.makePGMRefForArtwork(t,e,n,e.sizedArtwork,new d.PGMCompositingParams(e.placement,e.style.opacity),c))?o=h:(s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",233),o=new M.PGMReference(new P.PGMNullNode(n+"-shape-error-3")));return o},applyPathAsClip:function(t,e,n,o,i){var u,c,T,A,F=r.DUMMY_REF,v=f.PGMAnimationList.EMPTY,_=a.clone(o);if(null==e.sliceBox)(u=e.canonicalArtwork.bounds)&&(A=n.bounds)?((E=(N=p.Matrix2D.calculateResizeTransform(u,A,R.TheoPoint.ZERO,l.FitType.Stretch).concat(e.placement)).inverse)&&(_=[new M.PGMReference(new g.PGMSimpleGroup(i,new m.PGMNodeMetadata(i,"clipped-node-wrapper"),v,a.clone(_)),new d.PGMCompositingParams(E))]),(T=a.as(e.canonicalArtwork,y.TheoArtworkShape))?F=new M.PGMReference(new h.PGMClip(i+"-clip",new m.PGMNodeMetadata(i,"shape-clip"),v,a.clone(_),a.clone(T.paths)),new d.PGMCompositingParams(N)):(c=a.as(e.canonicalArtwork,y.TheoArtworkClipGroup))&&(T=a.as(c.childAt(0),y.TheoArtworkShape))?F=new M.PGMReference(new h.PGMClip(i+"-clip",new m.PGMNodeMetadata(i,"outer-shape-clip"),f.PGMAnimationList.EMPTY,[new M.PGMReference(new h.PGMClip(i+"-inner-clip",new m.PGMNodeMetadata(i,"inner-shape-clip"),v,a.clone(_),a.clone(T.paths)))],[c.path]),new d.PGMCompositingParams(N)):(s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",313),F=new M.PGMReference(new P.PGMNullNode(i)))):(s.CoreAssert.fail("no shape and/or primary color?","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",317),F=new M.PGMReference(new P.PGMNullNode(i)));else if((T=a.as(e.sizedArtwork,y.TheoArtworkShape))&&(A=n.bounds)){for(var C=(b=a.clone(T.paths))[0].bounds,S=a.iter(a.range(1,b.length,!1));!S.done;S.next()){var w=S.value;C=C.unionWith(b[w].bounds)}(E=(N=p.Matrix2D.calculateResizeTransform(C,A,R.TheoPoint.ZERO,l.FitType.Stretch).concat(e.placement)).inverse)&&(F=new M.PGMReference(new h.PGMClip(i,new m.PGMNodeMetadata(i,"shape"),v,[new M.PGMReference(new g.PGMSimpleGroup(i+"-clip-wrapper",new m.PGMNodeMetadata(i,"clipped-node-wrapper"),v,a.clone(_)),new d.PGMCompositingParams(E))],a.clone(b)),new d.PGMCompositingParams(N)))}else if((c=a.as(e.sizedArtwork,y.TheoArtworkClipGroup))&&(T=a.as(c.childAt(0),y.TheoArtworkShape))&&(A=n.bounds)){C=(b=a.clone(T.paths))[0].bounds;for(var b,x=a.iter(a.range(1,b.length,!1));!x.done;x.next())w=x.value,C=C.unionWith(b[w].bounds);var N,E;if(E=(N=p.Matrix2D.calculateResizeTransform(C,A,R.TheoPoint.ZERO,l.FitType.Stretch).concat(e.placement)).inverse){var D,k=!0;c.path instanceof G.TheoEmptyPath?k=!1:(D=a.as(c.path,G.TheoRectanglePath))&&(k=D.rect.contains(C));var O=new M.PGMReference(new h.PGMClip(i,new m.PGMNodeMetadata(i,"shape"),v,[new M.PGMReference(new g.PGMSimpleGroup(i+"-clip-wrapper",new m.PGMNodeMetadata(i,"clipped-node-wrapper"),v,a.clone(_)),new d.PGMCompositingParams(E))],a.clone(b)),new d.PGMCompositingParams(k?p.Matrix2D.Identity:N));F=k?new M.PGMReference(new h.PGMClip(i+"-clip",new m.PGMNodeMetadata(i,"clip"),f.PGMAnimationList.EMPTY,[O],[c.path]),new d.PGMCompositingParams(N)):O}}else s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",427),F=new M.PGMReference(new P.PGMNullNode(i));return F}},props:{makePGMRef:function(t,e,n,o){var i;return(i=a.as(t,F.ShapeForma))?c.FormaToPGMUtils.applyAnimations(e,t,r.makePGMRefForShape(e,i,i.formaID)):(s.CoreAssert.fail("ShapeFormaToPGMMapper: not a shape forma","ShapeFormaToPGMMapper.makePGMRef","ShapeFormaToPGMMapper.swift",44),null)}}}),r)},"44Iz":function(t,e,n){var r,o,i,a=e,s=n("oAGj");a.PGMExportSettings=(r=function(t){this.asDynamic=t},o={},s.defineClass({name:"PGMExportSettings",ctor:r,superName:"CoreObject",statics:{STATIC:{get:function(){return void 0===o.STATIC&&(o.STATIC=new r(!1)),o.STATIC}},DYNAMIC:{get:function(){return void 0===o.DYNAMIC&&(o.DYNAMIC=new r(!0)),o.DYNAMIC}}},props:{asString:{get:function(){return this.asDynamic}}}}),r),a.PGMSource=(i=function(){},s.defineClass({name:"PGMSource",ctor:i,props:{getGraph:function(t){return null},getGraphForForma:function(t,e){return null}}}),i)},"5ex8":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("6ZWm"),u=n("cmoc"),c=n("7Pku"),p=n("w/+j"),f=n("fdtz"),h=n("lmwz"),d=n("tGKA"),m=n("Ird5"),P=n("jLWG"),M=n("jfma"),T=n("dmHI"),g=n("vTQu"),A=n("yjxF"),F=n("Aj79"),y=n("Ucb9"),G=n("g6aL"),R=n("Zifs"),v=n("djAF"),_=n("3HaQ"),C=n("hgLm"),S=n("oKlP");i.FrameFormaToPGMMapper=(r=function t(){c.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"FrameFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=u.FrameForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{frameHasFillColor:function(t){var e,n;return!(!(e=a.as(t,u.FrameForma))||!(n=a.as(e.controller,l.FrameController)))&&n.hasCutout},makePGMRef:function(t,e,n,r){var o,i,c;if((o=a.as(t,u.FrameForma))&&(i=n.childReferences(o))&&(c=o.bounds)){var w,b,x=null,N=o.formaID,E=new A.PGMNodeMetadata(o.formaID,"frame"),D=m.PGMAnimationList.EMPTY,k=this.frameHasFillColor(t),O=o.style.opacity;if(k){var I,L=o.style.colors.fieldPrimary||R.SolidColor.ZERO,Y=new C.TheoRectanglePath(c);(I=h.ImageFacade.getImageFormaForForma(o))&&(O=I.style.opacity),x=new F.PGMReference(new y.PGMShape(o.formaID+"-background",new A.PGMNodeMetadata(o.formaID,"background"),m.PGMAnimationList.EMPTY,c,[Y],L)),i.splice(0,0,x)}if(b=h.ImageFacade.getMaskFormaForForma(o)){var B,U;if(B=a.as(b,v.ShapeForma))w=new G.PGMSimpleGroup(N,E,D,[_.ShapeFormaToPGMMapper.applyPathAsClip(e,B,t,a.clone(i),B.formaID)]);else{if(!(U=a.as(b,f.ImageForma)))return s.CoreAssert.fail("child reference generation failed for frame: unknown mask type","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",147),null;var K,V;if(!(K=n.referenceForForma(U)))return s.CoreAssert.fail("child reference generation failed for frame: no image?","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",142),null;V=1==i.length?i[0]:new F.PGMReference(new G.PGMSimpleGroup(N+"-children-group",E,D,a.clone(i)));var W,j=d.Matrix2D.calculateResizeTransform(U.bounds,o.bounds,S.TheoPoint.ZERO,l.FitType.Stretch),H=K.withPlacement(j);w=new T.PGMFilter(N,E,D,[V,H],new g.PGMMaskFilterSpec),(W=x)&&(w=new G.PGMSimpleGroup(N,E,D,[W,new F.PGMReference(w)]))}}else{var q,z=!1,Z=new C.TheoRectanglePath(o.bounds);(q=a.as(o.controller,l.FrameController))&&(z=q.clip),w=z?new P.PGMClip(N,E,D,a.clone(i),[Z]):new G.PGMSimpleGroup(N,E,D,a.clone(i))}return p.FormaToPGMUtils.applyAnimations(e,t,new F.PGMReference(w,new M.PGMCompositingParams(o.placement,O)))}return s.CoreAssert.fail("frame forma child reference generation failed","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",182),null}}}),r)},"7Pku":function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV");o.FormaToPGMFactory=i.defineProtocol("FormaToPGMFactory",{childReferences:"(GroupForma) -> Array<PGMReference>",referenceForForma:"(Forma) -> PGMReference"}),o.FormaToPGMMapper=(r=function(t){this.formaKind=t},i.defineClass({name:"FormaToPGMMapper",ctor:r,props:{makePGMRef:function(t,e,n,r){return a.CoreAssert.fail("PGMMapperForForma for "+this.formaKind+" isn't overriding makePGMRef","FormaToPGMMapper.makePGMRef","FormaToPGMMapper.swift",52),null},canDoSimpleTransformUpdate:function(t){return!0}}}),r)},"8Quq":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("7Pku"),u=n("w/+j"),c=n("c+uM"),p=n("Ird5"),f=n("jfma"),h=n("djwB"),d=n("yjxF"),m=n("euLT"),P=n("Aj79"),M=n("W6ub"),T=n("bAjp"),g=n("bJhu"),A=n("a9ow"),F=n("enh0"),y=n("sIWg");i.TextFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"TextFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=F.TextForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance},getPGMNodeForTextForma:function(t,e,n,r){var o,i,l,u;void 0===r&&(r=null);var f,P,F,G,R,v,_,C,S=e.textModel,w=p.PGMAnimationList.EMPTY;if((P=S.attributeAtIndex(A.FontColorAttribute.NAME,0))&&(F=a.as(P.attr,A.FontColorAttribute))&&(G=S.attributeAtIndex(A.FontSizeAttribute.NAME,0))&&(R=a.as(G.attr,A.FontSizeAttribute))&&(v=S.attributeAtIndex(A.FontDescriptorAttribute.NAME,0))&&(_=a.as(v.attr,A.FontDescriptorAttribute))&&null!=(C=c.LockupTextLook.toCaseValue((o=a.opt(a.as(a.opt(S.attributeAtIndex(A.TextLookAttribute.NAME,0),(function(t){return t.attr})),A.TextLookAttribute),(function(t){return t.value})))||null!=o?o:0))){var b=a.opt(a.as(a.opt(S.attributeAtIndex(A.FontStrokeColorAttribute.NAME,0),(function(t){return t.attr})),A.FontStrokeColorAttribute),(function(t){return t.value})),x=(i=a.opt(a.as(a.opt(S.attributeAtIndex(A.FontStrokeWidthAttribute.NAME,0),(function(t){return t.attr})),A.FontStrokeWidthAttribute),(function(t){return t.value})))||null!=i?i:0,N=(l=a.opt(a.as(a.opt(S.attributeAtIndex(A.TrackingAttribute.NAME,0),(function(t){return t.attr})),A.TrackingAttribute),(function(t){return t.value})))||null!=l?l:0,E=r||F.value;null==r&&x>0&&(C==c.LockupTextLook.KnockoutAndOutline||C==c.LockupTextLook.OutlineOnly||C==c.LockupTextLook.KnockoutAndShadow)&&(E=null),s.CoreAssert.isFalse(null==e.bounds,void 0,"TextFormaToPGMMapper.getPGMNodeForTextForma","TextFormaToPGMMapper.swift",95);var D=((u=a.opt(e.bounds,(function(t){return t.width})))||null!=u?u:a.toDouble(S.text.length)*R.value)-x,k=y.TheoRect.fromXYWH(0,R.value*(_.value.capRatio-_.value.ascentRatio),D,R.value*(_.value.ascentRatio+_.value.descentRatio));f=new T.PGMText(n,new d.PGMNodeMetadata(e.formaID,"text"),w,k,S.text,g.PGMTextStyle.createCacheable(h.PGMFont.fromDescriptor(_.value),E,b,x,N),M.PGMRenderRuns.init_378c(e.renderRuns))}else f=new m.PGMNullNode(n+"-text-missing-attribute");return f}},props:{makePGMRef:function(t,e,n,o){var i;return(i=a.as(t,F.TextForma))?u.FormaToPGMUtils.applyAnimations(e,i,new P.PGMReference(r.getPGMNodeForTextForma(e,i,i.formaID,null),new f.PGMCompositingParams(i.placement,i.style.opacity))):(s.CoreAssert.fail("TextFormaToPGMMapper: not a text forma","TextFormaToPGMMapper.makePGMRef","TextFormaToPGMMapper.swift",52),null)}}}),r)},Bcdx:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("5ex8"),l=n("Bqrn"),u=n("dX/e"),c=n("pR+7"),p=n("3HaQ"),f=n("8Quq"),h=n("zW/s"),d=n("s3ad");i.FormaToPGMMapperFactory=(r=function(){},o={},a.defineClass({name:"FormaToPGMMapperFactory",ctor:r,statics:{instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},FORMA_KIND_TO_FN:{get:function(){return void 0===o.FORMA_KIND_TO_FN&&(o.FORMA_KIND_TO_FN={Root:function(t){return c.RootFormaToPGMMapper.createMapper(t)},Frame:function(t){return s.FrameFormaToPGMMapper.createMapper(t)},Text:function(t){return f.TextFormaToPGMMapper.createMapper(t)},Shape:function(t){return p.ShapeFormaToPGMMapper.createMapper(t)},Image:function(t){return u.ImageFormaToPGMMapper.createMapper(t)},Video:function(t){return d.VideoFormaToPGMMapper.createMapper(t)},Vector:function(t){return h.VectorFormaToPGMMapper.createMapper(t)},group:function(t){return l.GroupFormaToPGMMapper.createMapper(t)},"smart-group":function(t){return l.GroupFormaToPGMMapper.createMapper(t)}}),o.FORMA_KIND_TO_FN}}},props:{getMapper:function(t){return a.opt(r.FORMA_KIND_TO_FN[t.kind],(function(e){return e(t)}))}}}),r)},BgH2:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("oKlP"),u=n("sIWg");i.TextPathSegment=(r=function(t,e,n,r){this._cachedTolerance=0,this._p0=t,this._p1=e,this._p2=n,this._p3=r},a.defineClass({name:"TextPathSegment",ctor:r,superName:"CoreObject",statics:{decodeFromJson:function(t){var e;if(e=t){var n=r.decodePoint(e[r.PROPERTY_P0]),o=r.decodePoint(e[r.PROPERTY_P1]),i=r.decodePoint(e[r.PROPERTY_P2]),a=r.decodePoint(e[r.PROPERTY_P3]);if(null!=n&&null!=o&&null!=i&&null!=a)return new r(n,o,i,a)}return null},encodePoint:function(t){return[t.x,t.y]},decodePoint:function(t){return l.TheoPoint.decodeJson(a.as(t,"AnyObject"))},PROPERTY_P0:"p0",PROPERTY_P1:"p1",PROPERTY_P2:"p2",PROPERTY_P3:"p3"},props:{p0:{get:function(){return this._p0}},p1:{get:function(){return this._p1}},p2:{get:function(){return this._p2}},p3:{get:function(){return this._p3}},clone:function(){return new r(this.p0,this.p1,this.p2,this.p3)},pointAt:function(t){if(!this.checkT(t))return l.TheoPoint.INVALID;var e=1-t,n=e*e*e*this.p0.x+3*t*e*e*this.p1.x+3*t*t*e*this.p2.x+t*t*t*this.p3.x,r=e*e*e*this.p0.y+3*t*e*e*this.p1.y+3*t*t*e*this.p2.y+t*t*t*this.p3.y;return new l.TheoPoint(n,r)},tangentUnitVectorAt:function(t){if(!this.checkT(t))return l.TheoPoint.INVALID;var e=t;e<.01?e=.01:e>.99&&(e=.99);var n=a.clone(this.calculateMidpoints(e)),r=l._minus_TheoPoint_TheoPoint(n[4],n[3]);return r.divide(r.length())},getBounds:function(){var t=this.getBoundsOneDim(this.p0.x,this.p1.x,this.p2.x,this.p3.x,(function(t){return t.x})),e=t.min,n=t.max,r=this.getBoundsOneDim(this.p0.y,this.p1.y,this.p2.y,this.p3.y,(function(t){return t.y})),o=r.min,i=r.max,a=new u.TheoRect(e,o,n,i),l=u.TheoRect.boundsOfPoints([this.p0,this.p1,this.p2,this.p3]);return l.equal(a)||l.contains(a)||s.CoreAssert.fail("Text path segment bounds incorrect","TextPathSegment.getBounds","TextPath.swift",99),a},getBoundsOneDim:function(t,e,n,r,o){var i,a,s=3*r-9*n+9*e-3*t,l=6*t-12*e+6*n,u=3*(-t+e);if(Math.abs(s)<1e-6)a=i=-u/l;else{var c=Math.sqrt(l*l-4*s*u);i=(-l+c)/(2*s),a=(-l-c)/(2*s)}var p=this.checkT(i)?o(this.pointAt(i)):t,f=this.checkT(a)?o(this.pointAt(a)):r;return{min:Math.min(p,f,t,r),max:Math.max(p,f,t,r)}},multiply:function(t){return new r(this._p0.multiplyPoint(t),this._p1.multiplyPoint(t),this._p2.multiplyPoint(t),this._p3.multiplyPoint(t))},offset:function(t){return new r(l._plus_TheoPoint_TheoPoint(this._p0,t),l._plus_TheoPoint_TheoPoint(this._p1,t),l._plus_TheoPoint_TheoPoint(this._p2,t),l._plus_TheoPoint_TheoPoint(this._p3,t))},truncate:function(t){var e=a.clone(this.calculateMidpoints(t)),n=e[3].interpolate(e[4],t);return{prefix:new r(this.p0,e[0],e[3],n),suffix:new r(n,e[4],e[2],this._p3)}},getLength:function(t){if(null!=this._cachedLen&&this._cachedTolerance<=t)return this._cachedLen;for(var e=0,n=0,r=t,o=this.clone();!(o.getPolylineLength()-(e=o.getChordLength())<=t);){r/=2;var i=o.truncate(.5),a=i.prefix,s=i.suffix;n+=a.getLength(r),o=s}return this._cachedLen=n+e,this._cachedTolerance=r,this._cachedLen},getCorrectedLength:function(t,e,n){var r=this.getLength(n),o=l._minus_TheoPoint_TheoPoint(this.p3,this.p2),i=Math.atan2(o.y,o.x);return o=l._minus_TheoPoint_TheoPoint(this.p1,this.p0),(i-=Math.atan2(o.y,o.x))<-Math.PI&&(i+=2*Math.PI),i>Math.PI&&(i-=2*Math.PI),r+(i*=i>0?t:e)},findTValueByCorrectedPrefixLength:function(t,e,n,r){for(var o=r/2,i=0,a=1,l=0,u=0;u<1e3;){l=(i+a)/2;var c=this.truncate(l).prefix.getCorrectedLength(t,e,o);if(Math.abs(n-c)<=o)return l;n<c?a=l:i=l,u+=1}return s.CoreAssert.warning("findTValueByCorrectedPrefixLength did not converge"),l},encodeJson:function(){var t={};return t[r.PROPERTY_P0]=r.encodePoint(this.p0),t[r.PROPERTY_P1]=r.encodePoint(this.p1),t[r.PROPERTY_P2]=r.encodePoint(this.p2),t[r.PROPERTY_P3]=r.encodePoint(this.p3),t},isEqual:function(t){return this.isEqualWithAccuracy(t,1e-6)},isEqualWithAccuracy:function(t,e){var n;return!!(n=a.as(t,r))&&this.p0.equalWithAccuracy(n.p0,e)&&this.p1.equalWithAccuracy(n.p1,e)&&this.p2.equalWithAccuracy(n.p2,e)&&this.p3.equalWithAccuracy(n.p3,e)},getPolylineLength:function(){return this.p0.distanceTo(this.p1)+this.p1.distanceTo(this.p2)+this.p2.distanceTo(this.p3)},getChordLength:function(){return this.p0.distanceTo(this.p3)},calculateMidpoints:function(t){var e=this.p0.interpolate(this.p1,t),n=this.p1.interpolate(this.p2,t),r=this.p2.interpolate(this.p3,t),o=e.interpolate(n,t),i=n.interpolate(r,t);return[e,n,r,o,i]},checkT:function(t){return t>=0&&t<=1}}}),r),i.TextPath=(o=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=1),this._segments=a.clone(t),this._flex=e},a.defineClass({name:"TextPath",ctor:o,superName:"CoreObject",statics:{decodeFromJson:function(t){var e,n;if(n=t){var r,s=(e=a.as(n[o.PROPERTY_FLEX],"Double"))||null!=e?e:1,l=[];if(r=a.as(n[o.PROPERTY_SEGMENTS],["Array","Any"]))for(var u=a.iter(r);!u.done;u.next()){var c=u.value,p=i.TextPathSegment.decodeFromJson(a.as(c,["Dictionary","String","Any"]));if(null==p)return null;l.push(p)}return new o(a.clone(l),s)}return null},areSegmentsContiguous:function(t){for(var e=a.iter(a.toSequence(t));!e.done;e.next()){var n=e.value,r=n.offset,o=n.element;if(r<t.length-1){var i=t[r+1];if(!o.p3.equal(i.p0))return!1}}return!0},PROPERTY_FLEX:"flex",PROPERTY_SEGMENTS:"segment"},props:{segments:{get:function(){return this._segments}},numSegments:{get:function(){return this._segments.length}},flex:{get:function(){return this._flex}},isClosed:function(){return!(this.numSegments<2)&&o.areSegmentsContiguous(a.clone(this._segments))&&a.first(this._segments).p0.equal(a.last(this._segments).p3)},clone:function(){var t=this._segments.map((function(t){return t.clone()}),this);return new o(a.clone(t),this._flex)},pointAt:function(t){var e;return null!=(e=this.getSegementIndex(t))?this._segments[e].pointAt(t-a.toDouble(e)):l.TheoPoint.INVALID},tangentUnitVectorAt:function(t){var e;return null!=(e=this.getSegementIndex(t))?this._segments[e].tangentUnitVectorAt(t-a.toDouble(e)):l.TheoPoint.INVALID},getBounds:function(){for(var t,e=a.iter(this._segments);!e.done;e.next()){var n=e.value.getBounds();t=null==t?n:t.unionWith(n)}return t||u.TheoRect.Zero},multiply:function(t){var e=this._segments.map((function(e){return e.multiply(new l.TheoPoint(t.width,t.height))}),this);return new o(a.clone(e),this._flex)},offset:function(t){var e=this._segments.map((function(e){return e.offset(t)}),this);return new o(a.clone(e),this._flex)},truncate:function(t){if(t>=0&&t<a.toDouble(this.numSegments)){var e=a.toInt(Math.floor(t)),n=a.clone(this._segments),r=a.clone(n.splice(0,e)),i=t-a.toDouble(e);if(i>0){var s=n[0].truncate(i),l=s.prefix,u=s.suffix,c=l;n[0]=u,r.push(c)}return{prefix:new o(a.clone(r)),suffix:new o(a.clone(n),this._flex)}}return{prefix:new o,suffix:this.clone()}},getLength:function(t){if(0==this.numSegments)return 0;for(var e=t/a.toDouble(this.numSegments),n=0,r=a.iter(this._segments);!r.done;r.next())n+=r.value.getLength(e);return n},getCorrectedLength:function(t,e,n){for(var r=n/a.toDouble(this.numSegments),o=0,i=a.iter(this._segments);!i.done;i.next())o+=i.value.getCorrectedLength(t,e,r);return o},findTValueByCorrectedPrefixLength:function(t,e,n,r){for(var o=r/a.toDouble(this.numSegments),i=n,s=0;s<this.numSegments&&i>0;){var l=this._segments[s].getCorrectedLength(t,e,o);if(i<=l-o){var u=this._segments[s].findTValueByCorrectedPrefixLength(t,e,i,o);return a.toDouble(s)+u}i-=l,s+=1}return a.toDouble(s)},encodeJson:function(){var t={};t[o.PROPERTY_FLEX]=this.flex;for(var e=[],n=a.iter(this.segments);!n.done;n.next()){var r=n.value;e.push(r.encodeJson())}return t[o.PROPERTY_SEGMENTS]=e,t},isEqual:function(t){return this.isEqualWithAccuracy(t,1e-6)},isEqualWithAccuracy:function(t,e){var n;if(n=a.as(t,o)){if(this.numSegments!=n.numSegments||Math.abs(this.flex-n.flex)>e)return!1;for(var r=a.iter(a.toSequence(this.segments));!r.done;r.next()){var i=r.value,s=i.offset;if(!i.element.isEqualWithAccuracy(n.segments[s],e))return!1}return!0}return!1},getSegementIndex:function(t){return t<0||t>a.toDouble(this.numSegments)?null:Math.min(a.toInt(Math.floor(t)),this.numSegments-1)}}}),o)},Bqrn:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("7Pku"),u=n("w/+j"),c=n("9Lk3"),p=n("pnSN"),f=n("RBTN"),h=n("Ird5"),d=n("jfma"),m=n("yjxF"),P=n("Aj79"),M=n("g6aL"),T=n("8t9B"),g=n("QgdZ");a.gvar(i,"_groupSingleton",(function(){return new i.GroupFormaToPGMMapper})),a.gvar(i,"_typeLockupSingleton",(function(){return new g.TypeLockupToPGMMapper})),a.gvar(i,"_gridSingleton",(function(){return new f.GridToPGMMapper})),i.GroupFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"GroupFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=p.GroupForma.KIND),o.FORMA_KIND}},createMapper:function(t){var e;if(e=t.controller){if(e instanceof T.TypeLockupController)return i._typeLockupSingleton;if(e instanceof c.GridController)return i._gridSingleton}return i._groupSingleton}},props:{makePGMRef:function(t,e,n,r){var o,i;return(o=a.as(t,p.GroupForma))&&(i=n.childReferences(o))?u.FormaToPGMUtils.applyAnimations(e,t,new P.PGMReference(new M.PGMSimpleGroup(o.formaID,new m.PGMNodeMetadata(o.formaID,"group"),h.PGMAnimationList.EMPTY,a.clone(i)),new d.PGMCompositingParams(o.placement,o.style.opacity))):(s.CoreAssert.fail("group forma child reference generation failed","GroupFormaToPGMMapper.makePGMRef","GroupFormaToPGMMapper.swift",64),null)}}}),r)},ML5t:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("hndY");o.FormaPagePGMSource=(r=function(t){this.caches_={},this.page=t},i.defineClass({name:"FormaPagePGMSource",ctor:r,superName:"PGMSource",props:{getCache:function(t){var e,n,r=t.asString;if(e=this.caches_[r])return e;if(n=this.page){var o=new s.FormaPGMCache(n,t);return this.caches_[r]=o,o}return a.CoreAssert.fail("FormaPagePGMSource.getGraph: page is out of scope","FormaPagePGMSource.getCache","FormaPagePGMSource.swift",39),null},getGraph:function(t){var e;return(e=this.getCache(t))?e.getGraph():null},getGraphForForma:function(t,e){var n;return(n=this.getCache(e))?n.getGraphForForma(t):null}}}),r)},QgZx:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),l=n("iCxV"),u=n("9YN4");o.FontOrigin=i.defineEnum("FontOrigin",{UNKNOWN_ORIGIN:0,USER_CHOSEN:1,STARTUP:2,ACTIVATE_MISSING:3}),o.describeFontOrigin=function(t){switch(t){case 0:return"unknown";case 1:return"user-chosen";case 2:return"startup";case 3:return"activate-missing"}},o.FontSource=i.defineEnum("FontSource",{UNKNOWN_SOURCE:0,WEB_FONT:1,EMBEDDED:2,SPARK_PROVIDED:3,USER_UPLOAD:4,TYPEKIT_FREE:5,TYPEKIT_PREMIUM:6}),o.describeFontSource=function(t){switch(t){case 0:return"unknown";case 1:return"web";case 2:return"embedded";case 3:return"spark";case 4:return"user-upload";case 5:return"typekit-free";case 6:return"typekit-premium"}},o.FontAvailability=i.defineEnum("FontAvailability",{UNKNOWN:0,LOADABLE:1,LOADED:2,NOT_LOADABLE:3}),i.gvar(o,"fontDescriptorStrings",(function(){return{familyName:function(t,e){t.familyName=e},displaySample:function(t,e){t.displaySample=e},label:function(t,e){t.label=e},postScriptName:function(t,e){t.postScriptName=e},macPostScriptName:function(t,e){t.macPostScriptName=e},filename:function(t,e){t.filename=e},family:function(t,e){t.family=e},original_family:function(t,e){t.original_family=e},faceName:function(t,e){t.faceName=e},category:function(t,e){t.category=e},subfamilyName:function(t,e){t.subfamilyName=e},preferredFamilyName:function(t,e){t.preferredFamilyName=e},preferredSubfamilyName:function(t,e){t.preferredSubfamilyName=e},cssName:function(t,e){t.cssName=e},tkSyncId:function(t,e){t.tkSyncId=e},tkWebId:function(t,e){t.tkWebId=e},style:function(t,e){t.style=e}}})),i.gvar(o,"fontDescriptorDoubles",(function(){return{capAccentRatio:function(t,e){t.capAccentRatio=e},capRatio:function(t,e){t.capRatio=e},meanAccentRatio:function(t,e){t.meanAccentRatio=e},meanRatio:function(t,e){t.meanRatio=e},ascentRatio:function(t,e){t.ascentRatio=e},baselineOffsetRatio:function(t,e){t.baselineOffsetRatio=e},tailRatio:function(t,e){t.tailRatio=e},descentRatio:function(t,e){t.descentRatio=e},italicAngle:function(t,e){t.italicAngle=e},popularity:function(t,e){t.popularity=e}}})),i.gvar(o,"fontDescriptorInts",(function(){return{weight:function(t,e){t.weight=e},source:function(t,e){var n;t.source=(n=o.FontSource.toCaseValue(e))||null!=n?n:o.FontSource.UNKNOWN_SOURCE},formality:function(t,e){t.formality=e},blackness:function(t,e){t.blackness=e},drama:function(t,e){t.drama=e},width:function(t,e){t.width=e},usWidthClass:function(t,e){t.usWidthClass=e},usWeightClass:function(t,e){t.usWeightClass=e}}})),i.gvar(o,"fontDescriptorBools",(function(){return{allCapsAllowed:function(t,e){t.allCapsAllowed=e},displayAllowed:function(t,e){t.displayAllowed=e},bodyAllowed:function(t,e){t.bodyAllowed=e},serif:function(t,e){t.serif=e},slab:function(t,e){t.slab=e},handdrawn:function(t,e){t.handdrawn=e},calligraphic:function(t,e){t.calligraphic=e},decorative:function(t,e){t.decorative=e},square:function(t,e){t.square=e},geometric:function(t,e){t.geometric=e},italic:function(t,e){t.italic=e}}})),o.FontDescriptor=(r=function(t){this.displayFamilyName_="",this.displayFaceName_="",this._source=o.FontSource.UNKNOWN_SOURCE,this.availability=o.FontAvailability.LOADABLE,this._spaceWidthRatio=0,this.capAccentRatio=0,this.capRatio=0,this.meanAccentRatio=0,this.meanRatio=0,this.ascentRatio=0,this.baselineOffsetRatio=0,this.tailRatio=0,this.descentRatio=0,this.italicAngle=0,this.displaySample="",this.upperCaseCharsDict={},this.lowerCaseCharsDict={},this.capAccentCharsDict={},this.capCharsDict={},this.ascentCharsDict={},this.meanAccentCharsDict={},this.meanCharsDict={},this.baseCharsDict={},this.tailCharsDict={},this.descentCharsDict={},this.characterFeatures={},this.label="",this.postScriptName="",this.macPostScriptName="",this.filename="",this.family="",this.original_family="",this.category="",this.familyName="",this.subfamilyName="",this.preferredFamilyName="",this.preferredSubfamilyName="",this.faceName="",this.cssName="",this.tkSyncId="",this.tkWebId="",this.style="",this.popularity=0,this.weight=0,this.formality=0,this.blackness=0,this.drama=0,this.width=0,this.usWidthClass=0,this.usWeightClass=0,this.allCapsAllowed=!1,this.displayAllowed=!1,this.bodyAllowed=!1,this.serif=!1,this.slab=!1,this.handdrawn=!1,this.calligraphic=!1,this.decorative=!1,this.square=!1,this.geometric=!1,this.italic=!1,s.CoreObject.call(this);for(var e=i.iter(o.fontDescriptorStrings);!e.done;e.next()){var n=e.key,r=e.value;null!=(h=t[n])&&r(this,h)}for(var a=i.iter(o.fontDescriptorDoubles);!a.done;a.next())n=a.key,r=a.value,null!=(h=t[n])&&r(this,h);for(var l=i.iter(o.fontDescriptorInts);!l.done;l.next())if(n=l.key,r=l.value,null!=(h=t[n]))if("weight"==n&&null!=i.as(h,"String")){var u=h,c=i.isEmpty(u)?0:i.toInt(u);r(this,c>0?c:400)}else if("source"==n){var p=h;this.source=null!=o.FontSource.toCaseValue(p)?o.FontSource.toCaseValue(p):o.FontSource.UNKNOWN_SOURCE}else r(this,h);for(var f=i.iter(o.fontDescriptorBools);!f.done;f.next()){var h;n=f.key,r=f.value,null!=(h=t[n])&&r(this,h)}for(var d=t.uppercaseChars,m=t.lowercaseChars,P=t.capAccentChars,M=t.capChars,T=t.ascentChars,g=t.meanAccentChars,A=t.meanChars,F=t.baseChars,y=t.tailChars,G=t.descentChars,R=i.clone(i.as(t.characterFeatures,["Dictionary","String","Double"])),v=i.iter(i.chars(d));!v.done;v.next()){var _=v.value;this.upperCaseCharsDict[_]=!0}for(var C=i.iter(i.chars(m));!C.done;C.next()){var S=C.value;this.lowerCaseCharsDict[S]=!0}for(var w=i.iter(i.chars(P));!w.done;w.next()){var b=w.value;this.capAccentCharsDict[b]=!0}for(var x=i.iter(i.chars(M));!x.done;x.next()){var N=x.value;this.capCharsDict[N]=!0}for(var E=i.iter(i.chars(T));!E.done;E.next()){var D=E.value;this.ascentCharsDict[D]=!0}for(var k=i.iter(i.chars(g));!k.done;k.next()){var O=k.value;this.meanAccentCharsDict[O]=!0}for(var I=i.iter(i.chars(A));!I.done;I.next()){var L=I.value;this.meanCharsDict[L]=!0}for(var Y=i.iter(i.chars(F));!Y.done;Y.next()){var B=Y.value;this.baseCharsDict[B]=!0}for(var U=i.iter(i.chars(y));!U.done;U.next()){var K=U.value;this.tailCharsDict[K]=!0}for(var V=i.iter(i.chars(G));!V.done;V.next()){var W=V.value;this.descentCharsDict[W]=!0}if(null!=R)for(var j=i.iter(i.keys(R));!j.done;j.next()){var H=j.value;this.characterFeatures[H]=R[H]}},i.defineClass({name:"FontDescriptor",ctor:r,superName:"CoreObject",statics:{PROPERTY_POSTSCRIPT_NAME:"postscript-name",PROPERTY_SOURCE:"source",decodeJson:function(t,e){var n=i.as(t,["Dictionary","String","Any"]);if(null==n)return a.CoreAssert.fail("FontDescriptorAttribute: Data is missing or not a dictionary","FontDescriptor.decodeJson","FontDescriptor.swift",436),null;var s=n[r.PROPERTY_POSTSCRIPT_NAME],c=l.Host.fontProvider.descriptorForPostScriptName(s,i.as(e,u.TheoDocument));return c.postScriptName==s&&c.availability==o.FontAvailability.LOADED||e.recordMissingFont(s),c}},props:{displayFamilyName:{get:function(){return""==this.displayFamilyName_&&(this.displayFamilyName_=this.preferredFamilyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.familyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.family),""==this.displayFamilyName_&&(this.displayFamilyName_=this.postScriptName),this.displayFamilyName_},set:function(t){this.displayFamilyName_=t}},displayFaceName:{get:function(){return""==this.displayFaceName_&&(this.displayFaceName_=this.preferredSubfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.subfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.faceName),""==this.displayFaceName_&&(this.displayFaceName_=this.label),""==this.displayFaceName_&&(this.displayFaceName_=this.postScriptName),this.displayFaceName_},set:function(t){this.displayFaceName_=t}},source:{get:function(){return this._source},set:function(t){this._source==o.FontSource.EMBEDDED?t!=o.FontSource.EMBEDDED&&i.info("Font "+this.postScriptName+" is already marked as EMBEDDED. Ignoring new font source"):this._source=t}},privateSetFontSource:function(t){this._source=t},spaceWidthRatio:{get:function(){if(0==this._spaceWidthRatio){var t=l.Host.textModelUtils.measureInkBounds(" ",this,100);this._spaceWidthRatio=t.width/100}return this._spaceWidthRatio}},resolveFamily:function(){return this.family!=this.cssName||""==this.original_family?this.family:this.original_family},isEqual:function(t){var e=i.as(t,r);return null!=e&&this.postScriptName==e.postScriptName},encodeJson:function(){var t={};return t[r.PROPERTY_POSTSCRIPT_NAME]=this.postScriptName,t[r.PROPERTY_SOURCE]=o.describeFontSource(this.source),t}}}),r),o._equality_FontDescriptor_FontDescriptor=function(t,e){return t.isEqual(e)}},QgdZ:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("w/+j"),l=n("pnSN"),u=n("Bqrn"),c=n("c+uM"),p=n("Ird5"),f=n("jfma"),h=n("dmHI"),d=n("vTQu"),m=n("yjxF"),P=n("Aj79"),M=n("g6aL"),T=n("Zifs"),g=n("djAF"),A=n("3HaQ"),F=n("a9ow"),y=n("enh0"),G=n("8Quq");o.TypeLockupToPGMMapper=(r=function(){u.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"TypeLockupToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",statics:{usesPageAnchoredStyle:function(t){var e;if(e=i.as(t.style,c.LockupStyle)){var n=e.backing;return n==c.LockupBacking.BannerHorizontal||n==c.LockupBacking.BannerVertical||n==c.LockupBacking.Banner||n==c.LockupBacking.Knockout}return!1},getPGMForTypeLockup:function(t,e,n){var r,o,u,R=0,v=0,_=function e(h){var d,_,C,S=null,w=null,b=null,x=null;if(d=i.as(h,l.GroupForma)){var N=null,E=null,D=null,k=null;d.childrenAsArray.forEach((function(t){var n=e(t),r=n.shapeRef,o=n.bottomTextRef,i=n.textRef,a=n.knockoutRef;null!=r&&(null==N&&(N=[]),N.push(r)),null!=o&&(null==E&&(E=[]),E.push(o)),null!=i&&(null==D&&(D=[]),D.push(i)),null!=a&&(null==k&&(k=[]),k.push(a))}));var O=f.PGMCompositingParams.smartInit(d.placement,d.style.opacity);null!=N&&(S=s.FormaToPGMUtils.applyAnimations(t,d,new P.PGMReference(new M.PGMSimpleGroup(d.formaID+"-shapes",new m.PGMNodeMetadata(d.formaID,"group"),p.PGMAnimationList.EMPTY,i.clone(N)),O))),null!=E&&(w=s.FormaToPGMUtils.applyAnimations(t,d,new P.PGMReference(new M.PGMSimpleGroup(d.formaID+"-bottomTexts",new m.PGMNodeMetadata(d.formaID,"group"),p.PGMAnimationList.EMPTY,i.clone(E)),O))),null!=D&&(b=s.FormaToPGMUtils.applyAnimations(t,d,new P.PGMReference(new M.PGMSimpleGroup(d.formaID+"-texts",new m.PGMNodeMetadata(d.formaID,"group"),p.PGMAnimationList.EMPTY,i.clone(D)),O))),null!=k&&(x=s.FormaToPGMUtils.applyAnimations(t,d,new P.PGMReference(new M.PGMSimpleGroup(d.formaID+"-knockouts",new m.PGMNodeMetadata(d.formaID,"group"),p.PGMAnimationList.EMPTY,i.clone(k)),O)))}else if(_=i.as(h,y.TextForma)){R+=1;var I=(r=c.LockupTextLook.toCaseValue((o=i.opt(i.as(i.opt(_.textModel.attributeAtIndex(F.TextLookAttribute.NAME,0),(function(t){return t.attr})),F.TextLookAttribute),(function(t){return t.value})))||null!=o?o:0))||null!=r?r:c.LockupTextLook.Fill,L=(u=i.opt(i.as(_.textModel.attributeAtIndex(F.FontStrokeWidthAttribute.NAME,0).attr,F.FontStrokeWidthAttribute),(function(t){return t.value})))||null!=u?u:0;switch(O=new f.PGMCompositingParams(_.placement,_.style.opacity),a.CoreAssert.isTrue(!c.LockupStyle.isKnockoutLook(I)||I==c.LockupTextLook.KnockoutAndFill||I==c.LockupTextLook.KnockoutAndShadow||i.eq(T._equality_SolidColor_SolidColor,i.opt(i.as(i.opt(_.textModel.attributeAtIndex(F.FontColorAttribute.NAME,0),(function(t){return t.attr})),F.FontColorAttribute),(function(t){return t.value}))||T.SolidColor.WHITE,T.SolidColor.BLACK),void 0,"TypeLockupToPGMMapper.getPGMForTypeLockup","TypeLockupToPGMMapper.swift",186),I){case c.LockupTextLook.Fill:var Y=G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+R);b=new P.PGMReference(Y,O,t.asDynamic?s.FormaToPGMUtils.createAnimations(Y,_):p.PGMAnimationList.EMPTY);break;case c.LockupTextLook.KnockoutOnly:x=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+R),O));break;case c.LockupTextLook.KnockoutAndOutline:case c.LockupTextLook.KnockoutAndFill:x=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-ko#"+R,T.SolidColor.BLACK),O)),b=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-fg#"+R),O));break;case c.LockupTextLook.KnockoutAndShadow:L>0?w=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-bg#"+R),O)):x=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-ko#"+R),O));break;default:b=s.FormaToPGMUtils.applyAnimations(t,_,new P.PGMReference(G.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+R),O))}}else(C=i.as(h,g.ShapeForma))&&(v+=1,S=s.FormaToPGMUtils.applyAnimations(t,C,A.ShapeFormaToPGMMapper.makePGMRefForShape(t,C,n+"-shp#"+v)));return{shapeRef:S,bottomTextRef:w,textRef:b,knockoutRef:x}}(e),C=_.shapeRef,S=_.bottomTextRef,w=_.textRef,b=_.knockoutRef,x=i.clone(i.opt(i.as(i.opt(C,(function(t){return t.child})),M.PGMSimpleGroup),(function(t){return t.children}))),N=i.clone(i.opt(i.as(i.opt(S,(function(t){return t.child})),M.PGMSimpleGroup),(function(t){return t.children}))),E=i.clone(i.opt(i.as(i.opt(w,(function(t){return t.child})),M.PGMSimpleGroup),(function(t){return t.children}))),D=i.clone(i.opt(i.as(i.opt(b,(function(t){return t.child})),M.PGMSimpleGroup),(function(t){return t.children})));if(null!=D&&null!=x){var k=new M.PGMSimpleGroup(n+"-mask",new m.PGMNodeMetadata(e.formaID,"mask"),p.PGMAnimationList.EMPTY,i.clone(D)),O=new M.PGMSimpleGroup(n+"-art",new m.PGMNodeMetadata(e.formaID,"art"),p.PGMAnimationList.EMPTY,i.clone(x));if(null!=E||null!=N){var I=[];return null!=N&&I.push(new P.PGMReference(new M.PGMSimpleGroup(n+"-bg",new m.PGMNodeMetadata(e.formaID,"text-on-bottom-of-knockout"),p.PGMAnimationList.EMPTY,i.clone(N)))),I.push(new P.PGMReference(new h.PGMFilter(n+"-ko",new m.PGMNodeMetadata(e.formaID,"shape-knocked-out-by-text"),p.PGMAnimationList.EMPTY,[new P.PGMReference(O),new P.PGMReference(k)],new d.PGMMaskFilterSpec(T.SolidColor.WHITE)))),null!=E&&I.push(new P.PGMReference(new M.PGMSimpleGroup(n+"-fg",new m.PGMNodeMetadata(e.formaID,"text-on-top-of-knockout"),p.PGMAnimationList.EMPTY,i.clone(E)))),new M.PGMSimpleGroup(n,new m.PGMNodeMetadata(e.formaID,"lockup-sandwich"),p.PGMAnimationList.EMPTY,i.clone(I))}return new h.PGMFilter(n,new m.PGMNodeMetadata(e.formaID,"simple-text-knockout"),p.PGMAnimationList.EMPTY,[new P.PGMReference(O),new P.PGMReference(k)],new d.PGMMaskFilterSpec(T.SolidColor.WHITE))}var L=[];return null!=x&&(L=L.concat(x)),null!=E&&(L=L.concat(E)),new M.PGMSimpleGroup(n,new m.PGMNodeMetadata(e.formaID,"simple-lockup"),p.PGMAnimationList.EMPTY,i.clone(L))}},props:{makePGMRef:function(t,e,n,o){return s.FormaToPGMUtils.applyAnimations(e,t,new P.PGMReference(r.getPGMForTypeLockup(e,t,t.formaID),new f.PGMCompositingParams(t.placement,t.style.opacity)))},canDoSimpleTransformUpdate:function(t){return!r.usesPageAnchoredStyle(t.forma)}}}),r)},RBTN:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("Bqrn");o.GridToPGMMapper=(r=function(){a.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"GridToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",props:{makePGMRef:function(t,e,n,r){return a.GroupFormaToPGMMapper.prototype.makePGMRef.call(this,t,e,n,r)}}}),r)},VJ9E:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("QgZx"),l=n("iCxV"),u=n("3lr5");o.TheoFont=(r=function(){this.roleOrder=["headline-font","body-font","body-font-italic","body-font-bold","body-font-bold-italic","secondary-font"]},i.defineClass({name:"TheoFont",ctor:r,superName:"CoreObject",statics:{SPARK_FONT_ROLE_HEADLINE:"headline-font",SPARK_FONT_ROLE_BODY:"body-font",SPARK_FONT_ROLE_BODY_ITALIC:"body-font-italic",SPARK_FONT_ROLE_BODY_BOLD:"body-font-bold",SPARK_FONT_ROLE_BODY_BOLD_ITALIC:"body-font-bold-italic",SPARK_FONT_ROLE_SECONDARY:"secondary-font",SPARK_FONT_ROLE_CUSTOM:"custom",decodeJson:function(t,e){if(null==t)return null;var n=i.as(t,["Dictionary","String","Any"]);if(null==n)return a.CoreAssert.fail("TheoFont.decodeJson: object passed isn't a dictionary","TheoFont.decodeJson","TheoFont.swift",106),null;var o,l=i.as(n[s.FontDescriptor.PROPERTY_POSTSCRIPT_NAME],"String");if(o=s.FontDescriptor.decodeJson(t,e)){if(l==o.postScriptName){var u=i.as(n.sparkElementID,"String"),c=i.clone(i.as(n.sparkRoles,["Array","String"]));return r.init_9e5c(o,u,i.clone(c))}return r.init_9e5c(o)}return null}},props:{init_9e5c:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.fontData=t,this.sparkElementID=e,this.sparkRoles=i.clone(n)},init_a314:function(t){this.sparkElementID=t.id,this.sparkRoles=i.clone(t.acRoles);var e,n,r=l.Host.fontProvider.getIncludedFonts(u.ANY_DOCUMENT);(e=t.descriptor)?null!=(n=r.indexOf(e))?this.fontData=r.fontAt(n):(a.CoreAssert.warning("Failed to find brandkit font "+e.postScriptName+" in list of available fonts, using 0th"),this.fontData=r.fontAt(0)):"faux-font"==t.sourceType?(a.CoreAssert.warning("TheoFont: Failed to find synthesized brandkit font in list of available fonts, using 0th font"),this.fontData=r.fontAt(0)):(a.CoreAssert.warning("TheoFont: Failed to find brandkit font in list of available fonts, using 0th font"),this.fontData=r.fontAt(0))},isSparkFont:function(){return null!=this.sparkRoles||null!=this.sparkElementID},getSparkFontRole:function(){if(null==this.sparkRoles)return null;for(var t=i.iter(this.roleOrder);!t.done;t.next()){var e=t.value;if(this.sparkRoles.includes(e))return e}return null},hasSparkFontRole:function(t){return null!=this.sparkRoles&&this.sparkRoles.includes(t)},encodeJson:function(){var t=this.fontData.encodeJson();return null!=this.sparkElementID&&(t.sparkElementID=this.sparkElementID),null!=this.sparkRoles&&(t.sparkRoles=i.clone(this.sparkRoles)),t},isEqual:function(t){var e;return!!(e=i.as(t,r))&&e.fontData.isEqual(this.fontData)&&e.sparkElementID==this.sparkElementID&&e.getSparkFontRole()==this.getSparkFontRole()}}}),r),o._equality_TheoFont_TheoFont=function(t,e){return t.isEqual(e)}},a9ow:function(t,e,n){var r,o,i,a,s,l,u,c,p,f=e,h=n("oAGj"),d=n("qsM9"),m=n("SpAV"),P=n("dJuF"),M=n("QgZx"),T=n("iCxV"),g=n("Zifs");f.TextAttribute=(r=function(t,e,n){this.start=t,this.length=e,this.value_=n},h.defineClass({name:"TextAttribute",ctor:r,superName:"CoreObject",statics:{PROPERTY_VALUE:"value",PROPERTY_START:"start",PROPERTY_LENGTH:"length"},props:{isEqual:function(t){var e;return!!(e=h.as(t,r))&&e.start==this.start&&e.length==this.length},hash:{get:function(){return h.hashValue(this.start)^h.hashValue(this.length)}},stamp:{get:function(){return m.CoreAssert.fail("unimplemented override of stamp","TextAttribute","TextAttribute.swift",36),""}},description:{get:function(){return m.CoreAssert.fail("missing override of description","TextAttribute","TextAttribute.swift",41),"TextAttribute"}},cloneToNewLength:function(t){return new r(this.start,t,this.value_)}}}),r),f.UTF16Attribute=(o=function(){},h.defineClass({name:"UTF16Attribute",ctor:o,superName:"TextAttribute",statics:{NAME:{get:function(){return"text"}},codec:{get:function(){var t,e="UTF16Attribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var i,a=P.DBProperty.deleted(t);return(i=h.as(n,o))&&(a=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),i.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),i.length),value:P.DBProperty.stringProperty(t.append(f.TextAttribute.PROPERTY_VALUE),i.value)},e)),a}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),a=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.stringValue}));if(null!=r&&null!=i&&null!=a)return o.init_b49c(r,i,a)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,t.length,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,o))&&e.value==this.value&&f.TextAttribute.prototype.isEqual.call(this,t)},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return o.init_b49c(this.start,t,this.value)}}}),o),f.FontDescriptorAttribute=(i=function(){},h.defineClass({name:"FontDescriptorAttribute",ctor:i,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-name"}},codec:{get:function(){var t,e="FontDescriptorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,a=P.DBProperty.deleted(t);return(o=h.as(n,i))&&(a=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.fontDescriptorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),a}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),a=h.as(d.Codecs.fontDescriptorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),M.FontDescriptor);if(null!=r&&null!=o&&null!=a)return i.init_b49c(r,o,a)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},postscriptName:{get:function(){return this.value.postScriptName}},value:{get:function(){var t;return(t=h.as(this.value_,M.FontDescriptor))||null!=t?t:T.Host.textModelUtils.defaultFont()}},isEqual:function(t){var e;return!!(e=h.as(t,i))&&(e.value===this.value||h.eq(M._equality_FontDescriptor_FontDescriptor,e.value,this.value))},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return this.value.postScriptName}},description:{get:function(){return this.value.postScriptName}},cloneToNewLength:function(t){return i.init_b49c(this.start,t,this.value)}}}),i),f.FontSizeAttribute=(a=function(){},h.defineClass({name:"FontSizeAttribute",ctor:a,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-size"}},codec:{get:function(){var t,e="FontSizeAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,a))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return a.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,a))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return a.init_b49c(this.start,t,this.value)}}}),a),f.FontColorAttribute=(s=function(){},h.defineClass({name:"FontColorAttribute",ctor:s,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-color"}},codec:{get:function(){var t,e="FontColorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,s))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.solidColorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.as(d.Codecs.solidColorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),g.SolidColor);if(null!=r&&null!=o&&null!=i)return s.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,s))&&h.eq(g._equality_SolidColor_SolidColor,e.value,this.value)},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return h.toString(this.value.hash)}},description:{get:function(){return this.value.asString}},cloneToNewLength:function(t){return s.init_b49c(this.start,t,this.value)}}}),s),f.FontStrokeColorAttribute=(l=function(){},h.defineClass({name:"FontStrokeColorAttribute",ctor:l,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokecolor"}},codec:{get:function(){var t,e="FontStrokeColorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,l))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.solidColorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.as(d.Codecs.solidColorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),g.SolidColor);if(null!=r&&null!=o&&null!=i)return l.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,l))&&h.eq(g._equality_SolidColor_SolidColor,e.value,this.value)},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return h.toString(this.value.hash)}},description:{get:function(){return this.value.asString}},cloneToNewLength:function(t){return l.init_b49c(this.start,t,this.value)}}}),l),f.FontStrokeWidthAttribute=(u=function(){},h.defineClass({name:"FontStrokeWidthAttribute",ctor:u,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokewidth"}},codec:{get:function(){var t,e="FontStrokeWidthAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,u))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return u.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,u))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return u.init_b49c(this.start,t,this.value)}}}),u),f.TextLookAttribute=(c=function(){},h.defineClass({name:"TextLookAttribute",ctor:c,superName:"TextAttribute",statics:{NAME:{get:function(){return"text-look"}},codec:{get:function(){var t,e="TextLookAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,c))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.intValue}));if(null!=r&&null!=o&&null!=i)return c.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,c))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return c.init_b49c(this.start,t,this.value)}}}),c),f.TrackingAttribute=(p=function(){},h.defineClass({name:"TrackingAttribute",ctor:p,superName:"TextAttribute",statics:{NAME:{get:function(){return"tracking"}},codec:{get:function(){var t,e="TrackingAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,p))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return p.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,p))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return p.init_b49c(this.start,t,this.value)}}}),p)},"dX/e":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("VQVe"),l=n("SpAV"),u=n("6ZWm"),c=n("7Pku"),p=n("w/+j"),f=n("Qlvz"),h=n("NkBu"),d=n("U010"),m=n("fdtz"),P=n("SDdr"),M=n("lmwz"),T=n("uWOl"),g=n("Ird5"),A=n("WjWV"),F=n("Iv44"),y=n("GDe9"),G=n("jfma"),R=n("ZTPx"),v=n("+ASD"),_=n("dmHI"),C=n("jfiy"),S=n("bauG"),w=n("vTQu"),b=n("yjxF"),x=n("dz2e"),N=n("Aj79"),E=n("44Iz"),D=n("JQ9Y"),k=n("g6aL"),O=n("Zifs");i.ImageFormaToPGMMapper=(r=function t(){c.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"ImageFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=m.ImageForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{canDoSimpleTransformUpdate:function(t){var e,n;return!((e=M.ImageFacade.getFrameFormaForForma(t.forma))&&(n=a.as(e.controller,u.FrameController))&&n.hasCutout)&&c.FormaToPGMMapper.prototype.canDoSimpleTransformUpdate.call(this,t)},makePGMRef:function(t,e,n,r){var o,i,s;if((i=a.as(t,m.ImageForma))&&null!=(s=i.contentID)){var c;if(c=i.bounds){var f=new S.PGMImage(i.formaID,new b.PGMNodeMetadata(i.formaID,"image"),g.PGMAnimationList.EMPTY,c,s),h=null,P=0;e==E.PGMExportSettings.DYNAMIC&&null!=i.animation&&(h=a.opt(i.animation,(function(t){return t.animationStyle.name})),P=(o=a.opt(i.animation,(function(t){return t.animationStyle.variant})))||null!=o?o:0);var T,A,F,y,R=new N.PGMReference(this.applyFilters(h,P,i.style,f,i.controller),new G.PGMCompositingParams(i.placement,i.style.opacity));if((T=M.ImageFacade.getFrameFormaForForma(t))&&(A=a.as(T.controller,u.FrameController))&&(F=A.cutout)&&(y=F.bounds)){l.CoreAssert.isTrue(A.cutoutMode==d.CutoutMode.BackgroundRemoval,"Only BackgroundRemoval type is supported","ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",86);var v=new S.PGMImage(F.formaID,new b.PGMNodeMetadata(F.formaID,"image"),g.PGMAnimationList.EMPTY,y,F.contentNode.contentID),_=new N.PGMReference(v,new G.PGMCompositingParams(F.placement,1));R=new N.PGMReference(this.applyMask(R,_))}return p.FormaToPGMUtils.applyAnimations(e,t,R)}return l.CoreAssert.fail("ImageFormaToPGMMapper: image is missing bounds or content ID","ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",114),null}return l.CoreAssert.fail("ImageFormaToPGMMapper called for something that's not an ImageForma","ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",119),null},applyFilters:function(t,e,n,r,o){var i,l,u,c=r,p=!0;if((i=a.as(o,h.ImageController))&&(l=a.as(i.forma,m.ImageForma))&&(p=!(i.floating||l.hasAlpha())),u=a.as(n,T.ImageStyle)){var d;if(d=u.adjustments){var P=f.ImageAdjustments.createDefault(),M=d.blur!=P.blur;d.sharpness!=P.sharpness&&(c=this.applySharpen(d,c,r,p)),c=this.applyColorAdjustments(d,c),c=this.applyStyleEffects(u,c,r,p),M&&(c=this.applyBlur(d.scaledBlur,c,r,p))}else c=this.applyStyleEffects(u,c,r,p);if(t==s.AnimationStyle.NAME_BLUR)c=this.applyBlur(0,c,r,p);else if(t==s.AnimationStyle.NAME_GRAYSCALE){var g=u.colors,F=a.opt(a.opt(g.library,(function(t){return t.color("themeDerivedDark")})),(function(t){return t.rgbColor}))||O.SolidColor.BLACK,y=a.opt(a.opt(g.library,(function(t){return t.color("themeDerivedLight")})),(function(t){return t.rgbColor}))||O.SolidColor.WHITE,G=this.wrapInFilter([c],"Greyscale",new v.PGMDuotoneFilterSpec(F,y,1));c=this.wrapInFilter([c,G],"AnimationBlend",new A.PGMBlendFilterSpec([0,1]))}else if(t==s.AnimationStyle.NAME_FILL){var R=O.SolidColor.BLACK;(S=a.as(o,h.ImageController))&&(w=a.as(S.forma,m.ImageForma))&&(b=a.clone(w.page.colorLibraryController.getThemeColorKeys())).length>e&&(R=w.page.colorLibraryController.getSolidColorForKey(a.as(b[e],"String"))||O.SolidColor.BLACK);var _=this.wrapInFilter([c],s.AnimationStyle.NAME_FILL,new C.PGMFillFilterSpec(R));c=this.wrapInFilter([c,_],"AnimationBlend",new A.PGMBlendFilterSpec([0,1]))}else if(t==s.AnimationStyle.NAME_COLOR){var S,w,b;R=O.SolidColor.BLACK,(S=a.as(o,h.ImageController))&&(w=a.as(S.forma,m.ImageForma))&&(b=a.clone(w.page.colorLibraryController.getThemeColorKeys())).length>e&&(R=w.page.colorLibraryController.getSolidColorForKey(a.as(b[e],"String"))||O.SolidColor.BLACK),_=this.wrapInFilter([c],s.AnimationStyle.NAME_FILL,new x.PGMOverlayFilterSpec(R)),c=this.wrapInFilter([c,_],"AnimationBlend",new A.PGMBlendFilterSpec([1,0]))}}return c},applyMask:function(t,e){return this.wrapRefsInFilter([t,e],"CutoutMask",new w.PGMMaskFilterSpec)},applySharpen:function(t,e,n,r){var o=e,i=t.scaledSharpness/4,a=o;return o=this.wrapInFilter([a],"Blur",new F.PGMBlurFilterSpec(r,i,n.entity)),o=this.wrapInFilter([a,o],"Sharpen_mixback",new A.PGMBlendFilterSpec([1.5,-.5]))},applyBlur:function(t,e,n,r){var o=e;return o=this.wrapInFilter([o],"Blur",new F.PGMBlurFilterSpec(r,t,n.entity))},applyColorAdjustments:function(t,e){var n=e,r=f.ImageAdjustments.createDefault(),o=t.copyWithNewValues(r.blur,r.sharpness);return o.equals(r)||(n=this.wrapInFilter([n],"ColorAdjustment",new y.PGMColorAdjustmentFilterSpec(o.shadows,o.highlights,o.saturation,o.brightness,o.exposure,o.contrast,o.warmth,o.tint,o.fade,o.vibrance))),n},applyStyleEffects:function(t,e,n,r){var o,i=e;if(o=a.as(t.filter,P.CompositeFilter)){var s,u,c,p=O.SolidColor.BLACK,f=O.SolidColor.BLACK;switch((s=o.colors)&&((u=s.fieldPrimary)&&(p=u),(c=s.fieldSecondary)&&(f=c)),t.name){case"DuoTone":case"Greyscale":case"Darken":i=this.wrapInFilter([i],o.name,new v.PGMDuotoneFilterSpec(p,f,1));break;case"Overlay":i=this.wrapInFilter([i],o.name+"_contrast",R.PGMColorTransformFilterSpec.createContrastTransform(o.contrast)),i=this.wrapInFilter([i],o.name+"_overlay",new x.PGMOverlayFilterSpec(p));break;case"Blend":var h=new O.SolidColor(p.red,p.green,p.blue,1);i=this.wrapInFilter([i],o.name,new C.PGMFillFilterSpec(h));break;case"Multiply":i=this.wrapInFilter([i],o.name,R.PGMColorTransformFilterSpec.createColorizeTransform(p));break;case"Screen":i=this.wrapInFilter([i],o.name,new D.PGMScreenFilterSpec(p));break;case"Blur":var d=o.blurRadius;i=this.wrapInFilter([i],"Blur",new F.PGMBlurFilterSpec(r,d,n.entity));break;default:l.CoreAssert.fail("Unknown image filter type: "+o.name,"ImageFormaToPGMMapper.applyStyleEffects","ImageFormaToPGMMapper.swift",415)}if(1!=o.mix){var m=new k.PGMSimpleGroup(i.entity+"-mix-filtered",new b.PGMNodeMetadata(i.meta.id,"filter-"+o.name+"-mix-opacity"),g.PGMAnimationList.EMPTY,[new N.PGMReference(i)]),M=new N.PGMReference(m,G.PGMCompositingParams.DEFAULT.withOpacity(o.mix),g.PGMAnimationList.EMPTY);i=new k.PGMSimpleGroup(i.entity+"-mix",new b.PGMNodeMetadata(i.meta.id,"filter-"+o.name+"-mix"),g.PGMAnimationList.EMPTY,[new N.PGMReference(e),M])}}return i},wrapInFilter:function(t,e,n){var r=t.map((function(t){return new N.PGMReference(t)}),this);return this.wrapRefsInFilter(a.clone(r),e,n)},wrapRefsInFilter:function(t,e,n){var r=t[0].child.entity+"-"+e,o=new b.PGMNodeMetadata(t[0].child.meta.id,"filter-"+e),i=g.PGMAnimationList.EMPTY;return new _.PGMFilter(r,o,i,a.clone(t),n)}}}),r)},hndY:function(t,e,n){var r,o,i,a=e,s=n("oAGj"),l=n("SpAV"),u=n("OdB2"),c=n("Bcdx"),p=n("w/+j"),f=n("P83h"),h=n("iCxV"),d=n("K17h"),m=n("sq5L"),P=n("bauG"),M=n("PlOi"),T=n("b94u"),g=n("ZA1K"),A=n("bAjp"),F=n("mj5y"),y=n("s3Tu"),G=n("t+nd"),R=n("fnrT"),v=n("uYSz"),_=n("KDc2"),C=n("T6jX"),S=n("sIWg"),w=n("qSCS");a.FormaDamage=(r=function(){this.descendants=!1,this.transform=!1},s.defineClass({name:"FormaDamage",ctor:r,props:{onlyTransform:function(){return!this.descendants&&this.transform},onlyDescendants:function(){return this.descendants&&!this.transform}}}),r),a.FormaPGMCacheEntry=(o=function(t,e){this.damage=null,this.forma=t,this.ref=e},s.defineClass({name:"FormaPGMCacheEntry",ctor:o,props:{addDamage:function(){return null==this.damage&&(this.damage=new a.FormaDamage),this.damage},damageDescendants:function(){this.addDamage().descendants=!0},damageTransform:function(){this.addDamage().transform=!0}}}),o),a.FormaPGMCache=(i=function(t,e){this.graph_=null,this.formaCache_={},this.mappers=c.FormaToPGMMapperFactory.instance,this.cachedGraphRef_=null,this.cachedGraph_=m.PGMGraph.EMPTY,this.validationCount_=0,this.fastValidationCount_=0,this.page=t,this.settings=e,this.log=l.CoreAssert.newLog("FormaPGMCache-"+(e.asDynamic?"dynamic":"static")),t.subscribe(this,u.FormaEndUpdateMessage.TYPE)},s.defineClass({name:"FormaPGMCache",ctor:i,statics:{_implements:function(t){return"TheoMessageSubscriber"==t||"FormaToPGMFactory"==t}},props:{onMessage:function(t){var e;if(e=s.as(t,u.FormaEndUpdateMessage)){var n,r,o=e.event.forma,i=!0;if((n=o)&&(r=this.formaCache_[n.formaID])&&(e.event instanceof f.FormaTransformChangedEvent?r.damageTransform():e.event instanceof f.FormaNullChangedEvent?i=!1:e.event instanceof f.FormaAlignmentChangedEvent?i=!1:e.event instanceof f.FormaAnimationChangedEvent?this.settings.asDynamic?(this.log.info("animation changed invalidation on "+n.kind),s.removeKey(this.formaCache_,n.formaID)):i=!1:s.removeKey(this.formaCache_,n.formaID),o=n.parent),i){for(;null!=o;)s.opt(this.formaCache_[o.formaID],(function(t){return t.damageDescendants()})),o=o.parent;this.graph_=null}}},getPGMReferenceForForma:function(t){var e,n=this.formaCache_[t.formaID];if(e=this.mappers.getMapper(t)){var r,o;if(r=n){var i;if(!(i=r.damage))return r.ref;if(i.onlyTransform()&&e.canDoSimpleTransformUpdate(r))return r.ref=r.ref.withPlacement(t.placement),r.damage=null,r.ref}return this.validationCount_+=1,(o=e.makePGMRef(t,this.settings,this,n))?(this.formaCache_[t.formaID]=new a.FormaPGMCacheEntry(t,o),o):(l.CoreAssert.fail("Mapper at path "+C.TheoDocumentUtils.debugFormaPath(t)+" did not produce a reference.","FormaPGMCache.getPGMReferenceForForma","FormaPGMCache.swift",181),null)}return l.CoreAssert.fail("No pgm mapper available at path "+C.TheoDocumentUtils.debugFormaPath(t)+" ","FormaPGMCache.getPGMReferenceForForma","FormaPGMCache.swift",186),null},childReferences:function(t){for(var e=[],n=s.iter(t.childrenAsArray);!n.done;n.next()){var r,o=n.value;(r=this.getPGMReferenceForForma(o))&&e.push(r)}return e},referenceForForma:function(t){return this.getPGMReferenceForForma(t)},getGraph:function(){return this.validate(),this.graph_},resourcesForGraph:function(t){var e=this,n={},r={};return t.visit((function(t){var o,i,a,u,c,f,d=null;if(o=s.as(t,P.PGMImage))d=o.contentID;else if(i=s.as(t,y.PGMVideo))d=i.contentID;else if(a=s.as(t,g.PGMSVG))d=a.contentID;else if(u=s.as(t,A.PGMText)){var m,T=u.style.font.postScriptName;if(null==r[T]&&(r[T]=u.style.font,(C=s.opt(e.page,(function(t){return t.document})))&&(m=s.opt(h.Host.fontProvider,(function(t){return t.descriptorForPostScriptName(T,C)}))))){var F;switch(m.source){case 2:F=new R.StorageSpecApplicationResource("embedded-font:"+T);break;case 1:case 3:F=new R.StorageSpecApplicationResource("spark-font:"+T);break;case 4:var C,S;(C=s.opt(e.page,(function(t){return t.document})))&&(S=s.opt(h.Host.brandkitManager,(function(t){return t.brandkitForDocument(C)})))?F=new v.StorageSpecExternalCC(v.StorageSpecExternalCC.BRANDKIT_SYNC_GROUP,S.id,null,T,null,null,null):(l.CoreAssert.fail("can't obtain a brandkit for a custom font","FormaPGMCache.resourcesForGraph","FormaPGMCache.swift",258),F=new _.StorageSpecInvalid);break;case 5:case 6:F=new G.StorageSpecAdobeFont(T);break;default:l.CoreAssert.fail("unexpected font source","FormaPGMCache.resourcesForGraph","FormaPGMCache.swift",264),F=new _.StorageSpecInvalid}n["font:"+T]=new M.PGMResourceProvider("font/otf",F)}}null!=(c=d)&&(C=s.opt(e.page,(function(t){return t.document})))&&null==n[c]&&((f=s.as(C.content.nodeByID(c),w.URLBasedContentNode))?n[c]=p.FormaToPGMUtils.createResourceProviderForContentNode(f):l.CoreAssert.fail("couldn't look up content by ID; no resource available","FormaPGMCache.resourcesForGraph","FormaPGMCache.swift",281))})),new T.PGMResourceProviderList(s.clone(n))},getGraphForForma:function(t){var e;return(e=this.getPGMReferenceForForma(t))?e===this.cachedGraphRef_?this.cachedGraph_:(this.cachedGraph_=new m.PGMGraph(e.child,t.bounds,this.settings.asDynamic?F.PGMUtils.calculateDuration(e):0,this.resourcesForGraph(e.child)),this.cachedGraphRef_=e,this.cachedGraph_):(l.CoreAssert.fail("getGraphForForma: couldn't get a reference from which to build a graph.","FormaPGMCache.getGraphForForma","FormaPGMCache.swift",307),null)},validate:function(){var t,e;if(null==this.graph_&&(t=this.page))if(this.validationCount_=0,this.fastValidationCount_=0,e=this.getPGMReferenceForForma(t.root)){var n=0;if(this.settings.asDynamic){var r,o=!1;(r=t.animationController.animationStyle)&&(o=!r.isNoStyle()),n=o?d.MotionUtils.determineTotalDuration(t).seconds:F.PGMUtils.calculateDuration(e)}this.log.info("validate: "+this.validationCount_+" slow, "+this.fastValidationCount_+" fast");var i=t.pageSize;this.graph_=new m.PGMGraph(e.child,S.TheoRect.fromSize(i),n,this.resourcesForGraph(e.child))}else l.CoreAssert.fail("failed to generate a reference for root","FormaPGMCache.validate","FormaPGMCache.swift",343)}}}),i)},mGL3:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),l=n("QgZx"),u=n("ZhwN");o.OrderedFontSet=(r=function(){this.descriptors_=[],this.familyKeys_=[],this.familyFaces_=[],this.clock_=0,this.fontSetID=u.GUIDUtils.makeGUID(),s.CoreObject.call(this)},i.defineClass({name:"OrderedFontSet",ctor:r,superName:"CoreObject",statics:{fromList:function(t){for(var e=new r,n=i.iter(t);!n.done;n.next()){var o=n.value;e.append(o)}return e}},props:{descriptors:{get:function(){return this.descriptors_.concat()}},count:{get:function(){return this.descriptors_.length}},familyCount:{get:function(){return this.familyKeys_.length}},familyAt:function(t){return i.as(this.familyKeys_[t],"String")},facesInFamily:function(t){var e=i.indexOf(this.familyKeys_,t);return null==e?(a.CoreAssert.warning("Invalid family ("+t+") in facesInFamily()"),null):i.sort(this.familyFaces_[e],(function(t,e){var n=t.source==l.FontSource.TYPEKIT_PREMIUM||t.source==l.FontSource.TYPEKIT_FREE,r=e.source==l.FontSource.TYPEKIT_PREMIUM||e.source==l.FontSource.TYPEKIT_FREE;return!(!n||r)||!(!n&&r)&&(0==t.usWeightClass||0==e.usWeightClass?t.weight==e.weight?(t.italic||0!=t.italicAngle)==(e.italic||0!=e.italicAngle)?t.label.length<e.label.length:!t.italic&&0==t.italicAngle:t.weight<e.weight:t.usWeightClass==e.usWeightClass?t.usWidthClass==e.usWidthClass?t.weight==e.weight?(t.italic||0!=t.italicAngle)==(e.italic||0!=e.italicAngle)?t.label.length<e.label.length:!t.italic&&0==t.italicAngle:t.weight<e.weight:t.usWidthClass<e.usWidthClass:t.usWeightClass<e.usWeightClass)}))},defaultFaceInFamily:function(t){var e=i.clone(this.facesInFamily(t)||[]);function n(t){for(var n=i.iter(e);!n.done;n.next()){var r=n.value;if(r.displayFaceName.includes(t))return r}return null}a.CoreAssert.isTrue(0==!e.length,"facesInFamily is empty for "+t,"OrderedFontSet.defaultFaceInFamily","OrderedFontSet.swift",111);for(var r=i.iter(["Regular","Normal","Plain","Book","Display"]);!r.done;r.next())if(o=n(r.value))return o;for(var o,s,l=1e5,u=1e5,c=i.iter(e);!c.done;c.next()){var p=c.value,f=p.usWeightClass;f=0==f?p.weight:f,!p.italic&&Math.abs(f-400)<l?(l=Math.abs(f-400),o=p):p.italic&&Math.abs(f-400)<u&&(u=Math.abs(f-400),s=p)}return null!=o?o:null!=s?s:i.first(e)},fontAt:function(t){return t<0||t>=this.descriptors_.length?(a.CoreAssert.fail("Invalid index ("+t+") in fontAt()","OrderedFontSet.fontAt","OrderedFontSet.swift",165),null):this.descriptors_[t]},forEach:function(t){this.descriptors_.forEach(t)},indexOf:function(t){return i.indexOfEq(this.descriptors_,t,l._equality_FontDescriptor_FontDescriptor)},getIndexOfPostScriptName:function(t){for(var e=0,n=i.iter(this.descriptors_);!n.done;n.next()){if(n.value.postScriptName==t)return e;e+=1}return null},filter:function(t){return this.descriptors_.filter(t,this)},find:function(t){return this.descriptors_.find(t,this)},append:function(t){if(!this.contains(t)){this.clock_+=1,this.descriptors_.push(t);var e=t.displayFamilyName,n=i.indexOf(this.familyKeys_,e);null==n&&(this.familyKeys_.push(e),this.familyFaces_.push([])),n=i.indexOf(this.familyKeys_,e),this.familyFaces_[n].push(t)}},contains:function(t){return i.containsEq(this.descriptors_,t,l._equality_FontDescriptor_FontDescriptor)},remove:function(t){this.clock_+=1,i.remove(this.descriptors_,t);var e=t.displayFamilyName,n=i.indexOf(this.familyKeys_,e);if(null!=n){var r=this.familyFaces_[n];i.remove(r,t),0==r.length&&(i.remove(this.familyKeys_,e),this.familyFaces_.splice(n,1))}},clone:function(){var t=new r;return this.descriptors_.forEach((function(e){return t.append(e)})),t},sort:function(){var t=i.sort(this.descriptors_,(function(t,e){return t.postScriptName>e.postScriptName}));this.descriptors_=[];for(var e=i.iter(t);!e.done;e.next()){var n=e.value;this.descriptors_.push(n)}},revisionNumber:{get:function(){return this.clock_}}}}),r)},"pR+7":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("7Pku"),u=n("w/+j"),c=n("Ird5"),p=n("jLWG"),f=n("jfma"),h=n("yjxF"),d=n("Aj79"),m=n("Ucb9"),P=n("K0Rh"),M=n("Zifs"),T=n("hgLm");i.RootFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"RootFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=P.RootForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n,r){var o,i,l;if((o=a.as(t,P.RootForma))&&(i=n.childReferences(o))&&(l=o.bounds)){var g=o.style.colors.fieldPrimary||M.SolidColor.WHITE,A=new T.TheoRectanglePath(l),F=new d.PGMReference(new m.PGMShape(o.formaID+"-background",new h.PGMNodeMetadata(o.formaID,"background"),c.PGMAnimationList.EMPTY,l,[A],g)),y=u.FormaToPGMUtils.applyAnimations(e,t,F),G=a.clone([y].concat(a.clone(i)));return u.FormaToPGMUtils.applyAnimations(e,t,new d.PGMReference(new p.PGMClip(o.formaID,new h.PGMNodeMetadata(o.formaID,"clip"),c.PGMAnimationList.EMPTY,a.clone(G),[A]),new f.PGMCompositingParams(o.placement,o.style.opacity)))}return s.CoreAssert.fail("root forma child reference generation failed","RootFormaToPGMMapper.makePGMRef","RootFormaToPGMMapper.swift",78),null}}}),r)},s3ad:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("7Pku"),u=n("w/+j"),c=n("iCxV"),p=n("Ird5"),f=n("jfma"),h=n("bauG"),d=n("jSYS"),m=n("wH/i"),P=n("yjxF"),M=n("Aj79"),T=n("sJQG"),g=n("s3Tu"),A=n("zjod");i.VideoFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"VideoFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=A.VideoForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n,r){var o,i,l;if((i=a.as(t,A.VideoForma))&&(l=i.bounds)){var F,y,G,R,v=!(!(o=a.opt(c.Host.videoUtils,(function(t){return t.hostSupportsPGMVideos()})))&&null==o)&&o;return e.asDynamic&&v?null!=(F=i.videoContentID)?(y=(G=a.opt(i.videoContentNode,(function(t){return t.duration})))?new p.PGMAnimationList([new m.PGMMediaPlayAnimation(new d.PGMLinearFunction(new T.PGMRange(0,G.seconds),T.PGMRange.UNIT))]):p.PGMAnimationList.EMPTY,u.FormaToPGMUtils.applyAnimations(e,t,new M.PGMReference(new g.PGMVideo(i.formaID,new P.PGMNodeMetadata(i.formaID,"video"),y,l,F),new f.PGMCompositingParams(i.placement,i.style.opacity)))):(s.CoreAssert.fail("videoForma has a nil videoContentID","VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",70),null):null!=(R=i.contentID)?u.FormaToPGMUtils.applyAnimations(e,t,new M.PGMReference(new h.PGMImage(i.formaID,new P.PGMNodeMetadata(i.formaID,"poster"),p.PGMAnimationList.EMPTY,l,R),new f.PGMCompositingParams(i.placement,i.style.opacity))):(s.CoreAssert.fail("videoForma has a nil contentID","VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",94),null)}return s.CoreAssert.fail("not a video forma, or no bounds","VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",99),null}}}),r)},uUew:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO");o.TextRange=(r=function(t,e){this.start=t,this.end=e,a.CoreAssert.isTrue(e>=t&&t>=0,"TextRange is invalid. start - "+t+" end - "+e,"TextRange.init","TextRange.swift",19),s.CoreObject.call(this)},i.defineClass({name:"TextRange",ctor:r,superName:"CoreObject",props:{length:{get:function(){return this.end-this.start}},asString:{get:function(){return"["+this.start+"-"+this.end+"]"}},contains:function(t){return t.start>=this.start&&t.end<=this.end}}}),r)},"w/+j":function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("ko5Z"),l=n("WF+G"),u=n("SDdr"),c=n("c+uM"),p=n("tGKA"),f=n("Ird5"),h=n("WjWV"),d=n("Iv44"),m=n("dmHI"),P=n("9MJV"),M=n("jSYS"),T=n("WUDy"),g=n("sJQG"),A=n("PlOi"),F=n("W6ub"),y=n("Ucb9"),G=n("9K9k"),R=n("/eOI"),v=n("bAjp"),_=n("f/aw"),C=n("zW52"),S=n("bJhu"),w=n("mj5y"),b=n("KQHZ"),x=n("6ftY"),N=n("uYSz"),E=n("VXZl"),D=n("KDc2"),k=n("GOtr"),O=n("ll2+"),I=n("sIWg"),L=n("xm77");o.FormaToPGMUtils=(r=function(){},i.defineClass({name:"FormaToPGMUtils",ctor:r,statics:{cpEnv:"prod",createTimeFunc:function(t,e){var n,r=new g.PGMRange(t.time.seconds,e.time.seconds);switch(e.timingFunction){case"Linear":n=new M.PGMLinearFunction(r,g.PGMRange.UNIT);break;case"Step":case"Step0":n=new M.PGMLinearFunction(r,new g.PGMRange(0,0));break;case"Step1":n=new M.PGMLinearFunction(r,new g.PGMRange(1,1));break;case"EaseIn":case"EaseOut":case"EaseInOut":var o=t.timingFunction==L.TimingFunctionType.EaseIn?R.PGMEasingType.EaseIn:t.timingFunction==L.TimingFunctionType.EaseOut?R.PGMEasingType.EaseOut:R.PGMEasingType.EaseInAndOut;n=new R.PGMSineEasingFunction(o,r,g.PGMRange.UNIT);break;default:a.CoreAssert.warning("Timing-func not yet converyed to PGM: "+t.timingFunction),n=new M.PGMLinearFunction(r,g.PGMRange.UNIT)}return n},determineOpacity:function(t){var e;return(e=i.as(t.style,c.LockupStyle))?e.textOpacity:i.opt(t.style,(function(t){return t.opacity}))},createTransformAnimation:function(t,e,n,o){var i,a=n.placement,s=o.placement;return a.isIdentity&&s.isIdentity||(i=new C.PGMTransformAnimation(r.createTimeFunc(n,o),new C.PGMTransformedBounds(e.concat(a),w.PGMUtils.calcBounds(t,p.Matrix2D.Identity)||I.TheoRect.Zero),new C.PGMTransformedBounds(e.concat(s),w.PGMUtils.calcBounds(t,p.Matrix2D.Identity)||I.TheoRect.Zero))),i},createOpacityAnimation:function(t,e){var n,o=r.determineOpacity(t);if(null==o)return n;var i=r.determineOpacity(e);return null==i?n:n=new T.PGMOpacityAnimation(r.createTimeFunc(t,e),o,i)},createTextAnimation:function(t,e,n){var o,a=i.as(t,v.PGMText);if(null==a)return o;var s=i.opt(e.style,(function(t){return t.colors.fieldPrimary}));if(null==s)return o;var l=i.opt(n.style,(function(t){return t.colors.fieldPrimary}));if(null==l)return o;null==a.style.fillColor&&(s=null,l=null);var u=i.opt(e.style,(function(t){return t.colors.fieldSecondary})),c=i.opt(n.style,(function(t){return t.colors.fieldSecondary}));null==u&&(u=a.style.strokeColor),null==c&&(c=a.style.strokeColor);var p=new S.PGMTextStyle(a.style.font,s,u,a.style.strokeWidth,a.style.tracking),f=new S.PGMTextStyle(a.style.font,l,c,a.style.strokeWidth,a.style.tracking);return o=new _.PGMTextAnimation(r.createTimeFunc(e,n),e.bounds||a.bounds,p,n.bounds||a.bounds,f,F.PGMRenderRuns.init_378c(e.renderRuns),F.PGMRenderRuns.init_378c(n.renderRuns))},createShapeAnimation:function(t,e,n){var o,a=i.as(t,y.PGMShape);if(null==a)return o;var s=i.opt(e.style,(function(t){return t.colors.fieldPrimary}));if(null==s)return o;var l=i.opt(n.style,(function(t){return t.colors.fieldPrimary}));return null==l?o:o=new G.PGMShapeAnimation(r.createTimeFunc(e,n),s,e.bounds||a.bounds,l,n.bounds||a.bounds)},createFilterAnimation:function(t,e,n){var o,a,s,l,c,p;if(a=i.as(t,m.PGMFilter))if((s=i.as(a.spec,d.PGMBlurFilterSpec))&&(l=i.as(i.opt(e.style,(function(t){return t.filter})),u.CompositeFilter))&&(c=i.as(i.opt(n.style,(function(t){return t.filter})),u.CompositeFilter))){var f=new d.PGMBlurFilterSpec(!0,l.blurRadius,s.originalImageEntity),M=new d.PGMBlurFilterSpec(!0,c.blurRadius,s.originalImageEntity);o=new P.PGMFilterAnimation(r.createTimeFunc(e,n),f,M)}else if(p=i.as(a.spec,h.PGMBlendFilterSpec)){var T=p.weights[0],g=p.weights[1],A=new h.PGMBlendFilterSpec([T,g]),F=new h.PGMBlendFilterSpec([g,T]);o=new P.PGMFilterAnimation(r.createTimeFunc(e,n),A,F)}return o},createContentAnimation:function(t,e,n){var o;return t instanceof v.PGMText?o=r.createTextAnimation(t,e,n):t instanceof y.PGMShape?o=r.createShapeAnimation(t,e,n):t instanceof m.PGMFilter&&(o=r.createFilterAnimation(t,e,n)),o},convertAnimation:function(t,e,n,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0);var s=[];if(!(n.keyFrames.length>1))return s;for(var l=n.keyFrames.length-2,u=i.iter(i.range(0,l,!0));!u.done;u.next()){var c,p,f,h=u.value,d=n.keyFrames[h],m=n.keyFrames[h+1];if(m.time!=d.time)o&&((c=r.createTransformAnimation(t,e,d,m))&&s.push(c),(p=r.createOpacityAnimation(d,m))&&s.push(p)),a&&(f=r.createContentAnimation(t,d,m))&&s.push(f)}return s},createAnimations:function(t,e){var n,o=[];if(n=e.animation){var a=i.clone(r.convertAnimation(t,e.placement,n));i.append(o,a)}return f.PGMAnimationList.fromArray(o)},applyAnimations:function(t,e,n){if(!t.asDynamic)return n;var o=r.createAnimations(n.child,e),i=n.animations.merge(o);return n.withAnimations(i)},createResourceProviderForContentNode:function(t){var e,n,o,u,c=t.type;if(null!=(u=t.url))if(u.startsWith("component:"))(d=u.substr("component:".length).split("/")).length>2&&"logo"==d[2]&&d.splice(2,1),c=d.length>=3?i.replaceAll(d[2],"+","/"):c,d.length>=2?o=new k.StorageSpecLocalComposite(d[1],c):(a.CoreAssert.fail("unexpected component encoding","FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",353),o=new D.StorageSpecInvalid);else if(u.startsWith("cp:")){var p=u.substr("cp:".length),f=(d=p.split("/"))[0];if(d.splice(0,1),"original"==d[0]&&d.splice(0,1),d.length>=1){var h=d.join("/");o=new x.StorageSpecCommunityPlatform(f,new l.CorePath(h),null,r.cpEnv)}else a.CoreAssert.fail("unexpected component encoding","FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",371),o=new D.StorageSpecInvalid}else if(u.startsWith("ac:")){var d;(d=u.substr("ac:".length).split("/")).length>=3&&"logo"==d[2]&&d.splice(2,1);var m=d.length>=3&&null!=["image+","video+","audio+","font+","application+"].find((function(t){return d[2].startsWith(t)}),this),P=d.length>=3&&!m?d[2]:null,M=null==P?2:3;d.length>M&&(c=i.replaceAll(d[M],"+","/")),o=new N.StorageSpecExternalCC(N.StorageSpecExternalCC.BRANDKIT_SYNC_GROUP,d[0],d[1],null,c,null,P)}else if(u.startsWith("file:")){var T=u.substr("file:".length);o=new O.StorageSpecLocalFile(new l.CorePath(T))}else if(u.startsWith("data:")){var g;if(null!=(g=i.indexOf(u,"base64,"))){var F=u.substr(g+"base64,".length),y=u.substr("data:".length,g-"data:".length);y.endsWith(";")&&(c=y.substr(0,y.length-1)),o=new b.StorageSpecContentLiteral(new s.CoreContentBase64(F,(e=c)||null!=e?e:""))}else a.CoreAssert.fail("data URL is not base64; unsupported","FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",421),o=new D.StorageSpecInvalid}else u.startsWith("http:")||u.startsWith("https:")?o=new E.StorageSpecHTTP(u):(a.CoreAssert.fail("URL does not have a known pattern","FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",427),o=new D.StorageSpecInvalid);else a.CoreAssert.fail("no URL to inspect","FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",431),o=new D.StorageSpecInvalid;return new A.PGMResourceProvider((n=c)||null!=n?n:"",o)}}}),r)},x4Gy:function(t,e,n){var r,o,i,a,s,l,u,c,p,f,h,d,m,P,M=e,T=n("oAGj"),g=n("SpAV"),A=n("gXiO"),F=n("dJuF"),y=n("ZhwN"),G=n("iCxV"),R=n("c+uM"),v=n("Quhx"),_=n("Zifs"),C=n("a9ow"),S=n("90dd"),w=n("uUew");M.TextRun=(r=function(t,e){this.attr=t,this.length=e},T.defineClass({name:"TextRun",ctor:r}),r),M.AttributeInfo=(o=function(t,e){this.attr=t,this.range=e,A.CoreObject.call(this)},T.defineClass({name:"AttributeInfo",ctor:o,superName:"CoreObject"}),o),M.SolidColorRun=(i=function(t,e){this.attr=t,this.range=e},T.defineClass({name:"SolidColorRun",ctor:i}),i),M.SolidColorRuns=(a=function(){this.runArrays_=[],A.CoreObject.call(this)},T.defineClass({name:"SolidColorRuns",ctor:a,superName:"CoreObject",props:{apply:function(t,e){0!=e.length&&this.runArrays_.push(new M.SolidColorRun(t,e))},clear:function(){this.runArrays_.splice(0)},applyNewAlpha:function(t,e){for(var n=T.iter(t.runArrays);!n.done;n.next()){var r=n.value,o=(1-e)*r.attr.alpha+1*e,i=new _.SolidColor(r.attr.red,r.attr.green,r.attr.blue,o);this.apply(i,r.range)}},runArrays:{get:function(){return this.runArrays_}},clone:function(){for(var t=new a,e=T.iter(this.runArrays_);!e.done;e.next()){var n=e.value;t.apply(n.attr,n.range)}return t},asString:{get:function(){for(var t="",e=T.iter(this.runArrays_);!e.done;e.next()){var n=e.value;t=t+" "+n.range.asString+" "+n.attr.asString}return t}}}}),a),M.RenderRuns=(s=function(){this.fillColors=new M.SolidColorRuns,this.strokeColors=new M.SolidColorRuns,A.CoreObject.call(this)},T.defineClass({name:"RenderRuns",ctor:s,superName:"CoreObject",props:{applyColors:function(t,e,n){0!=n.length&&(this.fillColors.apply(t,n),this.strokeColors.apply(e,n))},copyColorAlpha:function(t,e){for(var n=t.fontColor.value,r=t.fontStrokeColor.value,o=T.iter(e.fillColors.runArrays);!o.done;o.next()){var i=o.value,a=new _.SolidColor(n.red,n.green,n.blue,i.attr.alpha);this.fillColors.apply(a,i.range)}for(var s=T.iter(e.strokeColors.runArrays);!s.done;s.next()){var l=s.value,u=new _.SolidColor(r.red,r.green,r.blue,l.attr.alpha);this.strokeColors.apply(u,l.range)}},setAlphaFromAnimation:function(t,e,n){this.clear(),this.fillColors.applyNewAlpha(t.fillColors,n),this.strokeColors.applyNewAlpha(t.strokeColors,n)},clear:function(){this.fillColors.clear(),this.strokeColors.clear()},clone:function(){var t=new s;return t.fillColors=this.fillColors.clone(),t.strokeColors=this.strokeColors.clone(),t},asString:{get:function(){return"Fill:"+this.fillColors.asString+" Stroke:"+this.strokeColors.asString}}}}),s),M.ContentTextModel=(l=function(){},T.defineClass({name:"ContentTextModel",ctor:l,superName:"TextModel",statics:{SCHEMA_CLASS_NAME:{get:function(){return"ContentTextModel"}},codec:{get:function(){return F.DBPropertyCodec.registerCodec(l.SCHEMA_CLASS_NAME,F.DBPropertyCodec.directObjectCodec(l.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(t,e,n,r){return l.init_866e(n,t)}}},_implements:function(t){return"IDBObject"==t||"TheoMessagePublisher"==t}},props:{init_d41d:function(){var t={text:[C.UTF16Attribute.init_2063("")]};T.super_init(this,M.TextModel,M.TextModel.prototype.init_dd5d,{},T.clone(t))},init_5aae:function(t){var e={},n={};if(null!=t)e=T.clone(t.state.allProperties);else{var r=[C.UTF16Attribute.init_2063("")];n[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(r)}T.super_init(this,M.TextModel,M.TextModel.prototype.init_dd5d,T.clone(e),T.clone(n))},init_866e:function(t,e){T.super_init(this,M.TextModel,M.TextModel.prototype.init_866e,t,e);for(var n=T.iter(M.TextModel.allAttributeNames_);!n.done;n.next()){var r=n.value;r!=M.TextModel.PROPERTY_UTF16_NAME&&T.opt(this.getProperty(r),(function(t){return t.shouldWrite=!1}))}},className:{get:function(){return l.SCHEMA_CLASS_NAME}},apply:function(t,e){g.CoreAssert.fail("Content Node only wants text!","ContentTextModel.apply","TextModel.swift",192)},attributeAtIndex:function(t,e){return g.CoreAssert.fail("Content Node only has text! Call text instead","ContentTextModel.attributeAtIndex","TextModel.swift",195),null},clone:function(){return l.init_5aae(this)},match:function(t){this.clear(),this.set(M.TextModel.PROPERTY_UTF16_NAME,t.get(M.TextModel.PROPERTY_UTF16_NAME)),this.publish(new M.TextModelDidInsertMessage(this,0,this.text))},runArraysByAttrName:{get:function(){var t={},e=T.clone(T.as(this.get(M.TextModel.PROPERTY_UTF16_NAME),["Array",C.TextAttribute]));if(null!=e)t[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(e);else{var n=[M.TextModel.defaultText];t[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(n)}return t}},getRunArray:function(t){return t==M.TextModel.PROPERTY_UTF16_NAME?M.TextModel.prototype.getRunArray.call(this,t):null}}}),l),M.TextModel=(u=function(){},c={},T.defineClass({name:"TextModel",ctor:u,superName:"PostPublishingObject",statics:{PROPERTY_UTF16_NAME:"text",PROPERTY_FONT_NAME:"font-name",PROPERTY_FONT_SIZE:"font-size",PROPERTY_FONT_COLOR:"font-color",PROPERTY_FONT_STROKE_COLOR:"font-strokecolor",PROPERTY_FONT_STROKE_WIDTH:"font-strokewidth",PROPERTY_TEXT_LOOK:"text-look",PROPERTY_TRACKING:"tracking",SCHEMA_CLASS_NAME:{get:function(){return"TextModel"}},codec:{get:function(){return F.DBPropertyCodec.registerCodec(u.SCHEMA_CLASS_NAME,F.DBPropertyCodec.directObjectCodec(u.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(t,e,n,r){return u.init_866e(n,t)}}},defaultText:{get:function(){return null==u.defaultText_&&(u.defaultText_=C.UTF16Attribute.init_2063("")),u.defaultText_}},defaultFontColor:{get:function(){return null==u.defaultFontColor_&&(u.defaultFontColor_=C.FontColorAttribute.init_2063(G.Host.textModelUtils.defaultColor())),u.defaultFontColor_}},defaultFontName:{get:function(){return null==u.defaultFontName_&&(u.defaultFontName_=C.FontDescriptorAttribute.init_2063(G.Host.textModelUtils.defaultFont())),u.defaultFontName_}},defaultFontSize:{get:function(){return null==u.defaultFontSize_&&(u.defaultFontSize_=C.FontSizeAttribute.init_2063(G.Host.textModelUtils.defaultFontSize())),u.defaultFontSize_}},defaultFontStrokeColor:{get:function(){return null==u.defaultFontStrokeColor_&&(u.defaultFontStrokeColor_=C.FontStrokeColorAttribute.init_2063(G.Host.textModelUtils.defaultColor())),u.defaultFontStrokeColor_}},defaultFontStrokeWidth:{get:function(){return null==u.defaultFontStrokeWidth_&&(u.defaultFontStrokeWidth_=C.FontStrokeWidthAttribute.init_2063(0)),u.defaultFontStrokeWidth_}},defaultTextLook:{get:function(){return null==u.defaultTextLook_&&(u.defaultTextLook_=C.TextLookAttribute.init_2063(R.LockupTextLook.Fill)),u.defaultTextLook_}},defaultTracking:{get:function(){return null==u.defaultTracking_&&(u.defaultTracking_=C.TrackingAttribute.init_2063(0)),u.defaultTracking_}},allAttributeNames_:{get:function(){return void 0===c.allAttributeNames_&&(c.allAttributeNames_=[u.PROPERTY_UTF16_NAME,u.PROPERTY_FONT_COLOR,u.PROPERTY_FONT_NAME,u.PROPERTY_FONT_SIZE,u.PROPERTY_FONT_STROKE_COLOR,u.PROPERTY_FONT_STROKE_WIDTH,u.PROPERTY_TEXT_LOOK,u.PROPERTY_TRACKING]),c.allAttributeNames_}},defaultAttribute:function(t){switch(t){case"text":return u.defaultText;case"font-color":return u.defaultFontColor;case"font-name":return u.defaultFontName;case"font-size":return u.defaultFontSize;case"font-strokecolor":return u.defaultFontStrokeColor;case"font-strokewidth":return u.defaultFontStrokeWidth;case"text-look":return u.defaultTextLook;case"tracking":return u.defaultTracking;default:return null}return null},_implements:function(t){return"IDBObject"==t||"TheoMessagePublisher"==t}},props:{init_d41d:function(){for(var t={},e=T.iter(u.allAttributeNames_);!e.done;e.next()){var n=e.value;t[n]=[u.defaultAttribute(n)]}T.super_init(this,v.PostPublishingObject,v.PostPublishingObject.prototype.init_dd5d,{},T.clone(t))},init_dd5d:function(t,e){for(var n=T.clone(e),r=[],o=T.iter(u.allAttributeNames_);!o.done;o.next()){var i=o.value;null==t[i]&&null==e[i]&&(n[i]=[u.defaultAttribute(i)],r.push(i))}T.super_init(this,v.PostPublishingObject,v.PostPublishingObject.prototype.init_dd5d,T.clone(t),T.clone(n));for(var a=T.iter(r);!a.done;a.next()){var s=a.value;T.opt(this.getProperty(s),(function(t){return t.shouldWrite=!1}))}},init_36cd:function(t){T.super_init(this,v.PostPublishingObject,v.PostPublishingObject.prototype.init_dd5d,T.clone(T.opt(t,(function(t){return t.state.allProperties}))||{}),{})},init_866e:function(t,e){T.super_init(this,v.PostPublishingObject,v.PostPublishingObject.prototype.init_866e,t,e)},className:{get:function(){return u.SCHEMA_CLASS_NAME}},textAttr:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_UTF16_NAME),["Array",C.TextAttribute]),(function(t){return t[0]})),C.UTF16Attribute))||null!=t?t:u.defaultText},set:function(t){this.set(u.PROPERTY_UTF16_NAME,[t])}},fontColor:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_FONT_COLOR),["Array",C.TextAttribute]),(function(t){return t[0]})),C.FontColorAttribute))||null!=t?t:u.defaultFontColor},set:function(t){this.set(u.PROPERTY_FONT_COLOR,[t])}},fontName:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_FONT_NAME),["Array",C.TextAttribute]),(function(t){return t[0]})),C.FontDescriptorAttribute))||null!=t?t:u.defaultFontName},set:function(t){this.set(u.PROPERTY_FONT_NAME,[t])}},fontSize:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_FONT_SIZE),["Array",C.TextAttribute]),(function(t){return t[0]})),C.FontSizeAttribute))||null!=t?t:u.defaultFontSize},set:function(t){if(0==t.value){g.CoreAssert.fail("attempted to set font size to 0.0","TextModel","TextModel.swift",330);var e=C.FontSizeAttribute.init_b49c(t.start,t.length,1);this.set(u.PROPERTY_FONT_SIZE,[e])}else this.set(u.PROPERTY_FONT_SIZE,[t])}},fontStrokeColor:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_FONT_STROKE_COLOR),["Array",C.TextAttribute]),(function(t){return t[0]})),C.FontStrokeColorAttribute))||null!=t?t:u.defaultFontStrokeColor},set:function(t){this.set(u.PROPERTY_FONT_STROKE_COLOR,[t])}},fontStrokeWidth:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_FONT_STROKE_WIDTH),["Array",C.TextAttribute]),(function(t){return t[0]})),C.FontStrokeWidthAttribute))||null!=t?t:u.defaultFontStrokeWidth},set:function(t){this.set(u.PROPERTY_FONT_STROKE_WIDTH,[t])}},textLook:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_TEXT_LOOK),["Array",C.TextAttribute]),(function(t){return t[0]})),C.TextLookAttribute))||null!=t?t:u.defaultTextLook},set:function(t){this.set(u.PROPERTY_TEXT_LOOK,[t])}},tracking:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(u.PROPERTY_TRACKING),["Array",C.TextAttribute]),(function(t){return t[0]})),C.TrackingAttribute))||null!=t?t:u.defaultTracking},set:function(t){this.set(u.PROPERTY_TRACKING,[t])}},description:{get:function(){for(var t,e="TextModel: ",n=T.iter(u.allAttributeNames_);!n.done;n.next()){var r=n.value;e+=r+": "+((t=T.opt(T.first(T.as(this.get(r),["Array",C.TextAttribute])),(function(t){return t.description})))||null!=t?t:"<unset>")+" | "}return e}},runArraysByAttrName:{get:function(){for(var t={},e=T.iter(u.allAttributeNames_);!e.done;e.next()){var n=e.value,r=T.clone(T.as(this.get(n),["Array",C.TextAttribute]));if(null!=r)t[n]=T.clone(r);else{var o=u.defaultAttribute(n);null!=o&&(t[n]=[o])}}return t}},getRunArray:function(t){var e;if(e=T.as(this.get(t),["Array",C.TextAttribute]))return e;var n=u.defaultAttribute(t);return null!=n?[n]:null},stamp:{get:function(){if(null==this.stamp_){this.stamp_="";for(var t=T.iter(this.runArraysByAttrName);!t.done;t.next()){var e=t.value;this.stamp_=this.stamp_+"|"+e[0].stamp}}return this.stamp_}},text:{get:function(){return this.textAttr.value},set:function(t){t!=this.textAttr.value&&(this.textAttr=C.UTF16Attribute.init_2063(t),this.stamp_=null,this.updateAttributeRunLengths(t.length))}},isEqual:function(t){var e;if(e=T.as(t,u)){var n=T.clone(this.runArraysByAttrName),r=T.clone(e.runArraysByAttrName);if(T.count(r)!=T.count(n))return!1;for(var o=T.iter(n);!o.done;o.next()){var i,a=o.key,s=o.value;if(!(i=r[a]))return!1;if(i[0]!=s[0])return!1}return!0}return!1},hash:{get:function(){return T.hashValue(this.text)}},apply:function(t,e){this.ensureValidStringRange(this.text,e),g.CoreAssert.isTrue(0==e.start&&e.length==this.text.length,void 0,"TextModel.apply","TextModel.swift",527);var n,r,o,i,a,s,l,u=!1;t instanceof C.UTF16Attribute?g.CoreAssert.fail("Attempted to set text through apply!","TextModel.apply","TextModel.swift",533):(n=T.as(t,C.FontColorAttribute))?n!=this.fontColor&&(this.publish(new M.TextModelWillApplyMessage(this,e,n)),this.fontColor=n.cloneToNewLength(e.length),u=!0):(r=T.as(t,C.FontDescriptorAttribute))?r!=this.fontName&&(this.publish(new M.TextModelWillApplyMessage(this,e,r)),this.fontName=r.cloneToNewLength(e.length),u=!0):(o=T.as(t,C.FontSizeAttribute))?o!=this.fontSize&&(this.publish(new M.TextModelWillApplyMessage(this,e,o)),this.fontSize=o.cloneToNewLength(e.length),u=!0):(i=T.as(t,C.FontStrokeColorAttribute))?i!=this.fontStrokeColor&&(this.publish(new M.TextModelWillApplyMessage(this,e,i)),this.fontStrokeColor=i.cloneToNewLength(e.length),u=!0):(a=T.as(t,C.FontStrokeWidthAttribute))?a!=this.fontStrokeWidth&&(this.publish(new M.TextModelWillApplyMessage(this,e,a)),this.fontStrokeWidth=a.cloneToNewLength(e.length),u=!0):(s=T.as(t,C.TextLookAttribute))?s!=this.textLook&&(this.publish(new M.TextModelWillApplyMessage(this,e,s)),this.textLook=s.cloneToNewLength(e.length),u=!0):(l=T.as(t,C.TrackingAttribute))?l!=this.tracking&&(this.publish(new M.TextModelWillApplyMessage(this,e,l)),this.tracking=l.cloneToNewLength(e.length),u=!0):g.CoreAssert.fail("Unknown attribute "+t,"TextModel.apply","TextModel.swift",578),u&&(this.stamp_=null,this.publish(new M.TextModelDidApplyMessage(this,e,t)))},appliedAttributeNames:{get:function(){var t=[];return T.each(this.runArraysByAttrName,(function(e,n){return t.push(e)})),t}},appliedAttributeNamesAtIndex:function(t){return this.appliedAttributeNames},attributeAtIndex:function(t,e){var n,r;return(n=this.getRunArray(t))?(g.CoreAssert.isTrue(1==n.length,void 0,"TextModel.attributeAtIndex","TextModel.swift",611),new M.AttributeInfo(n[0],new w.TextRange(0,n[0].length))):(r=u.defaultAttribute(t))?new M.AttributeInfo(r,this.rangeAll):null},attributesInRange:function(t,e){var n,r,o=[];return(n=this.getRunArray(t))?(g.CoreAssert.isTrue(1==n.length,void 0,"TextModel.attributesInRange","TextModel.swift",628),o.push(new M.AttributeInfo(n[0],this.constrain(new w.TextRange(0,n[0].length),e.start,e.end)))):(r=u.defaultAttribute(t))&&o.push(new M.AttributeInfo(r,new w.TextRange(e.start,e.end))),o},rangeAll:{get:function(){return new w.TextRange(0,this.text.length)}},match:function(t){this.clear();for(var e=T.iter(u.allAttributeNames_);!e.done;e.next()){var n=e.value;this.set(n,t.get(n))}this.publish(new M.TextModelDidInsertMessage(this,0,this.text))},clone:function(){return this.fork(y.GUIDUtils.makeGUID())},insert:function(t,e){var n=this.text;this.ensureValidStringIndex(n,e);var r=n.substr(0,e)+t+n.substr(e);this.publish(new M.TextModelWillInsertMessage(this,e,t)),this.text=r,this.publish(new M.TextModelDidInsertMessage(this,e,t))},remove:function(t){var e=this.text;this.ensureValidStringRange(e,t);var n=e.substr(0,t.start)+e.substr(t.end),r=e.substr(t.start,t.length);this.publish(new M.TextModelWillRemoveMessage(this,t.start,r)),this.text=n,this.publish(new M.TextModelDidRemoveMessage(this,t.start,r))},clear:function(){this.remove(this.rangeAll)},forEachAttributeValueInRange:function(t,e,n){var r;(r=this.getRunArray(t))&&(g.CoreAssert.isTrue(1==r.length,void 0,"TextModel.forEachAttributeValueInRange","TextModel.swift",708),n(e,r[0]))},shift:function(t,e){return new w.TextRange(t.start+e,t.end+e)},constrain:function(t,e,n){return new w.TextRange(Math.max(t.start,e),Math.min(t.end,n))},updateAttributeRunLengths:function(t){var e=this;g.CoreAssert.isTrue(t>=0,void 0,"TextModel.updateAttributeRunLengths","TextModel.swift",727),T.each(this.runArraysByAttrName,(function(n,r){g.CoreAssert.isTrue(1==r.length,void 0,"TextModel.updateAttributeRunLengths","TextModel.swift",730),e.set(n,[r[0].cloneToNewLength(t)])}))},ensureValidStringIndex:function(t,e){g.CoreAssert.isTrue(e>=0&&e<=t.length,void 0,"TextModel.ensureValidStringIndex","TextModel.swift",736)},ensureValidStringRange:function(t,e){this.ensureValidStringIndex(t,e.start),this.ensureValidStringIndex(t,e.end>0?e.end-1:e.end)}}}),u),M.TextModelWillApplyMessage=(p=function t(e,n,r){this.model=e,this.range=n,this.attribute=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillApplyMessage",ctor:p,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillApplyMessage"}}}}),p),M.TextModelDidApplyMessage=(f=function t(e,n,r){this.model=e,this.range=n,this.attribute=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidApplyMessage",ctor:f,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidApplyMessage"}}}}),f),M.TextModelWillInsertMessage=(h=function t(e,n,r){this.model=e,this.index=n,this.text=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillInsertMessage",ctor:h,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillInsertMessage"}}}}),h),M.TextModelDidInsertMessage=(d=function t(e,n,r){this.model=e,this.index=n,this.text=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidInsertMessage",ctor:d,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidInsertMessage"}}}}),d),M.TextModelWillRemoveMessage=(m=function t(e,n,r){this.model=e,this.index=n,this.text=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillRemoveMessage",ctor:m,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillRemoveMessage"}}}}),m),M.TextModelDidRemoveMessage=(P=function t(e,n,r){this.model=e,this.index=n,this.text=r,S.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidRemoveMessage",ctor:P,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidRemoveMessage"}}}}),P)},"zW/s":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),l=n("7Pku"),u=n("w/+j"),c=n("Ird5"),p=n("jfma"),f=n("yjxF"),h=n("Aj79"),d=n("ZA1K"),m=n("WWR6");i.VectorFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"VectorFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=m.VectorForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n,r){var o;return(o=a.as(t,m.VectorForma))?u.FormaToPGMUtils.applyAnimations(e,t,new h.PGMReference(new d.PGMSVG(o.formaID,new f.PGMNodeMetadata(o.formaID,"VectorForma"),c.PGMAnimationList.EMPTY,o.bounds,o.contentNode.url),new p.PGMCompositingParams(o.placement,o.style.opacity))):(s.CoreAssert.fail("VectorFormaToPGMMapper called for something that's not a VectorForma","VectorFormaToPGMMapper.makePGMRef","VectorFormaToPGMMapper.swift",49),null)}}}),r)}}]);
//# sourceMappingURL=vendors_npm_spark_6bc71c67-b49518b1.js.map
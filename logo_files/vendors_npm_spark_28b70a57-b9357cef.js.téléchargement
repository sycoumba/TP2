(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[11],{"+IES":function(e,t,n){var o=t,r=n("oAGj");o.MotionLogic=r.defineProtocol("MotionLogic",{apply:"(Forma, Array<KeyFrame>, Dictionary<String>) -> Void"})},"3/rh":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("4/a+");r.MotionEntryFadeIn=(o=function(){this.srcId="MotionSrcFadeIn",this.logic=new i.MotionLogicDur,this.args={st:.1,dur:.9}},a.defineClass({name:"MotionEntryFadeIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},"3OP7":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("gXiO"),c=n("aS4X"),l=n("uMFj"),u=n("iCxV"),d=n("muPB"),f=n("C4JV");r.DocumentPersistenceFactory=(o=function(){s.CoreObject.call(this)},a.defineClass({name:"DocumentPersistenceFactory",ctor:o,superName:"CoreObject",statics:{THEO_PROPERTY_NAMESPACE:"theo#",namespacedPropertyName:function(e){return e.includes("#")?e:o.THEO_PROPERTY_NAMESPACE+e},usesJsonDocumentEncoding:function(e){return!!e.getComponentWithAbsolutePath(f.JSON_CONTENT_PATH_DCX2D)},encoderFor:function(e){return u.Host.persistUtils.useJsonDocumentEncoding()?(i.CoreAssert.info("Using JSONDocumentEncoder"),new f.JSONDocumentEncoder(e)):(i.CoreAssert.info("Using DCXDocumentEncoder"),new l.DCXDocumentEncoder(e))},decoderFor:function(e){return o.usesJsonDocumentEncoding(e)?(i.CoreAssert.info("Using JSONDocumentDecoder"),new d.JSONDocumentDecoder(e)):(i.CoreAssert.info("Using DCXDocumentDecoder"),new c.DCXDocumentDecoder(e))}}}),o)},"3hwA":function(e,t,n){var o=t,r=n("oAGj");o.IImportDataObject=r.defineProtocol("IImportDataObject",{id:"String",type:"String",name:"String",path:"String",optionalStringProperty:"(String) -> String",stringProperty:"(String, String) -> String",numberProperty:"(String, Double) -> Double",intProperty:"(String, Integer) -> Integer",booleanProperty:"(String, Boolean) -> Boolean",optionalBooleanProperty:"(String) -> Boolean",property:"(String) -> AnyObject",forEachChild:"((IImportDataObject, Integer) -> Void) -> Void",forEachComponent:"((IImportDataComponent, Integer) -> Void) -> Void"}),o.IMissingFontHelper=r.defineProtocol("IMissingFontHelper",{recordMissingFont:"(String) -> Void"}),o.IImportDataComponent=r.defineProtocol("IImportDataComponent",{id:"String",name:"String",path:"String",mimeType:"String",etag:"String",url:"String"})},"4/a+":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("URxh"),c=n("RkYL");r.MotionLogicDur=(o=function(){},a.defineClass({name:"MotionLogicDur",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,l,u,d=(o=a.as(n.st,"Double"))||null!=o?o:0,f=d+((r=a.as(n.dur,"Double"))||null!=r?r:1),p=[];if(f>0&&t.length>0){p=[];var m=t[0],h=t[t.length-1];d!=m.time.seconds&&p.push(m),p.push(new s.KeyFrame(c.TheoTime.fromSeconds(d),m.timingFunction,m.placement,m.bounds,m.style)),p.push(new s.KeyFrame(c.TheoTime.fromSeconds(f),h.timingFunction,h.placement,h.bounds,h.style))}(l=e.animation)?l.keyFrames=p.concat():i.CoreAssert.warning("Missing animation key-frame array"),(u=a.opt(e.animation,(function(e){return e.endTime})))&&u.seconds<f&&(e.animation.endTime=c.TheoTime.fromSeconds(f))}}}),o)},"6Tzw":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("0wFF"),s=n("gXiO"),c=n("FNB+"),l=n("9Lk3"),u=n("iCxV"),d=n("sIWg");r.MultiSelectUIMode=a.defineEnum("MultiSelectUIMode",{ModeWithAutoDismissAfterOneTap:0,ModeRequiresExplicitDismiss:1}),r.SelectionFacade=(o=function(){s.CoreObject.call(this)},a.defineClass({name:"SelectionFacade",ctor:o,superName:"CoreObject",statics:{isMultiSelect:function(e){var t;return!(!((t=e)&&t.selectedCount>1)||t.inCharStyleMode)},isGroupSelect:function(e){var t,n;return!(!(n=e)||1!=n.selectedCount||!(t=a.opt(a.opt(n.formaAt(0),(function(e){return e.controller})),(function(e){return e.userGroupMember})))&&null==t||!t)},isCharStyleSelection:function(e){var t,n,o;return!!((t=e)&&t.selectedCount>1&&(n=t.formaAt(0))&&(o=t.formaAt(1)))&&(n.isTypeLockup()&&o.isText())},getMultiSelectUIMode:function(){return r.MultiSelectUIMode.ModeRequiresExplicitDismiss},enableAdditionalMultiSelectGestures:function(){return!1},selectFormae:function(e){var t;if(e.length>0&&(t=a.opt(a.opt(a.opt(a.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){var n=t.selectedCount;t.selectFormae(a.clone(e));for(var o=a.iter(t.asFormaArray());!o.done;o.next()){var r,s=o.value;(r=a.opt(s.controller,(function(e){return e.userGroupRoot})))&&(t.deselectForma(s),t.selectForma(r))}var c=t.selectedCount;if(c>1){for(var l=a.iter(t.asFormaArray());!l.done;l.next())s=l.value,a.opt(s.controller,(function(e){return 0==e.canMultiSelect}))&&t.deselectForma(s);a.opt(u.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataSelectionMultiple,{contextualData1:"oldSelectedCount:"+n,contextualData2:"newSelectedCount:"+c})}))}}},replaceSelectionWithFormae:function(e){var t;if(e.length>0&&(t=a.opt(a.opt(a.opt(a.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){var n=e.filter((function(e){return a.opt(e.controller,(function(e){return 1==e.canMultiSelect}))}),this);t.replaceSelectionWithFormae(a.clone(n))}},deselectFormae:function(e){var t;if(e.length>0&&(t=a.opt(a.opt(a.opt(a.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){t.deselectFormae(a.clone(e));for(var n=a.iter(e);!n.done;n.next()){var o,r=n.value;(o=a.opt(r.controller,(function(e){return e.userGroupRoot})))&&t.deselectForma(o)}}},canSelectParent:function(e){var t;return!!((t=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&t.selectedCount>=1&&t.formaAt(0))},selectParent:function(e){var t;if(t=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n,r,i;if(1==t.selectedCount&&(n=t.formaAt(0))&&(r=n.parent)&&(i=r.controller)&&i.kind!=l.GridController.KIND&&i.selectable)return void t.replaceSelection(i.forma);o.deselectAllOnPage(e)}},canSelectChild:function(e){var t,n,o;if((n=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&o.controller)for(var r=a.iter(o.visitAsArray(c.FormaTraversal.JustChildren));!r.done;r.next()){var i=r.value;if(((t=a.opt(i.controller,(function(e){return e.selectable})))||null!=t)&&t&&a.opt(i.controller,(function(e){return e.kind!=l.GridController.KIND})))return!0}return!1},selectChild:function(e){var t,n,o;if((n=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&o.controller)for(var r=a.iter(o.visitAsArray(c.FormaTraversal.JustChildren));!r.done;r.next()){var i=r.value;((t=a.opt(i.controller,(function(e){return e.selectable})))||null!=t)&&t&&n.replaceSelection(i)}},canSelectSibling:function(e){var t,n,o,r,i=this;return!!((t=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==t.selectedCount&&(n=t.formaAt(0))&&(o=n.controller)&&(r=a.opt(o.getSiblingFormae(),(function(e){return e.filter((function(e){return a.opt(e.controller,(function(e){return 1==e.selectable}))}),i)}))))&&r.length>1},selectSibling:function(e,t){void 0===t&&(t=!0);var n,o,r,i,s,l=this;if((n=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&(r=o.controller)&&(i=a.opt(r.getSiblingFormae(),(function(e){return e.filter((function(e){return a.opt(e.controller,(function(e){return 1==e.selectable}))}),l)})))&&null!=(s=a.indexOfEq(i,o,c._equality_Forma_Forma))){var u=(s+(t?1:-1))%i.length;u<0&&(u=i.length-1);var d=i[u];n.replaceSelection(d)}},marqueeSelectFormae:function(e,t){var n;if(e.length>0&&(n=a.opt(a.opt(a.opt(a.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){for(var r=!0,i=a.iter(e);!i.done;i.next()){var s=i.value;if(!n.isSelected(s)&&!n.isGroupSelected(s)){r=!1;break}}r&&(t||u.Host.platform.isMobile)?o.deselectFormae(a.clone(e)):t||u.Host.platform.isMobile?o.selectFormae(a.clone(e)):o.replaceSelectionWithFormae(a.clone(e))}},deselectAllOnPage:function(e){var t;if(t=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n=t.selectedCount;t.clearSelection(!0),a.opt(u.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataSelectionDeselectAll,{contextualData1:"oldSelectedCount:"+n})}))}},selectAllOnPage:function(e){var t;if(t=a.opt(a.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n=t.selectedCount;t.clearSelectionNoUpdate();var r=a.clone(e.selectableFormaeIntersectingRect(d.TheoRect.Huge));o.selectFormae(a.clone(r));var s=t.selectedCount;a.opt(u.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataSelectionSelectAll,{contextualData1:"oldSelectedCount:"+n,contextualData2:"newSelectedCount:"+s})}))}}}}),o)},"7EVG":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("gXiO");r.WatermarkFacade=(o=function(){i.CoreObject.call(this)},a.defineClass({name:"WatermarkFacade",ctor:o,superName:"CoreObject",statics:{setWatermark:function(e,t){t.watermarkEnabled=e},getWatermark:function(e){return e.watermarkEnabled}}}),o)},"95jH":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("ascj"),c=n("URxh"),l=n("K17h"),u=n("RkYL");r.MotionLogicStacked=(o=function(){},a.defineClass({name:"MotionLogicStacked",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{updateColorTable:function(e,t){var n=t.style.colors.clone();a.opt(e.style,(function(e){return e.colors.setColor(s.ColorRole.FieldPrimary,n.fieldPrimary)})),a.opt(e.style,(function(e){return e.colors.setColor(s.ColorRole.FieldSecondary,n.fieldSecondary)}))},updateFormaAnim:function(e,t,n,o,r){var i,s=[],l=u.TheoTime.fromSeconds(t),d=u.TheoTime.fromSeconds(n);if(r.length>0){var f=r[0];this.updateColorTable(f,e),l.value>0&&s.push(new c.KeyFrame(u.TheoTime.Zero,f.timingFunction,f.placement,f.bounds,a.opt(f.style,(function(e){return e.clone()})))),s.push(new c.KeyFrame(l,f.timingFunction,f.placement,f.bounds,a.opt(f.style,(function(e){return e.clone()}))))}r.length>1&&(f=r[1],this.updateColorTable(f,e),s.push(new c.KeyFrame(d,f.timingFunction,f.placement,f.bounds,a.opt(f.style,(function(e){return e.clone()}))))),(i=e.animation)&&(i.startTime=u.TheoTime.Zero,i.endTime=d,i.keyFrames=s.concat())},apply:function(e,t,n){var o,r,s=(o=a.as(n.lineDur,"Double"))||null!=o?o:1,c=(r=a.as(n.endPadDur,"Double"))||null!=r?r:0,d=a.clone(l.MotionUtils.findTextLines(e)),f=d.length,p=a.toDouble(f)*s+c;if(t.length<8)i.CoreAssert.warning("Less than required key-frames for Motion-Logic-Stacked");else{var m=t;if(f>0){var h=0,g=a.clone(d.shift()),C=null;d.length>0&&(C=a.clone(d.pop()));for(var v=m.slice(0,2),y=a.iter(g);!y.done;y.next()){var T=y.value;this.updateFormaAnim(T,h,h+s,p,v)}h+=s;for(var S=a.iter(a.toSequence(d));!S.done;S.next()){var P=S.value,A=P.offset,E=P.element;if(0==A%2)for(var N=m.slice(2,4),_=a.iter(E);!_.done;_.next())T=_.value,this.updateFormaAnim(T,h,h+s,p,N);else for(var D=m.slice(4,6),M=a.iter(E);!M.done;M.next())T=M.value,this.updateFormaAnim(T,h,h+s,p,D);h+=s}if(null!=C)for(var F=m.slice(6,8),O=a.iter(C);!O.done;O.next())T=O.value,this.updateFormaAnim(T,h,h+s,p,F);h+=s}}a.opt(e.animation,(function(e){return e.endTime=u.TheoTime.fromSeconds(p)}))}}}),o)},"9eTw":function(e,t,n){var o=t,r=n("oAGj");o.DocumentUnitsEnum=r.defineEnum("DocumentUnitsEnum",{PIXEL:"pixel",POINT:"point",INCH:"inch",MM:"mm",CM:"cm"}),o.IExportDataObject=r.defineProtocol("IExportDataObject",{setPath:"(String) -> Void",setName:"(String) -> Void",setType:"(String) -> Void",setProperty:"(String, AnyObject) -> Void",setOptionalStringProperty:"(String, String) -> Void",setStringProperty:"(String, String) -> Void",setNumberProperty:"(String, Double) -> Void",setIntProperty:"(String, Integer) -> Void",setBooleanProperty:"(String, Boolean) -> Void",setOptionalBooleanProperty:"(String, Boolean) -> Void",appendChild:"(String) -> IExportDataObject",appendComponent:"(String, String, String) -> Void",setCompositeID:"(String) -> Void",setManifestProperty:"(String, AnyObject) -> Void",setDocumentSize:"(TheoSize, String) -> Void"})},BAdM:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("ytEx"),s=n("SpAV"),c=n("gXiO");r.JSONComponentDecoder=(o=function(){},a.defineClass({name:"JSONComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{init_466d:function(e){this.json_=a.clone(e),c.CoreObject.call(this)},init_f390:function(e,t,n,o,r,c){var l={};null!=e&&(l[i.PROPERTY_KEY_ID]=e),null!=t&&(l[i.PROPERTY_KEY_NAME]=t),null!=n&&(l[i.PROPERTY_KEY_PATH]=n),null!=o&&(l[i.PROPERTY_KEY_MIMETYPE]=o),null!=r&&(l[i.PROPERTY_KEY_ETAG]=r),null!=c&&(l[i.PROPERTY_KEY_URL]=c),this.init_466d(a.clone(l)),s.CoreAssert.info("init "+a.toString(e)+" "+a.toString(t)+" "+a.toString(o)+" "+a.toString(n)+" "+a.toString(c))},id:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_ID],"String")}},name:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_NAME],"String")}},path:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_PATH],"String")}},mimeType:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_MIMETYPE],"String")}},etag:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_ETAG],"String")}},url:{get:function(){return a.as(this.json_[i.PROPERTY_KEY_URL],"String")}}}}),o)},BQMb:function(e,t,n){var o=t,r=n("oAGj");o.MotionEntry=r.defineProtocol("MotionEntry",{srcId:"String",logic:"MotionLogic",args:"Dictionary<String>"})},C4JV:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("ytEx"),s=n("SpAV"),c=n("3OP7"),l=n("iCxV"),u=n("CqFS"),d=n("9YN4");r.PROPERTY_VALUE_CANVASES="canvases",r.PROPERTY_VALUE_CANVAS="canvas",r.PROPERTY_VALUE_CANVAS1_NAME="page-1",r.PROPERTY_VALUE_ARTBOARD="artboard",r.PROPERTY_VALUE_ARTBOARD1_NAME="artboard-1",a.gvar(r,"CANVASES_PATH",(function(){return"/"+r.PROPERTY_VALUE_CANVASES})),a.gvar(r,"CANVAS1_PATH",(function(){return r.CANVASES_PATH+"/"+r.PROPERTY_VALUE_CANVAS1_NAME})),a.gvar(r,"ARTBOARD1_PATH",(function(){return r.CANVAS1_PATH+"/"+r.PROPERTY_VALUE_ARTBOARD1_NAME})),a.gvar(r,"JSON_CONTENT_PATH_DCX2D",(function(){return r.ARTBOARD1_PATH+"/"+d.TheoDocument.COMPONENT_PATH_CONTENT})),r.PROPERTY_KEY_UNITS="units",r.PROPERTY_KEY_WIDTH="width",r.PROPERTY_KEY_HEIGHT="height",r.PROPERTY_KEY_X="x",r.PROPERTY_KEY_Y="y",r.JSONDocumentEncoder=(o=function(e){this.previouslyUsedJSONDocumentEncoding=c.DocumentPersistenceFactory.usesJsonDocumentEncoding(e),u.JSONNodeEncoder.call(this,e,{},null);var t=[d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,d.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION,r.PROPERTY_VALUE_CANVASES];this.prepareCompositeForSave(a.clone(t))},a.defineClass({name:"JSONDocumentEncoder",ctor:o,superName:"JSONNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{getOrCreateArtboardNode:function(){var e=this.branch_.getNodeWithAbsolutePath(r.ARTBOARD1_PATH);if(null==e){var t=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVASES,null);a.opt(t,(function(e){return e.setValue(i.PROPERTY_KEY_RELATIONSHIP,a.as(r.PROPERTY_VALUE_CANVASES,"AnyObject"))}));var n=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVAS1_NAME,t);a.opt(n,(function(e){return e.setValue(i.PROPERTY_KEY_RELATIONSHIP,a.as(r.PROPERTY_VALUE_CANVAS,"AnyObject"))})),e=this.branch_.appendNode(null,r.PROPERTY_VALUE_ARTBOARD1_NAME,n),a.opt(e,(function(e){return e.setValue(i.PROPERTY_KEY_RELATIONSHIP,a.as(r.PROPERTY_VALUE_ARTBOARD,"AnyObject"))})),a.opt(e,(function(e){return e.setValue(i.PROPERTY_KEY_NAME,a.as(r.PROPERTY_VALUE_ARTBOARD1_NAME,"AnyObject"))}))}return e},getPropertyOnNode:function(e){return e==i.PROPERTY_KEY_ID?a.as(this.branch_.getValue(i.PROPERTY_KEY_ID),"AnyObject"):u.JSONNodeEncoder.prototype.getPropertyOnNode.call(this,e)},setPropertyOnNode:function(e,t){if(u.JSONNodeEncoder.prototype.setPropertyOnNode.call(this,e,t),!this.previouslyUsedJSONDocumentEncoding)switch(e){case"name":case"type":case"children":break;default:this.branch_.root.removeValue(e)}},setDocumentSize:function(e,t){var n,o=this.getOrCreateArtboardNode();o.setValue(r.PROPERTY_KEY_X,a.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_Y,a.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_WIDTH,a.as(e.width,"AnyObject")),o.setValue(r.PROPERTY_KEY_HEIGHT,a.as(e.height,"AnyObject")),(n=this.branch_.getNodeWithAbsolutePath(r.CANVAS1_PATH))?n.setValue(r.PROPERTY_KEY_UNITS,a.as(t,"AnyObject")):s.CoreAssert.fail("expected to find a canvas node","JSONDocumentEncoder.setDocumentSize","JSONDocumentEncoder.swift",107)},finish:function(){var e=this;u.JSONNodeEncoder.prototype.finish.call(this),this.discardStashedComponents();var t=a.opt(l.Host.persistUtils,(function(t){return t.writeJsonContentToTempFile(a.as(e.jsonNode_,"AnyObject"))})),n=this.branch_.getComponentWithAbsolutePath(r.JSON_CONTENT_PATH_DCX2D);if(null!=n)this.branch_.updateComponent(n,t,!1);else{var o=this.getOrCreateArtboardNode();this.branch_.addComponent(d.TheoDocument.COMPONENT_NAME_DOM,null,d.TheoDocument.COMPONENT_MIME_TYPE_DOCUMENT_JSON,d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_PATH_CONTENT,o,t,!1,null)}}}}),o)},C654:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("FNB+"),s=n("3/rh"),c=n("Pn67"),l=n("nQ+V"),u=n("pmb0"),d=n("nUE5"),f=n("K17h"),p=n("RkYL"),m=n("zjod"),h=n("mxdD");r.ANIMATE_ICON=!1,r.MotionLogicStackedRoot=(o=function(){},a.defineClass({name:"MotionLogicStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,g,C,v,y=(o=a.as(n.lineDur,"Double"))||null!=o?o:1,T=(g=a.as(n.delay,"Double"))||null!=g?g:0,S=(C=a.as(n.fadeInDur,"Double"))||null!=C?C:1,P=(v=a.as(n.endPadDur,"Double"))||null!=v?v:0,A=0,E=[],N=[],_=[],D=new c.MotionEntryNone,M=new s.MotionEntryFadeIn,F=new l.MotionEntryStacked;e.visitAll(i.FormaTraversal.PreOrder,(function(e){var t;if(u.MotionFacade.applyEntryToForma(e,D),e.isTypeLockup())E.push(e);else if(t=a.as(e,m.VideoForma)){var n;t.isSticker()?(N.push(t),(n=f.MotionUtils.getGifDur(t)-S)>P&&(P=n)):(n=h.VideoFacade.getDurationInSecondsForVideo(t))>A&&(A=n)}else r.ANIMATE_ICON&&e.hasIntent(i.Forma.INTENT_ICON)&&_.push(e)}));var O=0,x=E.length>1||_.length>0;if(0==N.length&&(P=2),E.length>0){for(var I=a.clone(f.MotionUtils.getTitleLockups(a.clone(E))),k=a.clone(I.shift()),b=a.clone(I.shift()),R=O,L=a.iter(k);!L.done;L.next()){var w,B=L.value,Y=d.MotionSource.getSourceAnimation(F.srcId,B);F.logic.apply(B,Y,{lineDur:y,endPadDur:x?T:0}),null!=(w=a.opt(B.animation,(function(e){return e.endTime.seconds})))&&w>R&&(R=w)}O=R;for(var V=a.iter(b);!V.done;V.next()){var j=V.value;Y=d.MotionSource.getSourceAnimation(M.srcId,j),M.logic.apply(j,Y,{st:O,dur:S})}}if(r.ANIMATE_ICON)for(var K=a.iter(_);!K.done;K.next()){var H=K.value;Y=d.MotionSource.getSourceAnimation(M.srcId,e),M.logic.apply(H,Y,{st:O,dur:S})}x&&(O+=S);var U=O+P;if(A>0&&(U=Math.ceil(U/A)*A,0==!N.length&&(U-=S)),N.length>0){U+=S;for(var G=a.iter(N);!G.done;G.next()){var X=G.value;Y=d.MotionSource.getSourceAnimation(M.srcId,X),M.logic.apply(X,Y,{st:O,dur:S}),a.opt(X.animation,(function(e){return e.endTime=p.TheoTime.fromSeconds(U)}))}}a.opt(e.animation,(function(e){return e.animationStyle.endTime=p.TheoTime.fromSeconds(U)}))}}}),o)},CqFS:function(e,t,n){var o,r,a=t,i=n("oAGj"),s=n("ytEx"),c=n("SpAV"),l=n("x0BK"),u=n("3OP7"),d=n("FNB+");a.PREFIX_COMPONENT="component:",a.PROPERTY_KEY_CHILDREN="children",a.PROPERTY_KEY_EXTERNAL_URL="external-url",a.JSONNodeEncoder=(o=function(e,t,n){this.manifestEncoder_=null,this.jsonNode_=t,this.parentEncoder_=n,s.BaseNodeEncoder.call(this,e,e.root)},r={},i.defineClass({name:"JSONNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{PROPERTY_KIND_NAMESPACED:{get:function(){return void 0===r.PROPERTY_KIND_NAMESPACED&&(r.PROPERTY_KIND_NAMESPACED=u.DocumentPersistenceFactory.namespacedPropertyName(d.Forma.PROPERTY_KIND)),r.PROPERTY_KIND_NAMESPACED}},_implements:function(e){return"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return this.jsonNode_[e]},setPropertyOnNode:function(e,t){var n,r;null!=t?(this.jsonNode_[e]=t,(n=this.manifestEncoder_)&&null!=(r=i.as(t,"String"))&&(e==s.PROPERTY_KEY_PATH?n.setPath(r):e==s.PROPERTY_KEY_TYPE?n.setType(r):e==o.PROPERTY_KIND_NAMESPACED&&n.setStringProperty(d.Forma.PROPERTY_KIND,r))):i.removeKey(this.jsonNode_,e)},createChildEncoder:function(e){var t={};t[s.PROPERTY_KEY_ID]=i.as(e,"AnyObject");var n=i.as(this.getPropertyOnNode(a.PROPERTY_KEY_CHILDREN),["Array","AnyObject"]);null==n&&(n=[]),n.push(t),this.setPropertyOnNode(a.PROPERTY_KEY_CHILDREN,n),c.CoreAssert.isTrue(this.getPropertyOnNode(a.PROPERTY_KEY_CHILDREN)===n,void 0,"JSONNodeEncoder.createChildEncoder","JSONNodeEncoder.swift",64);var r=new o(this.branch_,t,this);return c.CoreAssert.isTrue(i.as(r.jsonNode_,"AnyObject")===i.as(t,"AnyObject"),void 0,"JSONNodeEncoder.createChildEncoder","JSONNodeEncoder.swift",67),r},appendComponent:function(e,t,n){s.BaseNodeEncoder.prototype.appendComponent.call(this,e,t,n);var o=this.branch_.getValue(s.PROPERTY_KEY_ID),r=a.PREFIX_COMPONENT+o+"/"+e+"/"+i.replaceAll(n,"/","+");this.setProperty(a.PROPERTY_KEY_EXTERNAL_URL,i.as(r,"AnyObject"))},getManifestEncoder:function(){var e,t,n;return null==this.manifestEncoder_&&(null==this.parentEncoder_?this.manifestEncoder_=new l.DCXNodeEncoder(this.branch_,this.branch_.root):this.manifestEncoder_=this.parentEncoder_.getManifestEncoder().createChildEncoder(this.id),null!=(e=i.as(this.getPropertyOnNode(s.PROPERTY_KEY_PATH),"String"))&&i.opt(this.manifestEncoder_,(function(t){return t.setPath(e)})),null!=(t=i.as(this.getPropertyOnNode(s.PROPERTY_KEY_TYPE),"String"))&&i.opt(this.manifestEncoder_,(function(e){return e.setType(t)})),null!=(n=this.getPropertyOnNode(o.PROPERTY_KIND_NAMESPACED))&&i.opt(this.manifestEncoder_,(function(e){return e.setProperty(d.Forma.PROPERTY_KIND,n)}))),this.manifestEncoder_},finish:function(){s.BaseNodeEncoder.prototype.finish.call(this),this.parentEncoder_=null,this.manifestEncoder_=null}}}),o)},DP9v:function(e,t,n){var o,r,a=t,i=n("oAGj"),s=n("0wFF"),c=n("SpAV"),l=n("gXiO"),u=n("iCxV"),d=n("Kkml"),f=n("rrhp");a.MultiBrandFacade=(o=function(){l.CoreObject.call(this)},r={},i.defineClass({name:"MultiBrandFacade",ctor:o,superName:"CoreObject",statics:{_sparkACManager:{get:function(){return void 0===r._sparkACManager&&(r._sparkACManager=u.Host.brandkitManager.authoringContextManager),r._sparkACManager},set:function(e){r._sparkACManager=e}},acManager:{get:function(){var e;return(e=o._acManager)?e:o._sparkACManager}},_usingMockedACManager:!1,usingMockedACManager:{get:function(){return o._usingMockedACManager}},useMockACManager:function(e){o._acManager=e,o._usingMockedACManager=!0,o._defaultBrandkitID=null,o._activeBrandkitID=null},useDefaultACHelper:function(){o._acManager=o._sparkACManager,o._usingMockedACManager=!1,o._defaultBrandkitID=null,o._activeBrandkitID=null,o.determineDefaultBrand()},_defaultBrandkitID:null,defaultBrandkitID:{get:function(){return c.CoreAssert.isTrue(null==o._defaultBrandkitID||!i.isEmpty(o._defaultBrandkitID),void 0,"MultiBrandFacade","MultiBrandFacade.swift",57),o._defaultBrandkitID}},defaultBrand:{get:function(){var e;return(e=o.authoringContext(o.defaultBrandkitID))?e.isMinimal?null:e:null}},_activeBrandkitID:null,activeBrandkitID:{get:function(){return c.CoreAssert.isTrue(null==o._activeBrandkitID||!i.isEmpty(o._activeBrandkitID),void 0,"MultiBrandFacade","MultiBrandFacade.swift",86),o._activeBrandkitID}},setActiveBrandkitID:function(e){var t=o.activeBrandkitID;o._activeBrandkitID=null!=e&&i.isEmpty(e)?null:e,t!=o.activeBrandkitID&&(u.Host.logging.info("MultiBrandFacade.setActiveBrand: changing from "+o.brandInfo(t)+" to "+o.brandInfo(o.activeBrandkitID)),i.opt(u.Host.brandkitManager,(function(e){return e.sendActiveBrandChangedNotification(o.activeBrandkitID)})))},activeBrand:{get:function(){var e,t;return null==o.activeBrandkitID&&null!=o.defaultBrandkitID&&(o.usingMockedACManager||u.Host.logging.info("MultiBrandFacade.activeBrand: activeBrandkitID is nil, falling back to defaultBrandkit: "+((e=o.defaultBrandkitID)||null!=e?e:"none"))),o.authoringContext((t=o.activeBrandkitID)||null!=t?t:o.defaultBrandkitID)}},getBrand:function(e){return i.isEmpty(e.authoringContextID)?null:o.authoringContext(e.authoringContextID)},setActiveBrand:function(e){null==e?o.setActiveBrandkitID(null):i.isEmpty(e.authoringContextID)?o.setActiveBrandkitID(o.defaultBrandkitID):o.setActiveBrandkitID(e.authoringContextID)},authoringContext:function(e){return null==e||i.isEmpty(e)?null:o.acManager.authoringContext(e)},authoringContexts:{get:function(){return o.acManager.authoringContexts}},ownedAuthoringContexts:{get:function(){var e=[],t=i.clone(o.acManager.getOwnedAuthoringContextIDs());if(t.length>0){var n,r;null!=(n=o.defaultBrandkitID)&&(r=o.acManager.authoringContext(n))&&r.isDefault&&(e.push(r),t=t.filter((function(e){return e!=n}),this));for(var a=i.iter(t);!a.done;a.next()){var s,c=a.value;(s=o.acManager.authoringContext(c))&&e.push(s)}}return e}},ownedBrandCount:{get:function(){return o.ownedAuthoringContexts.length}},handleUndoRedoMessage:function(e){var t,n,o,r,a;if((r=i.as(e.changeAction,d.ChangeBrandingUserAction))&&null!=(a=e.changeDirection)){var s=(t=r.fromDocBrandID)||null!=t?t:"",c=(n=r.toBrandID)||null!=n?n:"";i.isEmpty(s)&&(a==f.UndoRedoChangeDirection.Undo?(u.Host.logging.info("MultiBrandManager.handleUndoRedoMessage: for Undo from "+c+" to none, resetting active brand to previous value "+((o=r.fromActiveBrandID)||null!=o?o:"none")),i.opt(u.Host.brandkitManager,(function(e){return e.activateBrand(r.fromActiveBrandID)}))):(u.Host.logging.info("MultiBrandManager.handleUndoRedoMessage: for Redo from none to "+c+", resetting active brand to new brand"),i.opt(u.Host.brandkitManager,(function(e){return e.activateBrand(c)}))))}},determineDefaultBrand:function(){var e,t,n=null,r=null,a=(e=i.opt(u.Host.brandkitManager,(function(e){return e.adobeID})))||null!=e?e:"";if(u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: "+o.authoringContexts.length+" authoringContexts"),(!i.isEmpty(a)&&u.Host.brandkitManager.isBrandkitEnabled||o.usingMockedACManager)&&o.authoringContexts.length>0){var s=i.clone(o.ownedAuthoringContexts);switch(u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: "+s.length+" ownedBrands"),s.length){case 0:n=null;break;case 1:s[0].isDefault&&(n=(r=s[0]).id,r.activated||u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: default brand "+o.brandInfo(r.id)+" is a partial brand"));break;default:for(var l=i.iter(s);!l.done;l.next()){var d=l.value;if(d.isDefault){c.CoreAssert.isTrue(d.activated,"MultiBrandFacade.determineDefaultBrand found multiple brands, one of which is not activated","MultiBrandFacade.determineDefaultBrand","MultiBrandFacade.swift",251),n=(r=d).id;break}}}}null!=r&&r.isMinimal&&u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: default brand is in minimal sync state!"),o.defaultBrandkitID!=n?(u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: changing from "+o.brandInfo(o.defaultBrandkitID)+" to "+o.brandInfo(n)),o._defaultBrandkitID=n,o.usingMockedACManager||u.Host.brandkitManager.sendDefaultBrandChangedNotification(o.defaultBrandkitID)):u.Host.logging.info("MultiBrandFacade.determineDefaultBrand: no change, still using "+((t=o.defaultBrandkitID)||null!=t?t:"none"))},brandWasDeleted:function(e){o.determineDefaultBrand(),o.activeBrandkitID==e&&(u.Host.logging.info("MultiBrandFacade.onAuthoringContextDeleted:  Active Brand was deleted!"),o.setActiveBrandkitID(o.defaultBrandkitID))},brandInfo:function(e){var t,n="none";return(t=o.authoringContext(e))&&(n=t.name+":"+t.id),n},addBrandkit:function(e){var t;return 0!=o.ownedBrandCount&&i.opt(u.Host.logging,(function(e){return e.assertFailure("addBrandkit called when user already owns at least one Brandkit")})),(t=o.acManager.createAuthoringContext(e,!0))?(u.Host.platform.isIOS?i.opt(u.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataBrandkitCreatediOS,{})})):u.Host.platform.isAndroid&&i.opt(u.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataBrandkitCreatedAndroid,{})})),t):null}}}),o)},K17h:function(e,t,n){var o,r,a=t,i=n("oAGj"),s=n("gXiO"),c=n("FNB+"),l=n("cmoc"),u=n("ZK0l"),d=n("iCxV"),f=n("c+uM"),p=n("7Ta2"),m=n("enh0"),h=n("Vm85"),g=n("8t9B"),C=n("sIWg"),v=n("RkYL"),y=n("zjod");a.TextLine=(o=function(){this.words=[],this.shadows=[],this.bounds=C.TheoRect.Zero,this.isKnockout=!1},i.defineClass({name:"TextLine",ctor:o}),o),a.MotionUtils=(r=function(){s.CoreObject.call(this)},i.defineClass({name:"MotionUtils",ctor:r,superName:"CoreObject",statics:{SAME_LINE_THRESHOLD:20,sortTextLines:function(e){var t=i.clone(e);return i.sortInPlace(t,(function(e,t){return e.bounds.minY<t.bounds.minY})),t},findTextLines2:function(e){var t=h.TextFacade.getTextLook(e),n=[];if(f.LockupStyle.isKnockoutLook(t)&&!d.Host.textModelUtils.usePGMRenderer()){var o=e.boundsInCoordSpace(e.totalPlacement),s=new a.TextLine;s.words.push(e),s.isKnockout=!0,s.bounds=o||C.TheoRect.Zero,n.push(s)}else{var l={};e.visitAll(c.FormaTraversal.PreOrder,(function(e){var t;if(t=i.as(e,m.TextForma)){for(var n=!1,o=Math.floor(t.baselineBoundsInCoordSpace(t.placement).maxY),s=i.iter(l,!0);!s.done;s.next()){var c=s.key;if(Math.abs(c-o)<r.SAME_LINE_THRESHOLD){n=!0,o=c;break}}var u=t.boundsInCoordSpace(t.totalPlacement);if(n)l[o].bounds=l[o].bounds.unionWith(u),l[o].words.push(t);else{var d=new a.TextLine;d.words.push(t),d.bounds=u||C.TheoRect.Zero,l[o]=d}}}));for(var u=i.sort(i.keys(l,"numeric")),p=i.iter(u);!p.done;p.next()){var g=p.value;n.push(l[g])}}return n},findTextLines:function(e){var t=h.TextFacade.getTextLook(e),n=[];if(f.LockupStyle.isKnockoutLook(t)&&t!=f.LockupTextLook.KnockoutOnly&&!d.Host.textModelUtils.usePGMRenderer()){var o=[];o.push(e),n.push(i.clone(o))}else{var r={};e.visitAll(c.FormaTraversal.PreOrder,(function(e){var t;(t=i.as(e,m.TextForma))&&(null==r[t.rowIndex]?r[t.rowIndex]=[i.as(e,c.Forma)]:r[t.rowIndex].push(e))}));for(var a=i.sort(i.keys(r,"numeric")),s=i.iter(a);!s.done;s.next()){var l=s.value;n.push(i.clone(r[l]))}}return n},getTitleLockups:function(e){if(0==e.length)return[];for(var t=i.clone(e),n={},o=i.iter(t);!o.done;o.next()){var r=o.value,a=(new p.RoleSuggester).getRole(r).role;n[r.formaID]=a}i.sortInPlace(t,(function(e,t){return e.controller.currentHeightScale>t.controller.currentHeightScale}));var s,c=t.shift(),l=[c],u=[];if(s=i.as(c.controller,g.TypeLockupController))for(var d=i.iter(t);!d.done;d.next()){var f;if(r=d.value,f=i.as(r.controller,g.TypeLockupController)){var m=f.getCurrentFontSize(),h=s.getCurrentFontSize();Math.abs(m-h)/Math.min(m,h)<.05?l.push(r):u.push(r)}}return[l,u]},getGifDur:function(e){var t,n,o=0;return e.isSticker()&&(n=i.as(e,y.VideoForma))&&(o=(t=i.opt(n.videoContentNode,(function(e){return e.duration.seconds})))||null!=t?t:0),o},determineLoopDur:function(e,t){var n=r.getGifDur(e);if(n>0){var o=t/n;n*=Math.ceil(o)}return n},createOpacityStyle:function(e,t){var n;if(!(e instanceof y.VideoForma||e instanceof l.FrameForma)&&(n=e.controller)){var o=i.as(n,u.GroupController);i.opt(o,(function(e){return e.beginBlockedUpdate()}));var r=e.style.clone();n.applyOpacity(t);var a,s=e.style.clone();return(a=i.as(s,f.LockupStyle))&&(a.textOpacity=t,a.backingOpacity=t),e.applyStyle(r),i.opt(o,(function(e){return e.endBlockedUpdate()})),s}var c=e.style.clone();return c.opacity=t,c},getCurrentAnimationStyle:function(e){return i.opt(i.opt(e,(function(e){return e.firstPage.root.animation})),(function(e){return e.animationStyle}))},invalidateAnimation:function(e){i.opt(e.firstPage.root.animation,(function(e){return e.invalidate()}))},isCurrentAnimationValid:function(e){var t;return!!(t=i.opt(e,(function(e){return e.firstPage.root.animation})))&&t.valid&&!t.animationStyle.modifiesFormaTree},determineTotalDuration:function(e){return i.opt(e.root.animation,(function(e){return e.animationStyle.endTime}))||v.TheoTime.Zero}}}),r)},K9Oa:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("gXiO"),s=n("ylxa"),c=n("iCxV"),l=n("3DEm"),u=n("sIWg");r.PageFacade=(o=function(){i.CoreObject.call(this)},a.defineClass({name:"PageFacade",ctor:o,superName:"CoreObject",statics:{kMinPageDimension:50,kMaxPageDimension:6e3,getMinPageDimensionForUnits:function(e,t){var n=o.getNumDecimalPlacesForUnits(e),r=o.unitsToPixelsFactor(e,t),i=o.kMinPageDimension/r;if(0!=n){var s=1/Math.pow(10,a.toDouble(n)),c=.5/Math.pow(10,a.toDouble(n));i=l.MathUtils.nearestMultiple(i+c,s)}return i},getMaxPageDimensionForUnits:function(e,t){var n=o.getNumDecimalPlacesForUnits(e),r=o.unitsToPixelsFactor(e,t),i=o.kMaxPageDimension/r;if(0!=n){var s=1/Math.pow(10,a.toDouble(n)),c=.5/Math.pow(10,a.toDouble(n));i=l.MathUtils.nearestMultiple(i-c,s)}return i},pageDimensionIsInRange:function(e,t,n){return!o.pageDimensionIsTooSmall(e,t,n)&&!o.pageDimensionIsTooLarge(e,t,n)},pageDimensionIsTooSmall:function(e,t,n){var r=o.convertStringToPixelsValue(e,t,n),a=o.getMinPageDimensionForUnits(t,n);return r<o.unitsToPixelsFactor(t,n)*a},pageDimensionIsTooLarge:function(e,t,n){var r=o.convertStringToPixelsValue(e,t,n),a=o.getMaxPageDimensionForUnits(t,n);return r>o.unitsToPixelsFactor(t,n)*a},setPageDesignSize:function(e,t){e.setPageSizeFromDesignSize(t)},getNumDecimalPlacesForUnits:function(e){var t=0;return e==s.PageExportFormat.INCHES?t=2:e==s.PageExportFormat.MILLIMETERS&&(t=1),t},unitsToPixelsFactor:function(e,t){return e==s.PageExportFormat.MILLIMETERS?s.FormaPageExportData.MM_TO_INCHES*t:e==s.PageExportFormat.INCHES?t:1},convertStringToPixelsValue:function(e,t,n){var r;return((r=a.opt(c.Host.locale,(function(t){return t.convertStringToNumber(e)})))||null!=r?r:a.toDouble(e))*o.unitsToPixelsFactor(t,n)},convertPixelsToUnitsString:function(e,t,n){var r,i=e/o.unitsToPixelsFactor(t,n),s=o.getNumDecimalPlacesForUnits(t);if(null!=c.Host.locale)return r=c.Host.locale.formatNumber(i,s);if((r=a.toString("%."+s+"f",i)).includes("."))for(;r.endsWith("0");)r=r.substr(0,r.length-1);return r.endsWith(".")&&(r=r.substr(0,r.length-1)),r},aspectRatioIsVeryTallOrWide:function(e){var t=u.TheoRect.fromSize(e);return t.aspectRatio>=5||t.aspectRatio<=.2}}}),o)},KkVW:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("4/a+");r.MotionEntryDropIn=(o=function(){this.srcId="MotionSrcDropIn",this.logic=new i.MotionLogicDur,this.args={st:0,dur:1.5}},a.defineClass({name:"MotionEntryDropIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},Pn67:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("YeWL");r.MotionEntryNone=(o=function(){this.srcId="",this.logic=new i.MotionLogicClear,this.args={st:0,dur:1}},a.defineClass({name:"MotionEntryNone",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},Puiz:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("RO7T"),s=n("SpAV"),c=n("lWlM"),l=n("iCxV"),u=n("BAdM"),d=n("CqFS");r.PREFIX_CP="cp:",r.PREFIX_AC="ac:",r.JSONNodeDecoder=(o=function(e,t){this.node_=t,i.BaseNodeDecoder.call(this,e)},a.defineClass({name:"JSONNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return a.as(this.node_[e],"AnyObject")},forEachChild:function(e){var t,n=0;if(t=a.as(this.node_[d.PROPERTY_KEY_CHILDREN],["Array","Any"]))for(var r=a.iter(t);!r.done;r.next()){var i,s=r.value;(i=a.as(s,["Dictionary","String","Any"]))&&(e(new o(this.branch_,i),n),n+=1)}},forEachComponent:function(e){var t,n=0;if(null!=(t=a.as(this.property(d.PROPERTY_KEY_EXTERNAL_URL),"String"))){var o,i,f,p=null;if(t.startsWith(r.PREFIX_CP))null!=(o=a.opt(l.Host.brandkitManager,(function(e){return e.getFilePathForEncodedURL(t)})))?null!=(i=a.opt(l.Host.persistUtils,(function(e){return e.mimeTypeForFileAtPath(o)})))&&null!=(f=a.opt(l.Host.persistUtils,(function(e){return e.fileUrlForPath(o)})))?p=u.JSONComponentDecoder.init_f390(a.opt(l.Host.resourceUtils,(function(e){return e.makeGUID()})),null,this.id,i,null,f):s.CoreAssert.warning("Could not open downloaded file at "+o+"!"):s.CoreAssert.warning("Do not have a CP file for "+t+"!");else if(t.startsWith(r.PREFIX_AC)){var m=t.substr(r.PREFIX_AC.length).split("/")[1];(h=this.branch_.getComponentWithId(m))?p=new c.DCXComponentDecoder(this.branch_,h):s.CoreAssert.warning("No component with id "+m+"!")}else if(t.startsWith(d.PREFIX_COMPONENT)){var h;m=t.substr(d.PREFIX_COMPONENT.length).split("/")[1],(h=this.branch_.getComponentWithId(m))?p=new c.DCXComponentDecoder(this.branch_,h):s.CoreAssert.warning("No component with id "+m+"!")}else s.CoreAssert.warning("Unrecognized external URL format: "+t+"!");null!=p?(e(p,n),n+=1):s.CoreAssert.warning("No component found for "+t)}}}}),o)},RO7T:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("ytEx"),s=n("SpAV"),c=n("gXiO"),l=n("3OP7");r.BaseNodeDecoder=(o=function(e){this.branch_=e,c.CoreObject.call(this)},a.defineClass({name:"BaseNodeDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{id:{get:function(){return a.as(this.getPropertyOnNode(i.PROPERTY_KEY_ID),"String")}},name:{get:function(){return a.as(this.getPropertyOnNode(i.PROPERTY_KEY_NAME),"String")}},type:{get:function(){return a.as(this.getPropertyOnNode(i.PROPERTY_KEY_TYPE),"String")}},path:{get:function(){return a.as(this.getPropertyOnNode(i.PROPERTY_KEY_PATH),"String")}},getPropertyOnNode:function(e){return s.CoreAssert.fail("must be overridden","BaseNodeDecoder.getPropertyOnNode","BaseNodeDecoder.swift",35),null},optionalStringProperty:function(e){return a.as(this.property(e),"String")},stringProperty:function(e,t){var n;return(n=a.as(this.property(e),"String"))||null!=n?n:t},numberProperty:function(e,t){var n;return(n=a.as(this.property(e),"Double"))||null!=n?n:t},intProperty:function(e,t){var n;return(n=a.as(this.property(e),"Int"))||null!=n?n:t},booleanProperty:function(e,t){var n;return(n=a.as(this.property(e),"Bool"))||null!=n?n:t},optionalBooleanProperty:function(e){return a.as(this.property(e),"Bool")},property:function(e){var t=l.DocumentPersistenceFactory.namespacedPropertyName(e);return a.as(this.getPropertyOnNode(t),"AnyObject")},forEachChild:function(e){s.CoreAssert.fail("must be overridden","BaseNodeDecoder.forEachChild","BaseNodeDecoder.swift",69)},forEachComponent:function(e){s.CoreAssert.fail("must be overridden","BaseNodeDecoder.forEachComponent","BaseNodeDecoder.swift",73)}}}),o)},SAU6:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("C654");r.MotionEntryStackedRoot=(o=function(){this.srcId="",this.logic=new i.MotionLogicStackedRoot,this.args={lineDur:.3,delay:.5,fadeInDur:.5,endPadDur:3.5}},a.defineClass({name:"MotionEntryStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},T8w7:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("gXiO"),s=n("uxH+");r.OpacityFacade=(o=function(){i.CoreObject.call(this)},a.defineClass({name:"OpacityFacade",ctor:o,superName:"CoreObject",statics:{applyOpacity:function(e,t){for(var n=a.iter(t);!n.done;n.next()){var o=n.value;a.opt(o.controller,(function(t){return t.applyOpacity(e)}))}},getOpacityForForma:function(e){var t;return(t=a.opt(e.controller,(function(e){return e.currentOpacity})))||null!=t?t:1},applyBackgroundOpacity:function(e,t){var n;(n=a.as(t.root.controller,s.RootController))&&n.setBackgroundTransparency(e)},getBackgroundOpacity:function(e){var t;return(t=a.as(e.root.controller,s.RootController))?t.getBackgroundTransparency():1}}}),o)},Vm85:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("CWW7"),c=n("gXiO"),l=n("jo4Y"),u=n("fWxZ"),d=n("ylxa"),f=n("c+uM"),p=n("EoOi"),m=n("8t9B"),h=n("3UhB"),g=n("oKI3"),C=n("uUew");r.SpacingSequence=a.defineEnum("SpacingSequence",{NextLineSpacing:0,NextShapePadding:1,NextShadowAngle:2,NextLetterTracking:3,NextLineSpacingAndPadding:4}),r.describeSpacingSequence=function(e){switch(e){case 0:return"NextLineSpacing";case 1:return"NextShapePadding";case 2:return"NextShadowAngle";case 3:return"NextLetterTracking";case 4:return"NextLineSpacingAndPadding"}},r.TextFacade=(o=function(){c.CoreObject.call(this)},a.defineClass({name:"TextFacade",ctor:o,superName:"CoreObject",statics:{setText:function(e,t){var n;if(n=a.as(t.controller,m.TypeLockupController)){var o=n.getCurrentFontSize(),r=e;r=h.TypeLockupUtils.fixUpQuotes(r,e),a.opt(n.contentNode,(function(e){return e.removeText()})),a.opt(n.contentNode,(function(e){return e.insert(r,0)})),n.snapSizeToBounds(),n.snapToClosestExistingSize(o),n.updateGroup()}},setFont:function(e,t,n){void 0===n&&(n=!1);for(var o=a.iter(t);!o.done;o.next()){var r,i=o.value;(r=a.as(i.controller,m.TypeLockupController))&&(h.TypeLockupUtils.applyFontToController(e,r),n&&r.selectCharStyleForma(),a.opt(r.lockupStyle,(function(e){return e.layout==f.LockupLayout.Auto}))&&r.snapSizeToBounds())}},getFontForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedFont:null},getSecondaryFontForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?a.opt(t.lockupStyle,(function(e){return e.font})):null},getLayoutForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.layout:f.LockupLayout.UNSET},getAlignmentForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.alignment:f.LockupAlignment.UNSET},getVerticalAlignmentForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.verticalAlignment:f.VerticalLockupAlignment.UNSET},getTextPathIDForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.pathID:g.TextPathID.UNSET},setLayoutAndAlignment:function(e,t,n,o,r,i,s){void 0===o&&(o=!1),void 0===r&&(r=g.TextPathID.UNSET),void 0===i&&(i=null),void 0===s&&(s=f.VerticalLockupAlignment.UNSET);for(var c=a.iter(n);!c.done;c.next()){var l,u=c.value;if(l=a.as(u.controller,m.TypeLockupController)){var d=l.styleController.targetedLockupStyle.clone();l.beginBlockedUpdate(),e==f.LockupLayout.Auto&&t==f.LockupAlignment.UNSET&&(l.styleController.targetedLockupStyle.layoutVariation=p.TypographyVariation.Unset),e!=f.LockupLayout.SKIP&&(l.styleController.targetedLockupStyle.layout=e),t!=f.LockupAlignment.SKIP&&(l.styleController.targetedLockupStyle.alignment=t),null!=s&&s!=f.VerticalLockupAlignment.UNSET&&(l.styleController.targetedLockupStyle.verticalAlignment=s),l.styleController.targetedLockupStyle.pathID=r,l.styleController.targetedLockupStyle.customPath=i,l.styleController.onLayoutChanged(d),l.endBlockedUpdate(),o||l.styleChanged(),o&&(l.styleController.targetedLockupStyle.spacing=a.toDouble(f.LockupLayout.UNSET),l.styleChanged(),l.selectCharStyleForma()),e==f.LockupLayout.Auto&&l.snapSizeToBounds()}}},getLineSpacingForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.spacing:0},setLineSpacing:function(e,t,n){void 0===n&&(n=!1);for(var o=a.iter(t);!o.done;o.next()){var r,i=o.value;(r=a.as(i.controller,m.TypeLockupController))&&(r.styleController.targetedLockupStyle.spacing=e,n&&r.styleChanged(),r.styleController.onSpacingChanged())}},setLeading:function(e,t,n){for(var o=a.iter(n);!o.done;o.next()){var r,i=o.value;(r=a.as(i.controller,m.TypeLockupController))&&(r.setLineSpacingAndBounds(e,t),r.styleController.onSpacingChanged())}},getTrackingForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.tracking:0},setTracking:function(e,t,n){for(var o=a.iter(n);!o.done;o.next()){var r,i=o.value;(r=a.as(i.controller,m.TypeLockupController))&&(r.setLetterSpacingAndBounds(e,t),r.styleController.onTrackingChanged())}},getPaddingForForma:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.padding:0},setPadding:function(e,t){for(var n=a.iter(t);!n.done;n.next()){var o,r=n.value;(o=a.as(r.controller,m.TypeLockupController))&&o.styleController.setPaddingFromSlider(e)}},matchNextSize:function(e,t,n){for(var o=0,r=a.iter(n);!r.done;r.next()){var i,s=r.value;(i=a.as(s.controller,m.TypeLockupController))&&(o=i.matchNextSize(a.clone(e),t))}return o},matchNearestSize:function(e,t,n,o){for(var r=0,i=a.iter(o);!i.done;i.next()){var s,c=i.value;(s=a.as(c.controller,m.TypeLockupController))&&(r=s.setSizeSliderValue(e,a.clone(t),n))}return r},getLineBreakForForma:function(e){var t;return!!(t=a.as(e.controller,m.TypeLockupController))&&t.styleController.targetedLockupStyle.lineBreakAtCharacterStyleSizeChange},setLineBreak:function(e,t,n){void 0===n&&(n=!1);for(var o=a.iter(t);!o.done;o.next()){var r,i=o.value;(r=a.as(i.controller,m.TypeLockupController))&&(r.styleController.targetedLockupStyle.lineBreakAtCharacterStyleSizeChange=e,n&&(r.styleChanged(),r.selectCharStyleForma()))}},setNextSpacingSequence:function(e,t){for(var n=a.iter(t);!n.done;n.next()){var o,r=n.value;if(o=a.as(r.controller,m.TypeLockupController))switch(e){case 0:o.styleController.setNextSpacingOption();break;case 1:o.styleController.setNextPaddingOption();break;case 2:o.styleController.setNextShadowAngle();break;case 3:o.styleController.setNextTrackingOption();break;case 4:o.styleController.setNextSpacingAndPaddingOption();break;default:i.CoreAssert.isTrue(!1,void 0,"TextFacade.setNextSpacingSequence","TextFacade.swift",362)}}},getTextLook:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.targetedLockupStyle.textLook:f.LockupTextLook.Fill},getOutlineStrokeWeightPercent:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.getStrokeWeightPercentForUI():0},getShadowOffsetPercent:function(e){var t;return(t=a.as(e.controller,m.TypeLockupController))?t.styleController.getShadowOffsetPercentForUI():0},setTextLook:function(e,t){for(var n=a.iter(t);!n.done;n.next()){var o,r=n.value;(o=a.as(r.controller,m.TypeLockupController))&&(o.styleController.setTextLook(e),o.styleChanged())}},setTextEffectsAttributes:function(e,t,n,o){for(var r=a.iter(o);!r.done;r.next()){var i,s=r.value;if((i=a.as(s.controller,m.TypeLockupController))&&(isNaN(e)||(i.styleController.targetedStrokeWeight=e),isNaN(t)||(i.styleController.targetedShadowOffset=t,i.styleChanged()),!isNaN(n))){var c=n<0?360+n:n;i.styleController.targetedShadowAngle=c}}},replaceTextForLockup:function(e,t){var n,o;if((n=a.as(e.controller,m.TypeLockupController))&&(i.CoreAssert.isTrue(null!=n.contentNode,void 0,"TextFacade.replaceTextForLockup","TextFacade.swift",442),o=n.contentNode)){var r=t,c=n.text,l=0==r.trim().length;if(r!=c||l)if(l)s.CreationFacade.deleteFormae([e],null);else{var u,d=null;(f.LockupStyle.layoutSupportsAlignments(n.lockupStyle.layout)||1==n.numLines()&&n.lockupStyle.layout!=f.LockupLayout.Path)&&(d=n.getPin(!0,!0)),r=h.TypeLockupUtils.fixUpQuotes(r,c),o.removeText(),o.insert(r,0),(u=d)&&n.matchPreviousPin(u),n.snapSizeToBounds()}}},replaceTextAndPreserveFontSize:function(e,t){var n,o;if((n=a.as(e.controller,m.TypeLockupController))&&(i.CoreAssert.isTrue(null!=n.contentNode,void 0,"TextFacade.replaceTextAndPreserveFontSize","TextFacade.swift",483),o=n.contentNode)){var r=t,s=n.text,c=0==r.trim().length;if(r!=s||c)if(c)a.opt(a.opt(e.page.document,(function(e){return e.controller})),(function(t){return t.doAction(new l.DeleteAction([e]))}));else{r=h.TypeLockupUtils.fixUpQuotes(r,s);var u=n.getCurrentFontSize();n.beginBlockedUpdate(),o.removeText(),o.insert(r,0),n.endBlockedUpdate(),n.updateGroupWithFontSize(u),n.snapSizeToBounds()}}},setHightlightMethod:function(e,t,n){void 0===n&&(n=!1);for(var o=a.iter(t);!o.done;o.next()){var r,i=o.value;if(r=a.as(i.controller,m.TypeLockupController)){if(n&&e!=m.HighlightMethod.Numbers)if(e==m.HighlightMethod.Manual)r.clearCharStyle(),r.selectCharStyleForma();else if(r.highlightMethod==e&&e!=m.HighlightMethod.Manual){var s=e;r.highlightMethod=m.HighlightMethod.toCaseValue(s+1)}else e!=m.HighlightMethod.Manual?r.highlightMethod==m.HighlightMethod.OddRows?r.highlightMethod=m.HighlightMethod.Bracket:r.highlightMethod==m.HighlightMethod.Bracket?r.highlightMethod=m.HighlightMethod.InsideBracket:r.highlightMethod==m.HighlightMethod.InsideBracket?r.highlightMethod=m.HighlightMethod.EvenRows:r.highlightMethod=e:r.highlightMethod=e;if(e==m.HighlightMethod.Manual&&n)return;if(n){var c=e==m.HighlightMethod.Numbers,l=e!=m.HighlightMethod.Numbers;r.autoApplyCharStyle(!0,c,l)}else r.applyPredefinedCharStyle(e);n&&r.selectCharStyleForma()}}},setCharStyleMode:function(e,t){var n;(n=a.as(e.controller,m.TypeLockupController))&&(t?(a.opt(a.opt(e.page.document,(function(e){return e.controller})),(function(e){return e.selection.inCharStyleMode=!0})),0==n.charStyleRanges.length&&n.styleController.pickVisibleColorsForCharStyle(),n.selectCharStyleForma(),n.autoApplyCharStyle(!1,!1,!1),n.selectCharStyleForma()):a.opt(a.opt(e.page.document,(function(e){return e.controller})),(function(e){return e.selection.inCharStyleMode=!1})))},applyCharStyle:function(e,t,n,o,r){var s;return(s=a.as(a.opt(e.lockupForma,(function(e){return e.controller})),m.TypeLockupController))?s.applyCharStyle(e,t,n,o,r):(i.CoreAssert.fail("cannot applyCharStyle, not a text forma","TextFacade.applyCharStyle","TextFacade.swift",603),new C.TextRange(0,0))},updateCharStyleRange:function(e,t,n){var o;(o=a.as(e.controller,m.TypeLockupController))?o.textChanged(t,n):i.CoreAssert.fail("cannot update character style, not a text forma","TextFacade.updateCharStyleRange","TextFacade.swift",618)},applyTextStyleSuggestion:function(e,t,n,o){var r;return(r=a.as(t.controller,m.TypeLockupController))?r.applyTextStyleSuggestion(e,n,o):(i.CoreAssert.fail("cannot apply text style, not a text forma","TextFacade.applyTextStyleSuggestion","TextFacade.swift",633),null)},applyNextTextEmphasisSuggestion:function(e,t){var n,o;return(n=a.as(e.controller,m.TypeLockupController))&&(o=t)?n.applyNextTextEmphasisSuggestion(o):(i.CoreAssert.fail("cannot apply next text emphasis","TextFacade.applyNextTextEmphasisSuggestion","TextFacade.swift",647),null)},standardPPI:72,getStandardPageSize:function(e){var t=e.getPageExportData();return new d.FormaPageExportData(t.dimensions,t.format,o.standardPPI).pixelDimensions},toInternalFontSize:function(e,t){var n=o.getStandardPageSize(t),r=u.FormaPage.DEFAULT_PAGE_SIZE;return Math.max(r.width,r.height)*e/Math.max(n.width,n.height)},toUserFontSize:function(e,t){return e/o.toInternalFontSize(1,t)},setFontSize:function(e,t,n){var r;if(r=a.opt(a.first(t),(function(e){return e.page})))for(var i=o.toInternalFontSize(e,r),s=a.iter(t);!s.done;s.next()){var c,l=s.value;(c=a.as(l.controller,m.TypeLockupController))&&c.setFontSize(i,n)}},getStandardFontSizes:function(){return[18,24,36,48,60,132]},getMinimumFontSize:function(){return 12},getMaximumFontSize:function(){return 500}}}),o)},YeWL:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("pmb0"),c=n("RkYL");r.MotionLogicClear=(o=function(){},a.defineClass({name:"MotionLogicClear",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,l=(o=a.as(n.st,"Double"))||null!=o?o:0,u=l+((r=a.as(n.dur,"Double"))||null!=r?r:1),d=i.FormaAnimation.init_9e82(s.MotionFacade.getCurrentAnimationStyle(),c.TheoTime.fromSeconds(l),c.TheoTime.fromSeconds(u),t.concat());e.animation=d}}}),o)},YxjU:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("oKlP"),u=n("RkYL"),d=n("xm77");r.MotionSourceFadeInV=(o=function(){},a.defineClass({name:"MotionSourceFadeInV",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new l.TheoPoint(0,-400)),a=s.Matrix2D.Identity,f=c.MotionUtils.createOpacityStyle(e,0),p=e.style.clone();return t.push(new i.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,f)),t.push(new i.KeyFrame(o,d.TimingFunctionType.EaseInOut,a,null,p)),t}}}),o)},aS4X:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("hEh8");r.DCXDocumentDecoder=(o=function(e){i.DCXNodeDecoder.call(this,e,e.root)},a.defineClass({name:"DCXDocumentDecoder",ctor:o,superName:"DCXNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){var t=i.DCXNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=a.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},c2hD:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("oKlP"),u=n("RkYL"),d=n("xm77");r.MotionSourceFadeInH=(o=function(){},a.defineClass({name:"MotionSourceFadeInH",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new l.TheoPoint(400,0)),a=s.Matrix2D.Identity,f=c.MotionUtils.createOpacityStyle(e,0),p=e.style.clone();return t.push(new i.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,f)),t.push(new i.KeyFrame(o,d.TimingFunctionType.EaseInOut,a,null,p)),t}}}),o)},f9IM:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("c2hD"),c=n("YxjU"),l=n("RkYL");r.MotionSourceStacked=(o=function(){},a.defineClass({name:"MotionSourceStacked",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=c.MotionSourceFadeInV.getSrcKeyframes(e),o=s.MotionSourceFadeInH.getSrcKeyframes(e);return t.push(n[0]),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.25),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.25),o[0].timingFunction,o[0].placement,o[0].bounds,o[0].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.5),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.5),o[0].timingFunction,o[0].placement.inverse,o[0].bounds,o[0].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.75),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(.75),n[0].timingFunction,n[0].placement.inverse,n[0].bounds,n[0].style)),t.push(new i.KeyFrame(l.TheoTime.fromSeconds(1),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t}}}),o)},fAXt:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("0wFF"),s=n("SpAV"),c=n("gXiO"),l=n("6ZWm"),u=n("cmoc"),d=n("X0GW"),f=n("iCxV"),p=n("lmwz"),m=n("tGKA"),h=n("oKlP");r.TransformFacade=(o=function(){c.CoreObject.call(this)},a.defineClass({name:"TransformFacade",ctor:o,superName:"CoreObject",statics:{translateForma:function(e,t){e.move(m.Matrix2D.translation(t))},nudgeFormaeInPageSpace:function(e,t){if(s.CoreAssert.isTrue(e.length>0,"can't nudge 0 formae","TransformFacade.nudgeFormaeInPageSpace","TransformFacade.swift",25),0!=e.length){var n,r=1,c=a.first(e);(n=a.opt(a.opt(c,(function(e){return e.page.view})),(function(e){return e.getViewportTransform()})))&&(r=Math.sqrt(Math.abs(n.determinant)));var l=t.divide(r);l=l.multiply(2),o.translateFormaeInPageSpace(a.clone(e),l),e.length>1?a.opt(f.Host.logging,(function(t){return t.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataMultipleNudged,{contextualData1:"formae count: "+e.length})})):c.isImage()?a.opt(f.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataImageNudged,{})})):c.isShape()?a.opt(f.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataShapeNudged,{})})):c.isText()&&a.opt(f.Host.logging,(function(e){return e.logToAnalytics(i.AnalyticsConstants.kAnalyticsDataTextNudged,{})}))}},translateFormaeInPageSpace:function(e,t){o.transformFormaeInPageSpaceAboutPoint(a.clone(e),m.Matrix2D.translation(t),h.TheoPoint.ZERO)},transformFormaeInPageSpaceAboutPoint:function(e,t,n,o){var r;void 0===o&&(o=null);for(var i=m._asterisk_Matrix2D_Matrix2D(m._asterisk_Matrix2D_Matrix2D(m.Matrix2D.translation(h._negate_TheoPoint(n)),t),m.Matrix2D.translation(n)),s=a.iter(e);!s.done;s.next()){var c,f,g=s.value,C=g;if(null==g.controller||g.controller.floating&&!p.ImageFacade.inCropMode(g)||(c=a.as(g,u.FrameForma))&&(C=c.childAt(0)),f=C.parent){var v,y=C.placement,T=m._asterisk_Matrix2D_Matrix2D(m._asterisk_Matrix2D_Matrix2D(f.totalPlacement,i),f.totalPlacement.inverse);if(C.move(T),v=a.as(f.controller,l.FrameController)){var S;(S=a.opt(o,(function(e){return e.transformValues})))&&(C.placement=C.placement.scaleTo(S.xscale,S.yscale));var P=y.transformValues.xscale;v.updateAfterChildTransform(),Math.abs(P-C.placement.transformValues.xscale)<.001&&1!=t.transformValues.xscale&&(C.placement=y,v.updateCropModeImage())}((r=a.opt(a.opt(C.parent,(function(e){return e.controller})),(function(e){return e.userGroup})))||null!=r)&&r&&d.GroupFacade.updateUserGroupHierarchy(C.parent)}}},transformInPageSpaceAboutFormaUV:function(e,t,n){o.transformFormaeInPageSpaceAboutPoint([e],t,m._asterisk_TheoPoint_Matrix2D(e.bounds.evalXY(n.x,n.y),e.totalPlacement))},transformAboutFormaCenter:function(e,t){var n;if(n=e.parent){var r=new h.TheoPoint(.5,.5);if(n.controller instanceof l.FrameController){var a=n.bounds.transform(e.parent.totalPlacement).center,i=e.totalPlacement.inverse.transformPoint(a);r=e.bounds.locatePoint(i)}o.transformInPageSpaceAboutFormaUV(e,t,r)}else s.CoreAssert.fail("trying to rotate a forma which doesnt have a parent","TransformFacade.transformAboutFormaCenter","TransformFacade.swift",143)},scaleForma:function(e,t){var n=m.Matrix2D.scalingXY(t,t);o.transformAboutFormaCenter(e,n)},flipForma:function(e,t){var n=t?m.Matrix2D.scalingXY(1,-1):m.Matrix2D.scalingXY(-1,1);o.transformAboutFormaCenter(e,n)},rotateForma:function(e,t){var n=m.Matrix2D.rotation(Math.cos(t),Math.sin(t));o.transformAboutFormaCenter(e,n)},currentRotation:function(e){var t,n,o;return(t=a.as(e,u.FrameForma))&&(n=a.opt(a.opt(t.page.document,(function(e){return e.controller})),(function(e){return e.selection})))&&n.inCropMode&&(o=p.ImageFacade.getImageFormaForForma(t))?o.rotation():e.rotation()}}}),o)},hEh8:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("RO7T"),s=n("lWlM");r.DCXNodeDecoder=(o=function(e,t){this.node_=t,i.BaseNodeDecoder.call(this,e)},a.defineClass({name:"DCXNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return a.as(this.node_.getValue(e),"AnyObject")},forEachChild:function(e){for(var t=0,n=a.iter(this.branch_.getChildrenOfNode(this.node_));!n.done;n.next()){var r=n.value;e(new o(this.branch_,r),t),t+=1}},forEachComponent:function(e){for(var t=0,n=a.iter(this.branch_.getComponentsOfNode(this.node_));!n.done;n.next()){var o=n.value;e(new s.DCXComponentDecoder(this.branch_,o),t),t+=1}}}}),o)},lWlM:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("gXiO"),s=n("iCxV");r.DCXComponentDecoder=(o=function(e,t){this.branch_=e,this.component_=t,i.CoreObject.call(this)},a.defineClass({name:"DCXComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{id:{get:function(){return this.component_.componentId}},name:{get:function(){return this.component_.name}},path:{get:function(){return this.component_.path}},mimeType:{get:function(){return this.component_.type}},etag:{get:function(){return this.component_.etag}},url:{get:function(){var e;return null!=(e=this.branch_.getPathForComponent(this.component_))?a.opt(s.Host.persistUtils,(function(t){return t.fileUrlForPath(e)})):null}}}}),o)},muPB:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("ytEx"),s=n("SpAV"),c=n("iCxV"),l=n("C4JV"),u=n("Puiz");r.JSONDocumentDecoder=(o=function(e){var t,n,o,r={};(t=e.getComponentWithAbsolutePath(l.JSON_CONTENT_PATH_DCX2D))&&null!=(n=e.getPathForComponent(t))?null!=(o=a.opt(c.Host.persistUtils,(function(e){return e.readJsonContentFromFile(n)})))&&(r=o):s.CoreAssert.warning("Could not find dom component!"),u.JSONNodeDecoder.call(this,e,r)},a.defineClass({name:"JSONDocumentDecoder",ctor:o,superName:"JSONNodeDecoder",statics:{getRequiredSynchronousComponents:function(e){return[l.JSON_CONTENT_PATH_DCX2D]},_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){if(e==i.PROPERTY_KEY_ID)return a.as(this.branch_.getValue(i.PROPERTY_KEY_ID),"AnyObject");var t=u.JSONNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=a.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},mxdD:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("gXiO"),s=n("FNB+"),c=n("cmoc"),l=n("VkKB"),u=n("RkYL"),d=n("sW6f"),f=n("zjod"),p=n("QTen");r.VideoFacade=(o=function(){i.CoreObject.call(this)},a.defineClass({name:"VideoFacade",ctor:o,superName:"CoreObject",statics:{getVideoFormaForForma:function(e){var t;return(t=a.as(e,c.FrameForma))&&t.childCount>0?a.as(t.childAt(0),f.VideoForma):a.as(e,f.VideoForma)},getTrueVideoFormaForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))&&!t.isSticker()?t:null},setTransientTimeForVideoForma:function(e,t,n,r){var a,i;(a=o.getVideoStyleForForma(e))&&(i=o.getVideoContentForForma(e))&&(a.setTransientTime(t,n),i.setTransientOffset(r))},resetTransientTimeForVideoForma:function(e){var t,n;(t=o.getVideoStyleForForma(e))&&(n=o.getVideoContentForForma(e))&&(t.resetTransientTime(),n.resetTransientOffset())},changeVideoVolume:function(e,t){for(var n=a.iter(e);!n.done;n.next()){var r,i=n.value;(r=o.getVideoStyleForForma(i))&&(r.volumeLevel=t)}},getVideosOnPage:function(e,t){return void 0===t&&(t=!0),e.root.filterWithCallback((function(e){return e instanceof f.VideoForma&&(t||!e.isSticker())}))},getVideoCountOnPage:function(e,t){void 0===t&&(t=!0);for(var n=0,o=a.iter(e.root.visitAsArray(s.FormaTraversal.PreOrder));!o.done;o.next()){var r=o.value;r instanceof f.VideoForma&&(t||!r.isSticker())&&(n+=1)}return n},getStickerCountOnPage:function(e){for(var t=0,n=a.iter(e.root.visitAsArray(s.FormaTraversal.PreOrder));!n.done;n.next()){var o,r,i=n.value;(o=a.as(i,f.VideoForma))&&(r=a.opt(o.contentNode,(function(e){return e.mediaMetadata})))&&o.isSticker()&&r.sourceName==l.MediaMetadata.kMediaGiphySourceName&&(t+=1)}return t},videoContentIsLivePhoto:function(e){var t;return null!=(t=a.opt(e,(function(e){return e.getTag(d.VideoContentNode.LIVE_PHOTO_TAG)})))&&"true"==t},formaIsLivePhoto:function(e){var t;return!!(t=o.getVideoContentForForma(e))&&o.videoContentIsLivePhoto(t)},formaIsGIFVideo:function(e){var t;return!!(t=o.getVideoContentForForma(e))&&t.isGIF},getVideoContentForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))?t.videoContentNode:null},getVideoStyleForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))?a.as(t.style,p.VideoStyle):null},getStartTimeForVideoForma:function(e,t){void 0===t&&(t=!1);var n,r,a,i=u.TheoTime.Zero;return(n=o.getVideoStyleForForma(e))&&(i=n.startTime),t&&(r=o.getVideoContentForForma(e))&&(a=r.offsetInOriginal)&&(i=i.add(a)),i},getDurationInSecondsForVideo:function(e){return o.getDurationForVideo(e).seconds},getVideoTimeForVideoWithTimeInTotalLoop:function(e,t){var n=o.getDurationInSecondsForVideo(e),r=t.seconds%n;return u.TheoTime.fromSeconds(r,t.timescale)},getDurationForVideo:function(e){var t,n,o=u.TheoTime.Zero;if(t=e.videoContentNode)if(n=a.as(e.style,p.VideoStyle))o=n.duration;else{var r=a.clone(t.times);r.length>0&&(o=r[r.length-1])}return o},addVideoContent:function(e,t,n,o,r,i,s,c,l,u,f,p){var m,h,g;return(m=a.as(a.opt(e,(function(e){return e.createNode(d.VideoContentNode.KIND,null)})),d.VideoContentNode))?(m.url=t,m.mimeType=n,m.width=o,m.height=r,m.duration=i,m.mediaMetadata=l,m.localIdentifier=u,m.setTimes(a.clone(f)),p&&m.setTag(d.VideoContentNode.LIVE_PHOTO_TAG,"true"),(h=s)&&(m.offsetInOriginal=h),(g=c)&&(m.originalDuration=g),m):null}}}),o)},nPwb:function(e,t,n){var o,r=t,a=n("oAGj");r.PGMFacade=(o=function(){},a.defineClass({name:"PGMFacade",ctor:o}),o)},"nQ+V":function(e,t,n){var o,r=t,a=n("oAGj"),i=n("95jH");r.MotionEntryStacked=(o=function(){this.srcId="MotionSourceStacked",this.logic=new i.MotionLogicStacked,this.args={lineDur:.3,endPadDur:1}},a.defineClass({name:"MotionEntryStacked",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},nUE5:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("wL85"),c=n("qTtJ"),l=n("f9IM");r.MotionSource=(o=function(){},a.defineClass({name:"MotionSource",ctor:o,statics:{getSourceAnimation:function(e,t){return"MotionSourceStacked"==e?l.MotionSourceStacked.getSrcKeyframes(t):"MotionSrcFadeIn"==e?c.MotionSrcFadeIn.getSrcKeyframes(t):"MotionSrcDropIn"==e?s.MotionSrcDropIn.getSrcKeyframes(t):(""!=e&&i.CoreAssert.warning("Unknown source animation: "+e),[])}}}),o)},qTtJ:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("RkYL"),u=n("xm77");r.MotionSrcFadeIn=(o=function(){},a.defineClass({name:"MotionSrcFadeIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.Identity,a=s.Matrix2D.Identity,d=c.MotionUtils.createOpacityStyle(e,0),f=e.style.clone();return t.push(new i.KeyFrame(n,u.TimingFunctionType.Linear,r,null,d)),t.push(new i.KeyFrame(o,u.TimingFunctionType.Linear,a,null,f)),t}}}),o)},txj3:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("ThKb");r.NNMLPClassifier=(o=function(e,t,n){this._finalSoftmax=!0,void 0===n&&(n=!0),i.CoreAssert.isTrue(e.length==t.length,void 0,"NNMLPClassifier.init","NNMLPClassifier.swift",18),this._coefficients=a.clone(e),this._intercepts=a.clone(t);var o=e.length;this._classNum=e[o-1].rows,this._finalSoftmax=n,a.defctor(this)},a.defineClass({name:"NNMLPClassifier",ctor:o,props:{predict:function(e){return i.CoreAssert.isTrue(1==e.cols,void 0,"NNMLPClassifier.predict","NNMLPClassifier.swift",28),a.clone(this.forwardPropagate(e)).AL},forwardPropagate:function(e){for(var t={},n=[],o=e,r=this.hiddenLayerNumber(),i=a.iter(a.range(0,r,!1));!i.done;i.next()){var s=i.value,c=o,l=this._coefficients[s],u=this._intercepts[s],d=a.clone(this.linearActivationForward(c,l,u,"relu"));o=d.A,n.push(a.clone(d.cache))}if(1!=this._classNum&&this._finalSoftmax){var f=a.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"softmax"));n.push(a.clone(f.cache)),t.AL=f.A,t.caches=a.clone(n)}else{var p=a.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"sigmoid"));n.push(a.clone(p.cache)),t.AL=p.A,t.caches=a.clone(n)}return t},backwardPropagate:function(e,t,n){var o={},r=[],c=[],l=[],u=n.length;i.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows,void 0,"NNMLPClassifier.backwardPropagate","NNMLPClassifier.swift",104);var d=a.clone(n[u-1]);if(1==this._classNum){var f=s.TheoMatrix.ones(t.rows,t.cols),p=t.divide(e).subtract(f.subtract(t).divide(f.subtract(e))).multiplyConstant(-1),m=a.clone(this.linearActivationBackward(p,a.clone(d),"sigmoid"));r.push(m.dAprev),c.push(m.dW),l.push(m.db)}else{var h=e.subtract(t),g=a.clone(this.linearActivationBackward(h,a.clone(d),"softmax"));r.push(g.dAprev),c.push(g.dW),l.push(g.db)}for(var C=a.iter(a.range(0,u-2,!0).reversed());!C.done;C.next()){var v=C.value;d=a.clone(n[v]);var y=a.clone(this.linearActivationBackward(r[r.length-1],a.clone(d),"relu"));r.push(y.dAprev),c.push(y.dW),l.push(y.db)}return o.dAs=a.reverse(r),o.dWs=a.reverse(c),o.dbs=a.reverse(l),o},computeCost:function(e,t){var n=t.cols;if(i.CoreAssert.isTrue(n>0,void 0,"NNMLPClassifier.computeCost","NNMLPClassifier.swift",139),1==this._classNum){var o=s.TheoMatrix.ones(t.rows,t.cols),r=t.multiply(e.matrixLog()),c=o.subtract(t).multiply(o.subtract(e).matrixLog()),l=r.add(c);return a.toDouble(a.toInt(-1/n))*l.sumRows().value(0,0)}return t.transpose().matrixMultiply(e.matrixLog()).value(0,0)*(-1/a.toDouble(n))},linearForward:function(e,t,n){var o={};return o.Z=t.matrixMultiply(e).add(n),o.cache={A:e,W:t,b:n},o},linearActivationForward:function(e,t,n,o){var r={},i={},s=a.clone(this.linearForward(e,t,n)),c=s.Z;return i.linearCache=s.cache,i.activationCache=c,r.cache=a.clone(i),"sigmoid"==o?r.A=c.sigmoid():"relu"==o?r.A=c.relu():"softmax"==o&&(r.A=this.softmaxActivation(c)),r},hiddenLayerNumber:function(){return this._coefficients.length-1},linearBackward:function(e,t,n,o){var r={},s=t.cols,c=e.matrixMultiply(t.transpose()).multiplyConstant(a.toDouble(a.toInt(1/s))),l=e.sumColumns().multiplyConstant(a.toDouble(a.toInt(1/s))),u=n.transpose().matrixMultiply(e);return i.CoreAssert.isTrue(c.cols==n.cols&&c.rows==n.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",223),i.CoreAssert.isTrue(l.cols==o.cols&&l.rows==o.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",224),i.CoreAssert.isTrue(u.cols==t.cols&&u.rows==t.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",225),r.dAprev=u,r.dW=c,r.db=l,r},linearActivationBackward:function(e,t,n){var o=a.clone(t.linearCache),r=o.A,i=o.W,s=o.b,c=t.activationCache,l={};if("sigmoid"==n){var u=this.sigmoidBackward(e,c);l=a.clone(this.linearBackward(u,r,i,s))}else"relu"==n?(u=this.reluBackward(e,c),l=a.clone(this.linearBackward(u,r,i,s))):"softmax"==n&&(u=e,l=a.clone(this.linearBackward(u,r,i,s)));return l},softmaxActivation:function(e){i.CoreAssert.isTrue(1==e.cols,void 0,"NNMLPClassifier.softmaxActivation","NNMLPClassifier.swift",266);var t=e.exp(),n=t.sum();return t.multiplyConstant(a.toDouble(1/n))},sigmoidBackward:function(e,t){var n=s.TheoMatrix.ones(t.rows,t.cols),o=t.sigmoid(),r=e.multiply(o).multiply(n.subtract(o));return i.CoreAssert.isTrue(r.cols==t.cols&&r.rows==t.rows,void 0,"NNMLPClassifier.sigmoidBackward","NNMLPClassifier.swift",277),r},reluBackward:function(e,t){i.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows,void 0,"NNMLPClassifier.reluBackward","NNMLPClassifier.swift",282);for(var n=[],o=a.iter(a.range(0,e.rows,!1));!o.done;o.next()){for(var r=o.value,c=[],l=a.iter(a.range(0,e.cols,!1));!l.done;l.next()){var u=l.value;t.value(r,u)>=0?c.push(e.value(r,u)):c.push(0)}n.push(a.clone(c))}var d=new s.TheoMatrix(a.clone(n));return i.CoreAssert.isTrue(d.cols==t.cols&&d.rows==t.rows,void 0,"NNMLPClassifier.reluBackward","NNMLPClassifier.swift",296),d}}}),o)},uMFj:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("x0BK"),s=n("9YN4");r.DCXDocumentEncoder=(o=function(e){i.DCXNodeEncoder.call(this,e,e.root);var t=[s.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,s.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION];this.prepareCompositeForSave(a.clone(t))},a.defineClass({name:"DCXDocumentEncoder",ctor:o,superName:"DCXNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{finish:function(){i.DCXNodeEncoder.prototype.finish.call(this),this.discardStashedComponents()}}}),o)},uj1m:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("iCxV"),s=n("ThKb");r.MLPModel=(o=function(e,t,n,o,r,i,s,c){this.featureScalingMean=e,this.featureScalingStd=t,this.coefficients=a.clone(n),this.intercepts=a.clone(o),this.shapes=a.clone(r||[]),this.fonts=a.clone(i||[]),this.layouts=a.clone(s||[]),this.roles=a.clone(c||[]),this.fontMap={},this.finalSoftmax=!0},a.defineClass({name:"MLPModel",ctor:o,statics:{cache:{},loadNNModel:function(e){if(null==o.cache[e]){var t,n=null;if(t=a.opt(i.Host.learning,(function(t){return t.loadNNJSON(e)}))){var r,c=new s.TheoMatrix([t.featureScalingMean]),l=new s.TheoMatrix([t.featureScalingStd]);if(r=a.as(t.model,["Dictionary","String","Any"])){for(var u=a.clone(r.coefs),d=[],f=a.iter(u);!f.done;f.next()){var p=f.value;d.push(new s.TheoMatrix(a.clone(p)).transpose())}for(var m=a.clone(r.intercepts),h=[],g=a.iter(m);!g.done;g.next()){var C=g.value;h.push(new s.TheoMatrix([C]).transpose())}for(var v={},y=a.iter(["shapes","fonts","layouts","roles"]);!y.done;y.next()){var T=y.value;null!=r[T]?v[T]=a.clone(r[T]):v[T]=[]}n=new o(c,l,a.clone(d),a.clone(h),a.clone(v.shapes),a.clone(v.fonts),a.clone(v.layouts),a.clone(v.roles))}}o.cache[e]=n}return o.cache[e]}},props:{data:function(){for(var e=[],t=[],n=a.iter(this.coefficients);!n.done;n.next()){var o=n.value;e.push(a.clone(o.transpose().asArray))}for(var r=a.iter(this.intercepts);!r.done;r.next()){var i=r.value;t.push(a.clone(i.transpose().asFlatArray))}return a.clone(a.as({model:{coefs:e,intercepts:t,shapes:this.shapes,fonts:this.fonts,layouts:this.layouts,roles:this.roles},featureScalingMean:this.featureScalingMean.asFlatArray,featureScalingStd:this.featureScalingStd.asFlatArray},["Dictionary","String","Any"]))}}}),o)},wL85:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("URxh"),s=n("tGKA"),c=n("oKlP"),l=n("RkYL"),u=n("xm77");r.MotionSrcDropIn=(o=function(){},a.defineClass({name:"MotionSrcDropIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new c.TheoPoint(0,-400)),a=s.Matrix2D.Identity,d=e.style.clone();return t.push(new i.KeyFrame(n,u.TimingFunctionType.Linear,r,null,d)),t.push(new i.KeyFrame(o,u.TimingFunctionType.Linear,a,null,d)),t}}}),o)},x0BK:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("ytEx");r.DCXNodeEncoder=(o=function(e,t){this.node_=t,i.BaseNodeEncoder.call(this,e,t)},a.defineClass({name:"DCXNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return a.as(this.node_.getValue(e),"AnyObject")},setPropertyOnNode:function(e,t){null!=t?this.node_.setValue(e,t):this.node_.removeValue(e)},createChildEncoder:function(e){var t=this.branch_.appendNode(e,null,this.node_);return new o(this.branch_,t)}}}),o)},ytEx:function(e,t,n){var o,r=t,a=n("oAGj"),i=n("SpAV"),s=n("gXiO"),c=n("3OP7"),l=n("iCxV");r.PROPERTY_KEY_ID="id",r.PROPERTY_KEY_TYPE="type",r.PROPERTY_KEY_NAME="name",r.PROPERTY_KEY_PATH="path",r.PROPERTY_KEY_MIMETYPE="mimeType",r.PROPERTY_KEY_ETAG="etag",r.PROPERTY_KEY_URL="url",r.PROPERTY_KEY_RELATIONSHIP="rel",r.BaseNodeEncoder=(o=function(e,t){this.childNodeEncoders_=[],this.branch_=e,this.componentNode_=t,s.CoreObject.call(this)},a.defineClass({name:"BaseNodeEncoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{prepareCompositeForSave:function(e){i.CoreAssert.isTrue(null==this.stashNode_,"creating a stashNode when we already have one?","BaseNodeEncoder.prepareCompositeForSave","BaseNodeEncoder.swift",33),this.stashNode_=this.createTempNode(this.branch_.root);for(var t=a.iter(this.branch_.allComponents);!t.done;t.next()){var n=t.value;null!=n.relationship&&e.includes(n.relationship)||this.branch_.moveComponent(n,this.createTempNode(this.stashNode_))}for(var o=a.iter(this.branch_.getChildrenOfNode(this.branch_.root));!o.done;o.next()){var s=o.value,c=a.as(s.getValue(r.PROPERTY_KEY_RELATIONSHIP),"String");null!=c&&e.includes(c)||s.nodeId!=this.stashNode_.nodeId&&this.branch_.removeNode(s)}},createTempNode:function(e){var t=a.opt(l.Host.resourceUtils,(function(e){return e.makeGUID()}));return this.branch_.appendNode(t,t,e)},discardStashedComponents:function(){this.branch_.removeNode(this.stashNode_)},getPropertyOnNode:function(e){return i.CoreAssert.fail("must be overridden","BaseNodeEncoder.getPropertyOnNode","BaseNodeEncoder.swift",77),null},setPropertyOnNode:function(e,t){i.CoreAssert.fail("must be overridden","BaseNodeEncoder.setPropertyOnNode","BaseNodeEncoder.swift",82)},id:{get:function(){return a.as(this.getPropertyOnNode(r.PROPERTY_KEY_ID),"String")}},setName:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_NAME,a.as(e,"AnyObject"))},setType:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_TYPE,a.as(e,"AnyObject"))},setPath:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_PATH,a.as(e,"AnyObject"))},setProperty:function(e,t){var n=c.DocumentPersistenceFactory.namespacedPropertyName(e);this.setPropertyOnNode(n,t)},setOptionalStringProperty:function(e,t){this.setProperty(e,a.as(t,"AnyObject"))},setStringProperty:function(e,t){this.setProperty(e,a.as(t,"AnyObject"))},setNumberProperty:function(e,t){i.CoreAssert.isFalse(isNaN(t),"Can't set NaN for prop "+e+".","BaseNodeEncoder.setNumberProperty","BaseNodeEncoder.swift",115),this.setProperty(e,a.as(t,"AnyObject"))},setIntProperty:function(e,t){this.setProperty(e,a.as(t,"AnyObject"))},setBooleanProperty:function(e,t){this.setProperty(e,a.as(t,"AnyObject"))},setOptionalBooleanProperty:function(e,t){this.setProperty(e,a.as(t,"AnyObject"))},createChildEncoder:function(e){return i.CoreAssert.fail("must be overridden","BaseNodeEncoder.createChildEncoder","BaseNodeEncoder.swift",132),new o(this.branch_,this.componentNode_)},appendChild:function(e){var t=this.createChildEncoder(e);return this.childNodeEncoders_.push(t),t},appendComponent:function(e,t,n){var o,r=a.opt(l.Host.pathUtils,(function(e){return e.absolutePathFromURL(t)})),i=e,s=a.clone(a.opt(a.opt(l.Host.pathUtils,(function(e){return e.lastPathComponentFromURL(t)})),(function(e){return e.split(".")})));if(null!=s&&s.length>1){var c=a.last(s);a.isEmpty(c)||(i+="."+c)}if(o=this.branch_.getComponentWithId(e)){if(this.nodeHasComponentWithPath(o.path)||a.opt(o.path,(function(e){return 1==e.includes("/")}))){var u=o.mutableCopy;u.path=i,o=this.branch_.updateComponent(u,null,!1)}this.branch_.moveComponent(o,this.componentNode_)}else a.opt(r,(function(e){return 1==e.startsWith("shapes/")}))||this.branch_.addComponent(e,e,n,null,i,this.componentNode_,r,!0,null)},nodeHasComponentWithPath:function(e){if(null!=e)for(var t=a.iter(this.branch_.getComponentsOfNode(this.componentNode_));!t.done;t.next())if(t.value.path==e)return!0;return!1},setCompositeID:function(e){},setDocumentSize:function(e,t){},setManifestProperty:function(e,t){this.getManifestEncoder().setProperty(e,t)},getManifestEncoder:function(){return this},finish:function(){for(var e=a.iter(this.childNodeEncoders_);!e.done;e.next())e.value.finish()}}}),o)}}]);
//# sourceMappingURL=vendors_npm_spark_28b70a57-b9357cef.js.map
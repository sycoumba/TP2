(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[12],{"/Amf":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDirtyEvent=void 0;const r=i("lzL7");let s=0,n=(()=>{class e{constructor(t){this.type=e.TYPE,this.displayObject=t}}return e.TYPE="render-dirty",e})();t.RenderDirtyEvent=n;let o=(()=>{class e{constructor(e,t,i=new PIXI.Container){this.id=`viewid:${s++}`,this.isDirtyPlacement=!0,this.isDirtyRender=!0,this.isDirtyFilter=!0,this.isDestroyed=!1,this.renderScale=1,this.globalPlacementCacheKey="",this.filters=[],this.mimicNode=e,this.pixiApp=t.pixiApp,this.asyncRenderer=t,this.log=t.log,this.renderScale=this.asyncRenderer.currentRenderScale,this.opacity=1,this.pixiDisplayObject=i,this.type=Object.getPrototypeOf(this).constructor.TYPE,this.localPlacement=e.compositing.placement,this.globalPlacement=e.ctm,this.globalPlacementCacheKey=this.globalPlacement.asArray.join(","),this.opacity=e.compositing.opacity}static areaOfBoundsAtDocumentScale(e,t){const i=r.default.decomposeScale(e.asArray),s=t.maxX-t.minX,n=t.maxY-t.minY;return s*i.x*(n*i.y)}static isBoundsInDocument(e,t,i,r){const s=t.transformRect(e);return s.maxX>=0&&s.maxY>=0&&s.minX<=i&&s.minY<=r}get globalScale(){return this.globalPlacement?r.default.decomposeScale(this.globalPlacement.asArray):{x:1,y:1}}get localScale(){return this.localPlacement?r.default.decomposeScale(this.localPlacement.asArray):{x:1,y:1}}destroy(e){this.isDestroyed=!0,this.pixiDisplayObject.filters&&(this.pixiDisplayObject.filters=null),this.pixiDisplayObject.destroy(),this.filters=[]}insertChild(e,t,i){const r=i.binding;r.parent=this,this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}removeChild(e,t,i){const r=i.binding;r.parent=void 0,this.pixiDisplayObject.removeChild(r.pixiDisplayObject)}reinsertChild(e,t,i){const r=i.binding;this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}changeCompositing(e,t,i){}changePlacement(e,t,i){this.localPlacement=i,this.isDirtyPlacement=!0}changeBlendMode(e,t,i){}changeOpacity(e,t,i){this.opacity=i,this.isDirtyFilter=!0}changeCTM(e,t,i){this.changeGlobalPlacement(this.globalPlacement,i)}changeProperties(e,t){this.isDirtyRender=!0}changeRenderScale(e,t){this.renderScale=t}changeGlobalPlacement(e,t){this.globalPlacement=t}isVisibleWithinDocument(e){return!0}endConformSummary(e,t,i){this.asyncRenderer.activeRender.fullValidation||this.validate()}validate(){const e=this.isVisibleWithinDocument(this.mimicNode);this.renderScale!==this.asyncRenderer.currentRenderScale&&this.changeRenderScale(this.renderScale,this.asyncRenderer.currentRenderScale);const t=this.mimicNode.ctm,i=t.asArray.join(",");if(this.globalPlacementCacheKey!==i&&(this.globalPlacementCacheKey=i,this.changeGlobalPlacement(this.globalPlacement,t)),!this.pixiDisplayObject.visible&&!e)return;let r=!1;if(this.isDirtyPlacement&&(this.place(),r=!0),this.isDirtyFilter&&(this.filter(),r=!0),this.isDirtyRender&&(this.render(),r=!0),r){const e=new n(this);this.bubble(e.type,e)}this.pixiDisplayObject.visible=e}place(){this.pixiDisplayObject.transform.setFromMatrix(new PIXI.Matrix(...this.localPlacement.asArray)),this.isDirtyPlacement=!1}autoApplyAlphaFilter(){return!0}filter(){if(1!==this.opacity&&this.autoApplyAlphaFilter()){const e=new PIXI.filters.AlphaFilter;e.resolution=this.pixiApp.renderer.resolution,e.alpha=this.opacity,this.filters.push(e)}this.pixiDisplayObject.filters=this.filters,this.filters=[],this.isDirtyFilter=!1}render(){this.isDirtyRender=!1}bubble(e,t){this.pixiDisplayObject.emit(e,t),this.parent&&this.parent.bubble?this.parent.bubble(e,t):this.pixiApp.stage.emit(e,t)}}return e.TYPE="post-display-object",e})();t.default=o},"0gjg":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static parseHexFromInt(e){var t=e.toString(16);return 1===t.length?"0"+t:t}static rgb2hex(e){return this.parseHexFromInt(Math.round(255*e.red))+this.parseHexFromInt(Math.round(255*e.green))+this.parseHexFromInt(Math.round(255*e.blue))}static rgba2css({red:e,green:t,blue:i,alpha:r=1}){return`rgba(${Math.round(255*e)},${Math.round(255*t)},${Math.round(255*i)},${r})`}static rgb2ValidCSSValues(e){return{red:Math.round(e.red),green:Math.round(e.green),blue:Math.round(e.blue),alpha:e.alpha||1}}static toCSS(e){if(!e)return"#000000";if(void 0!==e.red||void 0!==e.r){var t=void 0!==e.red?e.red:e.r,i=void 0!==e.green?e.green:e.g,s=void 0!==e.blue?e.blue:e.b,n=void 0!==e.alpha?e.alpha:e.a,o=this.rgb2ValidCSSValues({red:t,green:i,blue:s,alpha:n});return"rgba("+o.red+","+o.green+","+o.blue+","+(void 0===n?1:n)+")"}return"string"==typeof e&&6===e.length?"#"+e:"string"==typeof e&&e.match(new RegExp("^#[0-9a-fA-F]{6}$"))?e:"number"==typeof e?"#"+r.parseHexFromInt(e):"#000000"}static solidColor2Rgba(e){return e?{red:Math.floor(255*e.red),green:Math.floor(255*e.green),blue:Math.floor(255*e.blue),alpha:e.alpha}:null}}t.default=r},"1HQJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"213o":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("/Amf"),n=i("hxFN"),o=i("fziT"),a=i("5m7E"),l=i("pMCj"),h=i("JuUW"),c=i("LBjK"),d=i("3HR0"),u=i("au89");let p=(()=>{class e extends s.default{constructor(e,t){super(e,t),this.imageIsLoaded=!1,this.pixiDisplayObject.on("image-not-loaded",this.handleSubtreeImageLoading,this),this.pixiDisplayObject.on("image-loaded",this.handleSubtreeImageLoaded,this);const i=e;this._changeSpec(i.spec)}cleanCachedTexture(){this.cachedTexture1&&this.cachedTexture1.destroy(!0),this.cachedTexture2&&this.cachedTexture2.destroy(!0),this.cachedTexture1=null,this.cachedTexture2=null}destroy(e){this.cleanCachedTexture(),super.destroy(e)}handleSubtreeImageLoading(){this.imageIsLoaded=!1}handleSubtreeImageLoaded(){this.imageIsLoaded=!0,this.place(),this.filter()}_changeSpec(e){this.isDirtyFilter=!0}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case"spec":this._changeSpec(i.spec)}}),this.isDirtyRender=!0,super.changeProperties(e,t)}changeRenderScale(e,t){this.isDirtyFilter=!0,super.changeRenderScale(e,t)}place(){this.imageIsLoaded&&super.place()}filter(){this.cleanCachedTexture();const e=this.mimicNode.spec,t=this.pixiApp.renderer.resolution;if(void 0===e)return;const i=Object.getPrototypeOf(e).constructor.TYPE;switch(i){case"PGMDuotoneFilterSpec":this.filters.push(new o.default(e.intensity,[e.darkColor.red,e.darkColor.green,e.darkColor.blue],[e.lightColor.red,e.lightColor.green,e.lightColor.blue],t));break;case"PGMFillFilterSpec":this.filters.push(new a.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue,e.filterColor.alpha],t));break;case"PGMScreenFilterSpec":this.filters.push(new l.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t));break;case"PGMOverlayFilterSpec":this.filters.push(new h.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t));break;case"PGMColorTransformFilterSpec":this.filters.push(new n.default([e.rdot.red,e.rdot.green,e.rdot.blue,e.rdot.alpha,e.gdot.red,e.gdot.green,e.gdot.blue,e.gdot.alpha,e.bdot.red,e.bdot.green,e.bdot.blue,e.bdot.alpha,e.adot.red,e.adot.green,e.adot.blue,e.adot.alpha],[e.bias.red,e.bias.green,e.bias.blue,e.bias.alpha],t));break;case"PGMColorAdjustmentFilterSpec":this.filters.push(new c.default(e,t));break;case"PGMBlurFilterSpec":const s=this.renderScale,p=6*e.scaledBlur*s,g=e.edgeClamp;if(p>0){const e=Math.max(4,Math.min(15,Math.floor(p/2))),i=p/5,r=new u.KawaseBlurFilter(i,e,g);r.padding=g?0:Math.ceil(6*i),i<2.5&&(r.resolution=t),this.filters.push(r)}break;case"PGMBlendFilterSpec":const m=function(e){if(!e)return null;let t=e;if(t&&t.texture)return t;for(var i=0;i<e.children.length;++i)if(t=m(e.children[i]),t&&t.texture)return t;return null};let f=m(this.pixiDisplayObject);if(f&&f.texture){if(r.CoreAssert.isTrue(2==this.pixiDisplayObject.children.length,"what do we expect PostAlphablendFilter to do with children other than two?"),2==this.pixiDisplayObject.children.length){const i=this.pixiDisplayObject.children[0],r=this.pixiDisplayObject.children[1];i.renderable&&r.renderable&&(this.cachedTexture1=this.pixiApp.renderer.generateTexture(i,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution),this.cachedTexture2=this.pixiApp.renderer.generateTexture(r,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution),this.cachedTexture1&&this.cachedTexture2&&this.filters.push(new d.default(this.cachedTexture1,this.cachedTexture2,f,e.weights[0],e.weights[1],t)))}}else console.error("No sprite found -- image not loaded yet?. Disabling blending!");break;default:console.error("apply unknown filter",i)}super.filter()}}return e.TYPE="filter",e})();t.default=p},"3HR0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\n// Params for the first texture.\nuniform float weight0;\nuniform sampler2D uSampler0;\nuniform mat3 filterMatrix0;\n\n// Params for the second texture\nuniform float weight1;\nuniform sampler2D uSampler1;\n\n// Params for the second texture -- provided by Pixi and the name is fixed.\n// Furthermore the uvCoords are built for this one, so no matrix needed.\n// uniform sampler2D texture1;\n// uniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    vec2 texCoord0 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    vec2 texCoord1 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    lowp vec4 c0 = texture2D(uSampler0, texCoord0);\n    lowp vec4 c1 = texture2D(uSampler1, texCoord1);\n    lowp vec4 c2 = weight0 * c0 + weight1 * c1;\n    lowp vec4 c3 = vec4(\n                    c2.r * c2.a * c1.a * c0.a,\n                    c2.g * c2.a * c1.a * c0.a,\n                    c2.b * c2.a * c1.a * c0.a,\n                    c2.a * c1.a * c0.a\n                    );\n    gl_FragColor = c3;\n}\n\n";class s extends PIXI.Filter{constructor(e,t,i,s,n,o=1){super(null,r,{weight0:{type:"float",value:s},weight1:{type:"float",value:n},uSampler0:{type:"sampler2d",value:e},uSampler1:{type:"sampler2d",value:t},filterMatrix0:{type:"mat3",value:null}}),this.filterSprite=i,this.resolution=o}apply(e,t,i,r){const s=new PIXI.Matrix;this.uniforms.filterMatrix0=e.calculateSpriteMatrix(s,this.filterSprite),super.apply(e,t,i,r)}}t.default=s},"3hRk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameErrorEvent=t.FrameProductionCanceledEvent=t.FrameProductionCompleteEvent=t.FrameDataEvent=t.FrameEvent=void 0;class r{constructor(e){this.type=e}}t.FrameEvent=r;let s=(()=>{class e extends r{constructor(t,i,r){super(e.TYPE),this.frameIndex=t,this.time=i,this.image=r}}return e.TYPE="frame",e})();t.FrameDataEvent=s;let n=(()=>{class e extends r{constructor(){super(e.TYPE)}}return e.TYPE="complete",e})();t.FrameProductionCompleteEvent=n;let o=(()=>{class e extends r{constructor(){super(e.TYPE)}}return e.TYPE="canceled",e})();t.FrameProductionCanceledEvent=o;let a=(()=>{class e extends r{constructor(t){super(e.TYPE),this.err=t}}return e.TYPE="error",e})();t.FrameErrorEvent=a},"5m7E":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec4 filterColor;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = vec4(\n                    filterColor.r * textureColor.a,\n                    filterColor.g * textureColor.a,\n                    filterColor.b * textureColor.a,\n                    textureColor.a\n                    );\n\n}\n";class s extends PIXI.Filter{constructor(e,t=1){super(null,r,{filterColor:{type:"vec4",value:new Float32Array(e)}}),this.resolution=t}}t.default=s},"6ygk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiRenderer=void 0;const r=i("zrCk"),s=i("hhcO"),n=i("z8uW"),o=i("DAf/"),a=i("UzQk");t.PixiRenderer=class{constructor(e,t,i){this.host=e,this.defaultAssetLoader=t||new o.NullAssetLoader,this.log=i||a.CoreAssert.newLog("PixiRenderer"),this.imageService=new r.PixiImageService(this),this.liveViewService=new s.PixiLiveViewService(this),this.frameProductionService=new n.PixiFrameProductionService(this)}}},"7frk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("CkXF"),s=i("wYSo"),n=i("/Amf");let o=(()=>{class e extends r.default{constructor(e,t){super(e,t),this.maskContainer=new PIXI.Container,this.maskContentTransform=new PIXI.Container,this.maskingSprite=new PIXI.Sprite,this.maskBacking=new PIXI.Graphics,this.maskTextureBounds=new PIXI.Rectangle(0,0,1,1),this.isInitialized=!1,this.isInRenderQ=!1,this.currentRenderWidth=0,this.currentRenderHeight=0,this.debug("constructor()")}debug(e){}destroy(e){this.maskingSprite.destroy(),this.maskBacking.destroy(),this.maskContainer.destroy(),this.maskContentTransform.destroy(),this.artwork=null,this.mask=null,super.destroy(e)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}changeGlobalPlacement(e,t){this.isDirtyRender=!0,super.changeGlobalPlacement(e,t)}onChangeMaskArtwork(e){this.debug("mask artwork dirty"),this.isDirtyRender=!0}onFirstRenderInit(){this.maskContainer.addChild(this.maskBacking,this.maskContentTransform),this.pixiApp.stage.addChild(this.maskingSprite),this.artwork=this.pixiDisplayObject.children[0],this.mask=this.pixiDisplayObject.children[1],this.maskContentTransform.addChild(this.mask),this.debug("onFirstRenderInit"),this.mask.on(n.RenderDirtyEvent.TYPE,e=>this.onChangeMaskArtwork(e)),this.artwork.mask=this.maskingSprite,this.mask.on("image-loaded",()=>this.updateMaskTexture())}deferredRender(){this.isDestroyed||this.updateMaskTexture(),this.isInRenderQ=!1,this.notifyAsyncRenderEnd()}renderMask(e,t){if(e===this.currentRenderWidth&&t===this.currentRenderHeight)return;const i=this.pixiApp.stage.scale.x;this.currentRenderWidth=e,this.currentRenderHeight=t,this.maskContainer.scale.set(i),this.maskBacking.clear(),this.maskBacking.beginFill(16777215),this.maskBacking.drawRect(0,0,e/i,t/i),this.maskBacking.endFill(),this.maskTextureBounds.width=e,this.maskTextureBounds.height=t}render(){this.debug("render begin"),this.isInitialized||(this.onFirstRenderInit(),this.isInitialized=!0),this.updateMaskTexture(),!this.isInRenderQ&&s.default.instance.hasItemsInQueue()&&(this.notifyAsyncRenderBegin(),this.isInRenderQ=!0,s.default.instance.addLowPriority(this.deferredRender.bind(this))),super.render(),this.debug("render end")}updateMaskTexture(){this.renderMask(this.pixiApp.renderer.width,this.pixiApp.renderer.height),this.maskingSprite.texture&&this.maskingSprite.texture.destroy(!0);const e=new PIXI.Matrix(...this.globalPlacement.asArray);this.maskContentTransform.transform.setFromMatrix(e),this.maskingSprite.scale.set(1/this.pixiApp.stage.scale.x),this.maskingSprite.texture=this.pixiApp.renderer.generateTexture(this.maskContainer,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution,this.maskTextureBounds)}}return e.TYPE="luminosity-mask",e})();t.default=o},BTPj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},CkXF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");class s extends r.default{constructor(e,t){super(e,t),this.pendingRenders=0}notifyAsyncRenderBegin(){this.pendingRenders++,this.bubble("async-render-begin")}notifyAsyncRenderEnd(){this.bubble("async-render-end",this.pendingRenders),this.pendingRenders=0}}t.default=s},"DAf/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpPixiLoaderPlugin=t.NullAssetLoader=void 0;t.NullAssetLoader=class{getURLforContentID(e,t){throw new Error("You're using a NullAssetLoader, which can't load assets. ")}};t.NoOpPixiLoaderPlugin=class{pre(e,t){t()}use(e,t){t()}}},Ej8W:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderHints=void 0;const r=i("UzQk"),s=i("vr9a"),n=i("IHB5"),o=i("kSzJ"),a=i("sodY"),l=i("s96w"),h=a.default.instance;var c;!function(e){e.AsyncRender="async-render",e.FullQuality="full-quality",e.RenderSetup="render-setup"}(c||(c={}));class d{constructor(e){this.blockCount=0,this.graph=e.graph,this.time=e.time,this.target=e.target,this.assetLoader=e.assetLoader,this.fullQuality=e.fullQuality,this.fullValidation=e.fullValidation,this.completionPromise=new Promise((e,t)=>{this.completeResolve=()=>e()})}blockCompletion(e,t=1){this.blockCount+=t}unblockCompletion(e,t=1){this.blockCount-=t,0===this.blockCount&&window.setTimeout(()=>this.completeResolve(),0)}}class u{constructor(){this.isAnimating=!1}}t.RenderHints=u;let p=(()=>{class e{constructor(t){var i,s;this.id=`instance:${e.nextInstanceID++}`,this.hints=new u,this.pendingImageLoadCount=0,this.fullQualityBlockCount=0,this.backlog=0,this.graphVersion=0,this.defaultAssetLoader=t.assetLoader,this.renderQueue=new Promise((e,t)=>{setTimeout(e,50)}),this.pixiApp=t.hostAPI.createPixiApp({width:32,height:32,antialias:!0,transparent:!0,preserveDrawingBuffer:null!==(i=t.preserveDrawingBuffer)&&void 0!==i&&i,resolution:1,sharedTicker:!1,autoStart:!1}),this.pixiApp.stage.on("image-loaded",this.handleImageLoaded,this),this.pixiApp.stage.on("image-loading",this.handleImageLoading,this),this.pixiApp.stage.on("async-render-begin",this.handleAsyncRenderBegin,this),this.pixiApp.stage.on("async-render-end",this.handleAsyncRenderEnd,this),this.pixiApp.stage.on("background-text-rerender-begin",this.handleBackgroundTextRerenderBegin,this),this.pixiApp.stage.on("background-text-rerender-end",this.handleBackgroundTextRerenderEnd,this),this.listener=null!==(s=t.listener)&&void 0!==s?s:e=>{},this.log=t.log,this.mimicEngine=new r.PGMMimicEngine(this,new r.PGMMimicConformerOptions(!0)),this.rootContainer=new PIXI.Container,this.pixiApp.stage.addChild(this.rootContainer),t.addDebugText&&(this.debugText=new PIXI.Text("FPS",{fontFamily:"Arial",fontSize:24,fill:16715792,align:"left"}),this.debugGraphic=new PIXI.Graphics(!0),this.pixiApp.stage.addChild(this.debugGraphic,this.debugText))}getGLRenderer(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer:null}getRootRenderTarget(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer.rootRenderTarget:null}handleAsyncRenderBegin(){this.activeRender&&this.activeRender.blockCompletion(c.AsyncRender)}handleAsyncRenderEnd(){this.activeRender&&this.activeRender.unblockCompletion(c.AsyncRender)}blockFullQuality(){this.fullQualityBlockCount++}unblockFullQuality(){var t;this.fullQualityBlockCount--,this.listener(e.EVT_FULL_QUALITY_UPDATE),0===this.fullQualityBlockCount&&((null===(t=this.activeRender)||void 0===t?void 0:t.fullQuality)&&this.activeRender.unblockCompletion(c.FullQuality),this.listener(e.EVT_FULL_QUALITY_COMPLETE))}handleImageLoaded(){this.unblockFullQuality(),this.pendingImageLoadCount--,0===this.pendingImageLoadCount&&this.listener(e.EVT_LOADING_IMAGES_END)}handleImageLoading(){this.blockFullQuality(),this.pendingImageLoadCount++,1===this.pendingImageLoadCount&&this.listener(e.EVT_LOADING_IMAGES_BEGIN)}handleBackgroundTextRerenderBegin(){this.blockFullQuality()}handleBackgroundTextRerenderEnd(){this.unblockFullQuality()}setDebugText(e){this.debugText&&(this.debugText.text=e)}getDebugGraphic(){return this.debugGraphic}render(t,i,r,n){var o,a,h,u;if(null==t)return Promise.reject(new Error("PixiAsyncRenderer: can't render a null graph"));const p=null!==(o=n.assetLoader)&&void 0!==o?o:this.defaultAssetLoader,g=null!==(a=n.demultiplyAndFlip)&&void 0!==a&&a,m=null===(h=n.fullQuality)||void 0===h||h,f=null!==(u=n.postRenderCallback)&&void 0!==u?u:null;this.backlog++,this.backlog>10&&this.log.warning(`backlog is ${this.backlog}`);let x,y=!1;return this.renderQueue=this.renderQueue.then(()=>{var n,o;this.backlog--,this.listener(e.EVT_START_RENDER);const{width:a,height:h}=i,u=e.scaleToFitOrFill(a,h,t.bounds.aspectRatio,i.transformType==s.TargetTransformTypeEnum.FillCentered).width/t.bounds.width,f=!this.currentRenderSize||this.currentRenderSize.width!==a||this.currentRenderSize.height!==h||this.currentRenderScale!==u;return this.activeRender=new d({graph:t,time:r,target:i,assetLoader:p,fullQuality:m,fullValidation:f}),this.activeRender.blockCompletion(c.RenderSetup),f&&(this.currentRenderScale=u,this.currentRenderSize={width:a,height:h},this.pixiApp.setSize(a,h),this.pixiApp.renderer.resize(a,h),this.pixiApp.stage.scale.set(u)),t!==this.mimicEngine.graph&&this.graphVersion++,g?(this.demultiplyFilter=null!==(n=this.demultiplyFilter)&&void 0!==n?n:new l.default(this.pixiApp.renderer.resolution),this.rootContainer.filters=[this.demultiplyFilter]):this.rootContainer.filters=[],this.debug(`conform begin (graph=${this.graphVersion} time=${r})`),this.mimicEngine.graph=t,this.mimicEngine.time=r,this.mimicEngine.conform(),this.debug("conform end"),f&&(null===(o=this.mimicEngine.document.root)||void 0===o||o.visitPostOrder(e=>(e.binding.validate(),!1))),m&&this.fullQualityBlockCount>0&&this.activeRender.blockCompletion(c.FullQuality),this.activeRender.unblockCompletion(c.RenderSetup),this.activeRender.completionPromise}).then(()=>(this.pixiApp.renderer&&this.pixiApp.renderer.render(this.pixiApp.stage),null==f?void 0:f())).catch(e=>{y=!0,x=e}).then(()=>{this.activeRender=null,this.listener(e.EVT_END_RENDER)}),this.renderQueue.then(()=>{if(y)throw x})}debug(e){}get canvas(){return this.pixiApp.view}destroy(){h.reset(this.id),this.pixiApp.destroyAll()}static scaleToFitOrFill(e,t,i,r){const s=e/t,n={width:e,height:t};return(r?s>i:s<i)?n.width=Math.round(n.height*i):n.height=Math.round(n.width/i),n}bindDocument(e){return this}bindNode(e){return n.default.viewInstanceForMimicNode(e,this)}createNode(e,t){return null}beginConform(e,t,i){}endConform(e,t,i){}setRoot(e,t){this.rootContainer.removeChildren(),this.rootContainer.addChild(t.binding.pixiDisplayObject)}}return e.nextInstanceID=0,e.EVT_LOADING_IMAGES_BEGIN="loading-images-begin",e.EVT_LOADING_IMAGES_END="loading-images-end",e.EVT_START_RENDER="start-render",e.EVT_END_RENDER="end-render",e.EVT_FULL_QUALITY_UPDATE="full-quality-update",e.EVT_FULL_QUALITY_COMPLETE="full-quality-complete",e})();t.default=p},Escq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphTransportUtils=void 0;const r=i("UzQk");t.GraphTransportUtils=class{static convertAllLocalCompositeToExternalCC(e,t){let i=0,s={};return e.resources.forEach((e,n)=>{const o=n.storage;o instanceof r.StorageSpecLocalComposite?(s[e]=new r.PGMResourceProvider(n.contentType,new r.StorageSpecExternalCC(r.StorageSpecExternalCC.POST_DOCUMENTS_SYNC_GROUP,t,o.componentID,null,o.contentType||n.contentType,null,null)),i++):s[e]=n}),0===i?e:e.withResources(new r.PGMResourceProviderList(s))}}},H02z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiAnimationFrameRenderer=void 0;const r=i("UzQk"),s=i("vr9a"),n=i("xBmG"),o=i("Ej8W"),a=i("uzmb");t.PixiAnimationFrameRenderer=class{constructor(e){this.graph=r.PGMGraph.EMPTY,this.dynamicParams=n.LiveViewDynamicRenderParams.DEFAULT,this.isSetupDirty=!0,this.rerenderNextTick=!1,this.lastRenderedGraph=null,this.lastRenderedTime=-1,this.lastRenderedTarget=null,this.waitingFrame=null,this.currentFrame=null,this.lastNow=0,this.renderer=new o.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!1,addDebugText:e.debugMode,listener:e=>this.handleAsyncRendererEvent(e)}),this.debugMode=e.debugMode||!1,this.targetParams=e.initialParameters||s.TargetRenderParameters.fit(32,32,a.RawEncoding.AsBuffer()),this.listener=e.listener||null,this.ticker=new PIXI.ticker.Ticker,this.ticker.autoStart=!1,this.ticker.add(this.handleAnimationTick,this),this.ticker.stop(),this.debugMode&&(this.fpsTimes=[],this.fpsDisplayTime=0)}startTicker(){this.ticker.started||this.ticker.start()}setupDirty(){this.isSetupDirty=!0,this.startTicker()}doRerenderNextTick(){this.rerenderNextTick=!0,this.startTicker()}handleAsyncRendererEvent(e){e===o.default.EVT_LOADING_IMAGES_BEGIN?this.listener&&this.listener.onLoadingImagesBegin():e===o.default.EVT_LOADING_IMAGES_END?this.listener&&this.listener.onLoadingImagesEnd():e===o.default.EVT_FULL_QUALITY_UPDATE?this.doRerenderNextTick():e===o.default.EVT_END_RENDER&&(this.handleEndRenderEvent(),this.listener&&this.listener.onFrameRender(this.lastRenderedGraph,this.lastRenderedTime))}setTargetParameters(e){this.targetParams=e,this.setupDirty()}render(e,t){this.graph=e,this.dynamicParams=t||n.LiveViewDynamicRenderParams.DEFAULT,this.setupDirty()}get canvas(){return this.renderer.canvas}handleAnimationTick(e){if(!this.renderer.pixiApp.renderer)return;let t=0;const i=Date.now(),r=i-this.lastNow;if(this.lastNow=i,this.isSetupDirty&&(this.graph.duration>0?(this.animationStartTimeMS=Date.now(),t=this.dynamicParams.startTime,this.renderer.hints.isAnimating=!0):(this.renderer.hints.isAnimating=!1,t=0),this.isSetupDirty=!1),this.graph.duration>0){const e=(i-this.animationStartTimeMS)/1e3,r=this.dynamicParams.startTime,s=(this.dynamicParams.endTime>=r?this.dynamicParams.endTime:this.graph.duration)-r;s>0&&(t=e>s?this.dynamicParams.loop?r+e%s:r+s:r+e)}if(this.rerenderNextTick)this.rerenderNextTick=!1;else if(r>0&&this.graph===this.lastRenderedGraph&&t===this.lastRenderedTime&&this.targetParams===this.lastRenderedTarget)return this.graph.duration>0&&this.listener&&this.listener.onAnimationComplete(this.graph),void this.ticker.stop();this.submitFrame({graph:this.graph,target:this.targetParams,time:t}),this.lastRenderedGraph=this.graph,this.lastRenderedTime=t,this.lastRenderedTarget=this.targetParams,this.debugMode&&this.renderFPS()}handleEndRenderEvent(){this.waitingFrame?(this.renderer.render(this.waitingFrame.graph,this.waitingFrame.target,this.waitingFrame.time,{fullQuality:!1}),this.currentFrame=this.waitingFrame,this.waitingFrame=null):this.currentFrame=null}submitFrame(e){this.waitingFrame=e,this.currentFrame||this.handleEndRenderEvent()}renderFPS(){const e=this.fpsTimes||[],t=e.length,i=this.renderer.getDebugGraphic();let r=100,s=30,n=Math.round(PIXI.ticker.shared.FPS);t>100&&(n=Math.round((n+e[t-1]+e[t-2])/3)),t>120&&e.shift(),this.fpsTimes.push(n),this.fpsDisplayTime=(29*this.fpsDisplayTime+n)/30,this.renderer.setDebugText(` FPS ${Math.round(this.fpsDisplayTime)}`),i.clear(),i.beginFill(16777215),i.drawRect(0,0,344,34),i.beginFill(16711680),i.drawRect(100,0,240,30),i.beginFill(0),i.lineStyle(1,16777215),i.moveTo(r,0);for(var o=e.length-1;o>=2;o--){s=30-(e[o]+e[o-1]+e[o-2])/3/2,i.lineTo(r,s),r+=2}i.lineTo(r,0)}destroy(){this.ticker.remove(this.handleAnimationTick,this),this.renderer.destroy()}}},IHB5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("hUdH"),s=i("7frk"),n=i("eoxN"),o=i("vKWb"),a=i("vDtG"),l=i("kQtw"),h=i("213o"),c=i("UzQk");let d=(()=>{class e{static viewClassLookupForPgmNode(e){return this.lookup[this.viewTypeForPgmNode(e)]||this.lookup[this.DEFAULT_TYPE]}static viewTypeForPgmNode(e){let t=e.type.replace("pgm-","");return e instanceof c.PGMFilter&&"PGMMaskFilterSpec"===Object.getPrototypeOf(e.spec).constructor.TYPE&&(t="luminosity-mask"),t}static viewInstanceForMimicNode(e,t){return new(this.viewClassLookupForPgmNode(e.ref.child))(e,t)}}return e.DEFAULT_TYPE=l.default.TYPE,e.lookup={[r.default.TYPE]:r.default,[s.default.TYPE]:s.default,[n.default.TYPE]:n.default,[o.default.TYPE]:o.default,[a.default.TYPE]:a.default,[l.default.TYPE]:l.default,[h.default.TYPE]:h.default},e})();t.default=d},JuUW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\n    //lowp vec4 inputColor = (textureColor + 0.5) * 0.5;\n    lowp vec4 inputColor = textureColor;\n\n\n    gl_FragColor = vec4(\n                    (inputColor.r < 0.5 ? (2.0 * inputColor.r * filterColor.r) : (1.0 - 2.0 * (1.0 - inputColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n                    (inputColor.g < 0.5 ? (2.0 * inputColor.g * filterColor.g) : (1.0 - 2.0 * (1.0 - inputColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n                    (inputColor.b < 0.5 ? (2.0 * inputColor.b * filterColor.b) : (1.0 - 2.0 * (1.0 - inputColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n                    textureColor.a\n                    );\n}\n";class s extends PIXI.Filter{constructor(e,t=1){super(null,r,{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=s},LBjK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("p17C"),n="\nprecision highp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\nuniform sampler2D u_colorShadowsHighlightsSampler;\nuniform sampler2D u_threeChannelColorMapSampler;\nuniform mat4 u_colorMatrix;\n\nvoid main(void) {\n    vec4 color = texture2D(inputImageTexture, vTextureCoord);\n\n    color.r = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.r)).r;\n    color.g = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.g)).r;\n    color.b = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.b)).r;\n\n    float intensity = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\n\n    float shDiff = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, intensity)).g - intensity;\n\n    color.rgb += shDiff;\n\n    color.rgb = clamp(color.rgb, 0.0, 1.0);\n\n    vec4 colorMatrixRGB = vec4(color.rgb, 1.0);\n\n    colorMatrixRGB = colorMatrixRGB * u_colorMatrix;\n\n    colorMatrixRGB = clamp(colorMatrixRGB, 0.0, 1.0);\n\n    colorMatrixRGB.r = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.r)).r;\n    colorMatrixRGB.g = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.g)).g;\n    colorMatrixRGB.b = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.b)).b;\n\n    gl_FragColor = vec4(\n        colorMatrixRGB.r * color.a,\n        colorMatrixRGB.g * color.a,\n        colorMatrixRGB.b * color.a,\n        color.a\n    );\n}\n";class o extends PIXI.Filter{constructor(e,t=1){var i=r.MoaAdjustments.computeColorMaps(e),o=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;o[t]=i.colorMap[e]+.5|0,o[t+1]=i.sMap[e]+i.hMap[e]-e+.5|0,o[t+2]=0,o[t+3]=255}for(let e=0;e<4;e++)i.cm.push(0);var a=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;a[t]=i.threeChannelColorMap[0][e],a[t+1]=i.threeChannelColorMap[1][e],a[t+2]=i.threeChannelColorMap[2][e],a[t+3]=255}const l=new PIXI.Container,h=s.default.getRGBADataAsSprite(1,256,o,l),c=s.default.getRGBADataAsSprite(1,256,a,l),d=i.cm;super(null,n,{u_colorShadowsHighlightsSampler:{type:"sampler2D",value:h.texture},u_threeChannelColorMapSampler:{type:"sampler2D",value:c.texture},u_colorMatrix:{type:"mat4",value:new Float32Array(d)}}),this.resolution=t,this.container=l,this.shadowHighlightSprite=h,this.threeChannelSprite=c}destroy(){this.shadowHighlightSprite.destroy(),this.threeChannelSprite.destroy(),this.container.destroy(),this.shadowHighlightSprite=null,this.threeChannelSprite=null,this.container=null}}t.default=o},Lkow:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=t.PixiJSApp=void 0,i("kSzJ");const r=i("xGui");t.PixiJSApp=r;const s=i("Ovj2");Object.defineProperty(t,"PixiJSRenderer",{enumerable:!0,get:function(){return s.PixiJSRenderer}})},NG98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\n// These must be premultiplied alpha!\nuniform vec4 redColor;\nuniform vec4 greenColor;\nuniform vec4 blueColor;\n\nuniform float alpha;\n\nvoid main()\n{\n\tlowp vec4 tex = texture2D(inputImageTexture, vTextureCoord);\n\t\n\t// The color multiplication is applied as a weighted average\n\t// of the r/g/b channel artwork, to accommodate any AA against\n\t// the background or between channels.\n\tfloat sum = tex.r + tex.g + tex.b;\n\tif (sum > 0.0) {\n\t\tgl_FragColor = (redColor * tex.r / sum\n\t\t\t+ greenColor * tex.g / sum\n\t\t\t+ blueColor * tex.b / sum) * tex.a * alpha;\n\t}\n}\n";class n extends PIXI.Filter{constructor(e=r.SolidColor.ZERO,t=r.SolidColor.ZERO,i=r.SolidColor.ZERO,n=1,o=1){super(null,s,{redColor:{type:"vec4",value:new Float32Array(e.asArrayPremultipliedAlpha)},greenColor:{type:"vec4",value:new Float32Array(t.asArrayPremultipliedAlpha)},blueColor:{type:"vec4",value:new Float32Array(i.asArrayPremultipliedAlpha)},alpha:{type:"float",value:n}}),this.resolution=o}set redChannelArtworkColor(e){this.uniforms.redColor=new Float32Array(e.asArrayPremultipliedAlpha)}set greenChannelArtworkColor(e){this.uniforms.greenColor=new Float32Array(e.asArrayPremultipliedAlpha)}set blueChannelArtworkColor(e){this.uniforms.blueColor=new Float32Array(e.asArrayPremultipliedAlpha)}set alpha(e){this.uniforms.alpha=e}}t.default=n},Ovj2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=void 0;const r=i("xGui"),s=i("Xw6L");class n extends r.PixiRenderer{constructor(e){super(new s.PixiWebHost,e)}}t.PixiJSRenderer=n},RyLA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("0gjg"),s=.5522848;t.default=class{constructor(e,t){this.ctx=e,this.colorTable=t,this.filled=!1,this.ctx.beginPath()}beginGroup(){}endGroup(){}beginClipGroup(e){}endClipGroup(){}fill(e,t){}stroke(e,t,i){this.ctx.lineWidth=i,t=t||this.colorTable.color(e),this.ctx.strokeStyle=r.default.toCSS(r.default.solidColor2Rgba(t)),this.ctx.stroke()}rectangle(e,t,i,r){this.ctx.rect(e,t,i-e,r-t)}ellipse(e,t,i,r){var n=i-e,o=r-t,a=n/2*s,l=o/2*s,h=e+n/2,c=t+o/2;this.ctx.moveTo(e,c),this.ctx.bezierCurveTo(e,c-l,h-a,t,h,t),this.ctx.bezierCurveTo(h+a,t,i,c-l,i,c),this.ctx.bezierCurveTo(i,c+l,h+a,r,h,r),this.ctx.bezierCurveTo(h-a,r,e,c+l,e,c),this.ctx.closePath()}newPath(e,t,i,r,s){this.ctx.beginPath(),this.fillRule=e,this.endCap=t,this.join=i,this.strokeWt=r,this.miterLimit=s}moveTo(e,t){this.ctx.moveTo(e,t)}lineTo(e,t){this.ctx.lineTo(e,t)}cubicBezier(e,t,i,r,s,n){this.ctx.bezierCurveTo(e,t,i,r,s,n)}quadraticBezier(e,t,i,r){this.ctx.quadraticCurveTo(e,t,i,r)}closePath(){this.ctx.closePath()}done(){}}},W4vr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},Xw6L:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebHost=void 0;const r=i("jsS/");t.PixiWebHost=class{constructor(){}createPixiApp(e){return new r.PixiWebApplication(e)}}},bNrw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("0gjg"),n=[1,0,0,1,0,0],o=1024;function a(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}let l=(()=>{class e{constructor(){this.width=1,this.height=1,this.tracking=0,this.fontSize=0,this.strokeWidth=0,this.fillColor="rgba(0, 0, 0, 1)",this.strokeColor="rgba(0, 0, 0, 0)",this.text="",this.font="",this.transform=n,this.isPowerOfTwo=!0,this.renderRuns=r.PGMRenderRuns.EMPTY,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=10,this.canvas.height=10,this.context.textAlign="left",this.context.textBaseline="alphabetic"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setSize(e,t){return this.width=Math.ceil(e),this.height=Math.ceil(t),this}setTransform(e){return this.transform=e,this}setText(e){return this.text=e,this}setTracking(e){return this.tracking=e||0,this}setFontSize(e){return this.fontSize=e,this}setFont(e){return this.font=e,this}setFillColor(e){return this.fillColor=e,this}setStrokeColor(e){return this.strokeColor=e,this}setStrokeWidth(e){return this.strokeWidth=e,this}setRenderRuns(e){return this.renderRuns=e,this}getCanvas(){return this.canvas}disable(){return this.canvas.width=1,this.canvas.height=1,this}destroy(){return this.canvas=null,this.context=null,this}getNextPosition(e,t,i){let r=0;const s=e.charAt(t);if(t<e.length-1){const n=e.charAt(t+1),o=this.context.measureText(n).width;if(i)r-=o,r-=this.tracking*this.fontSize;else{let e=s+n;r+=this.context.measureText(e).width-o,r+=this.tracking*this.fontSize}}return r}fillTextWithEffects(e,t,i){this.strokeWidth?(this.context.strokeText(e,t,i),this.fillColor?this.context.fillText(e,t,i):(this.context.globalAlpha=1,this.context.globalCompositeOperation="destination-out",this.context.fillText(e,t,i),this.context.globalCompositeOperation="source-over")):this.context.fillText(e,t,i)}drawSegment(e,t,i,r,s,n){let o=s;const a=e.substr(t,i-t);if(r){const t=e.substr(0,i);o-=this.context.measureText(t).width}else if(0!=t){const i=e.substr(0,t),r=this.context.measureText(i).width;o+=r;const s=this.context.measureText(a).width;let n=i+a;o+=this.context.measureText(n).width-(r+s)}this.fillTextWithEffects(a,o,n)}solidColorToHex(e){const t=Math.round(255*e.alpha).toString(16),i=1===t.length?"0"+t:t;return`#${s.default.rgb2hex(e)}`+i}render(){const e=this.width>o,t=this.height>o;this.isPowerOfTwo=!e&&!t,this.canvas.width=e?this.width:a(this.width),this.canvas.height=t?this.height:a(this.height),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform),this.context.font=this.font,this.fillColor&&(this.context.fillStyle=this.fillColor),this.strokeColor&&(this.context.strokeStyle=this.strokeColor),this.strokeWidth&&(this.context.lineWidth=this.strokeWidth,this.strokeWidth/this.fontSize>.06&&(this.context.lineJoin="round"),this.strokeWidth/this.fontSize>.02?this.context.miterLimit=2:this.strokeWidth>.01&&(this.context.miterLimit=5));let i=0,s=0,n=this.renderRuns.fillColors.runArrays;if(0===this.tracking&&0===n.length)this.fillTextWithEffects(this.text,i,s);else{let e=0,t=0,o=this.text;const a=0!==this.tracking,d="‫"==this.text.charAt(0);if(d){o=this.text.substr(1),i=this.context.measureText(this.text).width+this.fontSize*this.tracking*(o.length-1),a&&(i-=this.context.measureText(o.charAt(0)).width),t=i}if(0!==this.tracking&&0===n.length){const e=new r.SolidColorRuns;e.apply(r.SolidColor.BLACK,new r.TextRange(0,o.length)),n=e.runArrays}for(var l=0;l<n.length;l++){const r=n[l];if(r.attr.alpha>0){if(this.renderRuns.fillColors.runArrays.length>0&&(this.context.fillStyle=this.solidColorToHex(r.attr),this.context.strokeStyle=this.solidColorToHex(this.renderRuns.strokeColors.runArrays[l].attr)),a){if(e!=r.range.start){e>r.range.start&&(i=t,s=0,e=0);for(var h=e;h<r.range.start;h++)i+=this.getNextPosition(o,h,d),e+=1}for(var c=r.range.start;c<r.range.end&&c<o.length;c++){let t=o.charAt(c);this.fillTextWithEffects(t,i,s),i+=this.getNextPosition(o,c,d),e+=1}}else{let e=r.range.end;e>o.length&&o.length,this.drawSegment(o,r.range.start,e,d,t,s)}this.context.fillStyle=this.fillColor,this.context.strokeStyle=this.strokeColor}}}return this}}return e.instance=new e,e})();t.default=l},eoxN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),s=i("xtw7"),n=i("0gjg"),o=i("lzL7"),a=i("UzQk"),l=i("NG98");let h=(()=>{class e extends r.default{constructor(t,i){super(t,i),this.transform=new PIXI.Transform,this.textureSharpness=1,this.shouldClipRenderToDocumentBounds=!1,this.padding=0,this.cssColor="#000000",this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=null,this.baseTexture=new PIXI.BaseTexture(e.sharedTextureSource.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite);const r=t;this._changeBounds(r.bounds),this._changeColor(r.color),this._changePaths(r.paths)}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,s=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,s)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}_changeBounds(e){}_changeColor(e){this.isDirtyFilter=!0,this.cssColor=n.default.rgba2css(e)}_changePaths(e){this.isDirtyRender=!0,this.padding=e.reduce((e,t)=>("none"===t.pathFillType&&t.pathStrokeWeight>0&&(e=Math.max(e,t.pathStrokeWeight/2)),e),0)}autoApplyAlphaFilter(){return!1}filter(){this.colorizeFilter||(this.colorizeFilter=new l.default),this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.colorizeFilter.redChannelArtworkColor=this.mimicNode.color,this.colorizeFilter.alpha=this.opacity,this.filters.push(this.colorizeFilter),super.filter()}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case a.PGMMimicShapeNode.PROP_BOUNDS:this._changeBounds(i.bounds);break;case a.PGMMimicShapeNode.PROP_COLOR:this._changeColor(i.color);break;case a.PGMMimicShapeNode.PROP_PATHS:this._changePaths(i.paths);break;case a.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`shape is ignoring property '${e}' change notice`)}})}validate(){const e=this.mimicNode,t=this.asyncRenderer.activeRender.graph.bounds.area,i=r.default.areaOfBoundsAtDocumentScale(this.globalPlacement,e.bounds),s=e.ctm.asArray,n=o.default.decomposeScale(s),a=e.bounds.width*n.x,l=e.bounds.height*n.y;this.shouldClipRenderToDocumentBounds=t<i,this.shouldClipRenderToDocumentBounds?o.default.equal(this.globalTransform,s)||(this.isDirtyRender=!0):this.globalBoundsWidth===a&&this.globalBoundsHeight===l||(this.isDirtyRender=!0),this.globalBoundsWidth=a,this.globalBoundsHeight=l,this.globalTransform=s,super.validate()}place(){const e=o.default.decompose(this.localPlacement.asArray),t=e.position,i=e.rotation,r=e.scale,s=e.skew;this.shouldClipRenderToDocumentBounds?this.pixiDisplayObject.setTransform(t.x,t.y,r.x,r.y,i,s.x,s.y,0,0):this.pixiDisplayObject.setTransform(t.x,t.y,1,1,i,s.x,s.y,0,0),this.isDirtyPlacement=!1}renderShapeAtOwnBounds(){const t=this.mimicNode.bounds,i=this.renderScale,r=this.globalScale,s=this.localScale,n=t.minX,o=t.minY,a=this.padding,l=r.x,h=r.y,c=s.x,d=s.y,u=i*this.textureSharpness*this.pixiApp.renderer.resolution,p=u*l,g=u*h,m=(n-a)*c,f=(o-a)*d,x=c*(1/p),y=d*(1/g),b=t.width*p+a*p*2,T=t.height*g+a*g*2,v=[p,0,0,g,p*(a-n),g*(a-o)];e.sharedTextureSource.setSize(b,T).setTransform(v),this.sprite.setTransform(m,f,x,y,0,0,0,0,0)}renderShapeClippedToDocumentBounds(){const t=this.renderScale,i=this.asyncRenderer.activeRender.graph.bounds.width,r=this.asyncRenderer.activeRender.graph.bounds.height,s=t*this.textureSharpness*this.pixiApp.renderer.resolution,n=i*s,a=r*s,l=o.default.getScalingTransform(s,s),h=o.default.multiply([],l,this.globalPlacement.asArray),c=o.default.invert([],h);e.sharedTextureSource.setSize(n,a).setTransform(h);const d=o.default.decompose(c),u=d.position,p=d.rotation,g=d.scale,m=d.skew;this.sprite.setTransform(u.x,u.y,g.x,g.y,p,m.x,m.y,0,0)}render(){const t=this.mimicNode,i=this.baseTexture,r=this.texture;e.sharedTextureSource.begin(),this.shouldClipRenderToDocumentBounds?this.renderShapeClippedToDocumentBounds():this.renderShapeAtOwnBounds(),e.sharedTextureSource.setColor("#FF0000").setPaths(t.paths).render().end(),i.realWidth=i.source.width,i.realHeight=i.source.height,i.width=i.realWidth/i.resolution,i.height=i.realHeight/i.resolution,i.isPowerOfTwo=e.sharedTextureSource.isPowerOfTwo,r._updateID++,r._frame.width=i.width,r._frame.height=i.height,this.pixiApp.renderer.textureManager.updateTexture(i),super.render()}destroy(e){this.sprite.destroy(),super.destroy(e)}}return e.TYPE="shape",e.sharedTextureSource=new s.default,e})();t.default=h},fziT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float intensity;\nuniform vec3 firstColor;\nuniform vec3 secondColor;\n\nconst mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvec4 duotone(vec4 colorIn) {\n    float luminance = dot(colorIn.rgb, luminanceWeighting);\n    lowp vec4 outputColor = vec4( mix(firstColor.rgb, secondColor.rgb, luminance), colorIn.a);\n    outputColor.r = outputColor.r * colorIn.a;\n    outputColor.g = outputColor.g * colorIn.a;\n    outputColor.b = outputColor.b * colorIn.a;\n    return vec4( mix(colorIn.rgb, outputColor.rgb, intensity), colorIn.a);\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = duotone(textureColor);\n}\n";class s extends PIXI.Filter{constructor(e,t,i,s=1){super(null,r,{intensity:{type:"float",value:e},firstColor:{type:"vec3",value:new Float32Array(t)},secondColor:{type:"vec3",value:new Float32Array(i)}}),this.resolution=s}}t.default=s},hUdH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("CkXF"),n=i("sodY");var o;!function(e){e.NOT_LOADED="not_loaded",e.LOADING="loading",e.LOADED="loaded"}(o||(o={}));const a=n.default.instance;let l=(()=>{class e extends s.default{constructor(e,t){super(e,t),this.imageSprite=null,this.currentUrl=null,this.width=1,this.height=1,this.status=o.NOT_LOADED;const i=e;this._changeBounds(i.bounds),this._changeContent()}destroy(e){this.pendingRenders>0&&this.notifyAsyncRenderEnd(),this.imageSprite&&this.imageSprite.destroy(),super.destroy(e)}place(){if(this.status===o.LOADED){if(!this.asyncRenderer||!this.asyncRenderer.hints.isAnimating){const e=this.globalScale,t=this.renderScale,i=t*e.x,r=t*e.y,s=this.globalPlacement.tx,n=this.globalPlacement.ty,o=this.imageSprite.texture.width,a=this.imageSprite.texture.height,l=this.width/o,h=this.height/a,c=t*s,d=t*n,u=(Math.floor(c)-c)/i,p=(Math.floor(d)-d)/r,g=o*i,m=a*r,f=Math.ceil(g)/g,x=Math.ceil(m)/m;this.imageSprite.scale.x=f*l,this.imageSprite.scale.y=x*h,this.imageSprite.position.x=u,this.imageSprite.position.y=p}super.place()}}handleTextureLoaded(e){this.isDestroyed||(this.status=o.LOADED,this.imageSprite?this.imageSprite.texture=e:(this.imageSprite=new PIXI.Sprite(e),this.pixiDisplayObject.addChild(this.imageSprite)),this.place(),this.emitLoaded())}emitLoaded(){this.isDestroyed||this.status!==o.LOADED||(this.bubble("image-loaded"),this.notifyAsyncRenderEnd())}load(){this.bubble("image-loading"),this.status=o.LOADING,a.load(this.currentUrl,this.handleTextureLoaded.bind(this),this.asyncRenderer.activeRender.assetLoader,this.asyncRenderer.id)}render(){this.status!==o.NOT_LOADED&&this.status!==o.LOADING||this.notifyAsyncRenderBegin(),this.isDirtyRender&&this.status===o.NOT_LOADED&&this.load(),super.render()}_changeBounds(e){this.width=e.width||1,this.height=e.height||1}_changeContent(){const e=this.mimicNode,t=this.asyncRenderer.activeRender,i=t.assetLoader.getURLforContentID(t.graph,e.contentID);i!==this.currentUrl&&(this.currentUrl=i,this.status=o.NOT_LOADED,this.bubble("image-not-loaded"))}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case r.PGMMimicMediaNode.PROP_BOUNDS:this._changeBounds(i.bounds);break;case r.PGMMimicMediaNode.PROP_CONTENT_ID:break;case r.PGMMimicMediaNode.PROP_CONTENT_RESOURCE:this._changeContent()}}),this.isDirtyRender=!0,super.changeProperties(e,t)}}return e.TYPE="image",e})();t.default=l},hhcO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiLiveViewService=void 0;const r=i("xBmG"),s=i("vr9a"),n=i("H02z"),o=i("uzmb");class a{constructor(e,t){this.target=e,this.cbfn=t}cancel(){this.target.removeEventListener(this)}}class l{constructor(e,t){this.listeners=[],this.api=e,this.renderer=new n.PixiAnimationFrameRenderer({hostAPI:e.host,assetLoader:t,log:e.log,listener:this})}destroy(){this.renderer.destroy()}getCanvas(){return this.renderer.canvas}addEventListener(e){const t=new a(this,e);return this.listeners.push(t),t}removeEventListener(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}notify(e){this.listeners.forEach(t=>t.cbfn(e))}onFrameRender(e,t){this.notify(new r.LiveViewFrameRenderCompleteEvent(e,t))}onAnimationComplete(e){this.notify(new r.LiveViewAnimationRenderCompleteEvent(e))}onLoadingImagesBegin(){this.notify(new r.LiveViewLoadingImagesBeginEvent)}onLoadingImagesEnd(){this.notify(new r.LiveViewLoadingImagesEndEvent)}setSize(e,t,i){i=i||1,this.renderer.setTargetParameters({transformType:s.TargetTransformTypeEnum.FitCentered,width:e*i,height:t*i,encoding:o.RawEncoding.AsBuffer()})}render(e,t){this.renderer.render(e,t)}}t.PixiLiveViewService=class{constructor(e,t){this.api=e,this.assetLoader=t||e.defaultAssetLoader}createView(e){return new l(this.api,e||this.assetLoader)}}},hxFN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform mat4 colorMatrix;\nuniform vec4 colorBias;\n\nvec4 colorTransform(vec4 colorIn) {\n    return colorMatrix * colorIn + colorBias;\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = colorTransform(textureColor);\n}\n";class s extends PIXI.Filter{constructor(e,t,i=1){super(null,r,{colorMatrix:{type:"mat4",value:new Float32Array(e)},colorBias:{type:"vec4",value:new Float32Array(t)}}),this.resolution=i}}t.default=s},"jsS/":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebApplication=void 0;const r=i("xGui");class s extends PIXI.Application{constructor(e){super(e)}setSize(e,t){this.view.width=e,this.view.height=t}render(){return new Promise((e,t)=>{this.renderer.once("postrender",()=>{e()}),this.renderer.render(this.stage)})}renderToImage(){return new Promise((t,i)=>{this.renderer.once("postrender",()=>{const i=this.view.width,s=this.view.height;let n;if(this.renderer instanceof PIXI.WebGLRenderer){const t=this.renderer.gl;n=e.alloc(i*s*4),t.readPixels(0,0,i,s,t.RGBA,t.UNSIGNED_BYTE,n),function(e,t,i){for(var r=0;r<i/2;r++){let n=r*t*4,o=(i-1-r)*t*4;for(var s=4*t;s>0;s--,n++,o++){let t=e[n];e[n]=e[o],e[o]=t}}}(n,i,s)}else{const t=this.renderer.rootContext.getImageData(0,0,i,s).data;n=e.from(t.buffer)}t({encoding:r.RawEncoding.AsBuffer(),data:n,width:i,height:s})}),this.renderer.render(this.stage)})}destroyAll(){this.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}}t.PixiWebApplication=s}).call(this,i("HDXh").Buffer)},kQtw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");let s=(()=>{class e extends r.default{}return e.TYPE="group",e})();t.default=s},lzL7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static get defaultMatrix(){return[1,0,0,1,0,0]}static equal(e,t){return e&&t?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]:!e==!t}static getScalingTransform(e,t){return[e,0,0,t,0,0]}static scale(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r*h,e[1]=s*h,e[2]=n*c,e[3]=o*c,e[4]=a,e[5]=l,e}static multiply(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1],d=i[2],u=i[3],p=i[4],g=i[5];return e[0]=r*h+n*c,e[1]=s*h+o*c,e[2]=r*d+n*u,e[3]=s*d+o*u,e[4]=r*p+n*g+a,e[5]=s*p+o*g+l,e}static transformPoint(e,t,i){return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}static translate(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*h+n*c+a,e[5]=s*h+o*c+l,e}static invert(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=i*n-r*s;return l?(l=1/l,e[0]=n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e[4]=(s*a-n*o)*l,e[5]=(r*o-i*a)*l,e):null}static decompose(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=-Math.atan2(-r,s),l=Math.atan2(i,t),h=Math.abs(a+l),c=h<1e-5||Math.abs(2*Math.PI-h)<1e-5;return{skew:{x:c?0:a,y:c?0:l},scale:{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+s*s)},position:{x:n,y:o},rotation:c?l:0}}static decomposeScale(e){const t=e[0],i=e[1],r=e[2],s=e[3];return{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+s*s)}}}},p17C:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{}t.default=class{static getRGBADataAsSprite(e,t,i,s){const n=document.createElement("canvas");n.width=e,n.height=t;const o=n.getContext("2d"),a=o.getImageData(0,0,e,t);if(i.length!==a.data.length)throw new r;a.data.set(i),o.putImageData(a,0,0);const l=PIXI.Sprite.from(n);return s.addChild(l),l}}},pMCj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\nconst highp vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n\tlowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\t//float luminance = dot(textureColor.rgb, W);\n\n  gl_FragColor = vec4(\n\t\t(1.0 - ((1.0 - textureColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n\t\ttextureColor.a);\n}\n";class s extends PIXI.Filter{constructor(e,t=1){super(null,r,{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=s},s96w:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float uTextureFlipY;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vec2(vTextureCoord.x, uTextureFlipY - vTextureCoord.y));\n\n    if (textureColor.a > 0.0 && textureColor.a < 1.0) {\n        gl_FragColor = vec4(textureColor.rgb / textureColor.a, textureColor.a);\n    } else {\n        gl_FragColor = textureColor;\n    }\n}\n";class s extends PIXI.Filter{constructor(e=1){super(null,r,{uTextureFlipY:{type:"float",value:1}}),this.resolution=e}apply(e,t,i,r){this.uniforms.uTextureFlipY=t.sourceFrame.height/t.texture.height,super.apply(e,t,i,r)}}t.default=s},sodY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(()=>{class e{constructor(){this.textureCache={},this.deferredCallbacks={}}load(e,t,i,r){if(this.textureCache[e]&&this.textureCache[e].references.add(r),this.textureCache[e]&&this.textureCache[e].texture&&this.textureCache[e].texture.frame)return void t(this.textureCache[e].texture);if(this.deferredCallbacks[e])return void this.deferredCallbacks[e].push(t);this.deferredCallbacks[e]=[t];const s=new PIXI.loaders.Loader;i.loaderPlugins&&i.loaderPlugins.forEach(e=>{e.pre&&s.pre(e.pre.bind(e)),e.use&&s.use(e.use.bind(e))}),s.add({url:e,xhrType:"blob"}).load(()=>{const t=s.resources[e].texture;this.textureCache[e]={texture:t,references:new Set([r])},this.deferredCallbacks[e].forEach(e=>{e(t)}),delete this.deferredCallbacks[e],s.reset()})}reset(e){for(const t in this.textureCache)this.textureCache[t].references.delete(e),0===this.textureCache[t].references.size&&(this.textureCache[t].texture&&this.textureCache[t].texture.destroy(!0),delete this.textureCache[t])}}return e.instance=new e,e})();t.default=r},uzmb:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.JPGEncoding=t.PNGEncoding=t.RawEncoding=t.ImageEncoding=t.ImageBinaryEncodingEnum=void 0,function(e){e.Uint8Array="uint8array",e.Buffer="buffer",e.DataURL="data-url"}(r=t.ImageBinaryEncodingEnum||(t.ImageBinaryEncodingEnum={}));class s{constructor(e){this.binaryEncoding=e}}t.ImageEncoding=s;let n=(()=>{class e extends s{static AsBuffer(){return e.AS_BUFFER}static AsUint8Array(){return e.AS_UINT8ARRAY}}return e.AS_BUFFER=new e(r.Buffer),e.AS_UINT8ARRAY=new e(r.Uint8Array),e})();t.RawEncoding=n;let o=(()=>{class e extends s{static AsBuffer(){return e.AS_BUFFER}static AsUint8Array(){return e.AS_UINT8ARRAY}static AsDataURL(){return e.AS_DATA_URL}}return e.AS_BUFFER=new e(r.Buffer),e.AS_UINT8ARRAY=new e(r.Uint8Array),e.AS_DATA_URL=new e(r.DataURL),e})();t.PNGEncoding=o;class a extends s{constructor(e,t){super(e),this.quality=t}static AsBuffer(e){return new a(r.Buffer,e)}static AsUint8Array(e){return new a(r.Uint8Array,e)}static AsDataURL(e){return new a(r.DataURL,e)}}t.JPGEncoding=a},vDtG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),s=i("UzQk"),n=i("xtw7");let o=(()=>{class e extends r.default{constructor(e,t){super(e,t),this.height=1,this.width=1,this.clipType="rect",this.x=0,this.y=0,this.maskSprite=null,this.maskSpriteTexture=null,this.maskSpriteBaseTexture=null,this.maskGraphics=null,this.maskTransform=new PIXI.Transform;const i=e;this._changePaths(i.paths)}destroy(e){this.teardownMaskGraphics(),this.teardownMaskSprite(),super.destroy(e)}render(){const t=this.mimicNode,i=t.paths,r="rect"===this.clipType,s="ellipse"===this.clipType;if(r&&0===this.x&&0===this.y&&this.width===this.asyncRenderer.activeRender.graph.bounds.width&&this.height===this.asyncRenderer.activeRender.graph.bounds.height)this.teardownMaskGraphics(),this.teardownMaskSprite();else if(s){const e=this.installMaskGraphics();e.clear(),e.beginFill(0),e.drawEllipse(this.x,this.y,this.width,this.height)}else{const r=t.ref.child.clipBounds,s=this.globalScale,n=this.renderScale*this.pixiApp.renderer.resolution,o=n*s.x,a=n*s.y,l=r.width*o,h=r.height*a,c=[o,0,0,a,0,0],d=e=>Math.pow(2,Math.ceil(Math.log(e)/Math.LN2));this.maskSprite&&this.maskSprite.texture&&(d(l)!=this.maskSprite.texture.width||d(h)!==this.maskSprite.texture.height)&&this.teardownMaskSprite(),this.installMaskSprite();const u=this.maskSpriteBaseTexture,p=this.maskSpriteTexture;e.sharedTextureSource.begin().setSize(l,h).setTransform(c).setColor("white").setPaths(i).render().end(),u.realWidth=u.source.width,u.realHeight=u.source.height,u.width=u.realWidth/u.resolution,u.height=u.realHeight/u.resolution,u.isPowerOfTwo=e.sharedTextureSource.isPowerOfTwo,p._updateID++,p._frame.width=u.width,p._frame.height=u.height,this.pixiApp.renderer.textureManager.updateTexture(u),this.maskSprite.setTransform(0,0,1/o,1/a,0,0,0,0,0)}super.render()}_changePaths(e){const t=this.mimicNode.ref.child.clipBounds;let i;i=!e||0===e.length||1===e.length&&"rect"===e[0].type?"rect":1===e.length&&"ellipse"===e[0].type?"ellipse":"arbitrary",this.height=t.height,this.width=t.width,this.clipType=i,this.x=t.minX,this.y=t.minY,this.isDirtyRender=!0}changeGlobalPlacement(e,t){const i=e.transformValues,r=t.transformValues;(Math.abs(i.xscale-r.xscale)>1e-9||Math.abs(i.yscale-r.yscale)>1e-9)&&(this.isDirtyRender=!0),super.changeGlobalPlacement(e,t)}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case s.PGMMimicClipNode.PROP_PATHS:this._changePaths(i.paths);break;case s.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`clip did not observe property change '${e}'`)}})}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}installMaskSprite(){this.teardownMaskGraphics(),this.maskSprite||(this.maskSpriteBaseTexture=new PIXI.BaseTexture(e.sharedTextureSource.getCanvas()),this.maskSpriteBaseTexture.mipmap=!1,this.maskSpriteTexture=new PIXI.Texture(this.maskSpriteBaseTexture),this.maskSprite=new PIXI.Sprite(this.maskSpriteTexture),this.pixiDisplayObject.mask=this.maskSprite,this.pixiDisplayObject.addChild(this.maskSprite))}teardownMaskSprite(){this.maskSprite&&(this.pixiDisplayObject.removeChild(this.maskSprite),this.pixiDisplayObject.mask=null,this.maskSprite.destroy({texture:!0,baseTexture:!0}),this.maskSprite=null)}installMaskGraphics(){return this.teardownMaskSprite(),this.maskGraphics||(this.maskGraphics=new PIXI.Graphics,this.pixiDisplayObject.mask=this.maskGraphics,this.pixiDisplayObject.addChild(this.maskGraphics)),this.maskGraphics}teardownMaskGraphics(){this.maskGraphics&&(this.pixiDisplayObject.removeChild(this.maskGraphics),this.pixiDisplayObject.mask=null,this.maskGraphics.destroy(),this.maskGraphics=null)}}return e.TYPE="clip",e.sharedTextureSource=new n.default,e})();t.default=o},vKWb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("CkXF"),s=i("UzQk"),n=i("0gjg"),o=i("bNrw"),a=i("wYSo"),l=i("lzL7"),h=i("NG98"),c=o.default.instance;var d;!function(e){e[e.VIEWPORT_BOUNDED_TEXTURE=0]="VIEWPORT_BOUNDED_TEXTURE",e[e.NODE_BOUNDED_TEXTURE=1]="NODE_BOUNDED_TEXTURE",e[e.UNUSABLE_TEXTURE=2]="UNUSABLE_TEXTURE",e[e.NO_TEXTURE=3]="NO_TEXTURE"}(d||(d={}));let u=(()=>{class e extends r.default{constructor(e,t){super(e,t),this.isRendered=!1,this.isInRenderQueue=!1,this.textureOffset={x:0,y:0},this.textureFontSize=void 0,this.renderedFontSize=void 0,this.textureSharpness=1,this.textureState=d.NO_TEXTURE,this.pendingTextureState=d.NO_TEXTURE,this.renderedTextureGlobalPlacement=s.Matrix2D.Identity,this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=s.Matrix2D.Identity,this.dirtied={},this.colorStrategy={useColorizeFilter:!1,colorizeFillColor:s.SolidColor.ZERO,colorizeStrokeColor:s.SolidColor.ZERO},this.baseTexture=new PIXI.BaseTexture(c.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite),this.isDirtyRender=!0,this.textureState=d.UNUSABLE_TEXTURE,this.debug("constructor()")}destroy(e){this.sprite.destroy({children:!0,texture:!0,baseTexture:!0}),super.destroy(e)}autoApplyAlphaFilter(){return!this.colorStrategy.useColorizeFilter}filter(){this.colorStrategy.useColorizeFilter&&(this.colorizeFilter||(this.colorizeFilter=new h.default),this.colorizeFilter.redChannelArtworkColor=this.colorStrategy.colorizeFillColor,this.colorizeFilter.greenChannelArtworkColor=this.colorStrategy.colorizeStrokeColor,this.colorizeFilter.alpha=this.opacity,this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.filters.push(this.colorizeFilter)),super.filter()}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,s=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,s)}place(){super.place(),this.updateSpritePlacement()}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}debug(e){}changeProperties(e,t){this.debug(`changeProperties(${t.join(",")})`),t.forEach(e=>{switch(e){case s.PGMMimicTextNode.PROP_BOUNDS:case s.PGMMimicTextNode.PROP_TEXT:case s.PGMMimicTextNode.PROP_STYLE_FONT:case s.PGMMimicTextNode.PROP_STYLE_STROKE_WIDTH:case s.PGMMimicTextNode.PROP_STYLE_TRACKING:this.dirtied.shape=!0;break;case s.PGMMimicTextNode.PROP_RENDERRUNS:this.dirtied.shape=!0,this.dirtied.color=!0;break;case s.PGMMimicNode.PROP_MARKED_BOUNDS:case s.PGMMimicTextNode.PROP_STYLE:break;case s.PGMMimicTextNode.PROP_STYLE_FILL_COLOR:case s.PGMMimicTextNode.PROP_STYLE_STROKE_COLOR:this.dirtied.color=!0;break;default:this.log.warning(`Text: notified about unwatched property ${e}`)}})}validate(){const e=this.mimicNode,t=this.asyncRenderer.activeRender.graph.bounds.area,i=e.ctm,n=l.default.decomposeScale(i.asArray),o=e.bounds.width*n.x,a=e.bounds.height*n.x,h=t<4*r.default.areaOfBoundsAtDocumentScale(i,e.bounds);if(h?this.globalTransform.equal(i)||(this.isDirtyRender=!0):this.globalBoundsWidth===o&&this.globalBoundsHeight===a||(this.isDirtyRender=!0),this.globalBoundsWidth=o,this.globalBoundsHeight=a,this.globalTransform=i,this.pendingTextureState=h?d.VIEWPORT_BOUNDED_TEXTURE:d.NODE_BOUNDED_TEXTURE,this.dirtied.shape||this.dirtied.color){const t=e.renderRuns,i=t=>0===t.length||1===t.length&&0===t[0].range.start&&t[0].range.end===e.text.length,r=this.colorStrategy.useColorizeFilter;this.colorStrategy.useColorizeFilter=i(t.fillColors.runArrays)&&i(t.strokeColors.runArrays);const n=this.colorStrategy.useColorizeFilter!==r;this.colorStrategy.useColorizeFilter&&(this.colorStrategy.colorizeFillColor=0===t.fillColors.runArrays.length?e.style.fillColor||s.SolidColor.ZERO:t.fillColors.runArrays[0].attr,this.colorStrategy.colorizeStrokeColor=0===t.strokeColors.runArrays.length?e.style.strokeColor||s.SolidColor.ZERO:t.strokeColors.runArrays[0].attr),(this.dirtied.shape||n||!this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyRender=!0,this.textureState=d.UNUSABLE_TEXTURE),(n||this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyFilter=!0),this.dirtied={}}super.validate()}render(){this.debug("render begin"),this.notifyAsyncRenderBegin(),this.textureState===d.NO_TEXTURE||this.textureState===d.UNUSABLE_TEXTURE||this.asyncRenderer.activeRender.fullQuality?this.updateTexture():this.isInRenderQueue||(this.isInRenderQueue=!0,a.default.instance.addNormalPriority(()=>{this.updateTexture(),this.bubble("background-text-rerender",{text:this})})),super.render(),this.debug("render end")}updateTextureWithinDocumentBounds(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.strokeWidth,s=t.font,n=s.weight||"normal",o=s.cssName||s.family,a=s.style||"",h=e.fontSize,d=this.asyncRenderer.activeRender.graph.bounds,u=d.width,p=d.height,g=this.pixiApp.stage.scale.x*this.pixiApp.renderer.resolution,m=u*g,f=p*g,x=l.default.getScalingTransform(g,g),y=[1,0,0,1,i.minX,i.minY+h*s.ascentRatio],b=l.default.multiply([],x,this.globalPlacement.asArray),T=l.default.multiply([],b,y);this.textureFontSize=h,this.textureOffset.x=0,this.textureOffset.y=0,this.renderedTextureGlobalPlacement=this.globalPlacement,c.setSize(m,f).setTransform(T).setFontSize(h).setFont(`${a} ${n} ${h}px ${o}`).setStrokeWidth(r)}updateTextureWithinNodeBounds(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.font,s=r.weight||"normal",n=r.cssName||r.family,o=r.style||"",a=e.fontSize,l=(a<100?1.333:1)*this.pixiApp.renderer.resolution,h=this.renderScale*l,d=a*h,u=t.strokeWidth*h,p=d<16?Math.ceil(d):Math.ceil(2*d)/2,g=t.strokeWidth?Math.max(.1*l,Math.round(u*(p/d)*2)/2):0,m=g/2,f=p/a,x=i.width*f,y=a*r.capRatio*f,b=y+m,T=x+2*b,v=.5*y+m,C=v+y+(1*y+m),P=v-p*(r.ascentRatio-r.capRatio),w=[1,0,0,1,b,v+y];this.textureFontSize=p,this.textureOffset.x=-b,this.textureOffset.y=-P,c.setSize(T,C).setTransform(w).setFontSize(p).setFont(`${o} ${s} ${p}px ${n}`).setStrokeWidth(g)}updateTexture(){if(this.debug("updateTexture begin"),this.isInRenderQueue=!1,this.isDestroyed)return;const e=this.mimicNode,t=e.style,i=e.text;let r,o;this.colorStrategy.useColorizeFilter?(r=t.fillColor?"#FF0000":null,o=t.strokeColor?"#00FF00":null):(r=t.fillColor?`#${n.default.rgb2hex(t.fillColor)}`:null,o=t.strokeColor?`#${n.default.rgb2hex(t.strokeColor)}`:null);const a=t.tracking;c.begin().setText(i).setFillColor(r).setStrokeColor(o).setTracking(a),this.colorStrategy.useColorizeFilter?c.setRenderRuns(s.PGMRenderRuns.EMPTY):c.setRenderRuns(e.renderRuns),this.pendingTextureState===d.VIEWPORT_BOUNDED_TEXTURE?this.updateTextureWithinDocumentBounds():this.updateTextureWithinNodeBounds(),c.render().end(),this.workaroundUpdateTexture(c.isPowerOfTwo),this.textureState=this.pendingTextureState,this.updateSpritePlacement(),this.notifyAsyncRenderEnd(),this.debug("updateTexture end")}workaroundUpdateTexture(e){const t=this.baseTexture,i=this.texture;t.realWidth=t.source.width,t.realHeight=t.source.height,t.width=t.realWidth/t.resolution,t.height=t.realHeight/t.resolution,t.isPowerOfTwo=e,i._updateID++,i._frame.width=t.width,i._frame.height=t.height,this.pixiApp.renderer.textureManager.updateTexture(t)}updateSpritePlacement(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.font,s=i.height/(r.ascentRatio+r.descentRatio),n=s/this.textureFontSize;if(this.textureState===d.NODE_BOUNDED_TEXTURE){const e=i.minX+this.textureOffset.x*n,t=i.minY+this.textureOffset.y*n;this.sprite.setTransform(e,t,n,n,0,0,0,0,0)}else if(this.textureState===d.VIEWPORT_BOUNDED_TEXTURE){const e=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,t=l.default.getScalingTransform(e,e),i=l.default.multiply([],t,this.renderedTextureGlobalPlacement.asArray),r=l.default.invert([],i),n=s/this.textureFontSize;let o=r;if(1!==n){const e=l.default.getScalingTransform(n,n);o=l.default.multiply([],r,e),o[4]*=n,o[5]*=n}const a=l.default.decompose(o),{position:h,rotation:c,scale:d,skew:u}=a;this.sprite.setTransform(h.x,h.y,d.x,d.y,c,u.x,u.y,0,0)}}}return e.TYPE="text",e})();t.default=u},vr9a:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TargetRenderParameters=t.TargetTransformTypeEnum=void 0,function(e){e.FitCentered="fit-centered",e.FillCentered="fill-centered"}(r=t.TargetTransformTypeEnum||(t.TargetTransformTypeEnum={}));class s{constructor(e,t,i,r){this.transformType=e,this.width=Math.floor(t),this.height=Math.floor(i),this.encoding=r}static forGraph(e,t){return s.forGraphWithResolution(e,1,t)}static forGraphWithResolution(e,t,i){return new s(r.FitCentered,e.bounds.width*t,e.bounds.height*t,i)}static forGraphAtSize(e,t,i){const r=t/Math.max(e.bounds.width,e.bounds.height);return s.forGraphWithResolution(e,r,i)}static fit(e,t,i){return new s(r.FitCentered,e,t,i)}}t.TargetRenderParameters=s},vuLH:function(e,t,i){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(s,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiQueuedImageRenderer=void 0;const s=i("uzmb"),n=i("Ej8W"),o=i("yFMF");t.PixiQueuedImageRenderer=class{constructor(e){this.log=e.log,this.renderer=new n.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!0,addDebugText:!1}),this.renderer.hints.isAnimating=e.renderingAnimation,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvasContext=this.bufferCanvas.getContext("2d")}getExportCanvas(){const e=this.renderer.getRootRenderTarget(),t=e.resolution,i=e.size.width*t,r=e.size.height*t,s=this.getPixelData(0,0,i,r);this.bufferCanvas.width=i,this.bufferCanvas.height=r;const n=this.bufferCanvasContext.createImageData(i,r);return n.data.set(s),this.bufferCanvasContext.putImageData(n,0,0),Promise.resolve(this.bufferCanvas)}getPixelData(e,t,i,r){const s=this.renderer.getGLRenderer(),n=this.renderer.getRootRenderTarget(),o=new Uint8Array(4*i*r),a=s.gl;return s.bindRenderTarget(n),a.readPixels(e,t,i,r,a.RGBA,a.UNSIGNED_BYTE,o),o}renderImage(t,i,n,a){return r(this,void 0,void 0,(function*(){let l;return yield this.renderer.render(t,i,n,{assetLoader:a,demultiplyAndFlip:!0,postRenderCallback:()=>r(this,void 0,void 0,(function*(){const t=this.renderer.canvas,{width:r,height:n}=i;if(r!==t.width||n!==t.height)throw this.log.error("internal error: canvas size doesn't match the requested size."),new Error("internal error: canvas size doesn't match the requested size.");const a=i.encoding;if(a instanceof s.PNGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/png"),t=o.default.dataURLToEncoding(e,a.binaryEncoding);l={encoding:a,width:r,height:n,data:t}}else if(a instanceof s.JPGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/jpeg",a.quality),t=o.default.dataURLToEncoding(e,a.binaryEncoding);l={encoding:a,width:r,height:n,data:t}}else{if(!(a instanceof s.RawEncoding))throw new Error("unexpected encoding type");{const t=this.getPixelData(0,0,r,n);if(a.binaryEncoding===s.ImageBinaryEncodingEnum.Buffer)l={encoding:a,width:r,height:n,data:e.from(t.buffer)};else{if(a.binaryEncoding!==s.ImageBinaryEncodingEnum.Uint8Array)throw new Error("unexpected encoding type");l={encoding:a,width:r,height:n,data:t}}}}}))}),l}))}destroy(){this.renderer.destroy()}}}).call(this,i("HDXh").Buffer)},wHG3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Core=void 0;var r=i("Lkow");Object.defineProperty(t,"PixiJSApp",{enumerable:!0,get:function(){return r.PixiJSApp}}),Object.defineProperty(t,"PixiJSRenderer",{enumerable:!0,get:function(){return r.PixiJSRenderer}});const s=i("UzQk");t.Core=s},wYSo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(()=>{class e{constructor(){this.tailQ=[],this.primaryQ=[],this.MAX_WORK_TIME_MS=4,this.MAX_BATCH_SIZE=6,this.isRunning=!1}processTailQ(){this.primaryQ.length>0?this.processQ():this.tailQ.length>0?(this.tailQ.shift()(),setTimeout(this.processTailQ.bind(this),0)):this.isRunning=!1}processQ(){const e=Date.now();let t,i=0,r=this.primaryQ.length;for(;r>0&&(i++,!(i%this.MAX_BATCH_SIZE==0&&Date.now()-e>=this.MAX_WORK_TIME_MS))&&(t=this.primaryQ.shift());)t(),r--;r>0?setTimeout(this.processQ.bind(this),0):this.processTailQ()}run(){this.isRunning||(this.isRunning=!0,setTimeout(this.processQ.bind(this),0))}addNormalPriority(e){this.primaryQ.push(e),this.run()}addHighPriority(e){this.primaryQ.unshift(e),this.run()}addLowPriority(e){this.tailQ.push(e),this.run()}hasItemsInQueue(){return this.primaryQ.length>0}}return e.instance=new e,e})();t.default=r},xBmG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveViewLoadingImagesEndEvent=t.LiveViewLoadingImagesBeginEvent=t.LiveViewAnimationRenderCompleteEvent=t.LiveViewFrameRenderCompleteEvent=t.LiveViewEvent=t.LiveViewDynamicRenderParams=void 0;let r=(()=>{class e{constructor(e){this.startTime=e.startTime||0,this.endTime=e.endTime||-1,this.loop=e.loop||!1}}return e.DEFAULT=new e({}),e})();t.LiveViewDynamicRenderParams=r;class s{constructor(e){this.type=e}}t.LiveViewEvent=s;let n=(()=>{class e extends s{constructor(t,i){super(e.TYPE),this.graph=t,this.time=i}}return e.TYPE="frame-render-complete",e})();t.LiveViewFrameRenderCompleteEvent=n;let o=(()=>{class e extends s{constructor(t){super(e.TYPE),this.graph=t}}return e.TYPE="animation-render-complete",e})();t.LiveViewAnimationRenderCompleteEvent=o;let a=(()=>{class e extends s{constructor(){super(e.TYPE)}}return e.TYPE="loading-images-begin",e})();t.LiveViewLoadingImagesBeginEvent=a;let l=(()=>{class e extends s{constructor(){super(e.TYPE)}}return e.TYPE="loading-images-end",e})();t.LiveViewLoadingImagesEndEvent=l},xGui:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i("DAf/"),t),s(i("3hRk"),t),s(i("xBmG"),t),s(i("W4vr"),t),s(i("BTPj"),t),s(i("6ygk"),t),s(i("uzmb"),t),s(i("vr9a"),t),s(i("Escq"),t);var n=i("1HQJ");Object.defineProperty(t,"PixiApplication",{enumerable:!0,get:function(){return n.PixiApplication}})},xtw7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("RyLA"),s=1024;function n(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function o(e){return e&&0==(e&e-1)}t.default=class{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=10,this.height=10,this.color="#FFFFFF",this.paths=[],this.isPowerOfTwo=!1,this.renderer=new r.default(this.context,null),this.canvas.style.pointerEvents="none"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setTransform(e){return this.transform=e,this}setSize(e,t){return this.width=e,this.height=t,this}setPath(e){return this.setPaths([e])}setPaths(e){return this.paths=e,this}setColor(e){return this.color=e,this}render(e=!1){const t=e||Math.max(this.width,this.height)<=s;t?(this.canvas.width=n(Math.round(this.width)),this.canvas.height=n(Math.round(this.height)),this.isPowerOfTwo=t):(this.canvas.width=Math.ceil(this.width),this.canvas.height=Math.ceil(this.height),this.isPowerOfTwo=o(this.canvas.width)&&o(this.canvas.height)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform);for(var i=0,r=this.paths.length;i<r;++i){var a=this.paths[i];this.context.lineWidth=a.pathStrokeWeight,this.context.miterLimit=a.pathMiterLimit,this.context.lineJoin=a.pathJoinType,this.context.lineCap=a.pathEndcapType,a.render(this.renderer),"none"!==a.pathFillType?(this.context.fillStyle=this.color,this.context.strokeStyle=null,this.context.fill(a.pathFillType)):(this.context.strokeStyle=this.color,this.context.fillStyle=null,this.context.stroke())}return this}getCanvas(){return this.canvas}destroy(){return this.canvas=null,this.context=null,this}}},yFMF:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=i("uzmb");class s{static dataURLToEncoding(e,t){switch(t){case r.ImageBinaryEncodingEnum.Buffer:return s.dataURLtoBuffer(e);case r.ImageBinaryEncodingEnum.Uint8Array:return new Uint8Array(s.dataURLtoBuffer(e));case r.ImageBinaryEncodingEnum.DataURL:return e;default:throw new Error(`unrecognized encoding ${t}`)}}static dataURLtoBuffer(t){const i=t.indexOf(";base64,");if(i>=0){const r=t.substr(i+";base64,".length);if(void 0===e)throw new Error("Must polyfill Buffer on web");return e.from(r,"base64")}return null}static dataURLtoBlob(e){const t=e.split(","),i=t[0],r=t[1],s=i.split(":")[1].split(";")[0],n=i.indexOf("base64")>=0?atob(r):unescape(r),o=n.length,a=new Uint8Array(o);for(let e=0;e<o;e++)a[e]=n.charCodeAt(e);return new Blob([a],{type:s})}}t.default=s}).call(this,i("HDXh").Buffer)},z8uW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiFrameProductionService=void 0;const r=i("3hRk"),s=i("vuLH");class n{constructor(e,t,i,r,n){this.api=e,this.assetLoader=i,this.graph=t,this.parameters=r,this.frameRate=n,this.observers={},this.renderer=new s.PixiQueuedImageRenderer({hostAPI:e.host,assetLoader:i,log:e.log,renderingAnimation:!0})}on(e,t){let i=this.observers[e];i?i.push(t):(i=[t],this.observers[e]=i)}publish(e){let t=this.observers[e.type];t&&t.forEach(t=>{try{t(e)}catch(e){console.log("throw during event processing",e)}})}begin(){this.frameIndex=-1,this.doNextFrame()}doNextFrame(){if(this.canceled)this.publish(new r.FrameProductionCanceledEvent);else{this.frameIndex++;let e=this.frameIndex/this.frameRate;e>this.graph.duration?this.publish(new r.FrameProductionCompleteEvent):this.renderer.renderImage(this.graph,this.parameters,e).then(t=>{this.canceled||(this.publish(new r.FrameDataEvent(this.frameIndex,e,t)),this.doNextFrame())}).catch(e=>{this.publish(new r.FrameErrorEvent(e)),this.cancel(),this.publish(new r.FrameProductionCanceledEvent)})}}cancel(){this.canceled=!0}destroy(){this.renderer.destroy()}renderFrame(e,t){return this.renderer.renderImage(this.graph,t,e)}}t.PixiFrameProductionService=class{constructor(e){this.api=e}createProducer(e,t,i,r){return new n(this.api,e,t,i,r)}}},zrCk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiImageQueue=t.PixiImageService=void 0;const r=i("vuLH");t.PixiImageService=class{constructor(e){this.api=e}createQueue(e){return new s(this.api,e)}};class s{constructor(e,t){this.api=e,this.renderer=new r.PixiQueuedImageRenderer({hostAPI:this.api.host,log:this.api.log,assetLoader:t||e.defaultAssetLoader,renderingAnimation:!1})}render(e,t,i,r){return this.renderer.renderImage(e,t,i||0,r)}destroy(){this.renderer.destroy()}}t.PixiImageQueue=s}}]);
//# sourceMappingURL=vendors_npm_spark_2b7cec86-0f92dc69.js.map
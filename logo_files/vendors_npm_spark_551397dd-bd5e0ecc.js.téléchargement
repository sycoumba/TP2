(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[17],{"9YN4":function(e,t,o){var r,n,i,s,a,c,u,l,d=t,p=o("oAGj"),h=o("ftr0"),P=o("VQVe"),_=o("ytEx"),C=o("qsM9"),T=o("SpAV"),E=o("9a+Y"),f=o("9WSY"),R=o("ascj"),y=o("Vvcj"),D=o("fVJ2"),g=o("13MC"),m=o("quOg"),A=o("LcYy"),S=o("3OP7"),O=o("FNB+"),b=o("URxh"),N=o("H9Ol"),I=o("cmoc"),B=o("fWxZ"),M=o("QbzR"),v=o("JEzR"),F=o("P83h"),Y=o("A6KL"),w=o("pnSN"),L=o("h67N"),x=o("4mVB"),V=o("iCxV"),H=o("q5zr"),U=o("9eTw"),k=o("fdtz"),j=o("SDdr"),G=o("uWOl"),K=o("Puiz"),X=o("c+uM"),W=o("AxS/"),J=o("K0Rh"),z=o("2ALn"),q=o("djAF"),Q=o("kSRw"),Z=o("ly3x"),$=o("aN2p"),ee=o("u2iI"),te=o("QBb7"),oe=o("a9ow"),re=o("MO6F"),ne=o("lJxM"),ie=o("Qb69"),se=o("T6jX"),ae=o("enh0"),ce=o("voyk"),ue=o("90dd"),le=o("x4Gy"),de=o("LCGV"),pe=o("Kkml"),he=o("LGJg"),Pe=o("sW6f"),_e=o("WWR6"),Ce=o("zjod"),Te=o("QTen");d.TheoDocumentVersion=p.defineEnum("TheoDocumentVersion",{Invalid:0,BeginningOfStoringVersion:1,BackingShapePaddingEnabled:2,FormaController:1e3,ColorBackgroundAndPreviewEncoding:2e3,Knockouts:3e3,GridLayouts:4e3,CharacterStyles:5e3,GridsWithAlphaImages:6e3,OmitShapeLibraryPathData:7e3,Icons:8e3,TextEffects:9e3,LetterSpacing:1e4,AdobeFonts:11e3,ImageAdjustments:12e3,PremiumTemplates:13e3,Giphys:14e3,NewTextAnimations:15e3,FontSourcesMetadata:15100,NewTextLayouts:16e3,JSONDocumentEncoding:17e3,VideoSupport:18e3,FloatingImages:19e3,Grouping:2e4,Deepcut:21e3}),d.TheoDocumentUserAction=(r=function(e,t){this.doc=e,this.action=t,p.opt(e.controller,(function(e){return e.undoRedoMgr.beginUserAction(t,(function(){}))}))},p.defineClass({name:"TheoDocumentUserAction",ctor:r,superName:"CoreObject",props:{end:function(){var e=this;null!=this.action&&p.opt(this.doc.controller,(function(t){return t.undoRedoMgr.endUserAction((function(){e.action=null}))}))},rollback:function(){var e=this;null!=this.action&&p.opt(this.doc.controller,(function(t){return t.undoRedoMgr.cancelUserAction((function(){e.action=null}))}))}}}),r),d.TheoDocument=(n=function(){this.modifiedSinceOpen_=!1,this.modifiedSinceShare_=!1,this.missingFontsDuringOpen_=[],this.allowPrune_=!0,this.docInited_=!0,this.initNewDocumentTransaction=null,this.pendingAuthoringContextID_=null,this.forkID_=null,this.atomicChangeEvent_=null,this.blockedControllers_=[]},i={},p.defineClass({name:"TheoDocument",ctor:n,superName:"DBHostObject",statics:{SCHEMA_CLASS_NAME:"TheoDocument",CURRENT_VERSION:{get:function(){return void 0===i.CURRENT_VERSION&&(i.CURRENT_VERSION=d.TheoDocumentVersion.Deepcut),i.CURRENT_VERSION},set:function(e){i.CURRENT_VERSION=e}},MIME_TYPE:"application/vnd.adobe.theo.document+dcx",PROPERTY_VERSION:"format-version",PROPERTY_WATERMARK_ENABLED:"watermark-enabled",PROPERTY_SHARED:"shared",PROPERTY_MODIFIED_SINCE_SHARE:"modified-since-share",PROPERTY_FONT_SOURCES:"font-sources",PROPERTY_CP_CONTENT_MODIFIED:"cp#contentModified",PROPERTY_CP_PROJECT_ID:"cp#projectId",PROPERTY_CP_ALIAS:"cp#shortId",PROPERTY_CP_ASSET_ID:"cp#assetId",PROPERTY_CP_PUBLISHED_ETAG:"cp#publishedEtag",PROPERTY_CP_IS_EXPORTED:"cp#isExported",PROPERTY_REMIX_ANCESTORS_CP_ASSET_IDS:"remix-ancestors",PROPERTY_STOCK_IMAGES:"stockImages",PROPERTY_UNLICENSED:"unlicensed",PROPERTY_STANDARD:"standard",PROPERTY_EXTENDED:"extended",PROPERTY_NAME:"name",PROPERTY_TYPE:"type",PROPERTY_CHILDREN:"children",ALL_CP_PROPERTIES:{get:function(){return void 0===i.ALL_CP_PROPERTIES&&(i.ALL_CP_PROPERTIES=[n.PROPERTY_CP_PROJECT_ID,n.PROPERTY_CP_ALIAS,n.PROPERTY_CP_ASSET_ID,n.PROPERTY_CP_PUBLISHED_ETAG,n.PROPERTY_CP_IS_EXPORTED]),i.ALL_CP_PROPERTIES}},PROPERTY_DOCUMENT_DATA:"doc#data",PROPERTY_AUTHORING_CONTEXT_ID:"authctx#ctxid",PROPERTY_AUTHORING_CONTEXT_THEME_ID:"authctx#themeid",PROPERTY_USES_BRANDED_ELEMENTS:"authctx#uses-branded-elements",DEFAULT_NAME:"My Post",PROPERTY_CONSTRAINED_IMAGES:"constrainedImages",ERR_NEWER_FORMAT_VERSION:"newer-format-version",ERR_COULD_NOT_READ_JSON:"json-read-failed",COMPONENT_PATH_CONTENT:"content.json",COMPONENT_NAME_DOM:"dom",COMPONENT_RELATIONSHIP_DOM:"dom",COMPONENT_MIME_TYPE_DOCUMENT_JSON:"application/json",COMPONENT_RELATIONSHIP_METADATA:"metadata",COMPONENT_RELATIONSHIP_RENDITION:"rendition",classCodecs_:[],classFactories_:[],registerCodecs:function(){0==n.classCodecs_.length&&(n.classCodecs_.push(ie.TheoDocumentData.codec),n.classCodecs_.push(N.ControllerMetadata.codec),n.classCodecs_.push(M.FormaStyle.codec),n.classCodecs_.push(le.TextModel.codec),n.classCodecs_.push(le.ContentTextModel.codec),n.classCodecs_.push(oe.UTF16Attribute.codec),n.classCodecs_.push(oe.FontDescriptorAttribute.codec),n.classCodecs_.push(oe.FontSizeAttribute.codec),n.classCodecs_.push(oe.FontColorAttribute.codec),n.classCodecs_.push(oe.FontStrokeColorAttribute.codec),n.classCodecs_.push(oe.FontStrokeWidthAttribute.codec),n.classCodecs_.push(oe.TextLookAttribute.codec),n.classCodecs_.push(oe.TrackingAttribute.codec),n.classCodecs_.push(f.ColorLibrary.codec),n.classCodecs_.push(R.ColorTable.codec),n.classCodecs_.push(b.FormaAnimation.codec),n.classCodecs_.push(P.AnimationStyle.codec),n.classCodecs_.push(j.ImageFilter.codec),n.classCodecs_.push(C.Codecs.theoTimeCodec),n.classCodecs_.push(C.Codecs.theoSizeCodec),n.classCodecs_.push(C.Codecs.solidColorCodec),n.classCodecs_.push(C.Codecs.theoColorCodec),n.classCodecs_.push(C.Codecs.paletteIDCodec),n.classCodecs_.push(C.Codecs.theoPointCodec),n.classCodecs_.push(C.Codecs.theoRectCodec),n.classCodecs_.push(C.Codecs.matrix2DCodec),n.classCodecs_.push(C.Codecs.colorRoleCodec),n.classCodecs_.push(C.Codecs.textRangeCodec),n.classCodecs_.push(C.Codecs.gridCellCodec),n.classCodecs_.push(C.Codecs.fontDescriptorCodec),n.classCodecs_.push(C.Codecs.fontCodec),n.classCodecs_.push(C.Codecs.mediaMetadataCodec),n.classCodecs_.push(C.Codecs.imageColorDataCodec),n.classCodecs_.push(C.Codecs.emptyPathCodec),n.classCodecs_.push(C.Codecs.rectanglePathCodec),n.classCodecs_.push(C.Codecs.ellipsePathCodec),n.classCodecs_.push(C.Codecs.arbitraryPathCodec),n.classCodecs_.push(C.Codecs.pathCodec),n.classCodecs_.push(C.Codecs.artworkShapeCodec),n.classCodecs_.push(C.Codecs.artworkGroupCodec),n.classCodecs_.push(C.Codecs.artworkClipGroupCodec),n.classCodecs_.push(C.Codecs.artworkNodeCodec),n.classCodecs_.push(C.Codecs.pageExportDataCodec),n.classCodecs_.push(C.Codecs.keyFrameCodec),n.classCodecs_.push(C.Codecs.imageAdjustmentsCodec),n.classCodecs_.push(C.Codecs.textPathCodec),n.classCodecs_.push(C.Codecs.textPathSegmentCodec))},registerFactories:function(){0==n.classFactories_.length&&(n.classFactories_.push(D.DBHostObject.registerFactory(ie.TheoDocumentData.SCHEMA_CLASS_NAME,ie.TheoDocumentData.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(le.TextModel.SCHEMA_CLASS_NAME,le.TextModel.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(le.ContentTextModel.SCHEMA_CLASS_NAME,le.ContentTextModel.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(B.FormaPage.SCHEMA_CLASS_NAME,B.FormaPage.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(E.ContentDocument.SCHEMA_CLASS_NAME,E.ContentDocument.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(y.ColorThemeDocument.SCHEMA_CLASS_NAME,y.ColorThemeDocument.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(A.DocumentHistory.SCHEMA_CLASS_NAME,A.DocumentHistory.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(f.ColorLibrary.SCHEMA_CLASS_NAME,f.ColorLibrary.factory)),n.classFactories_.push(D.DBHostObject.registerFactory($.SimpleSwatch.SCHEMA_CLASS_NAME,$.SimpleSwatch.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(R.ColorTable.SCHEMA_CLASS_NAME,R.ColorTable.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Y.GroupContentNode.SCHEMA_CLASS_NAME,Y.GroupContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(J.RootForma.SCHEMA_CLASS_NAME,J.RootForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(w.GroupForma.SCHEMA_CLASS_NAME,w.GroupForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Q.SmartGroupForma.SCHEMA_CLASS_NAME,Q.SmartGroupForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(I.FrameForma.SCHEMA_CLASS_NAME,I.FrameForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(k.ImageForma.SCHEMA_CLASS_NAME,k.ImageForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(q.ShapeForma.SCHEMA_CLASS_NAME,q.ShapeForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(ae.TextForma.SCHEMA_CLASS_NAME,ae.TextForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(_e.VectorForma.SCHEMA_CLASS_NAME,_e.VectorForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Ce.VideoForma.SCHEMA_CLASS_NAME,Ce.VideoForma.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(N.ControllerMetadata.SCHEMA_CLASS_NAME,N.ControllerMetadata.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(b.FormaAnimation.SCHEMA_CLASS_NAME,b.FormaAnimation.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(M.FormaStyle.SCHEMA_CLASS_NAME,M.FormaStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(z.RootStyle.SCHEMA_CLASS_NAME,z.RootStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(P.AnimationStyle.SCHEMA_CLASS_NAME,P.AnimationStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(G.ImageStyle.SCHEMA_CLASS_NAME,G.ImageStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(de.TextStyle.SCHEMA_CLASS_NAME,de.TextStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(ee.ShapeStyle.SCHEMA_CLASS_NAME,ee.ShapeStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Te.VideoStyle.SCHEMA_CLASS_NAME,Te.VideoStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(x.GridStyle.SCHEMA_CLASS_NAME,x.GridStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(v.FrameStyle.SCHEMA_CLASS_NAME,v.FrameStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Z.ShapeGroupStyle.SCHEMA_CLASS_NAME,Z.ShapeGroupStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(h.AlignmentGroupStyle.SCHEMA_CLASS_NAME,h.AlignmentGroupStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(X.LockupStyle.SCHEMA_CLASS_NAME,X.LockupStyle.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(j.AlphaBlendFilter.SCHEMA_CLASS_NAME,j.AlphaBlendFilter.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(j.CompositeFilter.SCHEMA_CLASS_NAME,j.CompositeFilter.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Y.GroupContentNode.SCHEMA_CLASS_NAME,Y.GroupContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(W.RootContentNode.SCHEMA_CLASS_NAME,W.RootContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(H.ImageContentNode.SCHEMA_CLASS_NAME,H.ImageContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(ne.TextContentNode.SCHEMA_CLASS_NAME,ne.TextContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(Pe.VideoContentNode.SCHEMA_CLASS_NAME,Pe.VideoContentNode.factory)),n.classFactories_.push(D.DBHostObject.registerFactory(he.VectorContentNode.SCHEMA_CLASS_NAME,he.VectorContentNode.factory)))},decodeDocument:function(e,t){var o=[],r=S.DocumentPersistenceFactory.decoderFor(e.current),i=S.DocumentPersistenceFactory.namespacedPropertyName(n.PROPERTY_VERSION),s=d.VersionInfo.fromProperty(p.as(e.current.getValue(i),"AnyObject")),a=new d.VersionInfo(n.CURRENT_VERSION);s.major>a.major&&o.push(n.ERR_NEWER_FORMAT_VERSION);var c=n.init_209f(r,(function(e){return o.push(e)}));0==!o.length&&(o.splice(0,0,"Error opening document version "+s.rawValue),t(p.clone(o)));var u=c.beginTransaction("post_history_entry");return c.history.postEntry("open,was-vers="+p.toString(s.rawValue)),u.mergeWithPrevious(),c},decodeTemplate:function(e,t,o){var r,i=[];if(r=p.as(p.opt(V.Host.persistUtils,(function(e){return e.readJsonContentFromFile(t)})),["Dictionary","String","Any"])){var s=e.current,a=new K.JSONNodeDecoder(s,r),c=n.init_209f(a,(function(e){return i.push(e)}));0==!i.length&&o(p.clone(i));var u=c.beginTransaction("set_authoring_context_ID");return c.authoringContextID=s.getValue(_.PROPERTY_KEY_ID),u.mergeWithPrevious(),c}return i.push(n.ERR_COULD_NOT_READ_JSON),0==!i.length&&o(p.clone(i)),null},newDocumentFromDataObject:function(e,t){return n.init_209f(e,t)},createDefault:function(e){return void 0===e&&(e=null),n.init_b80b(e)},INIT_DOC_TRANSACTION_NAME:"init_new_document",_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e||"IDatabaseListener"==e}},props:{init_209f:function(e,t){n.registerCodecs(),n.registerFactories(),this.publishing_=new re.TheoBasePublishing,this.controller_=new m.DocumentController;var o=null,r=d.TheoDocumentVersion.Invalid,i=e.intProperty(n.PROPERTY_VERSION,r);i==r&&(i=p.toInt(e.numberProperty(n.PROPERTY_VERSION,p.toDouble(r)))),p.super_init(this,D.DBHostObject,D.DBHostObject.prototype.init_1be9,i,e,(function(e){o=e,null!=t&&t(e)}));var s=this.database.beginTransaction("init",null);this.gridLibrary_=new L.GridLibrary,this.hostDB_.addListener(this),this.publishing_.owner=this,T.CoreAssert.creatingDocumentSingleton(this),null==o?(this.publishing_.publish(new d.TheoDocumentDidDecodeMessage(this)),this.controller_.attach(this),this.firstPage.postDecode(),this.content.postDecode(),this.modifiedSinceShare_=this.get(n.PROPERTY_MODIFIED_SINCE_SHARE),null==e.property(n.PROPERTY_DOCUMENT_DATA)&&this.set(n.PROPERTY_DOCUMENT_DATA,ie.TheoDocumentData.init_d41d())):(this.firstPage_=B.FormaPage.init_d0e4(this),this.content_=E.ContentDocument.init_26a9(this,null),this.colorTheme_=y.ColorThemeDocument.init_d0e4(this),this.history_=A.DocumentHistory.init_d0e4(this),this.saveChildren(),this.set(n.PROPERTY_DOCUMENT_DATA,ie.TheoDocumentData.init_d41d()),this.set(n.PROPERTY_VERSION,n.CURRENT_VERSION),this.set(n.PROPERTY_MODIFIED_SINCE_SHARE,this.modifiedSinceShare_),this.set(n.PROPERTY_SHARED,!1),this.documentName=n.DEFAULT_NAME,this.controller_.attach(this)),this.instantiateDescendants(),i!=n.CURRENT_VERSION&&this.set(n.PROPERTY_VERSION,n.CURRENT_VERSION),se.TheoDocumentUtils.pruneOrphanedContent(this),this.allowPrune_=!1,s.mergeWithPrevious(),this.controller_.undoRedoMgr.reset(),this.controller_.saveMgr.enable(p.opt(this.database.getAppliedState(),(function(e){return e.guid}))),this.docInited_=!0},init_b80b:function(e){void 0===e&&(e=null),this.allowPrune_=!1,n.registerCodecs(),n.registerFactories(),this.publishing_=new re.TheoBasePublishing,this.controller_=new m.DocumentController,p.super_init(this,D.DBHostObject,D.DBHostObject.prototype.init_7341,n.CURRENT_VERSION,e);var t=this.database.beginTransaction("init",null);this.gridLibrary_=new L.GridLibrary,this.hostDB_.addListener(this),this.publishing_.owner=this,T.CoreAssert.creatingDocumentSingleton(this),this.firstPage_=B.FormaPage.init_d0e4(this),this.content_=E.ContentDocument.init_26a9(this,null),this.colorTheme_=y.ColorThemeDocument.init_d0e4(this),this.history_=A.DocumentHistory.init_d0e4(this),this.saveChildren(),this.set(n.PROPERTY_DOCUMENT_DATA,ie.TheoDocumentData.init_d41d()),this.set(n.PROPERTY_VERSION,n.CURRENT_VERSION),this.set(n.PROPERTY_MODIFIED_SINCE_SHARE,this.modifiedSinceShare_),this.set(n.PROPERTY_SHARED,!1),this.documentName=n.DEFAULT_NAME,this.controller_.attach(this),this.rawVersion!=n.CURRENT_VERSION&&this.set(n.PROPERTY_VERSION,n.CURRENT_VERSION),t.mergeWithPrevious(),this.controller_.undoRedoMgr.reset(),this.controller_.saveMgr.enable(p.opt(this.database.getAppliedState(),(function(e){return e.guid})))},initNewDocument:function(){this.docInited_=!1,T.CoreAssert.isTrue(null==this.initNewDocumentTransaction,"Already have an init transaction","TheoDocument.initNewDocument","TheoDocument.swift",525),T.CoreAssert.isTrue(null==this.database.mutableState,"Database already has an outstanding transaction","TheoDocument.initNewDocument","TheoDocument.swift",526),this.initNewDocumentTransaction=this.beginTransaction(n.INIT_DOC_TRANSACTION_NAME)},finishInitNewDocument:function(){T.CoreAssert.isTrue(null!=this.initNewDocumentTransaction,"New document init transaction not open","TheoDocument.finishInitNewDocument","TheoDocument.swift",531),this.initNewDocumentTransaction.mergeWithPrevious(),this.controller_.undoRedoMgr.reset(),this.controller_.saveMgr.enable(p.opt(this.database.getAppliedState(),(function(e){return e.guid}))),this.docInited_=!0},documentInited:function(){return this.docInited_},disableAutosave:function(){this.controller_.saveMgr.disable()},description:{get:function(){return"Doc Name: "+this.documentName+", uuid: "+this.uuid+", versionDecoded: "+this.versionDecoded.description}},documentName:{get:function(){return this.get(n.PROPERTY_NAME)},set:function(e){this.set(n.PROPERTY_NAME,e)}},pendingAuthoringContextID:{get:function(){return this.pendingAuthoringContextID_},set:function(e){var t=this.pendingAuthoringContextID_;this.pendingAuthoringContextID_=e,null!=t&&null==e?(V.Host.logging.info("TheoDocument: Finishing the pending brand change for a document to:"+t),T.CoreAssert.isTrue(this.authoringContextID==t,"pendingAuthoringContextID cleared before change was committed","TheoDocument","TheoDocument.swift",588)):null==t&&null!=e?V.Host.logging.info("TheoDocument: Applying a pending brand change for a document from:"+this.authoringContextID+" to:"+e):null!=t&&null!=e&&T.CoreAssert.fail("overlapping calls to set the pendingAuthoringContextID: was:"+t+" new:"+e,"TheoDocument","TheoDocument.swift",592),null!=this.pendingAuthoringContextID_&&V.Host.brandkitManager.activateBrand(this.pendingAuthoringContextID_)}},authoringContextID:{get:function(){var e,t,o;return null!=(o=this.pendingAuthoringContextID)?(V.Host.logging.info("TheoDocument.authoringContextID returning pendingAuthoringContextID: "+((e=this.pendingAuthoringContextID)||null!=e?e:"none")),o):(t=p.as(this.get(n.PROPERTY_AUTHORING_CONTEXT_ID),"String"))||null!=t?t:""},set:function(e){T.CoreAssert.isTrue(null==this.pendingAuthoringContextID_,"TheoDocument:setAuthoringContextID("+e+"), found unexpected pending value","TheoDocument","TheoDocument.swift",616),this.set(n.PROPERTY_AUTHORING_CONTEXT_ID,e),this.set(n.PROPERTY_USES_BRANDED_ELEMENTS,e.length>0)}},authoringContextThemeID:{get:function(){var e;return(e=p.as(this.get(n.PROPERTY_AUTHORING_CONTEXT_THEME_ID),"String"))||null!=e?e:""},set:function(e){this.set(n.PROPERTY_AUTHORING_CONTEXT_THEME_ID,e)}},uuid:{get:function(){var e;return(e=this.forkID_)||null!=e?e:this.id}},forkDocument:function(e){this.forkID_=e},rawVersion:{get:function(){var e;return(e=p.as(this.get(n.PROPERTY_VERSION),"Int"))||null!=e?e:0}},versionDecoded:{get:function(){return new d.VersionInfo(this.rawVersion)}},communityPlatformAssetID:{get:function(){return p.as(this.get(n.PROPERTY_CP_ASSET_ID),"String")},set:function(e){this.set(n.PROPERTY_CP_ASSET_ID,e)}},communityPlatformAlias:{get:function(){return p.as(this.get(n.PROPERTY_CP_ALIAS),"String")},set:function(e){this.set(n.PROPERTY_CP_ALIAS,e)}},publishedEtag:{get:function(){return p.as(this.get(n.PROPERTY_CP_PUBLISHED_ETAG),"String")},set:function(e){this.set(n.PROPERTY_CP_PUBLISHED_ETAG,e)}},publishedResourcePath:{get:function(){return p.as(this.get(n.PROPERTY_CP_PROJECT_ID),"String")},set:function(e){this.set(n.PROPERTY_CP_PROJECT_ID,e)}},documentData:{get:function(){return p.as(this.get(n.PROPERTY_DOCUMENT_DATA),ie.TheoDocumentData)}},shared:{get:function(){return this.get(n.PROPERTY_SHARED)},set:function(e){var t=this.persisted?this.database.beginTransaction("share",null):null;this.set(n.PROPERTY_SHARED,e),this.set(n.PROPERTY_MODIFIED_SINCE_SHARE,!1),p.opt(t,(function(e){return e.mergeWithPrevious()}))}},isExported:{get:function(){var e;return!(!(e=p.as(this.get(n.PROPERTY_CP_IS_EXPORTED),"Bool"))&&null==e)&&e},set:function(e){var t=this.persisted?this.database.beginTransaction("export",null):null;this.set(n.PROPERTY_CP_IS_EXPORTED,e),p.opt(t,(function(e){return e.mergeWithPrevious()}))}},recordModification:function(){this.modifiedSinceShare_=!0,this.modifiedSinceOpen_=!0},modifiedSinceShare:{get:function(){return this.modifiedSinceShare_}},modifiedSinceOpen:{get:function(){return this.modifiedSinceOpen_}},allowPrune:{get:function(){return this.allowPrune_},set:function(e){this.allowPrune_=e}},willCloseDocument:function(){this.disableAutosave()},firstPage:{get:function(){return null==this.firstPage_&&this.cacheChildren(),this.firstPage_}},content:{get:function(){return null==this.content_&&this.cacheChildren(),this.content_}},colorTheme:{get:function(){return null==this.colorTheme_&&this.cacheChildren(),this.colorTheme_}},history:{get:function(){return null==this.history_&&this.cacheChildren(),this.history_}},watermarkEnabled:{get:function(){var e;return!(e=p.as(this.get(n.PROPERTY_WATERMARK_ENABLED),"Bool"))&&null==e||e},set:function(e){this.set(n.PROPERTY_WATERMARK_ENABLED,e)}},constrainedImages:{get:function(){var e;return(e=p.as(this.get(n.PROPERTY_CONSTRAINED_IMAGES),["Dictionary","String",["Dictionary","String",["Array","String"]]]))?e:{stockImages:{unlicensed:[],standard:[],extended:[]}}}},setConstrainedImages:function(e){this.set(n.PROPERTY_CONSTRAINED_IMAGES,p.clone(e))},controller:{get:function(){return this.controller_}},gridLibrary:{get:function(){return this.gridLibrary_}},recordMissingFont:function(e){this.missingFontsDuringOpen_.includes(e)||this.missingFontsDuringOpen_.push(e)},hadMissingFontsWhenOpened:{get:function(){return this.missingFontsDuringOpen_.length>0}},missingFontList:{get:function(){return this.missingFontsDuringOpen_}},getSynthesizedTitle:function(){return se.TheoDocumentUtils.synthesizeTitle(this)},getSynthesizedDescription:function(){return se.TheoDocumentUtils.synthesizeDescription(this)},setRemixParentCpId:function(e){var t=p.clone(p.as(this.get(n.PROPERTY_REMIX_ANCESTORS_CP_ASSET_IDS),["Array","String"]));null==t&&(t=[]),t.push(e),this.set(n.PROPERTY_REMIX_ANCESTORS_CP_ASSET_IDS,p.clone(t))},getRemixAncestorsCpMachineTags:function(){var e=[],t=p.clone(p.as(this.get(n.PROPERTY_REMIX_ANCESTORS_CP_ASSET_IDS),["Array","String"]));if(null!=t&&t.length>0){e.push("_REMIX_"),e.push("_REMIX_PROGENITOR_"+t[0]);for(var o=t.length-1,r=p.iter(t);!r.done;r.next()){var i=r.value;e.push("_REMIX_FROM_"+i),e.push("_REMIX_FROM_"+i+"_"+o),o-=1}}return e},className:{get:function(){return n.SCHEMA_CLASS_NAME}},beginTransaction:function(e){return this.hostDB_.beginTransaction(e,this.hostDB_.mutableState)},beginUserAction:function(e){return new d.TheoDocumentUserAction(this,new pe.UserAction(e,pe.CollapseBehavior.NEVER,!0,null))},subscribeWithCallback:function(e,t){return this.publishing_.subscribeWithCallback(e,t)},subscribe:function(e,t){return this.publishing_.subscribe(e,t)},unsubscribe:function(e){return this.publishing_.unsubscribe(e)},onBeginTransaction:function(e,t){this.publishing_.publish(new te.TransactionBegunMessage(t,this))},onEndTransaction:function(e,t){this.publishing_.publish(new te.TransactionEndedMessage(t,this))},onStateChanged:function(e,t){this.recordModification()},onObjectStateChanged:function(e,t){},didChangeState:function(e){D.DBHostObject.prototype.didChangeState.call(this,p.clone(e)),null!=e[n.PROPERTY_AUTHORING_CONTEXT_ID]&&(V.Host.logging.info("DocumentDidChangeState: brandID to "+this.authoringContextID),this.pendingAuthoringContextID=null)},willCommitState:function(){var e;if(this.initialized&&(!(!(e=p.as(this.get(n.PROPERTY_MODIFIED_SINCE_SHARE),"Bool"))&&null==e)&&e)!=this.modifiedSinceShare_){var t=this.database.beginTransaction("recordModification",null);this.set(n.PROPERTY_MODIFIED_SINCE_SHARE,this.modifiedSinceShare_),t.end()}D.DBHostObject.prototype.willCommitState.call(this)},willApplyDatabaseState:function(e){var t,o,r,i=this;if(T.CoreAssert.isTrue(null==this.atomicChangeEvent_,void 0,"TheoDocument.willApplyDatabaseState","TheoDocument.swift",902),T.CoreAssert.isTrue(null==this.pendingAuthoringContextID_,void 0,"TheoDocument.willApplyDatabaseState","TheoDocument.swift",903),this.atomicChangeEvent_=new F.FormaNullChangedEvent(this.firstPage.root),this.firstPage.beginUpdate(this.atomicChangeEvent_),this.firstPage.root.visitAll(O.FormaTraversal.PreOrder,(function(e){var t;(t=e.controller)&&(t.beginBlockedUpdate(),i.blockedControllers_.push(t))})),(o=e.getObjectStateByID(this.id))&&(V.Host.logging.info("willApplyDatabaseState: document brand is:"+this.authoringContextID),null!=(r=p.opt(o.getProperty(n.PROPERTY_AUTHORING_CONTEXT_ID),(function(e){return e.stringValue}))))){var s=(t=p.opt(this.state.getProperty(n.PROPERTY_AUTHORING_CONTEXT_ID),(function(e){return e.stringValue})))||null!=t?t:"";r!=s&&(V.Host.logging.info("willApplyDatabaseState: detected pending brand change for a document from:"+s+" to:"+r),this.pendingAuthoringContextID=r)}},didApplyDatabaseState:function(e){this.firstPage.root.setParent(null,!0),T.CoreAssert.isTrue(null==this.pendingAuthoringContextID_,void 0,"TheoDocument.didApplyDatabaseState","TheoDocument.swift",928),this.blockedControllers_.forEach((function(e){return e.endBlockedUpdate()})),this.blockedControllers_.splice(0),T.CoreAssert.isTrue(null!=this.atomicChangeEvent_,void 0,"TheoDocument.didApplyDatabaseState","TheoDocument.swift",931),null!=this.atomicChangeEvent_&&(this.firstPage.endUpdate(this.atomicChangeEvent_),this.atomicChangeEvent_=null)},inUndoRedo:{get:function(){return null!=this.atomicChangeEvent_}},appliedState:{get:function(){return this.database.getAppliedState()||this.database.immutableState}},stateID:{get:function(){return p.opt(this.appliedState,(function(e){return e.guid}))}},encodeDocument:function(e,t){if(void 0===t&&(t=null),null==t){var o=this.beginTransaction("post_history_entry");this.history.postEntry("save"),o.mergeWithPrevious()}var r=S.DocumentPersistenceFactory.encoderFor(e.current);this.encodeStateByID(t,r),p.opt(p.as(r,_.BaseNodeEncoder),(function(e){return e.finish()}))},encode:function(e){null!=this.hostDB_.mutableState&&T.CoreAssert.fail("Saving a document with mutable state. Transactions: ["+this.hostDB_.transactionStackDescription+"]","TheoDocument.encode","TheoDocument.swift",958),this.encodeStateToDataObject(this.database.immutableState,e)},encodeStateByID:function(e,t){var o=null!=e?this.database.getState(e):this.database.immutableState;T.CoreAssert.isTrue(null!=o,"State not found: "+p.toString(e),"TheoDocument.encodeStateByID","TheoDocument.swift",966),T.CoreAssert.isFalse(o instanceof g.DBMutableState,"Encoding a mutable state: "+p.toString(e),"TheoDocument.encodeStateByID","TheoDocument.swift",967),null!=o&&this.encodeStateToDataObject(o,t)},encodeToJSON:function(){var e=new ce.TheoJSONEncoder;return this.encodeStateToDataObject(this.appliedState,e),e.json()},encodeStateToDataObject:function(e,t){var o=p.clone(se.TheoDocumentUtils.getFontSourceUsage(this));t.setCompositeID(this.uuid),t.setType(n.MIME_TYPE),t.setDocumentSize(this.firstPage.pageSize,U.DocumentUnitsEnum.PIXEL),t.setProperty(n.PROPERTY_FONT_SOURCES,p.as(o,"AnyObject")),e.encode(t,n.CURRENT_VERSION)},saveChildren:function(){if(null!=this.firstPage_&&null!=this.content_&&null!=this.colorTheme_&&null!=this.history_){var e=[this.firstPage_,this.content_,this.colorTheme_,this.history_];this.set(n.PROPERTY_CHILDREN,p.clone(e))}},cacheChildren:function(){var e,t,o,r,i;if(i=p.as(this.get(n.PROPERTY_CHILDREN),["Array",D.DBObject]))for(var s=p.iter(i);!s.done;s.next()){var a=s.value;this.firstPage_=(e=p.as(a,B.FormaPage))||null!=e?e:this.firstPage_,this.content_=(t=p.as(a,E.ContentDocument))||null!=t?t:this.content_,this.colorTheme_=(o=p.as(a,y.ColorThemeDocument))||null!=o?o:this.colorTheme_,this.history_=(r=p.as(a,A.DocumentHistory))||null!=r?r:this.history_}var c=null==this.firstPage_||null==this.content_||null==this.colorTheme_||null==this.history_;null==this.firstPage_&&(this.firstPage_=B.FormaPage.init_d0e4(this)),null==this.content_&&(this.content_=E.ContentDocument.init_26a9(this,null)),null==this.colorTheme_&&(this.colorTheme_=y.ColorThemeDocument.init_d0e4(this)),null==this.history_&&(this.history_=A.DocumentHistory.init_d0e4(this)),c&&this.saveChildren()},requestSaveDocumentAt:function(e){this.publishing_.publish(new d.TheoDocumentRequestsSaveMessage(this,e))}}}),n),d.DummyExport=(s=function(e){var t;void 0===e&&(e=null),this.prefix=(t=e)||null!=t?t:""},p.defineClass({name:"DummyExport",ctor:s,statics:{_implements:function(e){return"IExportDataObject"==e}},props:{setPath:function(e){p.info(this.prefix+"setPath path: "+e)},setName:function(e){p.info(this.prefix+"setName name: "+e)},setType:function(e){p.info(this.prefix+"setType type: "+e)},setProperty:function(e,t){p.info(this.prefix+"setProperty","name:",e,"value:",t||"nil")},setOptionalStringProperty:function(e,t){var o;p.info(this.prefix+"setOptionalStringProperty","name:",e,"value:",(o=t)||null!=o?o:"nil")},setStringProperty:function(e,t){p.info(this.prefix+"setStringProperty","name:",e,"value:",t)},setNumberProperty:function(e,t){p.info(this.prefix+"setNumberProperty","name:",e,"value:",t)},setIntProperty:function(e,t){p.info(this.prefix+"setIntProperty","name:",e,"value:",t)},setBooleanProperty:function(e,t){p.info(this.prefix+"setBooleanProperty","name:",e,"value:",t)},setOptionalBooleanProperty:function(e,t){var o;p.info(this.prefix+"setOptionalBooleanProperty","name:",e,"value:",(o=t)||null!=o?o:"nil")},appendChild:function(e){return p.info(this.prefix+"appendChild id: "+e),new s("child "+e+" ")},appendComponent:function(e,t,o){p.info(this.prefix+"appendComponent","id:",e,"url:",t,"mimeType:",o)},setCompositeID:function(e){p.info(this.prefix+"setCompositeID","uuid:",e)},setManifestProperty:function(e,t){p.info(this.prefix+"setManifestProperty","name:",e,"value:",t||"nil")},setDocumentSize:function(e,t){p.info(this.prefix+"setDocumentSize","size:",e,"units:",t)}}}),s),d.VersionInfo=function(){var e=function(e){var t;this.vers=(t=d.TheoDocumentVersion.toCaseValue(e))||null!=t?t:d.TheoDocumentVersion.Invalid,this.minor=e%1e3,this.major=e-this.minor},t={};return p.defineClass({name:"VersionInfo",ctor:e,superName:"CoreObject",statics:{UNKNOWN:{get:function(){return void 0===t.UNKNOWN&&(t.UNKNOWN=new e(0)),t.UNKNOWN}},fromProperty:function(t){var o;return null!=(o=p.as(t,"Int"))?new e(o):e.UNKNOWN}},props:{description:{get:function(){return"Version Major: "+p.toString(this.major)+", minor: "+p.toString(this.minor)}},rawValue:{get:function(){return this.major+this.minor}}}}),e}(),d.TheoDocumentMessage=(a=function(e,t){ue.TheoMessage.call(this,e,t)},p.defineClass({name:"TheoDocumentMessage",ctor:a,superName:"TheoMessage",props:{document:{get:function(){return p.as(this.publisher,d.TheoDocument)}}}}),a),d.TheoDocumentWillDecodeMessage=(c=function e(t){d.TheoDocumentMessage.call(this,e.TYPE,t)},p.defineClass({name:"TheoDocumentWillDecodeMessage",ctor:c,superName:"TheoDocumentMessage",statics:{TYPE:"TheoDocumentWillDecodeMessage"}}),c),d.TheoDocumentDidDecodeMessage=(u=function e(t){d.TheoDocumentMessage.call(this,e.TYPE,t)},p.defineClass({name:"TheoDocumentDidDecodeMessage",ctor:u,superName:"TheoDocumentMessage",statics:{TYPE:"TheoDocumentDidDecodeMessage"}}),u),d.TheoDocumentRequestsSaveMessage=(l=function e(t,o){this.stateID=o,d.TheoDocumentMessage.call(this,e.TYPE,t)},p.defineClass({name:"TheoDocumentRequestsSaveMessage",ctor:l,superName:"TheoDocumentMessage",statics:{TYPE:"TheoDocumentRequestsSaveMessage"}}),l)},Qb69:function(e,t,o){var r,n,i=t,s=o("oAGj"),a=o("fVJ2"),c=o("dJuF");i.TheoDocumentData=(r=function(){},n={},s.defineClass({name:"TheoDocumentData",ctor:r,superName:"DBObject",statics:{SCHEMA_CLASS_NAME:"TheoDocumentData",codec:{get:function(){return void 0===n.codec&&(n.codec=c.DBPropertyCodec.registerCodec(r.SCHEMA_CLASS_NAME,c.DBPropertyCodec.directObjectCodec(r.SCHEMA_CLASS_NAME))),n.codec}},factory:{get:function(){return function(e,t,o,n){return r.init_866e(o,e)}}},PROPERTY_SHARE_DATA:"shareData",PROPERTY_SCOPE:"scope",_implements:function(e){return"IDBObject"==e}},props:{init_866e:function(e,t){s.super_init(this,a.DBObject,a.DBObject.prototype.init_866e,e,t)},init_d41d:function(){s.super_init(this,a.DBObject,a.DBObject.prototype.init_dd5d,s.clone({}),s.clone({}))},className:{get:function(){return r.SCHEMA_CLASS_NAME}},hasBeenPublished:{get:function(){return null!=this.shareData}},listed:{get:function(){return"public"==this.scope},set:function(e){var t=null;this.persisted&&(t=this.database.beginTransaction("scope",null)),this.scope=e?"public":"private",s.opt(t,(function(e){return e.mergeWithPrevious()}))}},shareData:{get:function(){return s.as(this.get(r.PROPERTY_SHARE_DATA),["Dictionary","String","String"])}},scope:{get:function(){var e;return(e=s.opt(this.shareData,(function(e){return e[r.PROPERTY_SCOPE]})))||null!=e?e:""},set:function(e){var t={};null!=this.shareData&&(t=s.clone(this.shareData)),t[r.PROPERTY_SCOPE]=e,this.set(r.PROPERTY_SHARE_DATA,s.clone(t))}}}}),r)},Quhx:function(e,t,o){var r,n,i=t,s=o("oAGj"),a=o("fVJ2"),c=o("MO6F");i.PostPublishingObject=(r=function(){this.publishing_=new c.TheoBasePublishing},s.defineClass({name:"PostPublishingObject",ctor:r,superName:"DBObject",statics:{_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{init_3f7c:function(e){s.super_init(this,a.DBObject,a.DBObject.prototype.init_3f7c,e),this.publishing_.owner=this},init_866e:function(e,t){s.super_init(this,a.DBObject,a.DBObject.prototype.init_866e,e,t),this.publishing_.owner=this},init_dd5d:function(e,t){s.super_init(this,a.DBObject,a.DBObject.prototype.init_dd5d,s.clone(e),s.clone(t)),this.publishing_.owner=this},init_11e0:function(e){s.super_init(this,a.DBObject,a.DBObject.prototype.init_11e0,e),this.publishing_.owner=this},init_3181:function(e,t,o){s.super_init(this,a.DBObject,a.DBObject.prototype.init_3181,e,t,o),this.publishing_.owner=this},init_5079:function(e,t,o,r){s.super_init(this,a.DBObject,a.DBObject.prototype.init_5079,e,s.clone(t),s.clone(o),r),this.publishing_.owner=this},init_9a09:function(e){s.super_init(this,a.DBObject,a.DBObject.prototype.init_67b3,e),this.publishing_.owner=this},subscribeWithCallback:function(e,t){return this.publishing_.subscribeWithCallback(e,t)},subscribe:function(e,t){return this.publishing_.subscribe(e,t)},unsubscribe:function(e){return this.publishing_.unsubscribe(e)},publish:function(e){this.publishing_.publish(e)}}}),r),i.PostDCXObject=(n=function(){},s.defineClass({name:"PostDCXObject",ctor:n,superName:"PostPublishingObject",statics:{PROPERTY_TYPE:"type",PROPERTY_PATH:"path",_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{uuid:{get:function(){return this.id}},type:{get:function(){return s.as(this.get(n.PROPERTY_TYPE),"String")}},path:{get:function(){return s.as(this.get(n.PROPERTY_PATH),"String")}},init_3f7c:function(e){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_3f7c,e)},init_866e:function(e,t){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_866e,e,t)},init_dd5d:function(e,t){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_dd5d,s.clone(e),s.clone(t))},init_11e0:function(e){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_11e0,e)},init_3181:function(e,t,o){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_3181,e,t,o)},init_5079:function(e,t,o,r){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_5079,e,s.clone(t),s.clone(o),r)},init_9a09:function(e){s.super_init(this,i.PostPublishingObject,i.PostPublishingObject.prototype.init_9a09,e)}}}),n)},URxh:function(e,t,o){var r,n,i,s=t,a=o("oAGj"),c=o("VQVe"),u=o("dJuF"),l=o("ZhwN"),d=o("tGKA"),p=o("Quhx"),h=o("x4Gy"),P=o("RkYL"),_=o("xm77");s.KeyFrame=(r=function(e,t,o,r,n,i){this.renderRuns=new h.RenderRuns,void 0===o&&(o=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=!1),this.time_=e,this.timingFunction_=t,this.placement_=o||d.Matrix2D.Identity,this.bounds_=r,this.style_=a.opt(n,(function(e){return e.clone()})),this.relativePlacement_=i},a.defineClass({name:"KeyFrame",ctor:r,superName:"CoreObject",statics:{makeFromTimeAndStyle:function(e,t){return new r(e,_.TimingFunctionType.Linear,d.Matrix2D.Identity,null,t)}},props:{time:{get:function(){return this.time_}},timingFunction:{get:function(){return this.timingFunction_}},placement:{get:function(){return this.placement_}},style:{get:function(){return this.style_}},bounds:{get:function(){return this.bounds_}},relativePlacement:{get:function(){return this.relativePlacement_}},stillKeyframe:{get:function(){return null==this.style&&this.placement.equal(d.Matrix2D.Identity)&&null==this.bounds}}}}),r),s.FormaAnimation=(n=function(){this.valid_=!0},i={},a.defineClass({name:"FormaAnimation",ctor:n,superName:"PostDCXObject",statics:{KIND:{get:function(){return"FormaAnimation"}},SCHEMA_CLASS_NAME:"FormaAnimation",codec:{get:function(){return void 0===i.codec&&(i.codec=u.DBPropertyCodec.registerCodec(n.SCHEMA_CLASS_NAME,u.DBPropertyCodec.directObjectCodec(n.SCHEMA_CLASS_NAME))),i.codec}},factory:{get:function(){return function(e,t,o,r){return n.init_866e(o,e)}}},PROPERTY_KIND:"kind",PROPERTY_START_TIME:"start-time",PROPERTY_END_TIME:"end-time",PROPERTY_KEY_FRAMES:"key-frames",PROPERTY_ANIMATION_STYLE:"animation-style",createDefault:function(){return n.init_9e82(c.AnimationStyle.init_b946(),P.TheoTime.Zero,P.TheoTime.Zero,[])},_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{init_9e82:function(e,t,o,r){this.persistedKeyFrames_=a.clone(r),a.super_init(this,p.PostDCXObject,p.PostDCXObject.prototype.init_dd5d,{},{"start-time":t,"end-time":o,"animation-style":e.clone(),"key-frames":r,kind:n.KIND})},init_866e:function(e,t){a.super_init(this,p.PostDCXObject,p.PostDCXObject.prototype.init_866e,e,t)},init_dd5d:function(e,t){a.super_init(this,p.PostDCXObject,p.PostDCXObject.prototype.init_dd5d,a.clone(e),a.clone(t))},didChangeState:function(e){p.PostDCXObject.prototype.didChangeState.call(this,a.clone(e)),null!=e[n.PROPERTY_KEY_FRAMES]&&(this.persistedKeyFrames_=null),this.invalidate()},willCommitState:function(){p.PostDCXObject.prototype.willCommitState.call(this),null!=this.pendingKeyFrames_&&(this.set(n.PROPERTY_KEY_FRAMES,a.clone(this.pendingKeyFrames_)),this.persistedKeyFrames_=a.clone(this.pendingKeyFrames_),this.pendingKeyFrames_=null)},className:{get:function(){return n.SCHEMA_CLASS_NAME}},startTime:{get:function(){var e;return(e=a.as(this.get(n.PROPERTY_START_TIME),P.TheoTime))||null!=e?e:P.TheoTime.Zero},set:function(e){this.set(n.PROPERTY_START_TIME,e)}},endTime:{get:function(){var e;return(e=a.as(this.get(n.PROPERTY_END_TIME),P.TheoTime))||null!=e?e:P.TheoTime.Zero},set:function(e){this.set(n.PROPERTY_END_TIME,e)}},persistedKeyFrames:{get:function(){var e;return null==this.persistedKeyFrames_&&(this.persistedKeyFrames_=a.clone((e=a.as(this.get(n.PROPERTY_KEY_FRAMES),["Array",s.KeyFrame]))||null!=e?e:[])),this.persistedKeyFrames_}},keyFrames:{get:function(){return this.pendingKeyFrames_||this.persistedKeyFrames},set:function(e){this.pendingKeyFrames_=a.clone(e)}},animationStyle:{get:function(){return this.get(n.PROPERTY_ANIMATION_STYLE)}},clone:function(){return this.fork(l.GUIDUtils.makeGUID())},invalidate:function(){this.valid_=!1},valid:{get:function(){return this.valid_}}}}),n)},VQVe:function(e,t,o){var r,n,i=t,s=o("oAGj"),a=o("dJuF"),c=o("ZhwN"),u=o("Quhx"),l=o("RkYL");i.AnimationStyleCategory=s.defineEnum("AnimationStyleCategory",{None:"none",Text:"text",Image:"image"}),i.AnimationStyle=(r=function(){this.hasDeprecatedProperties=!1},n={},s.defineClass({name:"AnimationStyle",ctor:r,superName:"PostDCXObject",statics:{SCHEMA_CLASS_NAME:"AnimationStyle",codec:{get:function(){return void 0===n.codec&&(n.codec=a.DBPropertyCodec.registerCodec(r.SCHEMA_CLASS_NAME,a.DBPropertyCodec.directObjectCodec(r.SCHEMA_CLASS_NAME))),n.codec}},factory:{get:function(){return function(e,t,o,n){return r.init_866e(o,e)}}},DEFAULT_TIMESCALE:{get:function(){return 30}},DEFAULT_START:{get:function(){return new l.TheoTime(0,r.DEFAULT_TIMESCALE)}},NOOP_DURATION:{get:function(){return new l.TheoTime(0,r.DEFAULT_TIMESCALE)}},DEFAULT_DURATION:{get:function(){return new l.TheoTime(75,r.DEFAULT_TIMESCALE)}},STILL_DURATION:{get:function(){return new l.TheoTime(60,r.DEFAULT_TIMESCALE)}},END_GIF_DURATION:{get:function(){return new l.TheoTime(150,r.DEFAULT_TIMESCALE)}},GIF_DURATION:{get:function(){return new l.TheoTime(150,r.DEFAULT_TIMESCALE)}},FADE_DURATION:{get:function(){return new l.TheoTime(30,r.DEFAULT_TIMESCALE)}},COLOR_SWAP_DURATION:{get:function(){return new l.TheoTime(180,r.DEFAULT_TIMESCALE)}},PROPERTY_NAME:"name",PROPERTY_VARIANT:"variant",PROPERTY_VARIANT_COUNT:"variant-count",PROPERTY_START_TIME:"start-time",PROPERTY_END_TIME:"end-time",PROPERTY_LOOPING:"looping",PROPERTY_CATEGORY:"category",DEPRECATED_PROPERTY_TEXT_STYLE:"text-style",DEPRECATED_PROPERTY_IMAGE_STYLE:"image-style",NAME_NO_STYLE:"None",NAME_TYPE:"Type",LETTER_APPEAR_VARIANT:10,LETTER_RANDOM_FADE_VARIANT:11,LETTER_APPEAR_FADE_VARIANT:12,NAME_FLICKER:"Flicker",NAME_GROW:"Grow",NAME_FADE:"Fade",NAME_DYNAMIC:"Dynamic",WORD_ZOOM_IN_VARIANT:0,WORD_CENTERED_VARIANT:1,WORD_APPEAR_VARIANT:2,NAME_COLORSWAP:"ColorSwap",NAME_SLIDE:"Slide",NAME_ZOOM:"Zoom",NAME_PAN:"Pan",NAME_GRAYSCALE:"Greyscale",NAME_BLUR:"Blur",NAME_COLOR:"Color",NAME_FILL:"Fill",noStyleAsString:function(){return r.NAME_NO_STYLE+"_0"},_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{init_866e:function(e,t){s.super_init(this,u.PostDCXObject,u.PostDCXObject.prototype.init_866e,e,t),this.hasDeprecatedProperties=null!=this.initialState.getProperty(r.DEPRECATED_PROPERTY_IMAGE_STYLE)||null!=this.initialState.getProperty(r.DEPRECATED_PROPERTY_TEXT_STYLE)},init_dd5d:function(e,t){s.super_init(this,u.PostDCXObject,u.PostDCXObject.prototype.init_dd5d,s.clone(e),s.clone(t))},init_b946:function(e,t){void 0===e&&(e=r.NAME_NO_STYLE),void 0===t&&(t=i.AnimationStyleCategory.None),s.super_init(this,u.PostDCXObject,u.PostDCXObject.prototype.init_dd5d,{},{name:e,variant:0,"variant-count":1,"start-time":new l.TheoTime(0,r.DEFAULT_DURATION.timescale),"end-time":r.DEFAULT_DURATION,looping:!1,category:t})},init_e14f:function(e,t,o,n,a){void 0===n&&(n=i.AnimationStyleCategory.None),void 0===a&&(a=!1),s.super_init(this,u.PostDCXObject,u.PostDCXObject.prototype.init_dd5d,{},{name:e,variant:t,"variant-count":o,"start-time":new l.TheoTime(0,r.DEFAULT_DURATION.timescale),"end-time":r.DEFAULT_DURATION,looping:a,category:n})},init_d915:function(e,t,o,r,n,a,c){void 0===a&&(a=i.AnimationStyleCategory.None),void 0===c&&(c=!1),s.super_init(this,u.PostDCXObject,u.PostDCXObject.prototype.init_dd5d,{},{name:e,variant:t,"variant-count":o,"start-time":r,"end-time":n,looping:c,category:a})},className:{get:function(){return r.SCHEMA_CLASS_NAME}},willCommitState:function(){var e,t;this.hasDeprecatedProperties&&this.persisted&&(null==s.as(this.get(r.PROPERTY_CATEGORY),"String")&&(((e=s.as(this.get(r.DEPRECATED_PROPERTY_TEXT_STYLE),"Bool"))||null!=e)&&e?this.set(r.PROPERTY_CATEGORY,i.AnimationStyleCategory.Text):((t=s.as(this.get(r.DEPRECATED_PROPERTY_IMAGE_STYLE),"Bool"))||null!=t)&&t?this.set(r.PROPERTY_CATEGORY,i.AnimationStyleCategory.Image):this.set(r.PROPERTY_CATEGORY,i.AnimationStyleCategory.None)),this.removeProperty(r.DEPRECATED_PROPERTY_TEXT_STYLE),this.removeProperty(r.DEPRECATED_PROPERTY_IMAGE_STYLE),this.hasDeprecatedProperties=!1),u.PostDCXObject.prototype.willCommitState.call(this)},name:{get:function(){var e;return(e=s.as(this.get(r.PROPERTY_NAME),"String"))||null!=e?e:"None"}},startTime:{get:function(){var e;return(e=s.as(this.get(r.PROPERTY_START_TIME),l.TheoTime))||null!=e?e:new l.TheoTime(0,r.DEFAULT_DURATION.timescale)},set:function(e){this.set(r.PROPERTY_START_TIME,e)}},endTime:{get:function(){var e;return(e=s.as(this.get(r.PROPERTY_END_TIME),l.TheoTime))||null!=e?e:r.DEFAULT_DURATION},set:function(e){this.set(r.PROPERTY_END_TIME,e)}},variant:{get:function(){var e;return(e=s.as(this.get(r.PROPERTY_VARIANT),"Int"))||null!=e?e:0},set:function(e){this.set(r.PROPERTY_VARIANT,e)}},variantCount:{get:function(){var e;return(e=s.as(this.get(r.PROPERTY_VARIANT_COUNT),"Int"))||null!=e?e:1},set:function(e){this.set(r.PROPERTY_VARIANT_COUNT,e)}},textStyle:{get:function(){return this.category==i.AnimationStyleCategory.Text}},imageStyle:{get:function(){return this.category==i.AnimationStyleCategory.Image}},category:{get:function(){var e,t,o,n;return null!=(n=s.as(this.get(r.PROPERTY_CATEGORY),"String"))?(e=i.AnimationStyleCategory.toCaseValue(n))||null!=e?e:i.AnimationStyleCategory.None:((t=s.as(this.get(r.DEPRECATED_PROPERTY_TEXT_STYLE),"Bool"))||null!=t)&&t?i.AnimationStyleCategory.Text:((o=s.as(this.get(r.DEPRECATED_PROPERTY_IMAGE_STYLE),"Bool"))||null!=o)&&o?i.AnimationStyleCategory.Image:i.AnimationStyleCategory.None}},looping:{get:function(){var e;return!(!(e=s.as(this.get(r.PROPERTY_LOOPING),"Bool"))&&null==e)&&e},set:function(e){this.set(r.PROPERTY_LOOPING,e)}},modifiesFormaTree:{get:function(){return this.name==r.NAME_FLICKER||this.name==r.NAME_TYPE||this.name==r.NAME_FADE}},isNewTextAnimation:{get:function(){return this.name==r.NAME_TYPE||this.name==r.NAME_DYNAMIC||this.name==r.NAME_FLICKER||this.name==r.NAME_COLORSWAP}},clone:function(){return this.fork(c.GUIDUtils.makeGUID())},equals:function(e){return e.name==this.name&&e.variant==this.variant},asString:{get:function(){return this.name+"_"+this.variant}},isNoStyle:function(){return this.name==r.NAME_NO_STYLE}}}),r)},i1Gv:function(e,t,o){var r,n,i=t,s=o("oAGj"),a=o("SpAV"),c=o("URxh");i.FormaAnimationFactory=(r=function(){this.lookup_={},this.lookup_[c.FormaAnimation.KIND]=function(){return c.FormaAnimation.createDefault()}},n={},s.defineClass({name:"FormaAnimationFactory",ctor:r,superName:"CoreObject",statics:{instance:{get:function(){return void 0===n.instance&&(n.instance=new r),n.instance}}},props:{create:function(e){var t;return null!=(t=this.lookup_[e])?t():(a.CoreAssert.warning("no constructor for forma style kind = "+e),null)}}}),r)},"jV/A":function(e,t,o){var r,n=t,i=o("oAGj"),s=o("SpAV"),a=o("gXiO"),c=o("sIWg"),u=o("1NAc");n.PROPERTY_ID="id",n.PROPERTY_IMAGE="image",n.PROPERTY_NAME="name",n.PROPERTY_SIZE="size",n.PROPERTY_EDITING_RESOLUTION="editing-resolution",n.PROPERTY_PUBLISH_RESOLUTION="publish-resolution",n.PROPERTY_URI="uri",n.PROPERTY_LOCKUP_STRINGS="lockup-strings",n.PROPERTY_FOCUS="focus",n.PROPERTY_NUM_IMAGES="num-images",n.PROPERTY_NUM_SHAPES="num-shapes",n.PROPERTY_EDGE_MAP="edges",n.PROPERTY_LAYOUT_ID="layout-id",n.PROPERTY_NUM_GRID_CELLS="num-grids-cells",n.PROPERTY_VISUAL_GROUP_INFO="visual-group-info",n.PROPERTY_TEXT_ROLES="text-roles",n.PROPERTY_SHAPE_ROLES="shape-roles",n.PROPERTY_SALIENT_COVERAGE="salient-coverage",n.PROPERTY_NUM_MOVEABLE="num-moveable",n.PROPERTY_NUM_GIFS="gifs-count",n.PROPERTY_CP_DOCID="cpId",n.PROPERTY_PREVIEW_URL="previewUrl",n.PROPERTY_MANIFEST_URL="manifestUrl",n.RetargetDocumentExemplar=(r=function(e,t,o,r,n,s,c,u,l,d,p,h,P,_,C,T,E,f,R,y,D,g,m){this.id=e,this.cpId=o,this.previewUrl=r,this.manifestUrl=n,this.uri=d,this.name=t,this.size=s,this.editingResolution=c,this.publishResolution=u,this.image=l,this.lockupStrings=i.clone(p),this.focus=h,this.numImages=P,this.edgeMap=i.clone(_),this.layoutID=C,this.numGridCells=T,this.numMoveable=E,this.numShapes=f,this.visualGroupInfo=i.clone(R),this.textRoles=i.clone(y),this.shapeRoles=i.clone(D),this.salientCoverage=g,this.gifsCount=m,a.CoreObject.call(this)},i.defineClass({name:"RetargetDocumentExemplar",ctor:r,superName:"CoreObject",statics:{decodeJson:function(e){var t,o,a,l,d,p,h,P,_,C,T,E,f,R,y;if(null==e);else if(y=i.as(e,["Dictionary","String","Any"])){var D;if(null!=(D=i.as(y[n.PROPERTY_ID],"String"))){var g,m=y[n.PROPERTY_EDGE_MAP];null!=m&&null!=(N=i.clone(i.as(m,["Array","Double"])))&&(g=i.clone(N));var A=[],S=y[n.PROPERTY_LOCKUP_STRINGS];null!=S&&(N=i.as(S,["Array","String"]))&&i.append(A,N);var O=[],b=y[n.PROPERTY_TEXT_ROLES];null!=b&&(N=i.as(b,["Array","String"]))&&i.append(O,N);var N,I=[],B=y[n.PROPERTY_SHAPE_ROLES];null!=B&&(N=i.as(B,["Array","String"]))&&i.append(I,N);var M=i.clone(y[n.PROPERTY_VISUAL_GROUP_INFO]),v=i.as(y[n.PROPERTY_FOCUS],"AnyObject"),F=null!=v?v.length:0;return new r(D,(t=i.as(y[n.PROPERTY_NAME],"String"))||null!=t?t:"",(o=i.as(y[n.PROPERTY_CP_DOCID],"String"))||null!=o?o:"",(a=i.as(y[n.PROPERTY_PREVIEW_URL],"String"))||null!=a?a:"",(l=i.as(y[n.PROPERTY_MANIFEST_URL],"String"))||null!=l?l:"",u.TheoSize.decodeJson(i.as(y[n.PROPERTY_SIZE],"AnyObject"))||u.TheoSize.Zero,(d=i.as(y[n.PROPERTY_EDITING_RESOLUTION],"Double"))||null!=d?d:1,(p=i.as(y[n.PROPERTY_PUBLISH_RESOLUTION],"Double"))||null!=p?p:1,(h=i.as(y[n.PROPERTY_IMAGE],"String"))||null!=h?h:"",(P=i.as(y[n.PROPERTY_URI],"String"))||null!=P?P:"",i.clone(A),null!=v&&F>0?c.TheoRect.decodeJson(v):null,(_=i.as(y[n.PROPERTY_NUM_IMAGES],"Double"))||null!=_?_:1,i.clone(g),(C=i.as(y[n.PROPERTY_LAYOUT_ID],"String"))||null!=C?C:"",(T=i.as(y[n.PROPERTY_NUM_GRID_CELLS],"Double"))||null!=T?T:0,i.toDouble(A.length),(E=i.as(y[n.PROPERTY_NUM_SHAPES],"Double"))||null!=E?E:0,i.clone(null!=M?M:{}),i.clone(O),i.clone(I),(f=i.as(y[n.PROPERTY_SALIENT_COVERAGE],"Double"))||null!=f?f:0,(R=i.as(y[n.PROPERTY_NUM_GIFS],"Double"))||null!=R?R:0)}}else s.CoreAssert.isTrue(!1,"decodeJson: not a dictionary","RetargetDocumentExemplar.decodeJson","RetargetDocumentExemplar.swift",250);return null}},props:{editingSize:{get:function(){return this.size.multiply(this.editingResolution)}},publishSize:{get:function(){return this.size.multiply(this.publishResolution)}},encodeJson:function(){var e={};return e[n.PROPERTY_ID]=this.id,e[n.PROPERTY_NAME]=this.name,e[n.PROPERTY_CP_DOCID]=this.cpId,e[n.PROPERTY_PREVIEW_URL]=this.previewUrl,e[n.PROPERTY_MANIFEST_URL]=this.manifestUrl,e[n.PROPERTY_SIZE]=this.size.encodeJson(),e[n.PROPERTY_PUBLISH_RESOLUTION]=this.publishResolution,e[n.PROPERTY_IMAGE]=this.image,e[n.PROPERTY_URI]=this.uri,e[n.PROPERTY_LOCKUP_STRINGS]=i.clone(this.lockupStrings),null!=this.focus&&(e[n.PROPERTY_FOCUS]=this.focus.encodeJson()),e[n.PROPERTY_NUM_IMAGES]=this.numImages,e[n.PROPERTY_LAYOUT_ID]=this.layoutID,e[n.PROPERTY_NUM_GRID_CELLS]=this.numGridCells,e[n.PROPERTY_NUM_MOVEABLE]=this.numMoveable,e[n.PROPERTY_NUM_SHAPES]=this.numShapes,e[n.PROPERTY_VISUAL_GROUP_INFO]=i.clone(this.visualGroupInfo),e[n.PROPERTY_TEXT_ROLES]=i.clone(this.textRoles),e[n.PROPERTY_SHAPE_ROLES]=i.clone(this.shapeRoles),e[n.PROPERTY_SALIENT_COVERAGE]=this.salientCoverage,e[n.PROPERTY_NUM_GIFS]=this.gifsCount,e}}}),r)},qsM9:function(e,t,o){var r,n=t,i=o("oAGj"),s=o("SpAV"),a=o("ascj"),c=o("dJuF"),u=o("URxh"),l=o("QgZx"),d=o("ylxa"),p=o("QbzR"),h=o("tQF8"),P=o("iCxV"),_=o("3lr5"),C=o("Qlvz"),T=o("REQJ"),E=o("tGKA"),f=o("VkKB"),R=o("Zifs"),y=o("byfQ"),D=o("umUn"),g=o("9YN4"),m=o("VJ9E"),A=o("BgH2"),S=o("hgLm"),O=o("oKlP"),b=o("uUew"),N=o("sIWg"),I=o("1NAc"),B=o("RkYL"),M=o("xm77");n.Codecs=(r=function(){},i.defineClass({name:"Codecs",ctor:r,statics:{solidColorCodec:{get:function(){return c.DBPropertyCodec.typeCodec("SolidColor")||c.DBPropertyCodec.registerCodec("SolidColor",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,R.SolidColor)){var a={red:c.DBProperty.doubleProperty(e.append("red"),r.red),green:c.DBProperty.doubleProperty(e.append("green"),r.green),blue:c.DBProperty.doubleProperty(e.append("blue"),r.blue),alpha:c.DBProperty.doubleProperty(e.append("alpha"),r.alpha)};n=c.DBProperty.dictEncoded(e,i.clone(a),"SolidColor")}else s.CoreAssert.fail("Expected SolidColor: "+t,"Codecs","Codecs.swift",25);return n}),(function(e,t){if(null!=e){var o,r,n,a,c;if((o=i.opt(e,(function(e){return e.dictionaryValue})))&&null!=(r=i.opt(o.red,(function(e){return e.doubleValue})))&&null!=(n=i.opt(o.green,(function(e){return e.doubleValue})))&&null!=(a=i.opt(o.blue,(function(e){return e.doubleValue})))&&null!=(c=i.opt(o.alpha,(function(e){return e.doubleValue}))))return new R.SolidColor(r,n,a,c);s.CoreAssert.fail("Expected a color dictionary.","Codecs","Codecs.swift",39)}return null}),"SolidColor"))}},theoColorCodec:{get:function(){var e=this;return c.DBPropertyCodec.typeCodec("TheoColor")||c.DBPropertyCodec.registerCodec("TheoColor",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,D.TheoColor)){var a={red:c.DBProperty.doubleProperty(e.append("red"),r.rgbColor.red),green:c.DBProperty.doubleProperty(e.append("green"),r.rgbColor.green),blue:c.DBProperty.doubleProperty(e.append("blue"),r.rgbColor.blue),alpha:c.DBProperty.doubleProperty(e.append("alpha"),r.rgbColor.alpha)},u=[];if(null!=r.sparkRoles)for(var l=i.iter(i.toSequence(r.sparkRoles));!l.done;l.next()){var d=l.value,p=d.offset,h=d.element;u.push(c.DBProperty.stringProperty(e.append("sparkRoles").append(i.toString(p)),h))}0==!u.length&&(a.sparkRoles=c.DBProperty.arrayProperty(e.append("sparkRoles"),i.clone(u))),null!=r.sparkElementID&&(a.sparkElementID=c.DBProperty.stringProperty(e.append("sparkElementID"),r.sparkElementID)),n=c.DBProperty.dictEncoded(e,i.clone(a),"TheoColor")}else s.CoreAssert.fail("Expected TheoColor: "+t,"Codecs","Codecs.swift",73);return n}),(function(t,o){if(null!=t){var r,n,a,c,u;if((r=i.opt(t,(function(e){return e.dictionaryValue})))&&null!=(n=i.opt(r.red,(function(e){return e.doubleValue})))&&null!=(a=i.opt(r.green,(function(e){return e.doubleValue})))&&null!=(c=i.opt(r.blue,(function(e){return e.doubleValue})))&&null!=(u=i.opt(r.alpha,(function(e){return e.doubleValue})))){var l=i.clone(i.opt(i.opt(r.sparkRoles,(function(e){return e.arrayValue})),(function(t){return t.map((function(e){return e.stringValue}),e)}))),d=i.opt(r.sparkElementID,(function(e){return e.stringValue}));return D.TheoColor.init_5344(new R.SolidColor(n,a,c,u),d,i.clone(l))}s.CoreAssert.fail("Expected a color dictionary.","Codecs","Codecs.swift",89)}return null}),"TheoColor"))}},paletteIDCodec:{get:function(){return c.DBPropertyCodec.typeCodec("PaletteID")||c.DBPropertyCodec.registerCodec("PaletteID",c.DBPropertyCodec.codec((function(e,t,o){var r,n,s=c.DBProperty.deleted(e);return null!=(r=i.as(t,"String"))?s=c.DBProperty.stringProperty(e,r):null!=(n=i.as(t,"Int"))&&(s=c.DBProperty.stringProperty(e,i.toString(n))),s}),(function(e,t){if(null!=e){var o,r;if(null!=(o=i.opt(e,(function(e){return e.stringValue}))))return o;if(null!=(r=i.opt(e,(function(e){return e.intValue}))))return i.toString(r)}return""}),"PaletteID"))}},theoTimeCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoTime")||c.DBPropertyCodec.registerCodec("TheoTime",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,B.TheoTime))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.intProperty(e.append("0"),r.value),c.DBProperty.intProperty(e.append("1"),r.timescale)])),n}),(function(e,t){if(null!=e){var o;if((o=i.opt(e,(function(e){return e.arrayValue})))&&2==o.length){var r=o[0].intValue,n=o[1].intValue;if(null!=r&&null!=n)return new B.TheoTime(r,n)}s.CoreAssert.fail("Expected an array of 2 ints.","Codecs","Codecs.swift",142)}return null}),"TheoTime"))}},theoSizeCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoSize")||c.DBPropertyCodec.registerCodec("TheoSize",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,I.TheoSize))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.doubleProperty(e.append("0"),r.width),c.DBProperty.doubleProperty(e.append("1"),r.height)])),n}),(function(e,t){if(null!=e){var o;if((o=i.opt(e,(function(e){return e.arrayValue})))&&2==o.length){var r=o[0].doubleValue,n=o[1].doubleValue;if(null!=r&&null!=n)return new I.TheoSize(r,n)}s.CoreAssert.fail("Expected an array of 2 doubles.","Codecs","Codecs.swift",170)}return null}),"TheoSize"))}},theoPointCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoPoint")||c.DBPropertyCodec.registerCodec("TheoPoint",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,O.TheoPoint))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.doubleProperty(e.append("0"),r.x),c.DBProperty.doubleProperty(e.append("1"),r.y)])),n}),(function(e,t){if(null!=e){var o;if((o=i.opt(e,(function(e){return e.arrayValue})))&&2==o.length){var r=o[0].doubleValue,n=o[1].doubleValue;if(null!=r&&null!=n)return new O.TheoPoint(r,n)}s.CoreAssert.fail("Expected an array of 2 doubles.","Codecs","Codecs.swift",198)}return null}),"TheoPoint"))}},theoRectCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoRect")||c.DBPropertyCodec.registerCodec("TheoRect",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,N.TheoRect))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.doubleProperty(e.append("0"),r.minX),c.DBProperty.doubleProperty(e.append("1"),r.minY),c.DBProperty.doubleProperty(e.append("2"),r.maxX),c.DBProperty.doubleProperty(e.append("3"),r.maxY)])),n}),(function(e,t){if(null!=e){var o,r;if(o=i.opt(e,(function(e){return e.arrayValue}))){if(4==o.length){var n=o[0].doubleValue,a=o[1].doubleValue,c=o[2].doubleValue,u=o[3].doubleValue;if(null!=n&&null!=a&&null!=c&&null!=u)return new N.TheoRect(n,a,c,u)}}else if(null!=(r=i.opt(e,(function(e){return e.stringValue})))){var l=r.split(",");if(4==l.length)return N.TheoRect.fromXXYY(i.toDouble(l[0]),i.toDouble(l[1]),i.toDouble(l[2]),i.toDouble(l[3]))}s.CoreAssert.fail("Expected a string or an array of 4 doubles.","Codecs","Codecs.swift",233)}return null}),"TheoRect"))}},matrix2DCodec:{get:function(){return c.DBPropertyCodec.typeCodec("Matrix2D")||c.DBPropertyCodec.registerCodec("Matrix2D",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,E.Matrix2D))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.doubleProperty(e.append("0"),r.a),c.DBProperty.doubleProperty(e.append("1"),r.b),c.DBProperty.doubleProperty(e.append("2"),r.c),c.DBProperty.doubleProperty(e.append("3"),r.d),c.DBProperty.doubleProperty(e.append("4"),r.tx),c.DBProperty.doubleProperty(e.append("5"),r.ty)])),n}),(function(e,t){var o;if(o=i.opt(e,(function(e){return e.arrayValue})))if(6==o.length){var r=o[0].doubleValue,n=o[1].doubleValue,a=o[2].doubleValue,c=o[3].doubleValue,u=o[4].doubleValue,l=o[5].doubleValue;if(null!=r&&null!=n&&null!=a&&null!=c&&null!=u&&null!=l)return new E.Matrix2D(r,n,a,c,u,l)}else s.CoreAssert.fail("Expected an array of 6 numeric elements.","Codecs","Codecs.swift",262);return E.Matrix2D.Identity}),"Matrix2D"))}},colorRoleCodec:{get:function(){return c.DBPropertyCodec.typeCodec("ColorRole")||c.DBPropertyCodec.registerCodec("ColorRole",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(null!=(r=i.as(t,a.ColorRole)))switch(r){case 3:n=c.DBProperty.stringProperty(e,"border");break;case 1:n=c.DBProperty.stringProperty(e,"field-primary");break;case 2:n=c.DBProperty.stringProperty(e,"field-secondary");break;default:n=c.DBProperty.deleted(e)}return n}),(function(e,t){var o;if(null!=(o=i.opt(e,(function(e){return e.stringValue}))))switch(o){case"border":return a.ColorRole.Border;case"field-primary":return a.ColorRole.FieldPrimary;case"field-secondary":return a.ColorRole.FieldSecondary;default:return a.ColorRole.None}return a.ColorRole.None}),"ColorRole"))}},textRangeCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TextRange")||c.DBPropertyCodec.registerCodec("TextRange",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);return(r=i.as(t,b.TextRange))&&(n=c.DBProperty.arrayProperty(e,[c.DBProperty.intProperty(e.append("0"),r.start),c.DBProperty.intProperty(e.append("1"),r.end)])),n}),(function(e,t){var o;if(null!=e&&(o=i.opt(e,(function(e){return e.arrayValue})))){var r=o[0].intValue,n=o[1].intValue;if(null!=r&&null!=n)return new b.TextRange(r,n);s.CoreAssert.fail("TextRange decoder: Expected an array of 2 integers","Codecs","Codecs.swift",315)}return null}),"TextRange"))}},gridCellCodec:{get:function(){return c.DBPropertyCodec.typeCodec("GridCell")||c.DBPropertyCodec.registerCodec("GridCell",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,h.GridCell)){var s,a=[c.DBPropertyCodec.typeCodec("TheoRect").encode(e.append("0"),r.bounds,null),c.DBProperty.doubleProperty(e.append("1"),r.opacity)];null!=(s=r.colorID)&&a.push(c.DBProperty.stringProperty(e.append("2"),s)),n=c.DBProperty.arrayProperty(e,i.clone(a))}return n}),(function(e,t){var o;if(o=i.opt(e,(function(e){return e.arrayValue}))){var r=c.DBPropertyCodec.typeCodec("TheoRect").decode(o[0],t),n=o[1].doubleValue,s=o.length>2?o[2].stringValue:null;return new h.GridCell(r,s,n)}return null}),"GridCell"))}},fontDescriptorCodec:{get:function(){var e="FontDescriptor";return c.DBPropertyCodec.typeCodec(e)||c.DBPropertyCodec.registerCodec(e,c.DBPropertyCodec.codec((function(t,o,r){var n,s=c.DBProperty.deleted(t);return(n=i.as(o,l.FontDescriptor))&&(s=c.DBProperty.dictEncoded(t,i.dict(["postscript-name",c.DBProperty.stringProperty(t.append("postscript-name"),n.postScriptName)]),e)),s}),(function(e,t){var o,r;if((o=i.opt(e,(function(e){return e.dictionaryValue})))&&null!=(r=i.opt(o["postscript-name"],(function(e){return e.stringValue})))){var n=t.persisted?i.as(t.database.host,g.TheoDocument):_.ANY_DOCUMENT,s=P.Host.fontProvider.descriptorForPostScriptName(r,n);return P.Host.fontProvider.getIncludedFonts(n).contains(s)?s:P.Host.textModelUtils.defaultFont()}return null}),e))}},fontCodec:{get:function(){var e=this;return c.DBPropertyCodec.typeCodec("TheoFont")||c.DBPropertyCodec.registerCodec("TheoFont",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,m.TheoFont)){var s=[];if(null!=r.sparkRoles)for(var a=i.iter(i.toSequence(r.sparkRoles));!a.done;a.next()){var u=a.value,l=u.offset,d=u.element;s.push(c.DBProperty.stringProperty(e.append("sparkRoles").append(i.toString(l)),d))}var p=r.sparkElementID,h=i.dict(["postscript-name",c.DBProperty.stringProperty(e.append("postscript-name"),r.fontData.postScriptName)]);0==!s.length&&(h.sparkRoles=c.DBProperty.arrayProperty(e.append("sparkRoles"),i.clone(s))),null!=p&&(h.sparkElementID=c.DBProperty.stringProperty(e.append("sparkElementID"),p)),n=c.DBProperty.dictEncoded(e,i.clone(h),"TheoFont")}return n}),(function(t,o){var r,n;if((r=i.opt(t,(function(e){return e.dictionaryValue})))&&null!=(n=i.opt(r["postscript-name"],(function(e){return e.stringValue})))){var s,a=o.persisted?i.as(o.database.host,g.TheoDocument):_.ANY_DOCUMENT,c=P.Host.fontProvider.descriptorForPostScriptName(n,a),u=i.clone(i.opt(i.opt(r.sparkRoles,(function(e){return e.arrayValue})),(function(t){return t.map((function(e){return e.stringValue}),e)}))),d=i.opt(r.sparkElementID,(function(e){return e.stringValue}));return!o.persisted||c.postScriptName==n&&c.availability==l.FontAvailability.LOADED||(s=a)&&s.recordMissingFont(n),m.TheoFont.init_9e5c(c,d,i.clone(u))}return null}),"TheoFont"))}},mediaMetadataCodec:{get:function(){return c.DBPropertyCodec.typeCodec("MediaMetadata")||c.DBPropertyCodec.registerCodec("MediaMetadata",c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,f.MediaMetadata)){var s,a,u,l,d,p,h,P,_,C,T,E,R,y,D,g,m={};null!=(s=r.searchSource)&&(m.source=c.DBProperty.stringProperty(e.append("source"),s)),null!=(a=r.searchTerm)&&(m.search=c.DBProperty.stringProperty(e.append("search"),a)),null!=(u=r.title)&&(m.photo_name=c.DBProperty.stringProperty(e.append("photo_name"),u)),null!=(l=r.tags)&&(m.tags=c.DBProperty.stringProperty(e.append("tags"),l)),null!=(d=r.licenseType)&&(m.type=c.DBProperty.stringProperty(e.append("type"),d)),null!=(p=r.sourceName)&&(m.source_name=c.DBProperty.stringProperty(e.append("source_name"),p)),null!=(h=r.sourceURL)&&(m.source_url=c.DBProperty.stringProperty(e.append("source_url"),h)),null!=(P=r.ownerName)&&(m.owner=c.DBProperty.stringProperty(e.append("owner"),P)),null!=(_=r.assetID)&&(m.asset_id=c.DBProperty.stringProperty(e.append("asset_id"),_)),null!=(C=r.creatorUserID)&&(m.creator_user_id=c.DBProperty.stringProperty(e.append("creator_user_id"),C)),null!=(T=r.creatorDisplayName)&&(m.creator_display_name=c.DBProperty.stringProperty(e.append("creator_display_name"),T)),null!=(E=r.designIntent)&&(m.design_intent=c.DBProperty.stringProperty(e.append("design_intent"),E)),null!=(R=r.libraryID)&&(m.library_id=c.DBProperty.stringProperty(e.append("library_id"),R)),null!=(y=r.libraryName)&&(m.library_name=c.DBProperty.stringProperty(e.append("library_name"),y)),null!=(D=r.createdDate)&&(m.created_date=c.DBProperty.intProperty(e.append("created_date"),D)),null!=(g=r.modifiedDate)&&(m.modified_date=c.DBProperty.intProperty(e.append("modified_date"),g)),n=c.DBProperty.dictEncoded(e,i.clone(m),"MediaMetadata")}return n}),(function(e,t){var o;return(o=i.opt(e,(function(e){return e.dictionaryValue})))?f.MediaMetadata.init_36a2(i.opt(o.source,(function(e){return e.stringValue})),i.opt(o.search,(function(e){return e.stringValue})),i.opt(o.photo_name,(function(e){return e.stringValue})),i.opt(o.tags,(function(e){return e.stringValue})),i.opt(o.type,(function(e){return e.stringValue})),i.opt(o.source_url,(function(e){return e.stringValue})),i.opt(o.source_name,(function(e){return e.stringValue})),i.opt(o.owner,(function(e){return e.stringValue})),i.opt(o.asset_id,(function(e){return e.stringValue})),i.opt(o.creator_user_id,(function(e){return e.stringValue})),i.opt(o.creator_display_name,(function(e){return e.stringValue})),i.opt(o.design_intent,(function(e){return e.stringValue})),i.opt(o.library_id,(function(e){return e.stringValue})),i.opt(o.library_name,(function(e){return e.stringValue})),i.opt(o.created_date,(function(e){return e.intValue})),i.opt(o.modified_date,(function(e){return e.intValue}))):null}),"MediaMetadata"))}},imageColorDataCodec:{get:function(){var e="ImageColorData";return c.DBPropertyCodec.typeCodec(e)||c.DBPropertyCodec.registerCodec(e,c.DBPropertyCodec.codec((function(t,o,r){var n,a=c.DBProperty.deleted(t);if(n=i.as(o,T.ImageColorData)){var u={red:c.DBProperty.doubleProperty(t.append("red"),n.rgbColor.red),green:c.DBProperty.doubleProperty(t.append("green"),n.rgbColor.green),blue:c.DBProperty.doubleProperty(t.append("blue"),n.rgbColor.blue),alpha:c.DBProperty.doubleProperty(t.append("alpha"),n.rgbColor.alpha),coverage:c.DBProperty.doubleProperty(t.append("coverage"),n.coverage)};a=c.DBProperty.dictEncoded(t,i.clone(u),e)}else s.CoreAssert.fail("Expected TheoColor: "+o,"Codecs","Codecs.swift",539);return a}),(function(e,t){if(null!=e){var o,r,n,a,c,u;if((o=i.opt(e,(function(e){return e.dictionaryValue})))&&null!=(r=i.opt(o.red,(function(e){return e.doubleValue})))&&null!=(n=i.opt(o.green,(function(e){return e.doubleValue})))&&null!=(a=i.opt(o.blue,(function(e){return e.doubleValue})))&&null!=(c=i.opt(o.alpha,(function(e){return e.doubleValue})))&&null!=(u=i.opt(o.coverage,(function(e){return e.doubleValue}))))return new T.ImageColorData(new R.SolidColor(r,n,a,c),u);s.CoreAssert.fail("Expected a color dictionary.","Codecs","Codecs.swift",554)}return null}),e))}},pathDictionary:function(e,t){return{type:c.DBProperty.stringProperty(e.append("type"),t.type),fillRule:c.DBProperty.stringProperty(e.append("fillRule"),t.pathFillType),endType:c.DBProperty.stringProperty(e.append("endType"),t.pathEndcapType),joinType:c.DBProperty.stringProperty(e.append("joinType"),t.pathJoinType),strokeWeight:c.DBProperty.doubleProperty(e.append("strokeWeight"),t.pathStrokeWeight),miterLimit:c.DBProperty.doubleProperty(e.append("miterLimit"),t.pathMiterLimit)}},pathProperties:function(e){return{type:i.opt(e.type,(function(e){return e.stringValue})),fill:i.opt(e.fillRule,(function(e){return e.stringValue})),end:i.opt(e.endType,(function(e){return e.stringValue})),join:i.opt(e.joinType,(function(e){return e.stringValue})),stroke:i.opt(e.strokeWeight,(function(e){return e.doubleValue})),miterLimit:i.opt(e.miterLimit,(function(e){return e.doubleValue}))}},pathCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoPathTypes")||c.DBPropertyCodec.registerCodec("TheoPathTypes",c.DBPropertyCodec.codec((function(e,t,o){var n=c.DBProperty.deleted(e);return t instanceof S.TheoEmptyPath?n=r.emptyPathCodec.encode(e,t,o):t instanceof S.TheoRectanglePath?n=r.rectanglePathCodec.encode(e,t,o):t instanceof S.TheoEllipsePath?n=r.ellipsePathCodec.encode(e,t,o):t instanceof S.TheoArbitraryPath?n=r.arbitraryPathCodec.encode(e,t,o):s.CoreAssert.fail("Unknown path type: "+t,"Codecs","Codecs.swift",595),n}),(function(e,t){if(null!=e){var o;if(o=i.opt(e,(function(e){return e.dictionaryValue}))){s.CoreAssert.isTrue(i.opt(o.type,(function(e){return null!=e.stringValue})),"Missing path type","Codecs","Codecs.swift",602);var n=o.type.stringValue;switch(n){case"empty":return r.emptyPathCodec.decode(e,t);case"rect":return r.rectanglePathCodec.decode(e,t);case"ellipse":return r.ellipsePathCodec.decode(e,t);case"arbitrary":return r.arbitraryPathCodec.decode(e,t);default:s.CoreAssert.fail("Unknown path type "+n,"Codecs","Codecs.swift",614)}return null}s.CoreAssert.fail("Expected a path dictionary.","Codecs","Codecs.swift",618)}return null}),"TheoPathTypes"))}},emptyPathCodec:{get:function(){return c.DBPropertyCodec.typeCodec("TheoEmptyPath")||c.DBPropertyCodec.registerCodec("TheoEmptyPath",c.DBPropertyCodec.codec((function(e,t,o){var n,a=c.DBProperty.deleted(e);return(n=i.as(t,S.TheoEmptyPath))?a=c.DBProperty.dictEncoded(e,i.clone(r.pathDictionary(e,n)),"TheoEmptyPath"):s.CoreAssert.fail("Expected TheoEmptyPath: "+t,"Codecs","Codecs.swift",633),a}),(function(e,t){if(null!=e){var o;if(o=i.opt(e,(function(e){return e.dictionaryValue})))return s.CoreAssert.isTrue(i.opt(o.type,(function(e){return"empty"==e.stringValue})),"Expected an empty path","Codecs","Codecs.swift",640),new S.TheoEmptyPath;s.CoreAssert.fail("Expected a path dictionary.","Codecs","Codecs.swift",643)}return null}),"TheoEmptyPath"))}},rectanglePathCodec:{get:function(){var e,t,o,n,a,u="TheoRectanglePath";return c.DBPropertyCodec.typeCodec(u)||c.DBPropertyCodec.registerCodec(u,c.DBPropertyCodec.codec((function(e,t,o){var n,a=c.DBProperty.deleted(e);if(n=i.as(t,S.TheoRectanglePath)){var l=i.clone(r.pathDictionary(e,n));l.coords=r.theoRectCodec.encode(e.append("coords"),n.rect,o),a=c.DBProperty.dictEncoded(e,i.clone(l),u)}else s.CoreAssert.fail("Expected TheoRectanglePath: "+t,"Codecs","Codecs.swift",660);return a}),(function(c,u){if(null!=c){var l;if(l=i.opt(c,(function(e){return e.dictionaryValue}))){var d,p=r.pathProperties(i.clone(l)),h=p.type,P=p.fill,_=p.end,C=p.join,T=p.stroke,E=p.miterLimit;return s.CoreAssert.isTrue("rect"==h,"Expected a rectangle path","Codecs","Codecs.swift",668),(d=i.as(r.theoRectCodec.decode(l.coords,u),N.TheoRect))?new S.TheoRectanglePath(d,(e=P)||null!=e?e:S.TheoPath.PATHFILL_DEFAULT,(t=_)||null!=t?t:S.TheoPath.PATHEND_DEFAULT,(o=C)||null!=o?o:S.TheoPath.PATHJOIN_DEFAULT,(n=T)||null!=n?n:S.TheoPath.PATHSTROKE_DEFAULT,(a=E)||null!=a?a:S.TheoPath.PATHMITERLIMIT_DEFFAULT):(s.CoreAssert.fail("Expected a rectangle path dictionary.","Codecs","Codecs.swift",672),null)}s.CoreAssert.fail("Expected a path dictionary.","Codecs","Codecs.swift",675)}return null}),u))}},ellipsePathCodec:{get:function(){var e,t,o,n,a,u="TheoEllipsePath";return c.DBPropertyCodec.typeCodec(u)||c.DBPropertyCodec.registerCodec(u,c.DBPropertyCodec.codec((function(e,t,o){var n,a=c.DBProperty.deleted(e);if(n=i.as(t,S.TheoEllipsePath)){var l=i.clone(r.pathDictionary(e,n));l.coords=r.theoRectCodec.encode(e.append("coords"),n.rect,o),a=c.DBProperty.dictEncoded(e,i.clone(l),u)}else s.CoreAssert.fail("Expected TheoEllipsePath: "+t,"Codecs","Codecs.swift",692);return a}),(function(c,u){if(null!=c){var l;if(l=i.opt(c,(function(e){return e.dictionaryValue}))){var d,p=r.pathProperties(i.clone(l)),h=p.type,P=p.fill,_=p.end,C=p.join,T=p.stroke,E=p.miterLimit;return s.CoreAssert.isTrue("ellipse"==h,"Expected an ellipse path","Codecs","Codecs.swift",700),(d=i.as(r.theoRectCodec.decode(l.coords,u),N.TheoRect))?new S.TheoEllipsePath(d,(e=P)||null!=e?e:S.TheoPath.PATHFILL_DEFAULT,(t=_)||null!=t?t:S.TheoPath.PATHEND_DEFAULT,(o=C)||null!=o?o:S.TheoPath.PATHJOIN_DEFAULT,(n=T)||null!=n?n:S.TheoPath.PATHSTROKE_DEFAULT,(a=E)||null!=a?a:S.TheoPath.PATHMITERLIMIT_DEFFAULT):(s.CoreAssert.fail("Expected an ellipse path dictionary.","Codecs","Codecs.swift",704),null)}s.CoreAssert.fail("Expected a path dictionary.","Codecs","Codecs.swift",707)}return null}),u))}},arbitraryPathCodec:{get:function(){var e,t,o,n,a,u="TheoArbitraryPath";return c.DBPropertyCodec.typeCodec(u)||c.DBPropertyCodec.registerCodec(u,c.DBPropertyCodec.codec((function(e,t,o){var n,a=c.DBProperty.deleted(e);if(n=i.as(t,S.TheoArbitraryPath)){var l=i.clone(r.pathDictionary(e,n)),d=i.clone(S.TheoPathBuilder.getEncodedOperations(e.append("ops"),n));l.ops=c.DBProperty.arrayProperty(e.append("ops"),i.clone(d)),a=c.DBProperty.dictEncoded(e,i.clone(l),u)}else s.CoreAssert.fail("Expected TheoArbitraryPath: "+t,"Codecs","Codecs.swift",725);return a}),(function(c,u){if(null!=c){var l;if(l=i.opt(c,(function(e){return e.dictionaryValue}))){var d=r.pathProperties(i.clone(l)),p=d.type,h=d.fill,P=d.end,_=d.join,C=d.stroke,T=d.miterLimit;s.CoreAssert.isTrue("arbitrary"==p,"Expected an arbitrary path","Codecs","Codecs.swift",733);var E=i.clone(i.opt(l.ops,(function(e){return e.arrayValue})));return null!=E?S.TheoPathBuilder.init_7691(i.clone(E),(e=h)||null!=e?e:S.TheoPath.PATHFILL_DEFAULT,(t=P)||null!=t?t:S.TheoPath.PATHEND_DEFAULT,(o=_)||null!=o?o:S.TheoPath.PATHJOIN_DEFAULT,(n=C)||null!=n?n:S.TheoPath.PATHSTROKE_DEFAULT,(a=T)||null!=a?a:S.TheoPath.PATHMITERLIMIT_DEFFAULT).path:(s.CoreAssert.fail("Expected an arbitrary path dictionary.","Codecs","Codecs.swift",738),null)}s.CoreAssert.fail("Expected a path dictionary.","Codecs","Codecs.swift",741)}return null}),u))}},artworkNodeCodec:{get:function(){var e="TheoArtworkNodeTypes";return c.DBPropertyCodec.typeCodec(e)||c.DBPropertyCodec.registerCodec(e,c.DBPropertyCodec.codec((function(e,t,o){var n=c.DBProperty.deleted(e);return t instanceof y.TheoArtworkShape?n=r.artworkShapeCodec.encode(e,t,o):t instanceof y.TheoArtworkClipGroup?n=r.artworkClipGroupCodec.encode(e,t,o):t instanceof y.TheoArtworkGroup?n=r.artworkGroupCodec.encode(e,t,o):s.CoreAssert.fail("Unknown artwork type: "+t,"Codecs","Codecs.swift",759),n}),(function(e,t){if(null!=e){var o;if(o=i.opt(e,(function(e){return e.dictionaryValue}))){s.CoreAssert.isTrue(i.opt(o[y.TheoArtworkNode.PROPERTY_TYPE],(function(e){return null!=e.stringValue})),"Missing artwork type","Codecs","Codecs.swift",766);var n=o[y.TheoArtworkNode.PROPERTY_TYPE].stringValue;switch(n){case"shape":return r.artworkShapeCodec.decode(e,t);case"group":return r.artworkGroupCodec.decode(e,t);case"clip-group":return r.artworkClipGroupCodec.decode(e,t);default:s.CoreAssert.fail("Unknown artwork type "+n,"Codecs","Codecs.swift",776)}return null}s.CoreAssert.fail("Expected an artwork dictionary.","Codecs","Codecs.swift",780)}return null}),e))}},artworkShapeCodec:{get:function(){var e,t,o,n=this,u="TheoArtworkShape";return c.DBPropertyCodec.typeCodec(u)||c.DBPropertyCodec.registerCodec(u,c.DBPropertyCodec.codec((function(e,t,o){var a,l=c.DBProperty.deleted(e);if(a=i.as(t,y.TheoArtworkShape)){var d=c.DBProperty.stringProperty(e.append(y.TheoArtworkNode.PROPERTY_UID),a.uid),p=c.DBProperty.stringProperty(e.append(y.TheoArtworkNode.PROPERTY_TYPE),a.type),h=r.colorRoleCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_FILLCOLORROLE),a.fillColorRole,o),P=r.colorRoleCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_STROKECOLORROLE),a.strokeColorRole,o),_=null!=a.fillColor?r.solidColorCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_FILLCOLOR),a.fillColor,o):null,C=null!=a.strokeColor?r.solidColorCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_STROKECOLOR),a.strokeColor,o):null,T=c.DBProperty.doubleProperty(e.append(y.TheoArtworkNode.PROPERTY_STROKEWIDTH),a.strokeWidth),E=null!=a.overrideBounds?r.theoRectCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_OVERRIDE_BOUNDS),a.overrideBounds,o):null,f=i.toSequence(a.paths).map((function(t){return r.pathCodec.encode(e.append(y.TheoArtworkNode.PROPERTY_PATHS).append(i.toString(t.offset)),t.element,o)}),n),R={"immutable-id":d,type:p,paths:c.DBProperty.arrayProperty(e.append(y.TheoArtworkNode.PROPERTY_PATHS),i.clone(f)),"fill-color-role":h,"stroke-color-role":P,"stroke-width":T};null!=_&&(R[y.TheoArtworkNode.PROPERTY_FILLCOLOR]=_),null!=C&&(R[y.TheoArtworkNode.PROPERTY_STROKECOLOR]=C),null!=E&&(R[y.TheoArtworkNode.PROPERTY_OVERRIDE_BOUNDS]=E),l=c.DBProperty.dictEncoded(e,i.clone(R),u)}else s.CoreAssert.fail("Expected TheoArtworkShape: "+t,"Codecs","Codecs.swift",816);return l}),(function(c,u){if(null!=c){var l;if(l=i.opt(c,(function(e){return e.dictionaryValue}))){s.CoreAssert.isTrue(i.opt(l[y.TheoArtworkNode.PROPERTY_TYPE],(function(e){return"shape"==e.stringValue})),"Expected a shape node","Codecs","Codecs.swift",823);var d=i.opt(l[y.TheoArtworkNode.PROPERTY_UID],(function(e){return e.stringValue})),p=i.as(r.solidColorCodec.decode(l[y.TheoArtworkNode.PROPERTY_FILLCOLOR],u),R.SolidColor),h=(e=i.as(r.colorRoleCodec.decode(l[y.TheoArtworkNode.PROPERTY_FILLCOLORROLE],u),a.ColorRole))||null!=e?e:a.ColorRole.None,P=i.as(r.solidColorCodec.decode(l[y.TheoArtworkNode.PROPERTY_STROKECOLOR],u),R.SolidColor),_=(t=i.as(r.colorRoleCodec.decode(l[y.TheoArtworkNode.PROPERTY_STROKECOLORROLE],u),a.ColorRole))||null!=t?t:a.ColorRole.None,C=(o=i.opt(l[y.TheoArtworkNode.PROPERTY_STROKEWIDTH],(function(e){return e.doubleValue})))||null!=o?o:0,T=i.as(r.theoRectCodec.decode(l[y.TheoArtworkNode.PROPERTY_OVERRIDE_BOUNDS],u),N.TheoRect),E=i.as(r.pathCodec.decode(l[y.TheoArtworkNode.PROPERTY_PATH],u),S.TheoPath),f=i.clone(null!=E?[E]:l[y.TheoArtworkNode.PROPERTY_PATHS].arrayValue.map((function(e){return r.pathCodec.decode(e,u)}),n));return y.TheoArtworkShape.init_d1d0(d,i.clone(f),h,_,p,P,C,T)}s.CoreAssert.fail("Expected an artwork dictionary.","Codecs","Codecs.swift",835)}return null}),u))}},artworkGroupCodec:{get:function(){var e=this,t="TheoArtworkGroup";return c.DBPropertyCodec.typeCodec(t)||c.DBPropertyCodec.registerCodec(t,c.DBPropertyCodec.codec((function(o,n,a){var u,l=c.DBProperty.deleted(o);if(u=i.as(n,y.TheoArtworkGroup)){var d=c.DBProperty.stringProperty(o.append(y.TheoArtworkNode.PROPERTY_UID),u.uid),p=c.DBProperty.stringProperty(o.append(y.TheoArtworkNode.PROPERTY_TYPE),u.type),h=i.toSequence(u.children).map((function(e){return r.artworkNodeCodec.encode(o.append(y.TheoArtworkNode.PROPERTY_CHILD_NODES).append(i.toString(e.offset)),e.element,a)}),e),P={"immutable-id":d,type:p,nodes:c.DBProperty.arrayProperty(o.append(y.TheoArtworkNode.PROPERTY_CHILD_NODES),i.clone(h))};l=c.DBProperty.dictEncoded(o,i.clone(P),t)}else s.CoreAssert.fail("Expected TheoArtworkGroup: "+n,"Codecs","Codecs.swift",854);return l}),(function(t,o){if(null!=t){var n;if(n=i.opt(t,(function(e){return e.dictionaryValue}))){s.CoreAssert.isTrue(i.opt(n[y.TheoArtworkNode.PROPERTY_TYPE],(function(e){return"group"==e.stringValue})),"Expected a group node","Codecs","Codecs.swift",861);var a=i.opt(n[y.TheoArtworkNode.PROPERTY_UID],(function(e){return e.stringValue})),c=i.clone(i.opt(n[y.TheoArtworkNode.PROPERTY_CHILD_NODES],(function(e){return e.arrayValue}))||n[y.TheoArtworkNode.PROPERTY_NODES].arrayValue).map((function(e){return r.artworkNodeCodec.decode(e,o)}),e);return new y.TheoArtworkGroup(a,i.clone(c))}s.CoreAssert.fail("Expected an artwork dictionary.","Codecs","Codecs.swift",867)}return null}),t))}},artworkClipGroupCodec:{get:function(){var e=this,t="TheoArtworkClipGroup";return c.DBPropertyCodec.typeCodec(t)||c.DBPropertyCodec.registerCodec(t,c.DBPropertyCodec.codec((function(o,n,a){var u,l=c.DBProperty.deleted(o);if(u=i.as(n,y.TheoArtworkClipGroup)){var d=c.DBProperty.stringProperty(o.append(y.TheoArtworkNode.PROPERTY_UID),u.uid),p=c.DBProperty.stringProperty(o.append(y.TheoArtworkNode.PROPERTY_TYPE),u.type),h=r.pathCodec.encode(o.append(y.TheoArtworkNode.PROPERTY_PATH),u.path,a),P=i.toSequence(u.children).map((function(e){return r.artworkNodeCodec.encode(o.append(y.TheoArtworkNode.PROPERTY_CHILD_NODES).append(i.toString(e.offset)),e.element,a)}),e),_={"immutable-id":d,type:p,path:h,nodes:c.DBProperty.arrayProperty(o.append(y.TheoArtworkNode.PROPERTY_CHILD_NODES),i.clone(P))};l=c.DBProperty.dictEncoded(o,i.clone(_),t)}else s.CoreAssert.fail("Expected TheoArtworkClipGroup: "+n,"Codecs","Codecs.swift",886);return l}),(function(t,o){if(null!=t){var n;if(n=i.opt(t,(function(e){return e.dictionaryValue}))){s.CoreAssert.isTrue(i.opt(n[y.TheoArtworkNode.PROPERTY_TYPE],(function(e){return"clip-group"==e.stringValue})),"Expected a clip group node","Codecs","Codecs.swift",893);var a=i.opt(n[y.TheoArtworkNode.PROPERTY_UID],(function(e){return e.stringValue})),c=r.pathCodec.decode(n[y.TheoArtworkNode.PROPERTY_PATH],o),u=i.clone(i.opt(n[y.TheoArtworkNode.PROPERTY_CHILD_NODES],(function(e){return e.arrayValue}))||n[y.TheoArtworkNode.PROPERTY_NODES].arrayValue).map((function(e){return r.artworkNodeCodec.decode(e,o)}),e);return new y.TheoArtworkClipGroup(a,i.clone(u),c)}s.CoreAssert.fail("Expected an artwork dictionary.","Codecs","Codecs.swift",900)}return null}),t))}},pageExportDataCodec:{get:function(){var e,t="FormaPageExportData";return c.DBPropertyCodec.typeCodec(t)||c.DBPropertyCodec.registerCodec(t,c.DBPropertyCodec.codec((function(e,o,n){var a,u=c.DBProperty.deleted(e);if(a=i.as(o,d.FormaPageExportData)){var l={dimensions:r.theoSizeCodec.encode(e.append(d.FormaPageExportData.PROPERTY_DIMENSIONS),a.dimensions,n),format:c.DBProperty.intProperty(e.append(d.FormaPageExportData.PROPERTY_FORMAT),a.format)};null!=a.ppi&&(l[d.FormaPageExportData.PROPERTY_PPI]=c.DBProperty.doubleProperty(e.append(d.FormaPageExportData.PROPERTY_PPI),a.ppi)),u=c.DBProperty.dictEncoded(e,i.clone(l),t)}else s.CoreAssert.fail("Expected FormaPageExportData: "+o,"Codecs","Codecs.swift",921);return u}),(function(t,o){if(null!=t){var n;if(n=i.opt(t,(function(e){return e.dictionaryValue}))){var a=r.theoSizeCodec.decode(n[d.FormaPageExportData.PROPERTY_DIMENSIONS],o),c=n[d.FormaPageExportData.PROPERTY_FORMAT].intValue,u=i.opt(n[d.FormaPageExportData.PROPERTY_PPI],(function(e){return e.doubleValue}));return new d.FormaPageExportData(a,(e=d.PageExportFormat.toCaseValue(c))||null!=e?e:d.PageExportFormat.PIXELS,u)}s.CoreAssert.fail("Expected an artwork dictionary.","Codecs","Codecs.swift",933)}return null}),t))}},keyFrameCodec:{get:function(){var e,t;return c.DBPropertyCodec.typeCodec("KeyFrame")||c.DBPropertyCodec.registerCodec("KeyFrame",c.DBPropertyCodec.codec((function(e,t,o){var n,a=c.DBProperty.deleted(e);if(n=i.as(t,u.KeyFrame)){var l,d,h=i.dict(["start-time",r.theoTimeCodec.encode(e.append("start-time"),n.time,o),"timing-function",c.DBProperty.stringProperty(e.append("timing-function"),n.timingFunction),"placement",r.matrix2DCodec.encode(e.append("placement"),n.placement,o)]);(l=n.bounds)&&(h.bounds=r.theoRectCodec.encode(e.append("bounds"),l,o)),(d=n.style)&&(h.style=p.FormaStyle.codec.encode(e.append("style"),d,o)),a=c.DBProperty.dictEncoded(e,i.clone(h),"KeyFrame")}else(h=i.as(t,["Dictionary","String",c.DBProperty]))?a=c.DBProperty.dictEncoded(e,i.clone(h),"KeyFrame"):s.CoreAssert.fail("Expected KeyFrame: "+t,"Codecs","Codecs.swift",965);return a}),(function(o,n){if(null!=o){var a;if(a=i.opt(o,(function(e){return e.dictionaryValue}))){for(var c=i.iter(a);!c.done;c.next()){var l=c.key;c.value.reroot(o.namePath.append(l))}var d,h=r.theoTimeCodec.decode(a["start-time"],n),P=(e=M.TimingFunctionType.toCaseValue((t=i.opt(a["timing-function"],(function(e){return e.stringValue})))||null!=t?t:""))||null!=e?e:M.TimingFunctionType.EaseInOut,_=r.matrix2DCodec.decode(a.placement,n),C=i.as(p.FormaStyle.codec.decode(a.style,n),p.FormaStyle),T=null;return(d=a.bounds)&&(T=i.as(r.theoRectCodec.decode(d,n),N.TheoRect)),new u.KeyFrame(h,P,_,T,C)}s.CoreAssert.fail("Expected a KeyFrame dictionary.","Codecs","Codecs.swift",986)}return null}),"KeyFrame"))}},imageAdjustmentsCodec:{get:function(){var e,t,o,r,n,a,u,l,d,p,h,P,_="ImageAdjustments";return c.DBPropertyCodec.typeCodec(_)||c.DBPropertyCodec.registerCodec(_,c.DBPropertyCodec.codec((function(e,t,o){var r,n=c.DBProperty.deleted(e);if(r=i.as(t,C.ImageAdjustments)){var a=i.dict(["blur",c.DBProperty.doubleProperty(e.append("blur"),r.blur),"sharpness",c.DBProperty.doubleProperty(e.append("sharpness"),r.sharpness),"shadows",c.DBProperty.doubleProperty(e.append("shadows"),r.shadows),"highlights",c.DBProperty.doubleProperty(e.append("highlights"),r.highlights),"saturation",c.DBProperty.doubleProperty(e.append("saturation"),r.saturation),"brightness",c.DBProperty.doubleProperty(e.append("brightness"),r.brightness),"exposure",c.DBProperty.doubleProperty(e.append("exposure"),r.exposure),"contrast",c.DBProperty.doubleProperty(e.append("contrast"),r.contrast),"warmth",c.DBProperty.doubleProperty(e.append("warmth"),r.warmth),"tint",c.DBProperty.doubleProperty(e.append("tint"),r.tint),"fade",c.DBProperty.doubleProperty(e.append("fade"),r.fade),"vibrance",c.DBProperty.doubleProperty(e.append("vibrance"),r.vibrance)]);n=c.DBProperty.dictEncoded(e,i.clone(a),_)}else s.CoreAssert.fail("Expected ImageAdjustments: "+t,"Codecs","Codecs.swift",1026);return n}),(function(c,_){if(null!=c){var T;if(T=i.opt(c,(function(e){return e.dictionaryValue})))return new C.ImageAdjustments((e=i.opt(T.blur,(function(e){return e.doubleValue})))||null!=e?e:0,(t=i.opt(T.sharpness,(function(e){return e.doubleValue})))||null!=t?t:0,(o=i.opt(T.shadows,(function(e){return e.doubleValue})))||null!=o?o:0,(r=i.opt(T.highlights,(function(e){return e.doubleValue})))||null!=r?r:0,(n=i.opt(T.saturation,(function(e){return e.doubleValue})))||null!=n?n:0,(a=i.opt(T.brightness,(function(e){return e.doubleValue})))||null!=a?a:0,(u=i.opt(T.exposure,(function(e){return e.doubleValue})))||null!=u?u:0,(l=i.opt(T.contrast,(function(e){return e.doubleValue})))||null!=l?l:0,(d=i.opt(T.warmth,(function(e){return e.doubleValue})))||null!=d?d:0,(p=i.opt(T.tint,(function(e){return e.doubleValue})))||null!=p?p:0,(h=i.opt(T.fade,(function(e){return e.doubleValue})))||null!=h?h:0,(P=i.opt(T.vibrance,(function(e){return e.doubleValue})))||null!=P?P:0);s.CoreAssert.fail("Expected a ImageAdjustments dictionary.","Codecs","Codecs.swift",1046)}return null}),_))}},textPathSegmentCodec:{get:function(){var e="TextPathSegment";return c.DBPropertyCodec.typeCodec(e)||c.DBPropertyCodec.registerCodec(e,c.DBPropertyCodec.codec((function(t,o,n){var a,u=c.DBProperty.deleted(t);if(a=i.as(o,A.TextPathSegment)){var l={p0:r.theoPointCodec.encode(t.append(A.TextPathSegment.PROPERTY_P0),a.p0,n),p1:r.theoPointCodec.encode(t.append(A.TextPathSegment.PROPERTY_P1),a.p1,n),p2:r.theoPointCodec.encode(t.append(A.TextPathSegment.PROPERTY_P2),a.p2,n),p3:r.theoPointCodec.encode(t.append(A.TextPathSegment.PROPERTY_P3),a.p3,n)};u=c.DBProperty.dictEncoded(t,i.clone(l),e)}else s.CoreAssert.fail("Expected TextPathSegment: "+o,"Codecs","Codecs.swift",1070);return u}),(function(e,t){if(null!=e){var o;if(o=i.opt(e,(function(e){return e.dictionaryValue}))){var n=r.theoPointCodec.decode(o[A.TextPathSegment.PROPERTY_P0],t),a=r.theoPointCodec.decode(o[A.TextPathSegment.PROPERTY_P1],t),c=r.theoPointCodec.decode(o[A.TextPathSegment.PROPERTY_P2],t),u=r.theoPointCodec.decode(o[A.TextPathSegment.PROPERTY_P3],t);return new A.TextPathSegment(n,a,c,u)}s.CoreAssert.fail("Expected path segment dictionary.","Codecs","Codecs.swift",1083)}return null}),e))}},textPathCodec:{get:function(){var e=this;return c.DBPropertyCodec.typeCodec("TextPath")||c.DBPropertyCodec.registerCodec("TextPath",c.DBPropertyCodec.codec((function(t,o,n){var a,u=c.DBProperty.deleted(t);if(a=i.as(o,A.TextPath)){var l=c.DBProperty.doubleProperty(t.append(A.TextPath.PROPERTY_FLEX),a.flex),d=i.toSequence(a.segments).map((function(e){return r.textPathSegmentCodec.encode(t.append(A.TextPath.PROPERTY_SEGMENTS).append(i.toString(e.offset)),e.element,n)}),e),p={flex:l,segment:c.DBProperty.arrayProperty(t.append(A.TextPath.PROPERTY_SEGMENTS),i.clone(d))};u=c.DBProperty.dictEncoded(t,i.clone(p),"TextPath")}else s.CoreAssert.fail("Expected TextPath: "+o,"Codecs","Codecs.swift",1102);return u}),(function(t,o){if(null!=t){var n;if(n=i.opt(t,(function(e){return e.dictionaryValue}))){var a=n[A.TextPath.PROPERTY_FLEX].doubleValue,c=i.clone(n[A.TextPath.PROPERTY_SEGMENTS].arrayValue).map((function(e){return r.textPathSegmentCodec.decode(e,o)}),e);return new A.TextPath(i.clone(c),a)}s.CoreAssert.fail("Expected text path dictionary.","Codecs","Codecs.swift",1115)}return null}),"TextPath"))}}}}),r)}}]);
//# sourceMappingURL=vendors_npm_spark_551397dd-bd5e0ecc.js.map
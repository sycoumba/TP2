(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[29],{"1bhb":function(t,e,n){var o,r=e,i=n("oAGj"),u=n("c9Jm"),s=n("SVjO"),a=n("iCxV"),c=n("K0Rh"),l=n("9YN4");r.ApplyTemplateTest=(o=function(){this.actionSequence_ApplyTemplate=[],this.testDoc_=null,this.rootForma_=null,u.ActionTestBase.call(this)},i.defineClass({name:"ApplyTemplateTest",ctor:o,superName:"ActionTestBase",props:{populateActionSequence:function(t,e,n){var o=this;return n.firstPage.root,XCTAssertNotNil(a.Host.actionTesting),a.Host.actionTesting.templateForDocument(n).then((function(e){var n;return(n=i.as(e,l.TheoDocument))?t.concat([function(){return s.ApplyTemplateAction.init_e1db(n,o.rootForma_,0,o.rootForma_)}]):(XCTFail("Could not get Design Template for ApplyTemplateTest"),[])}))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.rootForma_=i.as(n.firstPage.root,c.RootForma)},validateAfterActionSequence:function(t,e){},validateAfterUndo:function(t,e){},validateAfterRedo:function(t,e){}}}),o)},"2S5s":function(t,e,n){var o,r,i,u,s,a,c,l,p,f,h,T,_,A,m,g,d,k,C,y,S,F,x,L,v,D,I,N,w=e,q=n("oAGj"),X=n("Tq01"),E=n("4mEG"),P=n("c9Jm"),B=n("Aj/e"),b=n("yGNn"),R=n("ascj"),U=n("FNB+"),V=n("pnSN"),G=n("iCxV"),K=n("3lr5"),O=n("c+uM"),M=n("cRpU"),z=n("EoOi"),H=n("Vm85"),W=n("VJ9E"),j=n("8t9B"),J=n("oKlP"),Y=n("oKI3"),Z=n("uUew"),Q=n("h8Q5");w.SetTextTest=(o=function t(){this.actionSequence_SetText=[function(){return new E.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetTextTest",ctor:o,superName:"ActionTestBase",statics:{initialText_:"Some text",changedText_:"New text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var r=this;return b.CorePromise.resolve(t.concat([function(){return new M.SetTextAction(o.changedText_,r.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var r=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(q.opt(q.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(r,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),o.changedText_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,r=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(q.opt(q.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(r,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),o.changedText_)}}}),o),w.SetFontTest=(r=function t(){this.actionSequence_SetFont=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetFontTest",ctor:r,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(t){var e=W.TheoFont.init_9e5c(G.Host.fontProvider.getIncludedFonts(K.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldFont_=q.opt(q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetFontAction(r.getTheoFont(r.testFont_))}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),r.testText_),XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),r.testFont_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.oldFont_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),r.testText_),XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),r.testFont_)}}}),r),w.ChangeTextAlignmentTest=(i=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeTextAlignmentTest",ctor:i,superName:"ActionTestBase",statics:{testText_:"Some text to align"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldLayout_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=o.oldLayout_==O.LockupLayout.Standard?O.LockupLayout.FitJustified:O.LockupLayout.Standard,o.oldAlignment_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newLayout_==O.LockupLayout.FitJustified?o.newAlignment_=O.LockupAlignment.UNSET:o.newAlignment_=o.oldAlignment_==O.LockupAlignment.Right?O.LockupAlignment.Left:O.LockupAlignment.Right,q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),i.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),i.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)}}}),i),w.AutoTextLayoutFromStandardTest=(u=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new E.AddTextContentAction(t.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,this.oldLayoutVariation_=null,this.newLayoutVariation_=null,P.ActionTestBase.call(this)},q.defineClass({name:"AutoTextLayoutFromStandardTest",ctor:u,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){o.oldLayout_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=O.LockupLayout.Auto,o.oldAlignment_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newAlignment_=O.LockupAlignment.Auto,o.oldLayoutVariation_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation=z.TypographyVariation.FitEmphasized})),o.newLayoutVariation_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation}));var t=new Z.TextRange(11,17);return q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(e){return e.applyCharStyleDirectly(t,t,j.CharStyleApplyMode.Toggle)})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),u.layoutText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),this.newLayoutVariation_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),this.oldLayoutVariation_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),u.layoutText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),this.newLayoutVariation_)}}}),u),w.AutoTextLayoutShuffleTest=(s=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new E.AddTextContentAction(t.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,this.oldLayoutVariation_=null,this.newLayoutVariation_=null,this.oldTextLook_=null,this.newTextLook_=null,P.ActionTestBase.call(this)},q.defineClass({name:"AutoTextLayoutShuffleTest",ctor:s,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){o.oldLayout_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=O.LockupLayout.Auto,o.oldAlignment_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newAlignment_=O.LockupAlignment.Auto,o.oldLayoutVariation_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation=z.TypographyVariation.ScaledLeft}));var t=new Z.TextRange(11,17);return q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(e){return e.applyCharStyleDirectly(t,t,j.CharStyleApplyMode.Toggle)})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){return q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation=z.TypographyVariation.FitEmphasized})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){return q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation=z.TypographyVariation.Stagger})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){return q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation=z.TypographyVariation.TripletEmphasizedRotated})),o.newLayoutVariation_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),s.layoutText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),this.newLayoutVariation_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),s.layoutText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layoutVariation})),this.newLayoutVariation_)}}}),s),w.ChangeTextLineSpacingTest=(a=function t(){this.actionSequence_ChangeTextLineSpacing=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeTextLineSpacingTest",ctor:a,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldSpacing_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newSpacing_=2*o.oldSpacing_,q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextLineSpacingAction(o.newSpacing_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),a.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.oldSpacing_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),a.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)}}}),a),w.ChangeTextAttributesTest=(c=function t(){this.actionSequence_ChangeTextAttributes=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeTextAttributesTest",ctor:c,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldSpacing_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newSpacing_=2*o.oldSpacing_,o.oldLayout_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=o.oldLayout_==O.LockupLayout.Standard?O.LockupLayout.FitJustified:O.LockupLayout.Standard,o.oldAlignment_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newLayout_==O.LockupLayout.FitJustified?o.newAlignment_=O.LockupAlignment.UNSET:o.newAlignment_=o.oldAlignment_==O.LockupAlignment.Right?O.LockupAlignment.Left:O.LockupAlignment.Right,q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.ChangeTextAttributesAction(o.newLayout_,o.newAlignment_,o.newSpacing_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),c.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.oldSpacing_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),c.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)}}}),c),w.MatchSizeTest=(l=function t(){this.actionSequence_SetSize=[function(){return new E.AddTextContentAction(t.testText_)}],this.actionSequence_MatchSize=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.snapValues_=null,this.oldSize_=null,this.newSize_=null,P.ActionTestBase.call(this)},q.defineClass({name:"MatchSizeTest",ctor:l,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){var t;return(t=q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController))&&(o.snapValues_=q.clone(t.getFontSizeSnapValues()),o.oldSize_=t.getSizeSliderValue()),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.MatchSizeAction("actionSequence_SetSize"==e?o.snapValues_[0]:NaN,q.clone(o.snapValues_),J.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),this.newSize_=q.opt(q.as(this.lastActionResult,X.DoubleActionResult),(function(t){return t.value})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_),XCTAssertNotNil(this.newSize_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),l.testText_),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.newSize_,.03)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.oldSize_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),l.testText_),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.newSize_,.03)}}}),l),w.SetLineBreakTest=(p=function t(){this.actionSequence_SetLineBreak=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLineBreak_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetLineBreakTest",ctor:p,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldLineBreak_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetLineBreakAction(!o.oldLineBreak_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),p.testText_),XCTAssertNotEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),p.testText_),XCTAssertNotEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)}}}),p),w.SetNextSpacingSequenceTest=(f=function t(){this.actionSequence_SetNextSpacingSequence=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetNextSpacingSequenceTest",ctor:f,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetNextSpacingSequenceAction(H.SpacingSequence.NextLetterTracking)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),f.testText_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),f.testText_)}}}),f),w.SetTrackingTest=(h=function t(){this.actionSequence_SetTracking=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTracking_=null,this.newTracking_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetTrackingTest",ctor:h,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldTracking_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),o.newTracking_=2*o.oldTracking_,q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetTrackingAction(o.newTracking_,J.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),h.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.newTracking_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.oldTracking_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),h.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.newTracking_)}}}),h),w.SetLeadingTest=(T=function t(){this.actionSequence_SetLeading=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLeading_=null,this.newLeading_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetLeadingTest",ctor:T,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldLeading_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newLeading_=.5*o.oldLeading_,q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetLeadingAction(o.newLeading_,J.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),T.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newLeading_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertTrue(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing}))==this.oldLeading_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),T.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newLeading_)}}}),T),w.SetPaddingTest=(_=function t(){this.actionSequence_SetPadding=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldPadding_=null,this.newPadding_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetPaddingTest",ctor:_,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return new B.ChangeBackgroundShapeAction([o.textForma],O.LockupBacking.Box,"square_001",!1)},function(){return o.oldPadding_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),o.newPadding_=Math.min(2*o.oldPadding_,1),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetPaddingAction(o.newPadding_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),_.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.newPadding_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.oldPadding_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),_.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.newPadding_)}}}),_),w.SetTextLookTest=(A=function t(){this.actionSequence_SetTextLook=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTextLook_=null,this.newTextLook_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetTextLookTest",ctor:A,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o,r=this;return b.CorePromise.resolve(t.concat([function(){return r.oldTextLook_=q.opt(q.opt(q.as(q.opt(r.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),r.newTextLook_=(o=O.LockupTextLook.toCaseValue(r.oldTextLook_+1))||null!=o?o:O.LockupTextLook.KnockoutAndShadow,q.opt(q.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma)})),new M.SetTextLookAction(r.newTextLook_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),A.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.newTextLook_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.oldTextLook_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),A.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.newTextLook_)}}}),A),w.SetTextEffectsAttributesTest=(m=function t(){this.actionSequence_SetTextEffectsAttributes=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldStrokeWeight_=null,this.oldShadowOffset_=null,this.oldShadowAngle_=null,this.newStrokeWeight_=null,this.newShadowOffset_=null,this.newShadowAngle_=null,P.ActionTestBase.call(this)},q.defineClass({name:"SetTextEffectsAttributesTest",ctor:m,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return o.oldStrokeWeight_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),o.oldShadowOffset_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),o.oldShadowAngle_=q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new M.SetTextLookAction(O.LockupTextLook.ShadowAndOutline)},function(){return o.newStrokeWeight_=Math.min(2*o.oldStrokeWeight_,1),o.newShadowOffset_=Math.min(4*o.oldShadowOffset_,1),o.newShadowAngle_=o.oldShadowAngle_>315?o.oldShadowAngle_-315:o.oldShadowAngle_+45,new M.SetTextEffectsAttributesAction(o.newStrokeWeight_,o.newShadowOffset_,o.newShadowAngle_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),m.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.newShadowAngle_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.oldStrokeWeight_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.oldShadowOffset_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.oldShadowAngle_)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),m.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.newShadowAngle_)}}}),m),w.ApplyTextStyleSuggestionTest=(g=function t(){this.actionSequence_ApplyTextStyleSuggestion=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,this.firstAppliedFont_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ApplyTextStyleSuggestionTest",ctor:g,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(t){var e=W.TheoFont.init_9e5c(G.Host.fontProvider.getIncludedFonts(K.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){o.oldFont_=q.opt(q.opt(q.opt(q.as(q.opt(o.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)}));var t=R.ColorTable.init_25f6([{key:R.ColorRole.FieldPrimary,value:"themeColor0"},{key:R.ColorRole.FieldSecondary,value:"themeColor1"}]),e=O.LockupStyle.init_2885(1,1,t,g.getTheoFont(g.testFont_),O.LockupStyle.DEFAULT_SPACING,O.LockupStyle.DEFAULT_TRACKING,O.LockupStyle.DEFAULT_PADDING,O.LockupBacking.BannerVertical,null,135,O.LockupLayout.FitJustified,O.LockupAlignment.UNSET,z.TypographyVariation.Unset,O.OpacityRule.Full,O.LockupTextLook.Shadow,O.LockupStyle.DEFAULT_SHADOWOFFSET,O.LockupStyle.DEFAULT_STROKEWEIGHT,void 0,void 0,!1);return new M.ApplyTextStyleSuggestionAction(e,o.textForma,new Q.WheelSuggestionEvaluator(o.textForma),!1)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.as(this.lastActionResult,X.LockupStyleActionResult);this.firstAppliedFont_=q.opt(q.opt(q.opt(o,(function(t){return t.style})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName}));var r=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(q.opt(q.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(r,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),g.testText_),q.opt(o,(function(t){return null!=t.style}))&&XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(r,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.firstAppliedFont_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.oldFont_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),g.testText_),null!=this.firstAppliedFont_&&XCTAssertEqual(q.opt(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.firstAppliedFont_)}}}),g),w.ApplyNextTextEmphasisSuggestionTest=(d=function t(){this.actionSequence_ApplyNextTextEmphasisSuggestion=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ApplyNextTextEmphasisSuggestionTest",ctor:d,superName:"ActionTestBase",statics:{testText_:"Even after the glitter fades the feeling remains",testFont_:"Bellfort",getTheoFont:function(t){var e=W.TheoFont.init_9e5c(G.Host.fontProvider.getIncludedFonts(K.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){q.opt(q.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)}));var t=new Q.WheelSuggestionEvaluator(o.textForma);return t.postTextStylesServiceInterface.resetEmphasisSuggestions(!1),new M.ApplyNextTextEmphasisSuggestionAction(o.textForma,t)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),d.testText_);var r=o.controller;XCTAssertTrue(r.charStyleRanges.length>0)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})));var o=this.textForma.controller;XCTAssertTrue(0==o.charStyleRanges.length)},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),d.testText_);var r=o.controller;XCTAssertTrue(r.charStyleRanges.length>0)}}}),d),w.ChangeBackgroundShapeTest=(k=function t(){this.actionSequence_ChangeBackgroundShape=[function(){return new E.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldBacking_=O.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=O.LockupBacking.None,this.newBackingArtworkID_="",P.ActionTestBase.call(this)},q.defineClass({name:"ChangeBackgroundShapeTest",ctor:k,superName:"ActionTestBase",statics:{testText_:"The quick brown fox"},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o,r,i,u,s=this;return b.CorePromise.resolve(t.concat([function(){return s.oldBacking_=(o=q.opt(q.opt(q.as(q.opt(s.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=o?o:O.LockupBacking.None,s.oldBackingArtworkID_=(r=q.opt(q.opt(q.as(q.opt(s.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=r?r:"",s.oldBacking_=(i=q.opt(q.opt(q.as(q.opt(s.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=i?i:O.LockupBacking.None,s.oldBackingArtworkID_=(u=q.opt(q.opt(q.as(q.opt(s.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=u?u:"",s.newBacking_=O.LockupBacking.SVGBackground,s.newBackingArtworkID_="button",q.opt(q.opt(s.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(s.textForma)})),new B.ChangeBackgroundShapeAction([s.textForma],s.newBacking_,s.newBackingArtworkID_,!1)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),k.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})),this.newBacking_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})),this.newBackingArtworkID_)},validateAfterUndo:function(t,e){var n,o,r=this,i=(n=q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=n?n:O.LockupBacking.None;XCTAssertEqual(i,this.oldBacking_);var u=(o=q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=o?o:"";XCTAssertEqual(i,this.oldBacking_),XCTAssertEqual(u,this.oldBackingArtworkID_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(r.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),k.testText_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})),this.newBacking_),XCTAssertEqual(q.opt(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})),this.newBackingArtworkID_)}}}),k),w.ChangeBackgroundShapeCharStyleTest=(C=function t(){this.actionSequence_ChangeBackgroundShapeCharStyle=[function(){return new E.AddTextContentAction(t.testRangeText_)}],this.testDoc_=null,this.testPage_=null,this.rootForma_=null,this.testFormaID_=null,this.oldBacking_=O.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=O.LockupBacking.None,this.newBackingArtworkID_="",this.originalDocumentHasCharStyleAppliedToText_=!1,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeBackgroundShapeCharStyleTest",ctor:C,superName:"ActionTestBase",statics:{testRangeText_:"The quick brown fox jumps over the lazy dog."},props:{textForma:{get:function(){return q.first(q.opt(q.as(this.getActionResult(0),X.FormaActionResult),(function(t){return t.formae})))}},hasTextWithCharStyle:function(){var t=!1;return q.opt(this.rootForma_,(function(e){return e.visitAll(U.FormaTraversal.PreOrder,(function(e){var n,o;(n=q.as(e,V.GroupForma))&&q.as(n.controller,j.TypeLockupController)&&(o=q.opt(q.opt(q.as(n.controller,j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]})))&&o.description.length>0&&(t=!0)}))})),t},matchingLockupStyles:function(t){var e=0;return q.opt(this.rootForma_,(function(n){return n.visitAll(U.FormaTraversal.PreOrder,(function(n){var o,r;(o=q.as(n,V.GroupForma))&&q.as(o.controller,j.TypeLockupController)&&(r=q.opt(q.opt(q.as(o.controller,j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]})))&&r.description==t.description&&(e+=1)}))})),e},populateActionSequence:function(t,e,n){var o,r,i,u=this;return b.CorePromise.resolve(t.concat([function(){u.oldBacking_=(o=q.opt(q.opt(q.as(q.opt(u.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=o?o:O.LockupBacking.None,u.oldBackingArtworkID_=(r=q.opt(q.opt(q.as(q.opt(u.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=r?r:"",u.newBacking_=O.LockupBacking.SVGBackground,u.newBackingArtworkID_="button",q.opt(q.opt(u.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(u.textForma)}));var t=q.opt(q.opt(q.as(q.opt(u.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==t||u.originalDocumentHasCharStyleAppliedToText_&&u.matchingLockupStyles(t)>1);var e=q.clone(q.opt(q.as(q.opt(u.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.charStyleRanges})));return XCTAssertTrue(!(i=0==e.length)&&null==i||i),new M.EnterCharStyleModeAction(u.textForma)},function(){return new B.ChangeBackgroundShapeAction([u.textForma],u.newBacking_,u.newBackingArtworkID_,!0)},function(){return new M.ExitCharStyleModeAction(u.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage,this.rootForma_=n.firstPage.root,this.originalDocumentHasCharStyleAppliedToText_=this.hasTextWithCharStyle()},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=q.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),C.testRangeText_);var r=q.opt(o,(function(t){return t.controller})),i=q.opt(r.lockupStyle,(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var u=q.clone(r.charStyleRanges);XCTAssertFalse(0==u.length),XCTAssertTrue(u.length<C.testRangeText_.length);var s=r.getCharacterStyle(j.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)},validateAfterUndo:function(t,e){var n,o,r,i=this,u=(n=q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=n?n:O.LockupBacking.None;XCTAssertEqual(u,this.oldBacking_);var s=(o=q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=o?o:"",a=q.opt(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==a||this.originalDocumentHasCharStyleAppliedToText_&&this.matchingLockupStyles(a)>0);var c=q.clone(q.opt(q.as(q.opt(this.textForma,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.charStyleRanges})));XCTAssertTrue(!(r=0==c.length)&&null==r||r),XCTAssertEqual(u,this.oldBacking_),XCTAssertEqual(s,this.oldBackingArtworkID_),XCTAssertNil(q.opt(this.testPage_,(function(t){return t.formaByID(i.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=q.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(q.opt(q.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),j.TypeLockupController.KIND),XCTAssertEqual(q.opt(q.as(q.opt(o,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.text})),C.testRangeText_);var r=q.opt(o,(function(t){return t.controller})),i=q.opt(r.lockupStyle,(function(t){return t.characterStyles[j.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var u=q.clone(r.charStyleRanges);XCTAssertFalse(0==u.length),XCTAssertTrue(u.length<C.testRangeText_.length);var s=r.getCharacterStyle(j.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)}}}),C),w.SetFontSizeTest=(y=function(){this.actionSequence_SetFontSize=[],P.ActionTestBase.call(this)},q.defineClass({name:"SetFontSizeTest",ctor:y,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=q.first(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))}))),!!(o=this.lockupForma_)&&(this.tlc_=q.as(o.controller,j.TypeLockupController),!0)},prepareDocument:function(t,e){var n,o=[];if(n=this.lockupForma_){var r=H.TextFacade.getLayoutForForma(n),i=H.TextFacade.getAlignmentForForma(n),u=O.LockupLayout.Standard,s=i==O.LockupAlignment.Right?O.LockupAlignment.Left:O.LockupAlignment.Right;t.controller.selection.replaceSelection(n),o.push((function(){return new M.ChangeTextLayoutAndAlignmentAction(u,s)})),o.push((function(){return new M.ChangeTextLayoutAndAlignmentAction(r,i)}))}return b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;this.initialSize_=this.tlc_.getCurrentFontSize();var r=H.TextFacade.toUserFontSize(this.initialSize_,this.lockupForma_.page);return this.finalSize_=r<75?100:50,b.CorePromise.resolve([function(){return new M.SetFontSizeAction(o.finalSize_,void 0,[o.lockupForma_])}])},validateAfterActionSequence:function(t,e){var n=H.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(n,this.finalSize_,.01)},validateAfterUndo:function(t,e){XCTAssertEqual(this.tlc_.getCurrentFontSize(),this.initialSize_)},validateAfterRedo:function(t,e){var n=H.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(n,this.finalSize_,.01)}}}),y),w.ChangeTextLayoutToPathTest=(S=function(){this.actionSequence_ChangeTextLayoutToPath=[],P.ActionTestBase.call(this)},q.defineClass({name:"ChangeTextLayoutToPathTest",ctor:S,superName:"ActionTestBase",props:{textLen:{get:function(){return q.opt(this.lockupForma_,(function(t){return t.controller})).text.length}},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),!!(o=this.lockupForma_)&&(this.initialLayout_=H.TextFacade.getLayoutForForma(o),this.initialAlignment_=H.TextFacade.getAlignmentForForma(o),!0)},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.Path,O.LockupAlignment.UNSET,void 0,Y.TextPathID.Circle)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),O.LockupLayout.Path),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),O.LockupAlignment.UNSET)},validateAfterUndo:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterRedo:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),O.LockupLayout.Path),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),O.LockupAlignment.UNSET)}}}),S),w.EditCurvedTextShortTest=(F=function(){this.actionSequence_EditCurvedTextShort=[],P.ActionTestBase.call(this)},q.defineClass({name:"EditCurvedTextShortTest",ctor:F,superName:"ActionTestBase",statics:{testText_:"A"},props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.Path,O.LockupAlignment.UNSET,void 0,Y.TextPathID.Circle)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new M.SetTextAction(F.testText_,o.lockupForma_)}]))}}}),F),w.EditCurvedTextLongTest=(x=function(){this.actionSequence_EditCurvedTextLong=[],P.ActionTestBase.call(this)},q.defineClass({name:"EditCurvedTextLongTest",ctor:x,superName:"ActionTestBase",statics:{testText_:"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness."},props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.Path,O.LockupAlignment.UNSET,void 0,Y.TextPathID.Circle)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve(t.concat([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new M.SetTextAction(x.testText_,o.lockupForma_)}]))}}}),x),w.ChangeCurvedTextTrackingTest=(L=function(){this.actionSequence_ChangeCurvedTextTracking=[],this.initialTracking_=0,this.finalTracking_=0,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeCurvedTextTrackingTest",ctor:L,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.Path,O.LockupAlignment.UNSET,void 0,Y.TextPathID.Circle)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialTracking_=H.TextFacade.getTrackingForForma(o.lockupForma_),o.finalTracking_=2*o.initialTracking_+.35,new M.SetTrackingAction(o.finalTracking_,new J.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),L),w.ChangeTextLayoutToLetterGridTest=(v=function(){this.actionSequence_ChangeTextLayoutToLetterGrid=[],P.ActionTestBase.call(this)},q.defineClass({name:"ChangeTextLayoutToLetterGridTest",ctor:v,superName:"ActionTestBase",props:{textLen:{get:function(){return q.opt(this.lockupForma_,(function(t){return t.controller})).text.length}},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),!!(o=this.lockupForma_)&&(this.initialLayout_=H.TextFacade.getLayoutForForma(o),this.initialAlignment_=H.TextFacade.getAlignmentForForma(o),!0)},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.LetterGrid,O.LockupAlignment.SKIP)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),O.LockupLayout.LetterGrid),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterUndo:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterRedo:function(t,e){XCTAssertEqual(H.TextFacade.getLayoutForForma(this.lockupForma_),O.LockupLayout.LetterGrid),XCTAssertEqual(H.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)}}}),v),w.ChangeLetterGridShapeTest=(D=function(){this.actionSequence_ChangeLetterGridShape=[],this.initialBacking_=null,this.initialArtworkId_=null,this.finalBacking_=null,this.finalArtworkId_=null,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeLetterGridShapeTest",ctor:D,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.LetterGrid,O.LockupAlignment.SKIP)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialBacking_=o.lockupForma_.style.backing,o.initialArtworkId_=o.lockupForma_.style.backingArtworkID,o.finalBacking_=O.LockupBacking.SVGBackground,o.finalArtworkId_="circle_001"==o.initialArtworkId_?"square_001":"circle_001",new B.ChangeBackgroundShapeAction([o.lockupForma_],o.finalBacking_,o.finalArtworkId_,!1)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)},validateAfterUndo:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.initialBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.initialArtworkId_)},validateAfterRedo:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)}}}),D),w.ChangeLetterGridTrackingTest=(I=function(){this.actionSequence_ChangeLetterGridTracking=[],this.initialTracking_=0,this.finalTracking_=0,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeLetterGridTrackingTest",ctor:I,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.LetterGrid,O.LockupAlignment.SKIP)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialTracking_=H.TextFacade.getTrackingForForma(o.lockupForma_),o.finalTracking_=2*o.initialTracking_+.35,new M.SetTrackingAction(o.finalTracking_,new J.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(t,e){XCTAssertEqual(H.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),I),w.ChangeLetterGridSpacingTest=(N=function(){this.actionSequence_ChangeLetterGridSpacing=[],this.initialLineSpacing_=0,this.finalLineSpacing_=0,P.ActionTestBase.call(this)},q.defineClass({name:"ChangeLetterGridSpacingTest",ctor:N,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(q.clone(this.allSelectableFormae(n,(function(t){return q.opt(t.controller,(function(t){return t.kind==j.TypeLockupController.KIND}))})))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return H.TextFacade.getLayoutForForma(this.lockupForma_)!=O.LockupLayout.Path&&o.push((function(){return q.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new M.ChangeTextLayoutAndAlignmentAction(O.LockupLayout.LetterGrid,O.LockupAlignment.SKIP)})),b.CorePromise.resolve(q.clone(o))},populateActionSequence:function(t,e,n){var o=this;return b.CorePromise.resolve([function(){return q.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialLineSpacing_=H.TextFacade.getLineSpacingForForma(o.lockupForma_),o.finalLineSpacing_=2*o.initialLineSpacing_+.35,new M.SetLeadingAction(o.finalLineSpacing_,new J.TheoPoint(.5,.5))}])},hasMultipleLines:function(){var t;return((t=q.opt(q.as(q.opt(this.lockupForma_,(function(t){return t.controller})),j.TypeLockupController),(function(t){return t.numLines()})))||null!=t?t:1)>1},validateAfterActionSequence:function(t,e){this.hasMultipleLines()&&XCTAssertEqual(H.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)},validateAfterUndo:function(t,e){XCTAssertEqual(H.TextFacade.getLineSpacingForForma(this.lockupForma_),this.initialLineSpacing_)},validateAfterRedo:function(t,e){this.hasMultipleLines()&&XCTAssertEqual(H.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)}}}),N)},KyAS:function(t,e,n){var o,r,i=e,u=n("oAGj"),s=n("c9Jm"),a=n("9tXS");i.EnableWatermarkTest=(o=function(){this.actionSequence_TurnOnWatermark=[function(){return new a.SetWatermarkAction(!0)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},u.defineClass({name:"EnableWatermarkTest",ctor:o,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){this.testDoc_=n,this.wasEnabled_=n.watermarkEnabled},validateAfterActionSequence:function(t,e){XCTAssertNotNil(this.testDoc_),XCTAssertTrue(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled)}}}),o),i.DisableWatermarkTest=(r=function(){this.actionSequence_TurnOffWatermark=[function(){return new a.SetWatermarkAction(!1)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},u.defineClass({name:"DisableWatermarkTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){this.testDoc_=n,this.wasEnabled_=n.watermarkEnabled},validateAfterActionSequence:function(t,e){XCTAssertNotNil(this.testDoc_),XCTAssertFalse(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(t,e){XCTAssertFalse(this.testDoc_.watermarkEnabled)}}}),r)},"W5+J":function(t,e,n){var o,r=e,i=n("oAGj"),u=n("c9Jm"),s=n("yGNn"),a=n("FNB+"),c=n("9Lk3"),l=n("fdtz"),p=n("nELi");r.ScaleTest=(o=function(){this.actionSequence_Scale=[],this.formaeToScale_=[],this.formaeToTest_=[],this.initialTransforms_=[],u.ActionTestBase.call(this)},i.defineClass({name:"ScaleTest",ctor:o,superName:"ActionTestBase",statics:{scale_:2},props:{populateActionSequence:function(t,e,n){var r,u=this;this.formaeToScale_=i.clone(this.allSelectableFormae(n,(function(t){return!(t.controller instanceof c.GridController)&&!(!(r=i.opt(t.controller,(function(t){return t.scalable})))&&null==r)&&r}))),XCTAssertFalse(0==this.formaeToScale_.length);for(var f=i.iter(this.formaeToScale_);!f.done;f.next()){var h=f.value,T=i.clone(h.filterByKind(l.ImageForma.KIND,a.FormaTraversal.JustChildren));T.length>0&&!T[0].controller.floating?this.formaeToTest_=this.formaeToTest_.concat(T):this.formaeToTest_.push(h)}return this.initialTransforms_=this.formaeToTest_.map((function(t){return t.totalPlacement}),this),s.CorePromise.resolve([function(){return new p.ScaleAction(o.scale_,i.clone(u.formaeToScale_),!1)}])},validateAfterActionSequence:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var r=n.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(o.scale_,o.scale_).extractedScale.scale)}},validateAfterUndo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToTest_[o].totalPlacement.extractedScale.scale,this.initialTransforms_[o].extractedScale.scale)}},validateAfterRedo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var r=n.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(o.scale_,o.scale_).extractedScale.scale)}},tearDown:function(){this.formaeToScale_=[],u.ActionTestBase.prototype.tearDown.call(this)}}}),o)},oAGj:function(t,e,n){var o,r,i,u;try{u=n("C42b")}catch(t){console.log("Could not find CoreRandom. Will fall back to Math.Random for xplr.shuffleInPlace")}function s(t){var e=t.sprintf,n={info:function(t){console.log("CORE INFO: "+t)},warning:function(t){console.log("CORE WARNING: "+t)},error:function(t,e){console.log("CORE ERROR: "+t,e)}};function o(t){return t?function(e,n){return t(e,n)?-1:1}:function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t<e?-1:1}}Array.prototype.includes||(Array.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.includes||(String.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),o=n.length>>>0,r=arguments[1],i=0;i<o;i++)if(e=n[i],t.call(r,e,i,n))return e});var r=function(t){this.range=t,this.count=Math.ceil((t.end-t.begin)/t.increment),t.closed&&(t.end-t.begin)%t.increment==0&&(this.count+=1),this.setIndex(0)};r.prototype.next=function(){this.setIndex(this.index+1)},r.prototype.setIndex=function(t){this.index=t,this.done=this.index>=this.count;var e=this.range.isReversed?this.count-1-this.index:this.index;this.value=this.range.begin+e*this.range.increment};var i=function(t,e,n,o,r){this.begin=t,this.end=e,this.closed=n,this.increment=o||1,this.isReversed=!0===r};i.prototype.asArray=function(){for(var t=[],e=new r(this);!e.done;)t.push(e.value),e.next();return t},i.prototype.applyToArray=function(t){return 1!==this.increment||this.isReversed?this.asArray().filter((function(e){return e>=0&&e<t.length})).map((function(e){return t[e]})):t.slice(this.begin,this.end+(this.closed?1:0))},i.prototype.reversed=function(){return new i(this.begin,this.end,this.closed,this.increment,!this.isReversed)};var s=function(t){this._array=t,this._index=0,this._count=t.length,this.done=0===t.length,this.value=!this.done&&t[0]};s.prototype.next=function(){this._index++,this.done=this._index>=this._count,this.value=!this.done&&this._array[this._index]};var a=function(t,e){if(this._array=[],e)for(var n in t)this._array.push({key:parseInt(n),value:t[n]});else for(var n in t)this._array.push({key:n,value:t[n]});this._index=0,this.done=0===this._array.length,this.key=!this.done&&this._array[0].key,this.value=!this.done&&this._array[0].value};a.prototype.next=function(){this._index++,this.done=this._index>=this._array.length,this.key=!this.done&&this._array[this._index].key,this.value=!this.done&&this._array[this._index].value};class c{constructor(t,e){for(var n in this._name=t,this._def=e,this._rdef={},e){var o=e[n];this[n]=o,this._rdef[o]=n}}toCaseValue(t){return void 0!==this._rdef[t]?t:null}isCaseValue(t){return void 0!==this._rdef[t]}}function l(t){var e=t.length,n=[];n.length=e;for(var o=e;o--;)n[o]={offset:o,element:t[o]};return n}var p="undefined"!=typeof performance?performance.now.bind(performance):Date.now.bind(Date);return{classes:{},protocols:{},enums:{},classDependencies:{},cloneReporter:null,M_PI:Math.PI,M_E:Math.E,opt:function(t,e){return null!=t?e(t):null},defineClass:function(t){var e=this;return this.requireClass(t.name,t.superName,(function(o){function r(t,e,n,o){for(var r in t){var i={enumerable:!0},u=t[r];"object"==typeof u&&u&&(u.get||u.set)?(u.get&&(n[r]=i.get=u.get),u.set&&(o[r]=i.set=u.set)):(i.value=u,i.writable=!0),e[r]=i}return e}var i={_getters:{value:{},enumerable:!0},_setters:{value:{},enumerable:!0},_staticGetters:{value:{},enumerable:!0},_staticSetters:{value:{},enumerable:!0}};r(t.statics,i,i._staticGetters.value,i._staticSetters.value);var u=r(t.props,{},i._getters.value,i._setters.value);t.superName||(u.setValue={value:function(t,e){this[e]=t},enumerable:!0}),function(t,e,o){for(var r in t){"function"==typeof t[r]&&"init_"==r.substr(0,5)&&(e[r]={enumerable:!0,value:function(t,e){return function(){var o=new t;return o[e]?o[e].apply(o,arguments):n.error("uh oh, no matching init function ("+e+")"),o}}(o,r)})}}(t.props,i,t.ctor),Object.defineProperties(t.ctor,i),t.ctor.prototype=Object.create(o?o.prototype:Object.prototype,u),t.ctor.prototype.constructor=t.ctor,o&&(e.inheritGetterSetters(t.ctor,o),e.inheritStatics(t.ctor,o)),e.registerClass(t.name,t.ctor)})),t.ctor},inheritGetterSetters:function(t,e){var n={};if(e._getters)for(var o in t._getters||(t._getters={}),t._setters||(t._setters={}),e._getters){var r=e._getters[o],i=e._setters&&e._setters[o];(r&&!t._getters[o]||i&&!t._setters[o])&&(n[o]={enumerable:!0},r&&(n[o].get=t._getters[o]=t._getters[o]||r),i&&(n[o].set=t._setters[o]=t._setters[o]||i))}Object.defineProperties(t.prototype,n)},inheritStatics:function(t,e){var o=t._inherited={};for(var r in e)if(!t.hasOwnProperty(r))try{if(e._inherited&&e._inherited[r])o[r]=e._inherited[r];else if(e._staticGetters&&e._staticGetters[r]){if(o[r]={enumerable:!0},e._staticGetters&&e._staticGetters[r]){var i=e._staticGetters[r];o[r].get=function(){return i()}}if(e._staticSetters&&e._staticSetters[r]){var u=e._staticSetters[r];o[r].set=function(t){u(t)}}}else"function"==typeof e[r]?o[r]={enumerable:!0,value:e[r]}:o[r]={enumerable:!0,get:function(){return e[r]},set:function(t){e[r]=t}}}catch(t){n.error("inheritStatics",t)}Object.defineProperties(t,o)},defineProtocol:function(t,e){return this.protocols[t]=e,e._isProtocol=t,e},defineEnum:function(t,e){var n=new c(t,e);return this.enums[t]=n,n},defctor:function(t){},super_init:function(t,e,n){e.call(t);for(var o=[],r=3;r<arguments.length;r++)o.push(arguments[r]);n.apply(t,o)},is:function(t,e){var o=typeof e;if("string"===o)switch(e){case"Array":return Array.isArray(t);case"Dictionary":return"object"==typeof t;case"Double":case"Int":return"number"==typeof t;case"String":return"string"==typeof t;case"Bool":return"boolean"==typeof t;case"Function":return"function"==typeof t;case"Any":return void 0!==t;case"Object":return"object"==typeof t;case"AnyObject":return null!=t;default:return n.error("why checking type "+e),!1}if(Array.isArray(e)){if("Array"===e[0])return t&&Array.isArray(t)&&(0==t.length||this.is(t[0],e[1]));if("Dictionary"===e[0]&&t&&"object"==typeof t){for(var r in t)return this.is(r,e[1])&&this.is(t[r],e[2]);return!0}return!1}return"object"===o&&e._isProtocol?t&&t.constructor&&t.constructor._implements&&t.constructor._implements(e._isProtocol):e instanceof c?e.isCaseValue(t):t instanceof e},as:function(t,e){return this.is(t,e)?t:null},nilc:function(t,e){return void 0!==t&&null!=t?t:"function"==typeof e?e():e},requireClass:function(t,e,n){if(e)if(this.classes[e])n(this.classes[e]);else{var o=this.classDependencies[e];o?o.push(n):this.classDependencies[e]=[n]}else n(null)},registerClass:function(t,e){this.classes[t]=e;var n=this.classDependencies[t];if(n)for(;n.length>0;)n.shift()(e)},assert:function(t){},iter:function(t,e){return t instanceof i?new r(t):Array.isArray(t)?new s(t):new a(t,e)},stride:function(t,e,n){return new i(t,e,!1,n,!1)},each:function(t,e){if("object"==typeof t)for(var n in t)e(n,t[n])},count:function(t){if(Array.isArray(t))return t.length;if("object"==typeof t){var e=0;for(var n in t)e++;return e}return-1},dict:function(t){for(var e={},n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e},toDouble:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseFloat(t);return isNaN(e)?null:e}return 0},toString:function(t){if(arguments.length>1&&"string"==typeof t)try{return e.apply(e,arguments)}catch(t){n.error("string format error "+t)}return t+""},toInt:function(t){if("number"==typeof t)return t<0?-Math.floor(-t):Math.floor(t);if("string"==typeof t){var e=parseInt(t);return isNaN(e)?null:e}return 0},modulo:function(t,e){return t-Math.floor(t/e)*e},toUInt32:function(t){return this.modulo(this.toInt(t),Math.pow(2,32))},isInfinite:function(t){return!isNaN(t)&&!isFinite(t)},randu:function(t){return Math.floor(Math.random()*t)},keys:function(t,e){var n=Object.keys(t||{});if("numeric"===e)for(var o=n.length;o--;)n[o]=parseFloat(n[o]);return n},values:function(t){return Object.values(t||{})},eachValue:function(t,e){for(var n in t)e(t[n])},indexForKey:function(t,e){var n=0;for(var o in t){if(o===e)return n;n++}return null},removeKey:function(t,e){var n=t[e];return delete t[e],void 0===n?null:n},gvar:function(t,e,n){var o,r={};r[e]={enumerable:!0,get:function(){return void 0===o&&(o=n()),o},set:function(t){o=t}},Object.defineProperties(t,r)},chars:function(t){var e=t.length,n=[];n.length=e;for(var o=0;o<e;o++)n[o]=t[o];return n},range:function(t,e,n){return new i(t,e,n)},rand:function(){return 2147483647*Math.random()},isEmpty:function(t){return"string"!=typeof t||0===t.length},eq:function(t,e,n){return null==e||null==n?e==n:t(e,n)},clone:function(t,e){var n,o,r=this.cloneReporter;return r&&(r.before(t,e),n=p()),null==t?o=null:Array.isArray(t)?(o=t.slice()).isValueType=t.isValueType:"function"==typeof t.clone?o=t.clone():"object"==typeof t&&(o=Object.assign({},t)),r&&r.after(t,e,p()-n),o},repeat:function(t,e){var n,o=[];for(n=0;n<e;n++)Array.isArray(t)&&t.isValueType?o.push(this.clone(t)):Array.isArray(t)&&0==t.length?o.push([]):o.push(t);return o.isValueType=!0,o},toArray:function(t){if(Array.isArray(t)){var e=t.concat();return e.isValueType=!0,e}if(t instanceof i)return t.asArray();var n=[t];return n.isValueType=!0,n},indexOf:function(t,e){var n=t.indexOf(e);return n<0?null:n},containsEq:function(t,e,n){return null!=this.indexOfEq(t,e,n)},indexOfEq:function(t,e,n){for(var o=0;o<t.length;o++)if(n(t[o],e))return o;return null},toSequence:l,toCharSequence:l,enumerate:function(t){var e={};return t.forEach((function(t,n){e[n]=t})),e},append:function(t,e){e.forEach((function(e){t.push(e)}))},remove:function(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)},removeAll:function(t){for(prop in t)delete t[prop]},sort:function(t,e){return t.concat().sort(o(e))},sortInPlace:function(t,e){return t.sort(o(e))},first:function(t){return t.length>0?t[0]:null},last:function(t){return t.length>0?t[t.length-1]:null},min:function(t){var e=Math.min.apply(null,t);return isFinite(e)?e:null},max:function(t){var e=Math.max.apply(null,t);return isFinite(e)?e:null},slicerange:function(t,e){return e.applyToArray(t)},dropFirst:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(e)},dropLast:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(0,t.length-e)},rangeOfString:function(t,e){var n=t.indexOf(e);return n<0?null:new i(n,n+e.length,!1)},shuffleInPlace:function(t){for(var e,n,o=0;o<t.length-1;o+=1)e=u?u.CoreRandom.nextIntUniform(t.length-o)+o:Math.floor(Math.random()*(t.length-o))+o,n=t[o],t[o]=t[e],t[e]=n;return t},elementsEqual:function(t,e){if(null===t)throw new Error("Source array cannot be null.");return null!==e&&t.length===e.length&&t.every((t,n)=>t===e[n])},shuffle:function(t){return this.shuffleInPlace(t.concat())},reverse:function(t){return t.concat().reverse()},joinArrays:function(t,e){return 0===t.length?[]:t.reduce((function(t,n){return t?t.concat(e).concat(n):n}))},setLog:function(t){n=t},info:function(t){n.info(t)},warning:function(t){n.warn(t)},error:function(t,e){n.error(t,e)},replaceAll:function(t,e,n){return t.split(e).join(n)},bind:function(t,e){return t[e].bind(t)},zip:function(t,e){var n,o=[],r=Math.min(t.length,e.length);for(n=0;n<r;n++)o.push([t[n],e[n]]);return o}}}e.nodeName,r=[n("l77X")],void 0===(i="function"==typeof(o=s)?o.apply(e,r):o)||(t.exports=i)},sRQj:function(t,e,n){var o,r,i,u,s,a=e,c=n("oAGj"),l=n("iCxV");a.MockAuthoringContextManager=(o=function(t){this.mockAuthoringContexts=c.clone(t)},c.defineClass({name:"MockAuthoringContextManager",ctor:o,statics:{_implements:function(t){return"IAuthoringContextManager"==t}},props:{authoringContexts:{get:function(){return this.mockAuthoringContexts}},authoringContext:function(t){var e=c.clone(this.mockAuthoringContexts.filter((function(e){return e.id==t}),this));return 0==e.length?null:e[0]},getOwnedAuthoringContextIDs:function(){return this.mockAuthoringContexts.filter((function(t){return t.ownedByCurrentUser}),this).map((function(t){return t.id}),this)},createAuthoringContext:function(t,e){return e&&0!=this.mockAuthoringContexts.length?null:a.MockAuthoringContext.init_44fd(t,"id-"+t,[],[],[])}}}),o),a.MockAuthoringContext=(r=function(){this._id="",this._name="",this._isDefault=!1,this._activated=!1,this._isMinimal=!1,this._isValidVersion=!0},c.defineClass({name:"MockAuthoringContext",ctor:r,statics:{_implements:function(t){return"IAuthoringContext"==t}},props:{init_d41d:function(){this._activated=!1,this._colors=[],this._fonts=[],this._logos=[],this._ownedByCurrentUser=!0},init_44fd:function(t,e,n,o,r,i){void 0===i&&(i=!0),this._name=t,this._id=e,this._colors=c.clone(n),this._fonts=c.clone(o),this._logos=c.clone(r),this._ownedByCurrentUser=i,this._activated=r.length>0},id:{get:function(){return this._id}},contextID:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(t){this._name=t}},activated:{get:function(){return this._activated},set:function(t){this._activated=t}},isDefault:{get:function(){return this._isDefault},set:function(t){this._isDefault=t}},isMinimal:{get:function(){return this._isMinimal}},isValidVersion:{get:function(){return this._isValidVersion}},ownedByCurrentUser:{get:function(){return this._ownedByCurrentUser},set:function(t){this._ownedByCurrentUser=t}},colors:{get:function(){return this._colors}},fonts:{get:function(){return this._fonts}},logos:{get:function(){return this._logos},set:function(t){this._logos=c.clone(t)}},isBrandkitComplete:function(){return 1!=l.Host.brandkitManager.shouldForceIncompleteBrand&&this.colors.length>0&&this.fonts.length>0&&this.logos.length>0}}}),r),a.MockAuthoringContextColor=(i=function(t,e,n,o,r,i){this._id="",this._r=0,this._g=0,this._b=0,this._a=0,this._id=t,this._roles=c.clone(e),this._r=n,this._g=o,this._b=r,this._a=i},c.defineClass({name:"MockAuthoringContextColor",ctor:i,statics:{_implements:function(t){return"IAuthoringContextColor"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},red:{get:function(){return this._r}},green:{get:function(){return this._g}},blue:{get:function(){return this._b}},alpha:{get:function(){return this._a}}}}),i),a.MockAuthoringContextFont=(u=function(t,e,n){this._id="UNKNOWN",this._roles=[],this._source="",this._id=t,this._roles.push(e),this._desc=n,this._source="mock-font"},c.defineClass({name:"MockAuthoringContextFont",ctor:u,statics:{_implements:function(t){return"IAuthoringContextFont"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},sourceType:{get:function(){return this._source},set:function(t){this._source=t}},descriptor:{get:function(){return this._desc}}}}),u),a.MockAuthoringContextLogo=(s=function(t,e,n,o,r){this._id="",this._url="",this._roles=[],this._width=0,this._height=0,this._id=t,this._url=e,this._roles.push(n),this._width=o,this._height=r},c.defineClass({name:"MockAuthoringContextLogo",ctor:s,statics:{_implements:function(t){return"IAuthoringContextLogo"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},acName:{get:function(){return"Mock logo"}},url:{get:function(){return this._url}},pixelWidth:{get:function(){return this._width}},pixelHeight:{get:function(){return this._height}},mimeType:{get:function(){return"image/png"}}}}),s)}}]);
//# sourceMappingURL=vendors_npm_spark_c7496c44-f78afc4d.js.map